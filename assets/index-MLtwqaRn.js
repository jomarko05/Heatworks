var ik=Object.defineProperty;var t6=i=>{throw TypeError(i)};var rk=(i,e,t)=>e in i?ik(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Ne=(i,e,t)=>rk(i,typeof e!="symbol"?e+"":e,t),T_=(i,e,t)=>e.has(i)||t6("Cannot "+t);var d=(i,e,t)=>(T_(i,e,"read from private field"),t?t.call(i):e.get(i)),F=(i,e,t)=>e.has(i)?t6("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),T=(i,e,t,n)=>(T_(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),R=(i,e,t)=>(T_(i,e,"access private method"),t);var Mi=(i,e,t,n)=>({set _(r){T(i,e,r,t)},get _(){return d(i,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var n6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function v0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var I8={exports:{}},Xy={},D8={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _0=Symbol.for("react.element"),sk=Symbol.for("react.portal"),ok=Symbol.for("react.fragment"),ak=Symbol.for("react.strict_mode"),lk=Symbol.for("react.profiler"),ck=Symbol.for("react.provider"),uk=Symbol.for("react.context"),hk=Symbol.for("react.forward_ref"),dk=Symbol.for("react.suspense"),fk=Symbol.for("react.memo"),pk=Symbol.for("react.lazy"),i6=Symbol.iterator;function gk(i){return i===null||typeof i!="object"?null:(i=i6&&i[i6]||i["@@iterator"],typeof i=="function"?i:null)}var O8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z8=Object.assign,j8={};function cf(i,e,t){this.props=i,this.context=e,this.refs=j8,this.updater=t||O8}cf.prototype.isReactComponent={};cf.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};cf.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function H8(){}H8.prototype=cf.prototype;function YS(i,e,t){this.props=i,this.context=e,this.refs=j8,this.updater=t||O8}var KS=YS.prototype=new H8;KS.constructor=YS;z8(KS,cf.prototype);KS.isPureReactComponent=!0;var r6=Array.isArray,G8=Object.prototype.hasOwnProperty,qS={current:null},B8={key:!0,ref:!0,__self:!0,__source:!0};function U8(i,e,t){var n,r={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)G8.call(e,n)&&!B8.hasOwnProperty(n)&&(r[n]=e[n]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var u=Array(a),h=0;h<a;h++)u[h]=arguments[h+2];r.children=u}if(i&&i.defaultProps)for(n in a=i.defaultProps,a)r[n]===void 0&&(r[n]=a[n]);return{$$typeof:_0,type:i,key:s,ref:o,props:r,_owner:qS.current}}function mk(i,e){return{$$typeof:_0,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function QS(i){return typeof i=="object"&&i!==null&&i.$$typeof===_0}function yk(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var s6=/\/+/g;function M_(i,e){return typeof i=="object"&&i!==null&&i.key!=null?yk(""+i.key):e.toString(36)}function s1(i,e,t,n,r){var s=typeof i;(s==="undefined"||s==="boolean")&&(i=null);var o=!1;if(i===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(i.$$typeof){case _0:case sk:o=!0}}if(o)return o=i,r=r(o),i=n===""?"."+M_(o,0):n,r6(r)?(t="",i!=null&&(t=i.replace(s6,"$&/")+"/"),s1(r,e,t,"",function(h){return h})):r!=null&&(QS(r)&&(r=mk(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(s6,"$&/")+"/")+i)),e.push(r)),1;if(o=0,n=n===""?".":n+":",r6(i))for(var a=0;a<i.length;a++){s=i[a];var u=n+M_(s,a);o+=s1(s,e,t,u,r)}else if(u=gk(i),typeof u=="function")for(i=u.call(i),a=0;!(s=i.next()).done;)s=s.value,u=n+M_(s,a++),o+=s1(s,e,t,u,r);else if(s==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tm(i,e,t){if(i==null)return i;var n=[],r=0;return s1(i,n,"","",function(s){return e.call(t,s,r++)}),n}function vk(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var ji={current:null},o1={transition:null},_k={ReactCurrentDispatcher:ji,ReactCurrentBatchConfig:o1,ReactCurrentOwner:qS};function V8(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:Tm,forEach:function(i,e,t){Tm(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return Tm(i,function(){e++}),e},toArray:function(i){return Tm(i,function(e){return e})||[]},only:function(i){if(!QS(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};tt.Component=cf;tt.Fragment=ok;tt.Profiler=lk;tt.PureComponent=YS;tt.StrictMode=ak;tt.Suspense=dk;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_k;tt.act=V8;tt.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var n=z8({},i.props),r=i.key,s=i.ref,o=i._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=qS.current),e.key!==void 0&&(r=""+e.key),i.type&&i.type.defaultProps)var a=i.type.defaultProps;for(u in e)G8.call(e,u)&&!B8.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=t;else if(1<u){a=Array(u);for(var h=0;h<u;h++)a[h]=arguments[h+2];n.children=a}return{$$typeof:_0,type:i.type,key:r,ref:s,props:n,_owner:o}};tt.createContext=function(i){return i={$$typeof:uk,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:ck,_context:i},i.Consumer=i};tt.createElement=U8;tt.createFactory=function(i){var e=U8.bind(null,i);return e.type=i,e};tt.createRef=function(){return{current:null}};tt.forwardRef=function(i){return{$$typeof:hk,render:i}};tt.isValidElement=QS;tt.lazy=function(i){return{$$typeof:pk,_payload:{_status:-1,_result:i},_init:vk}};tt.memo=function(i,e){return{$$typeof:fk,type:i,compare:e===void 0?null:e}};tt.startTransition=function(i){var e=o1.transition;o1.transition={};try{i()}finally{o1.transition=e}};tt.unstable_act=V8;tt.useCallback=function(i,e){return ji.current.useCallback(i,e)};tt.useContext=function(i){return ji.current.useContext(i)};tt.useDebugValue=function(){};tt.useDeferredValue=function(i){return ji.current.useDeferredValue(i)};tt.useEffect=function(i,e){return ji.current.useEffect(i,e)};tt.useId=function(){return ji.current.useId()};tt.useImperativeHandle=function(i,e,t){return ji.current.useImperativeHandle(i,e,t)};tt.useInsertionEffect=function(i,e){return ji.current.useInsertionEffect(i,e)};tt.useLayoutEffect=function(i,e){return ji.current.useLayoutEffect(i,e)};tt.useMemo=function(i,e){return ji.current.useMemo(i,e)};tt.useReducer=function(i,e,t){return ji.current.useReducer(i,e,t)};tt.useRef=function(i){return ji.current.useRef(i)};tt.useState=function(i){return ji.current.useState(i)};tt.useSyncExternalStore=function(i,e,t){return ji.current.useSyncExternalStore(i,e,t)};tt.useTransition=function(){return ji.current.useTransition()};tt.version="18.3.1";D8.exports=tt;var J=D8.exports;const un=v0(J);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xk=J,Sk=Symbol.for("react.element"),wk=Symbol.for("react.fragment"),bk=Object.prototype.hasOwnProperty,Ek=xk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ak={key:!0,ref:!0,__self:!0,__source:!0};function W8(i,e,t){var n,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)bk.call(e,n)&&!Ak.hasOwnProperty(n)&&(r[n]=e[n]);if(i&&i.defaultProps)for(n in e=i.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Sk,type:i,key:s,ref:o,props:r,_owner:Ek.current}}Xy.Fragment=wk;Xy.jsx=W8;Xy.jsxs=W8;I8.exports=Xy;var N=I8.exports,E3={},X8={exports:{}},kr={},$8={exports:{}},Y8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(G,ie){var ee=G.length;G.push(ie);e:for(;0<ee;){var re=ee-1>>>1,ae=G[re];if(0<r(ae,ie))G[re]=ie,G[ee]=ae,ee=re;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var ie=G[0],ee=G.pop();if(ee!==ie){G[0]=ee;e:for(var re=0,ae=G.length,ge=ae>>>1;re<ge;){var qe=2*(re+1)-1,et=G[qe],Te=qe+1,H=G[Te];if(0>r(et,ee))Te<ae&&0>r(H,et)?(G[re]=H,G[Te]=ee,re=Te):(G[re]=et,G[qe]=ee,re=qe);else if(Te<ae&&0>r(H,ee))G[re]=H,G[Te]=ee,re=Te;else break e}}return ie}function r(G,ie){var ee=G.sortIndex-ie.sortIndex;return ee!==0?ee:G.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var u=[],h=[],f=1,m=null,g=3,v=!1,y=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(G){for(var ie=t(h);ie!==null;){if(ie.callback===null)n(h);else if(ie.startTime<=G)n(h),ie.sortIndex=ie.expirationTime,e(u,ie);else break;ie=t(h)}}function A(G){if(S=!1,x(G),!y)if(t(u)!==null)y=!0,ne(k);else{var ie=t(h);ie!==null&&Z(A,ie.startTime-G)}}function k(G,ie){y=!1,S&&(S=!1,b(M),M=-1),v=!0;var ee=g;try{for(x(ie),m=t(u);m!==null&&(!(m.expirationTime>ie)||G&&!j());){var re=m.callback;if(typeof re=="function"){m.callback=null,g=m.priorityLevel;var ae=re(m.expirationTime<=ie);ie=i.unstable_now(),typeof ae=="function"?m.callback=ae:m===t(u)&&n(u),x(ie)}else n(u);m=t(u)}if(m!==null)var ge=!0;else{var qe=t(h);qe!==null&&Z(A,qe.startTime-ie),ge=!1}return ge}finally{m=null,g=ee,v=!1}}var L=!1,I=null,M=-1,z=5,D=-1;function j(){return!(i.unstable_now()-D<z)}function U(){if(I!==null){var G=i.unstable_now();D=G;var ie=!0;try{ie=I(!0,G)}finally{ie?W():(L=!1,I=null)}}else L=!1}var W;if(typeof E=="function")W=function(){E(U)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,K=Y.port2;Y.port1.onmessage=U,W=function(){K.postMessage(null)}}else W=function(){C(U,0)};function ne(G){I=G,L||(L=!0,W())}function Z(G,ie){M=C(function(){G(i.unstable_now())},ie)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_continueExecution=function(){y||v||(y=!0,ne(k))},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return g},i.unstable_getFirstCallbackNode=function(){return t(u)},i.unstable_next=function(G){switch(g){case 1:case 2:case 3:var ie=3;break;default:ie=g}var ee=g;g=ie;try{return G()}finally{g=ee}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(G,ie){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ee=g;g=G;try{return ie()}finally{g=ee}},i.unstable_scheduleCallback=function(G,ie,ee){var re=i.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?re+ee:re):ee=re,G){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=ee+ae,G={id:f++,callback:ie,priorityLevel:G,startTime:ee,expirationTime:ae,sortIndex:-1},ee>re?(G.sortIndex=ee,e(h,G),t(u)===null&&G===t(h)&&(S?(b(M),M=-1):S=!0,Z(A,ee-re))):(G.sortIndex=ae,e(u,G),y||v||(y=!0,ne(k))),G},i.unstable_shouldYield=j,i.unstable_wrapCallback=function(G){var ie=g;return function(){var ee=g;g=ie;try{return G.apply(this,arguments)}finally{g=ee}}}})(Y8);$8.exports=Y8;var Sp=$8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ck=J,Pr=Sp;function se(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K8=new Set,Fp={};function ju(i,e){qd(i,e),qd(i+"Capture",e)}function qd(i,e){for(Fp[i]=e,i=0;i<e.length;i++)K8.add(e[i])}var ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),A3=Object.prototype.hasOwnProperty,Pk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,o6={},a6={};function kk(i){return A3.call(a6,i)?!0:A3.call(o6,i)?!1:Pk.test(i)?a6[i]=!0:(o6[i]=!0,!1)}function Tk(i,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function Mk(i,e,t,n){if(e===null||typeof e>"u"||Tk(i,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Hi(i,e,t,n,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ai={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){ai[i]=new Hi(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];ai[e]=new Hi(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){ai[i]=new Hi(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){ai[i]=new Hi(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){ai[i]=new Hi(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){ai[i]=new Hi(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){ai[i]=new Hi(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){ai[i]=new Hi(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){ai[i]=new Hi(i,5,!1,i.toLowerCase(),null,!1,!1)});var JS=/[\-:]([a-z])/g;function ZS(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(JS,ZS);ai[e]=new Hi(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(JS,ZS);ai[e]=new Hi(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(JS,ZS);ai[e]=new Hi(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){ai[i]=new Hi(i,1,!1,i.toLowerCase(),null,!1,!1)});ai.xlinkHref=new Hi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){ai[i]=new Hi(i,1,!1,i.toLowerCase(),null,!0,!0)});function e4(i,e,t,n){var r=ai.hasOwnProperty(e)?ai[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Mk(e,t,r,n)&&(t=null),n||r===null?kk(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):r.mustUseProperty?i[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,n=r.attributeNamespace,t===null?i.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,n?i.setAttributeNS(n,e,t):i.setAttribute(e,t))))}var Ta=Ck.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mm=Symbol.for("react.element"),Th=Symbol.for("react.portal"),Mh=Symbol.for("react.fragment"),t4=Symbol.for("react.strict_mode"),C3=Symbol.for("react.profiler"),q8=Symbol.for("react.provider"),Q8=Symbol.for("react.context"),n4=Symbol.for("react.forward_ref"),P3=Symbol.for("react.suspense"),k3=Symbol.for("react.suspense_list"),i4=Symbol.for("react.memo"),Qa=Symbol.for("react.lazy"),J8=Symbol.for("react.offscreen"),l6=Symbol.iterator;function zf(i){return i===null||typeof i!="object"?null:(i=l6&&i[l6]||i["@@iterator"],typeof i=="function"?i:null)}var rn=Object.assign,R_;function Jf(i){if(R_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);R_=e&&e[1]||""}return`
`+R_+i}var L_=!1;function N_(i,e){if(!i||L_)return"";L_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var n=h}Reflect.construct(i,[],e)}else{try{e.call()}catch(h){n=h}i.call(e.prototype)}else{try{throw Error()}catch(h){n=h}i()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var r=h.stack.split(`
`),s=n.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var u=`
`+r[o].replace(" at new "," at ");return i.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",i.displayName)),u}while(1<=o&&0<=a);break}}}finally{L_=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?Jf(i):""}function Rk(i){switch(i.tag){case 5:return Jf(i.type);case 16:return Jf("Lazy");case 13:return Jf("Suspense");case 19:return Jf("SuspenseList");case 0:case 2:case 15:return i=N_(i.type,!1),i;case 11:return i=N_(i.type.render,!1),i;case 1:return i=N_(i.type,!0),i;default:return""}}function T3(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Mh:return"Fragment";case Th:return"Portal";case C3:return"Profiler";case t4:return"StrictMode";case P3:return"Suspense";case k3:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Q8:return(i.displayName||"Context")+".Consumer";case q8:return(i._context.displayName||"Context")+".Provider";case n4:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case i4:return e=i.displayName||null,e!==null?e:T3(i.type)||"Memo";case Qa:e=i._payload,i=i._init;try{return T3(i(e))}catch{}}return null}function Lk(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return T3(e);case 8:return e===t4?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jl(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Z8(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Nk(i){var e=Z8(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),n=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Rm(i){i._valueTracker||(i._valueTracker=Nk(i))}function eE(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return i&&(n=Z8(i)?i.checked?"true":"false":i.value),i=n,i!==t?(e.setValue(i),!0):!1}function K1(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function M3(i,e){var t=e.checked;return rn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??i._wrapperState.initialChecked})}function c6(i,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=jl(e.value!=null?e.value:t),i._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tE(i,e){e=e.checked,e!=null&&e4(i,"checked",e,!1)}function R3(i,e){tE(i,e);var t=jl(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(n==="submit"||n==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?L3(i,e.type,t):e.hasOwnProperty("defaultValue")&&L3(i,e.type,jl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function u6(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function L3(i,e,t){(e!=="number"||K1(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var Zf=Array.isArray;function Bh(i,e,t,n){if(i=i.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<i.length;t++)r=e.hasOwnProperty("$"+i[t].value),i[t].selected!==r&&(i[t].selected=r),r&&n&&(i[t].defaultSelected=!0)}else{for(t=""+jl(t),e=null,r=0;r<i.length;r++){if(i[r].value===t){i[r].selected=!0,n&&(i[r].defaultSelected=!0);return}e!==null||i[r].disabled||(e=i[r])}e!==null&&(e.selected=!0)}}function N3(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return rn({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function h6(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(se(92));if(Zf(t)){if(1<t.length)throw Error(se(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:jl(t)}}function nE(i,e){var t=jl(e.value),n=jl(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),n!=null&&(i.defaultValue=""+n)}function d6(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function iE(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function F3(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?iE(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Lm,rE=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return i(e,t,n,r)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(Lm=Lm||document.createElement("div"),Lm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lm.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function Ip(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var wp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fk=["Webkit","ms","Moz","O"];Object.keys(wp).forEach(function(i){Fk.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),wp[e]=wp[i]})});function sE(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||wp.hasOwnProperty(i)&&wp[i]?(""+e).trim():e+"px"}function oE(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,r=sE(t,e[t],n);t==="float"&&(t="cssFloat"),n?i.setProperty(t,r):i[t]=r}}var Ik=rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function I3(i,e){if(e){if(Ik[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function D3(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var O3=null;function r4(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var z3=null,Uh=null,Vh=null;function f6(i){if(i=w0(i)){if(typeof z3!="function")throw Error(se(280));var e=i.stateNode;e&&(e=Qy(e),z3(i.stateNode,i.type,e))}}function aE(i){Uh?Vh?Vh.push(i):Vh=[i]:Uh=i}function lE(){if(Uh){var i=Uh,e=Vh;if(Vh=Uh=null,f6(i),e)for(i=0;i<e.length;i++)f6(e[i])}}function cE(i,e){return i(e)}function uE(){}var F_=!1;function hE(i,e,t){if(F_)return i(e,t);F_=!0;try{return cE(i,e,t)}finally{F_=!1,(Uh!==null||Vh!==null)&&(uE(),lE())}}function Dp(i,e){var t=i.stateNode;if(t===null)return null;var n=Qy(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(se(231,e,typeof t));return t}var j3=!1;if(ba)try{var jf={};Object.defineProperty(jf,"passive",{get:function(){j3=!0}}),window.addEventListener("test",jf,jf),window.removeEventListener("test",jf,jf)}catch{j3=!1}function Dk(i,e,t,n,r,s,o,a,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(t,h)}catch(f){this.onError(f)}}var bp=!1,q1=null,Q1=!1,H3=null,Ok={onError:function(i){bp=!0,q1=i}};function zk(i,e,t,n,r,s,o,a,u){bp=!1,q1=null,Dk.apply(Ok,arguments)}function jk(i,e,t,n,r,s,o,a,u){if(zk.apply(this,arguments),bp){if(bp){var h=q1;bp=!1,q1=null}else throw Error(se(198));Q1||(Q1=!0,H3=h)}}function Hu(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function dE(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function p6(i){if(Hu(i)!==i)throw Error(se(188))}function Hk(i){var e=i.alternate;if(!e){if(e=Hu(i),e===null)throw Error(se(188));return e!==i?null:i}for(var t=i,n=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){t=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return p6(r),i;if(s===n)return p6(r),e;s=s.sibling}throw Error(se(188))}if(t.return!==n.return)t=r,n=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,n=s;break}if(a===n){o=!0,n=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,n=r;break}if(a===n){o=!0,n=s,t=r;break}a=a.sibling}if(!o)throw Error(se(189))}}if(t.alternate!==n)throw Error(se(190))}if(t.tag!==3)throw Error(se(188));return t.stateNode.current===t?i:e}function fE(i){return i=Hk(i),i!==null?pE(i):null}function pE(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=pE(i);if(e!==null)return e;i=i.sibling}return null}var gE=Pr.unstable_scheduleCallback,g6=Pr.unstable_cancelCallback,Gk=Pr.unstable_shouldYield,Bk=Pr.unstable_requestPaint,mn=Pr.unstable_now,Uk=Pr.unstable_getCurrentPriorityLevel,s4=Pr.unstable_ImmediatePriority,mE=Pr.unstable_UserBlockingPriority,J1=Pr.unstable_NormalPriority,Vk=Pr.unstable_LowPriority,yE=Pr.unstable_IdlePriority,$y=null,wo=null;function Wk(i){if(wo&&typeof wo.onCommitFiberRoot=="function")try{wo.onCommitFiberRoot($y,i,void 0,(i.current.flags&128)===128)}catch{}}var Fs=Math.clz32?Math.clz32:Yk,Xk=Math.log,$k=Math.LN2;function Yk(i){return i>>>=0,i===0?32:31-(Xk(i)/$k|0)|0}var Nm=64,Fm=4194304;function ep(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Z1(i,e){var t=i.pendingLanes;if(t===0)return 0;var n=0,r=i.suspendedLanes,s=i.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?n=ep(a):(s&=o,s!==0&&(n=ep(s)))}else o=t&~r,o!==0?n=ep(o):s!==0&&(n=ep(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(n&4&&(n|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=n;0<e;)t=31-Fs(e),r=1<<t,n|=i[t],e&=~r;return n}function Kk(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qk(i,e){for(var t=i.suspendedLanes,n=i.pingedLanes,r=i.expirationTimes,s=i.pendingLanes;0<s;){var o=31-Fs(s),a=1<<o,u=r[o];u===-1?(!(a&t)||a&n)&&(r[o]=Kk(a,e)):u<=e&&(i.expiredLanes|=a),s&=~a}}function G3(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function vE(){var i=Nm;return Nm<<=1,!(Nm&4194240)&&(Nm=64),i}function I_(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function x0(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-Fs(e),i[e]=t}function Qk(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var n=i.eventTimes;for(i=i.expirationTimes;0<t;){var r=31-Fs(t),s=1<<r;e[r]=0,n[r]=-1,i[r]=-1,t&=~s}}function o4(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var n=31-Fs(t),r=1<<n;r&e|i[n]&e&&(i[n]|=e),t&=~r}}var Ct=0;function _E(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var xE,a4,SE,wE,bE,B3=!1,Im=[],Rl=null,Ll=null,Nl=null,Op=new Map,zp=new Map,Za=[],Jk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function m6(i,e){switch(i){case"focusin":case"focusout":Rl=null;break;case"dragenter":case"dragleave":Ll=null;break;case"mouseover":case"mouseout":Nl=null;break;case"pointerover":case"pointerout":Op.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zp.delete(e.pointerId)}}function Hf(i,e,t,n,r,s){return i===null||i.nativeEvent!==s?(i={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[r]},e!==null&&(e=w0(e),e!==null&&a4(e)),i):(i.eventSystemFlags|=n,e=i.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),i)}function Zk(i,e,t,n,r){switch(e){case"focusin":return Rl=Hf(Rl,i,e,t,n,r),!0;case"dragenter":return Ll=Hf(Ll,i,e,t,n,r),!0;case"mouseover":return Nl=Hf(Nl,i,e,t,n,r),!0;case"pointerover":var s=r.pointerId;return Op.set(s,Hf(Op.get(s)||null,i,e,t,n,r)),!0;case"gotpointercapture":return s=r.pointerId,zp.set(s,Hf(zp.get(s)||null,i,e,t,n,r)),!0}return!1}function EE(i){var e=Pc(i.target);if(e!==null){var t=Hu(e);if(t!==null){if(e=t.tag,e===13){if(e=dE(t),e!==null){i.blockedOn=e,bE(i.priority,function(){SE(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function a1(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=U3(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var n=new t.constructor(t.type,t);O3=n,t.target.dispatchEvent(n),O3=null}else return e=w0(t),e!==null&&a4(e),i.blockedOn=t,!1;e.shift()}return!0}function y6(i,e,t){a1(i)&&t.delete(e)}function eT(){B3=!1,Rl!==null&&a1(Rl)&&(Rl=null),Ll!==null&&a1(Ll)&&(Ll=null),Nl!==null&&a1(Nl)&&(Nl=null),Op.forEach(y6),zp.forEach(y6)}function Gf(i,e){i.blockedOn===e&&(i.blockedOn=null,B3||(B3=!0,Pr.unstable_scheduleCallback(Pr.unstable_NormalPriority,eT)))}function jp(i){function e(r){return Gf(r,i)}if(0<Im.length){Gf(Im[0],i);for(var t=1;t<Im.length;t++){var n=Im[t];n.blockedOn===i&&(n.blockedOn=null)}}for(Rl!==null&&Gf(Rl,i),Ll!==null&&Gf(Ll,i),Nl!==null&&Gf(Nl,i),Op.forEach(e),zp.forEach(e),t=0;t<Za.length;t++)n=Za[t],n.blockedOn===i&&(n.blockedOn=null);for(;0<Za.length&&(t=Za[0],t.blockedOn===null);)EE(t),t.blockedOn===null&&Za.shift()}var Wh=Ta.ReactCurrentBatchConfig,ey=!0;function tT(i,e,t,n){var r=Ct,s=Wh.transition;Wh.transition=null;try{Ct=1,l4(i,e,t,n)}finally{Ct=r,Wh.transition=s}}function nT(i,e,t,n){var r=Ct,s=Wh.transition;Wh.transition=null;try{Ct=4,l4(i,e,t,n)}finally{Ct=r,Wh.transition=s}}function l4(i,e,t,n){if(ey){var r=U3(i,e,t,n);if(r===null)W_(i,e,n,ty,t),m6(i,n);else if(Zk(r,i,e,t,n))n.stopPropagation();else if(m6(i,n),e&4&&-1<Jk.indexOf(i)){for(;r!==null;){var s=w0(r);if(s!==null&&xE(s),s=U3(i,e,t,n),s===null&&W_(i,e,n,ty,t),s===r)break;r=s}r!==null&&n.stopPropagation()}else W_(i,e,n,null,t)}}var ty=null;function U3(i,e,t,n){if(ty=null,i=r4(n),i=Pc(i),i!==null)if(e=Hu(i),e===null)i=null;else if(t=e.tag,t===13){if(i=dE(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return ty=i,null}function AE(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uk()){case s4:return 1;case mE:return 4;case J1:case Vk:return 16;case yE:return 536870912;default:return 16}default:return 16}}var Tl=null,c4=null,l1=null;function CE(){if(l1)return l1;var i,e=c4,t=e.length,n,r="value"in Tl?Tl.value:Tl.textContent,s=r.length;for(i=0;i<t&&e[i]===r[i];i++);var o=t-i;for(n=1;n<=o&&e[t-n]===r[s-n];n++);return l1=r.slice(i,1<n?1-n:void 0)}function c1(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function Dm(){return!0}function v6(){return!1}function Tr(i){function e(t,n,r,s,o){this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in i)i.hasOwnProperty(a)&&(t=i[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Dm:v6,this.isPropagationStopped=v6,this}return rn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Dm)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Dm)},persist:function(){},isPersistent:Dm}),e}var uf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},u4=Tr(uf),S0=rn({},uf,{view:0,detail:0}),iT=Tr(S0),D_,O_,Bf,Yy=rn({},S0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:h4,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Bf&&(Bf&&i.type==="mousemove"?(D_=i.screenX-Bf.screenX,O_=i.screenY-Bf.screenY):O_=D_=0,Bf=i),D_)},movementY:function(i){return"movementY"in i?i.movementY:O_}}),_6=Tr(Yy),rT=rn({},Yy,{dataTransfer:0}),sT=Tr(rT),oT=rn({},S0,{relatedTarget:0}),z_=Tr(oT),aT=rn({},uf,{animationName:0,elapsedTime:0,pseudoElement:0}),lT=Tr(aT),cT=rn({},uf,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),uT=Tr(cT),hT=rn({},uf,{data:0}),x6=Tr(hT),dT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gT(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=pT[i])?!!e[i]:!1}function h4(){return gT}var mT=rn({},S0,{key:function(i){if(i.key){var e=dT[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=c1(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?fT[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:h4,charCode:function(i){return i.type==="keypress"?c1(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?c1(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),yT=Tr(mT),vT=rn({},Yy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S6=Tr(vT),_T=rn({},S0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:h4}),xT=Tr(_T),ST=rn({},uf,{propertyName:0,elapsedTime:0,pseudoElement:0}),wT=Tr(ST),bT=rn({},Yy,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ET=Tr(bT),AT=[9,13,27,32],d4=ba&&"CompositionEvent"in window,Ep=null;ba&&"documentMode"in document&&(Ep=document.documentMode);var CT=ba&&"TextEvent"in window&&!Ep,PE=ba&&(!d4||Ep&&8<Ep&&11>=Ep),w6=" ",b6=!1;function kE(i,e){switch(i){case"keyup":return AT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TE(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Rh=!1;function PT(i,e){switch(i){case"compositionend":return TE(e);case"keypress":return e.which!==32?null:(b6=!0,w6);case"textInput":return i=e.data,i===w6&&b6?null:i;default:return null}}function kT(i,e){if(Rh)return i==="compositionend"||!d4&&kE(i,e)?(i=CE(),l1=c4=Tl=null,Rh=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PE&&e.locale!=="ko"?null:e.data;default:return null}}var TT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E6(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!TT[i.type]:e==="textarea"}function ME(i,e,t,n){aE(n),e=ny(e,"onChange"),0<e.length&&(t=new u4("onChange","change",null,t,n),i.push({event:t,listeners:e}))}var Ap=null,Hp=null;function MT(i){GE(i,0)}function Ky(i){var e=Fh(i);if(eE(e))return i}function RT(i,e){if(i==="change")return e}var RE=!1;if(ba){var j_;if(ba){var H_="oninput"in document;if(!H_){var A6=document.createElement("div");A6.setAttribute("oninput","return;"),H_=typeof A6.oninput=="function"}j_=H_}else j_=!1;RE=j_&&(!document.documentMode||9<document.documentMode)}function C6(){Ap&&(Ap.detachEvent("onpropertychange",LE),Hp=Ap=null)}function LE(i){if(i.propertyName==="value"&&Ky(Hp)){var e=[];ME(e,Hp,i,r4(i)),hE(MT,e)}}function LT(i,e,t){i==="focusin"?(C6(),Ap=e,Hp=t,Ap.attachEvent("onpropertychange",LE)):i==="focusout"&&C6()}function NT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ky(Hp)}function FT(i,e){if(i==="click")return Ky(e)}function IT(i,e){if(i==="input"||i==="change")return Ky(e)}function DT(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var Os=typeof Object.is=="function"?Object.is:DT;function Gp(i,e){if(Os(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var r=t[n];if(!A3.call(e,r)||!Os(i[r],e[r]))return!1}return!0}function P6(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function k6(i,e){var t=P6(i);i=0;for(var n;t;){if(t.nodeType===3){if(n=i+t.textContent.length,i<=e&&n>=e)return{node:t,offset:e-i};i=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=P6(t)}}function NE(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?NE(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function FE(){for(var i=window,e=K1();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=K1(i.document)}return e}function f4(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function OT(i){var e=FE(),t=i.focusedElem,n=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&NE(t.ownerDocument.documentElement,t)){if(n!==null&&f4(t)){if(e=n.start,i=n.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var r=t.textContent.length,s=Math.min(n.start,r);n=n.end===void 0?s:Math.min(n.end,r),!i.extend&&s>n&&(r=n,n=s,s=r),r=k6(t,s);var o=k6(t,n);r&&o&&(i.rangeCount!==1||i.anchorNode!==r.node||i.anchorOffset!==r.offset||i.focusNode!==o.node||i.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),i.removeAllRanges(),s>n?(i.addRange(e),i.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var zT=ba&&"documentMode"in document&&11>=document.documentMode,Lh=null,V3=null,Cp=null,W3=!1;function T6(i,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;W3||Lh==null||Lh!==K1(n)||(n=Lh,"selectionStart"in n&&f4(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Cp&&Gp(Cp,n)||(Cp=n,n=ny(V3,"onSelect"),0<n.length&&(e=new u4("onSelect","select",null,e,t),i.push({event:e,listeners:n}),e.target=Lh)))}function Om(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var Nh={animationend:Om("Animation","AnimationEnd"),animationiteration:Om("Animation","AnimationIteration"),animationstart:Om("Animation","AnimationStart"),transitionend:Om("Transition","TransitionEnd")},G_={},IE={};ba&&(IE=document.createElement("div").style,"AnimationEvent"in window||(delete Nh.animationend.animation,delete Nh.animationiteration.animation,delete Nh.animationstart.animation),"TransitionEvent"in window||delete Nh.transitionend.transition);function qy(i){if(G_[i])return G_[i];if(!Nh[i])return i;var e=Nh[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in IE)return G_[i]=e[t];return i}var DE=qy("animationend"),OE=qy("animationiteration"),zE=qy("animationstart"),jE=qy("transitionend"),HE=new Map,M6="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xl(i,e){HE.set(i,e),ju(e,[i])}for(var B_=0;B_<M6.length;B_++){var U_=M6[B_],jT=U_.toLowerCase(),HT=U_[0].toUpperCase()+U_.slice(1);Xl(jT,"on"+HT)}Xl(DE,"onAnimationEnd");Xl(OE,"onAnimationIteration");Xl(zE,"onAnimationStart");Xl("dblclick","onDoubleClick");Xl("focusin","onFocus");Xl("focusout","onBlur");Xl(jE,"onTransitionEnd");qd("onMouseEnter",["mouseout","mouseover"]);qd("onMouseLeave",["mouseout","mouseover"]);qd("onPointerEnter",["pointerout","pointerover"]);qd("onPointerLeave",["pointerout","pointerover"]);ju("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ju("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ju("onBeforeInput",["compositionend","keypress","textInput","paste"]);ju("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GT=new Set("cancel close invalid load scroll toggle".split(" ").concat(tp));function R6(i,e,t){var n=i.type||"unknown-event";i.currentTarget=t,jk(n,e,void 0,i),i.currentTarget=null}function GE(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var n=i[t],r=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],u=a.instance,h=a.currentTarget;if(a=a.listener,u!==s&&r.isPropagationStopped())break e;R6(r,a,h),s=u}else for(o=0;o<n.length;o++){if(a=n[o],u=a.instance,h=a.currentTarget,a=a.listener,u!==s&&r.isPropagationStopped())break e;R6(r,a,h),s=u}}}if(Q1)throw i=H3,Q1=!1,H3=null,i}function Ht(i,e){var t=e[q3];t===void 0&&(t=e[q3]=new Set);var n=i+"__bubble";t.has(n)||(BE(e,i,2,!1),t.add(n))}function V_(i,e,t){var n=0;e&&(n|=4),BE(t,i,n,e)}var zm="_reactListening"+Math.random().toString(36).slice(2);function Bp(i){if(!i[zm]){i[zm]=!0,K8.forEach(function(t){t!=="selectionchange"&&(GT.has(t)||V_(t,!1,i),V_(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[zm]||(e[zm]=!0,V_("selectionchange",!1,e))}}function BE(i,e,t,n){switch(AE(e)){case 1:var r=tT;break;case 4:r=nT;break;default:r=l4}t=r.bind(null,e,t,i),r=void 0,!j3||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?i.addEventListener(e,t,{capture:!0,passive:r}):i.addEventListener(e,t,!0):r!==void 0?i.addEventListener(e,t,{passive:r}):i.addEventListener(e,t,!1)}function W_(i,e,t,n,r){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Pc(a),o===null)return;if(u=o.tag,u===5||u===6){n=s=o;continue e}a=a.parentNode}}n=n.return}hE(function(){var h=s,f=r4(t),m=[];e:{var g=HE.get(i);if(g!==void 0){var v=u4,y=i;switch(i){case"keypress":if(c1(t)===0)break e;case"keydown":case"keyup":v=yT;break;case"focusin":y="focus",v=z_;break;case"focusout":y="blur",v=z_;break;case"beforeblur":case"afterblur":v=z_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=_6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=sT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=xT;break;case DE:case OE:case zE:v=lT;break;case jE:v=wT;break;case"scroll":v=iT;break;case"wheel":v=ET;break;case"copy":case"cut":case"paste":v=uT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=S6}var S=(e&4)!==0,C=!S&&i==="scroll",b=S?g!==null?g+"Capture":null:g;S=[];for(var E=h,x;E!==null;){x=E;var A=x.stateNode;if(x.tag===5&&A!==null&&(x=A,b!==null&&(A=Dp(E,b),A!=null&&S.push(Up(E,A,x)))),C)break;E=E.return}0<S.length&&(g=new v(g,y,null,t,f),m.push({event:g,listeners:S}))}}if(!(e&7)){e:{if(g=i==="mouseover"||i==="pointerover",v=i==="mouseout"||i==="pointerout",g&&t!==O3&&(y=t.relatedTarget||t.fromElement)&&(Pc(y)||y[Ea]))break e;if((v||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,v?(y=t.relatedTarget||t.toElement,v=h,y=y?Pc(y):null,y!==null&&(C=Hu(y),y!==C||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=h),v!==y)){if(S=_6,A="onMouseLeave",b="onMouseEnter",E="mouse",(i==="pointerout"||i==="pointerover")&&(S=S6,A="onPointerLeave",b="onPointerEnter",E="pointer"),C=v==null?g:Fh(v),x=y==null?g:Fh(y),g=new S(A,E+"leave",v,t,f),g.target=C,g.relatedTarget=x,A=null,Pc(f)===h&&(S=new S(b,E+"enter",y,t,f),S.target=x,S.relatedTarget=C,A=S),C=A,v&&y)t:{for(S=v,b=y,E=0,x=S;x;x=gh(x))E++;for(x=0,A=b;A;A=gh(A))x++;for(;0<E-x;)S=gh(S),E--;for(;0<x-E;)b=gh(b),x--;for(;E--;){if(S===b||b!==null&&S===b.alternate)break t;S=gh(S),b=gh(b)}S=null}else S=null;v!==null&&L6(m,g,v,S,!1),y!==null&&C!==null&&L6(m,C,y,S,!0)}}e:{if(g=h?Fh(h):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var k=RT;else if(E6(g))if(RE)k=IT;else{k=NT;var L=LT}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(k=FT);if(k&&(k=k(i,h))){ME(m,k,t,f);break e}L&&L(i,g,h),i==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&L3(g,"number",g.value)}switch(L=h?Fh(h):window,i){case"focusin":(E6(L)||L.contentEditable==="true")&&(Lh=L,V3=h,Cp=null);break;case"focusout":Cp=V3=Lh=null;break;case"mousedown":W3=!0;break;case"contextmenu":case"mouseup":case"dragend":W3=!1,T6(m,t,f);break;case"selectionchange":if(zT)break;case"keydown":case"keyup":T6(m,t,f)}var I;if(d4)e:{switch(i){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Rh?kE(i,t)&&(M="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(PE&&t.locale!=="ko"&&(Rh||M!=="onCompositionStart"?M==="onCompositionEnd"&&Rh&&(I=CE()):(Tl=f,c4="value"in Tl?Tl.value:Tl.textContent,Rh=!0)),L=ny(h,M),0<L.length&&(M=new x6(M,i,null,t,f),m.push({event:M,listeners:L}),I?M.data=I:(I=TE(t),I!==null&&(M.data=I)))),(I=CT?PT(i,t):kT(i,t))&&(h=ny(h,"onBeforeInput"),0<h.length&&(f=new x6("onBeforeInput","beforeinput",null,t,f),m.push({event:f,listeners:h}),f.data=I))}GE(m,e)})}function Up(i,e,t){return{instance:i,listener:e,currentTarget:t}}function ny(i,e){for(var t=e+"Capture",n=[];i!==null;){var r=i,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Dp(i,t),s!=null&&n.unshift(Up(i,s,r)),s=Dp(i,e),s!=null&&n.push(Up(i,s,r))),i=i.return}return n}function gh(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function L6(i,e,t,n,r){for(var s=e._reactName,o=[];t!==null&&t!==n;){var a=t,u=a.alternate,h=a.stateNode;if(u!==null&&u===n)break;a.tag===5&&h!==null&&(a=h,r?(u=Dp(t,s),u!=null&&o.unshift(Up(t,u,a))):r||(u=Dp(t,s),u!=null&&o.push(Up(t,u,a)))),t=t.return}o.length!==0&&i.push({event:e,listeners:o})}var BT=/\r\n?/g,UT=/\u0000|\uFFFD/g;function N6(i){return(typeof i=="string"?i:""+i).replace(BT,`
`).replace(UT,"")}function jm(i,e,t){if(e=N6(e),N6(i)!==e&&t)throw Error(se(425))}function iy(){}var X3=null,$3=null;function Y3(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var K3=typeof setTimeout=="function"?setTimeout:void 0,VT=typeof clearTimeout=="function"?clearTimeout:void 0,F6=typeof Promise=="function"?Promise:void 0,WT=typeof queueMicrotask=="function"?queueMicrotask:typeof F6<"u"?function(i){return F6.resolve(null).then(i).catch(XT)}:K3;function XT(i){setTimeout(function(){throw i})}function X_(i,e){var t=e,n=0;do{var r=t.nextSibling;if(i.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(n===0){i.removeChild(r),jp(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=r}while(t);jp(e)}function Fl(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function I6(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var hf=Math.random().toString(36).slice(2),xo="__reactFiber$"+hf,Vp="__reactProps$"+hf,Ea="__reactContainer$"+hf,q3="__reactEvents$"+hf,$T="__reactListeners$"+hf,YT="__reactHandles$"+hf;function Pc(i){var e=i[xo];if(e)return e;for(var t=i.parentNode;t;){if(e=t[Ea]||t[xo]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=I6(i);i!==null;){if(t=i[xo])return t;i=I6(i)}return e}i=t,t=i.parentNode}return null}function w0(i){return i=i[xo]||i[Ea],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Fh(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(se(33))}function Qy(i){return i[Vp]||null}var Q3=[],Ih=-1;function $l(i){return{current:i}}function Bt(i){0>Ih||(i.current=Q3[Ih],Q3[Ih]=null,Ih--)}function Ot(i,e){Ih++,Q3[Ih]=i.current,i.current=e}var Hl={},Pi=$l(Hl),rr=$l(!1),ku=Hl;function Qd(i,e){var t=i.type.contextTypes;if(!t)return Hl;var n=i.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=r),r}function sr(i){return i=i.childContextTypes,i!=null}function ry(){Bt(rr),Bt(Pi)}function D6(i,e,t){if(Pi.current!==Hl)throw Error(se(168));Ot(Pi,e),Ot(rr,t)}function UE(i,e,t){var n=i.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(se(108,Lk(i)||"Unknown",r));return rn({},t,n)}function sy(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Hl,ku=Pi.current,Ot(Pi,i),Ot(rr,rr.current),!0}function O6(i,e,t){var n=i.stateNode;if(!n)throw Error(se(169));t?(i=UE(i,e,ku),n.__reactInternalMemoizedMergedChildContext=i,Bt(rr),Bt(Pi),Ot(Pi,i)):Bt(rr),Ot(rr,t)}var Vo=null,Jy=!1,$_=!1;function VE(i){Vo===null?Vo=[i]:Vo.push(i)}function KT(i){Jy=!0,VE(i)}function Yl(){if(!$_&&Vo!==null){$_=!0;var i=0,e=Ct;try{var t=Vo;for(Ct=1;i<t.length;i++){var n=t[i];do n=n(!0);while(n!==null)}Vo=null,Jy=!1}catch(r){throw Vo!==null&&(Vo=Vo.slice(i+1)),gE(s4,Yl),r}finally{Ct=e,$_=!1}}return null}var Dh=[],Oh=0,oy=null,ay=0,Yr=[],Kr=0,Tu=null,ma=1,ya="";function vc(i,e){Dh[Oh++]=ay,Dh[Oh++]=oy,oy=i,ay=e}function WE(i,e,t){Yr[Kr++]=ma,Yr[Kr++]=ya,Yr[Kr++]=Tu,Tu=i;var n=ma;i=ya;var r=32-Fs(n)-1;n&=~(1<<r),t+=1;var s=32-Fs(e)+r;if(30<s){var o=r-r%5;s=(n&(1<<o)-1).toString(32),n>>=o,r-=o,ma=1<<32-Fs(e)+r|t<<r|n,ya=s+i}else ma=1<<s|t<<r|n,ya=i}function p4(i){i.return!==null&&(vc(i,1),WE(i,1,0))}function g4(i){for(;i===oy;)oy=Dh[--Oh],Dh[Oh]=null,ay=Dh[--Oh],Dh[Oh]=null;for(;i===Tu;)Tu=Yr[--Kr],Yr[Kr]=null,ya=Yr[--Kr],Yr[Kr]=null,ma=Yr[--Kr],Yr[Kr]=null}var Ar=null,Er=null,Xt=!1,Ls=null;function XE(i,e){var t=Jr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function z6(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,Ar=i,Er=Fl(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,Ar=i,Er=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Tu!==null?{id:ma,overflow:ya}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Jr(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,Ar=i,Er=null,!0):!1;default:return!1}}function J3(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Z3(i){if(Xt){var e=Er;if(e){var t=e;if(!z6(i,e)){if(J3(i))throw Error(se(418));e=Fl(t.nextSibling);var n=Ar;e&&z6(i,e)?XE(n,t):(i.flags=i.flags&-4097|2,Xt=!1,Ar=i)}}else{if(J3(i))throw Error(se(418));i.flags=i.flags&-4097|2,Xt=!1,Ar=i}}}function j6(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Ar=i}function Hm(i){if(i!==Ar)return!1;if(!Xt)return j6(i),Xt=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!Y3(i.type,i.memoizedProps)),e&&(e=Er)){if(J3(i))throw $E(),Error(se(418));for(;e;)XE(i,e),e=Fl(e.nextSibling)}if(j6(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(se(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){Er=Fl(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}Er=null}}else Er=Ar?Fl(i.stateNode.nextSibling):null;return!0}function $E(){for(var i=Er;i;)i=Fl(i.nextSibling)}function Jd(){Er=Ar=null,Xt=!1}function m4(i){Ls===null?Ls=[i]:Ls.push(i)}var qT=Ta.ReactCurrentBatchConfig;function Uf(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(se(309));var n=t.stateNode}if(!n)throw Error(se(147,i));var r=n,s=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof i!="string")throw Error(se(284));if(!t._owner)throw Error(se(290,i))}return i}function Gm(i,e){throw i=Object.prototype.toString.call(e),Error(se(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function H6(i){var e=i._init;return e(i._payload)}function YE(i){function e(b,E){if(i){var x=b.deletions;x===null?(b.deletions=[E],b.flags|=16):x.push(E)}}function t(b,E){if(!i)return null;for(;E!==null;)e(b,E),E=E.sibling;return null}function n(b,E){for(b=new Map;E!==null;)E.key!==null?b.set(E.key,E):b.set(E.index,E),E=E.sibling;return b}function r(b,E){return b=zl(b,E),b.index=0,b.sibling=null,b}function s(b,E,x){return b.index=x,i?(x=b.alternate,x!==null?(x=x.index,x<E?(b.flags|=2,E):x):(b.flags|=2,E)):(b.flags|=1048576,E)}function o(b){return i&&b.alternate===null&&(b.flags|=2),b}function a(b,E,x,A){return E===null||E.tag!==6?(E=e3(x,b.mode,A),E.return=b,E):(E=r(E,x),E.return=b,E)}function u(b,E,x,A){var k=x.type;return k===Mh?f(b,E,x.props.children,A,x.key):E!==null&&(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Qa&&H6(k)===E.type)?(A=r(E,x.props),A.ref=Uf(b,E,x),A.return=b,A):(A=m1(x.type,x.key,x.props,null,b.mode,A),A.ref=Uf(b,E,x),A.return=b,A)}function h(b,E,x,A){return E===null||E.tag!==4||E.stateNode.containerInfo!==x.containerInfo||E.stateNode.implementation!==x.implementation?(E=t3(x,b.mode,A),E.return=b,E):(E=r(E,x.children||[]),E.return=b,E)}function f(b,E,x,A,k){return E===null||E.tag!==7?(E=Pu(x,b.mode,A,k),E.return=b,E):(E=r(E,x),E.return=b,E)}function m(b,E,x){if(typeof E=="string"&&E!==""||typeof E=="number")return E=e3(""+E,b.mode,x),E.return=b,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Mm:return x=m1(E.type,E.key,E.props,null,b.mode,x),x.ref=Uf(b,null,E),x.return=b,x;case Th:return E=t3(E,b.mode,x),E.return=b,E;case Qa:var A=E._init;return m(b,A(E._payload),x)}if(Zf(E)||zf(E))return E=Pu(E,b.mode,x,null),E.return=b,E;Gm(b,E)}return null}function g(b,E,x,A){var k=E!==null?E.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:a(b,E,""+x,A);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Mm:return x.key===k?u(b,E,x,A):null;case Th:return x.key===k?h(b,E,x,A):null;case Qa:return k=x._init,g(b,E,k(x._payload),A)}if(Zf(x)||zf(x))return k!==null?null:f(b,E,x,A,null);Gm(b,x)}return null}function v(b,E,x,A,k){if(typeof A=="string"&&A!==""||typeof A=="number")return b=b.get(x)||null,a(E,b,""+A,k);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Mm:return b=b.get(A.key===null?x:A.key)||null,u(E,b,A,k);case Th:return b=b.get(A.key===null?x:A.key)||null,h(E,b,A,k);case Qa:var L=A._init;return v(b,E,x,L(A._payload),k)}if(Zf(A)||zf(A))return b=b.get(x)||null,f(E,b,A,k,null);Gm(E,A)}return null}function y(b,E,x,A){for(var k=null,L=null,I=E,M=E=0,z=null;I!==null&&M<x.length;M++){I.index>M?(z=I,I=null):z=I.sibling;var D=g(b,I,x[M],A);if(D===null){I===null&&(I=z);break}i&&I&&D.alternate===null&&e(b,I),E=s(D,E,M),L===null?k=D:L.sibling=D,L=D,I=z}if(M===x.length)return t(b,I),Xt&&vc(b,M),k;if(I===null){for(;M<x.length;M++)I=m(b,x[M],A),I!==null&&(E=s(I,E,M),L===null?k=I:L.sibling=I,L=I);return Xt&&vc(b,M),k}for(I=n(b,I);M<x.length;M++)z=v(I,b,M,x[M],A),z!==null&&(i&&z.alternate!==null&&I.delete(z.key===null?M:z.key),E=s(z,E,M),L===null?k=z:L.sibling=z,L=z);return i&&I.forEach(function(j){return e(b,j)}),Xt&&vc(b,M),k}function S(b,E,x,A){var k=zf(x);if(typeof k!="function")throw Error(se(150));if(x=k.call(x),x==null)throw Error(se(151));for(var L=k=null,I=E,M=E=0,z=null,D=x.next();I!==null&&!D.done;M++,D=x.next()){I.index>M?(z=I,I=null):z=I.sibling;var j=g(b,I,D.value,A);if(j===null){I===null&&(I=z);break}i&&I&&j.alternate===null&&e(b,I),E=s(j,E,M),L===null?k=j:L.sibling=j,L=j,I=z}if(D.done)return t(b,I),Xt&&vc(b,M),k;if(I===null){for(;!D.done;M++,D=x.next())D=m(b,D.value,A),D!==null&&(E=s(D,E,M),L===null?k=D:L.sibling=D,L=D);return Xt&&vc(b,M),k}for(I=n(b,I);!D.done;M++,D=x.next())D=v(I,b,M,D.value,A),D!==null&&(i&&D.alternate!==null&&I.delete(D.key===null?M:D.key),E=s(D,E,M),L===null?k=D:L.sibling=D,L=D);return i&&I.forEach(function(U){return e(b,U)}),Xt&&vc(b,M),k}function C(b,E,x,A){if(typeof x=="object"&&x!==null&&x.type===Mh&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Mm:e:{for(var k=x.key,L=E;L!==null;){if(L.key===k){if(k=x.type,k===Mh){if(L.tag===7){t(b,L.sibling),E=r(L,x.props.children),E.return=b,b=E;break e}}else if(L.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Qa&&H6(k)===L.type){t(b,L.sibling),E=r(L,x.props),E.ref=Uf(b,L,x),E.return=b,b=E;break e}t(b,L);break}else e(b,L);L=L.sibling}x.type===Mh?(E=Pu(x.props.children,b.mode,A,x.key),E.return=b,b=E):(A=m1(x.type,x.key,x.props,null,b.mode,A),A.ref=Uf(b,E,x),A.return=b,b=A)}return o(b);case Th:e:{for(L=x.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===x.containerInfo&&E.stateNode.implementation===x.implementation){t(b,E.sibling),E=r(E,x.children||[]),E.return=b,b=E;break e}else{t(b,E);break}else e(b,E);E=E.sibling}E=t3(x,b.mode,A),E.return=b,b=E}return o(b);case Qa:return L=x._init,C(b,E,L(x._payload),A)}if(Zf(x))return y(b,E,x,A);if(zf(x))return S(b,E,x,A);Gm(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,E!==null&&E.tag===6?(t(b,E.sibling),E=r(E,x),E.return=b,b=E):(t(b,E),E=e3(x,b.mode,A),E.return=b,b=E),o(b)):t(b,E)}return C}var Zd=YE(!0),KE=YE(!1),ly=$l(null),cy=null,zh=null,y4=null;function v4(){y4=zh=cy=null}function _4(i){var e=ly.current;Bt(ly),i._currentValue=e}function ex(i,e,t){for(;i!==null;){var n=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),i===t)break;i=i.return}}function Xh(i,e){cy=i,y4=zh=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(nr=!0),i.firstContext=null)}function ts(i){var e=i._currentValue;if(y4!==i)if(i={context:i,memoizedValue:e,next:null},zh===null){if(cy===null)throw Error(se(308));zh=i,cy.dependencies={lanes:0,firstContext:i}}else zh=zh.next=i;return e}var kc=null;function x4(i){kc===null?kc=[i]:kc.push(i)}function qE(i,e,t,n){var r=e.interleaved;return r===null?(t.next=t,x4(e)):(t.next=r.next,r.next=t),e.interleaved=t,Aa(i,n)}function Aa(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var Ja=!1;function S4(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QE(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function va(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function Il(i,e,t){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,ft&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,Aa(i,t)}return r=n.interleaved,r===null?(e.next=e,x4(n)):(e.next=r.next,r.next=e),n.interleaved=e,Aa(i,t)}function u1(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,o4(i,t)}}function G6(i,e){var t=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function uy(i,e,t,n){var r=i.updateQueue;Ja=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var u=a,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var f=i.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=h:a.next=h,f.lastBaseUpdate=u))}if(s!==null){var m=r.baseState;o=0,f=h=u=null,a=s;do{var g=a.lane,v=a.eventTime;if((n&g)===g){f!==null&&(f=f.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=i,S=a;switch(g=e,v=t,S.tag){case 1:if(y=S.payload,typeof y=="function"){m=y.call(v,m,g);break e}m=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=S.payload,g=typeof y=="function"?y.call(v,m,g):y,g==null)break e;m=rn({},m,g);break e;case 2:Ja=!0}}a.callback!==null&&a.lane!==0&&(i.flags|=64,g=r.effects,g===null?r.effects=[a]:g.push(a))}else v={eventTime:v,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(h=f=v,u=m):f=f.next=v,o|=g;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;g=a,a=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);if(f===null&&(u=m),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ru|=o,i.lanes=o,i.memoizedState=m}}function B6(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var n=i[e],r=n.callback;if(r!==null){if(n.callback=null,n=t,typeof r!="function")throw Error(se(191,r));r.call(n)}}}var b0={},bo=$l(b0),Wp=$l(b0),Xp=$l(b0);function Tc(i){if(i===b0)throw Error(se(174));return i}function w4(i,e){switch(Ot(Xp,e),Ot(Wp,i),Ot(bo,b0),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:F3(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=F3(e,i)}Bt(bo),Ot(bo,e)}function ef(){Bt(bo),Bt(Wp),Bt(Xp)}function JE(i){Tc(Xp.current);var e=Tc(bo.current),t=F3(e,i.type);e!==t&&(Ot(Wp,i),Ot(bo,t))}function b4(i){Wp.current===i&&(Bt(bo),Bt(Wp))}var tn=$l(0);function hy(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Y_=[];function E4(){for(var i=0;i<Y_.length;i++)Y_[i]._workInProgressVersionPrimary=null;Y_.length=0}var h1=Ta.ReactCurrentDispatcher,K_=Ta.ReactCurrentBatchConfig,Mu=0,nn=null,Ln=null,Yn=null,dy=!1,Pp=!1,$p=0,QT=0;function mi(){throw Error(se(321))}function A4(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!Os(i[t],e[t]))return!1;return!0}function C4(i,e,t,n,r,s){if(Mu=s,nn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,h1.current=i===null||i.memoizedState===null?tM:nM,i=t(n,r),Pp){s=0;do{if(Pp=!1,$p=0,25<=s)throw Error(se(301));s+=1,Yn=Ln=null,e.updateQueue=null,h1.current=iM,i=t(n,r)}while(Pp)}if(h1.current=fy,e=Ln!==null&&Ln.next!==null,Mu=0,Yn=Ln=nn=null,dy=!1,e)throw Error(se(300));return i}function P4(){var i=$p!==0;return $p=0,i}function eo(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?nn.memoizedState=Yn=i:Yn=Yn.next=i,Yn}function ns(){if(Ln===null){var i=nn.alternate;i=i!==null?i.memoizedState:null}else i=Ln.next;var e=Yn===null?nn.memoizedState:Yn.next;if(e!==null)Yn=e,Ln=i;else{if(i===null)throw Error(se(310));Ln=i,i={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},Yn===null?nn.memoizedState=Yn=i:Yn=Yn.next=i}return Yn}function Yp(i,e){return typeof e=="function"?e(i):e}function q_(i){var e=ns(),t=e.queue;if(t===null)throw Error(se(311));t.lastRenderedReducer=i;var n=Ln,r=n.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}n.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,n=n.baseState;var a=o=null,u=null,h=s;do{var f=h.lane;if((Mu&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:i(n,h.action);else{var m={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(a=u=m,o=n):u=u.next=m,nn.lanes|=f,Ru|=f}h=h.next}while(h!==null&&h!==s);u===null?o=n:u.next=a,Os(n,e.memoizedState)||(nr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=u,t.lastRenderedState=n}if(i=t.interleaved,i!==null){r=i;do s=r.lane,nn.lanes|=s,Ru|=s,r=r.next;while(r!==i)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Q_(i){var e=ns(),t=e.queue;if(t===null)throw Error(se(311));t.lastRenderedReducer=i;var n=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=i(s,o.action),o=o.next;while(o!==r);Os(s,e.memoizedState)||(nr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function ZE(){}function eA(i,e){var t=nn,n=ns(),r=e(),s=!Os(n.memoizedState,r);if(s&&(n.memoizedState=r,nr=!0),n=n.queue,k4(iA.bind(null,t,n,i),[i]),n.getSnapshot!==e||s||Yn!==null&&Yn.memoizedState.tag&1){if(t.flags|=2048,Kp(9,nA.bind(null,t,n,r,e),void 0,null),Kn===null)throw Error(se(349));Mu&30||tA(t,e,r)}return r}function tA(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=nn.updateQueue,e===null?(e={lastEffect:null,stores:null},nn.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function nA(i,e,t,n){e.value=t,e.getSnapshot=n,rA(e)&&sA(i)}function iA(i,e,t){return t(function(){rA(e)&&sA(i)})}function rA(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!Os(i,t)}catch{return!0}}function sA(i){var e=Aa(i,1);e!==null&&Is(e,i,1,-1)}function U6(i){var e=eo();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yp,lastRenderedState:i},e.queue=i,i=i.dispatch=eM.bind(null,nn,i),[e.memoizedState,i]}function Kp(i,e,t,n){return i={tag:i,create:e,destroy:t,deps:n,next:null},e=nn.updateQueue,e===null?(e={lastEffect:null,stores:null},nn.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(n=t.next,t.next=i,i.next=n,e.lastEffect=i)),i}function oA(){return ns().memoizedState}function d1(i,e,t,n){var r=eo();nn.flags|=i,r.memoizedState=Kp(1|e,t,void 0,n===void 0?null:n)}function Zy(i,e,t,n){var r=ns();n=n===void 0?null:n;var s=void 0;if(Ln!==null){var o=Ln.memoizedState;if(s=o.destroy,n!==null&&A4(n,o.deps)){r.memoizedState=Kp(e,t,s,n);return}}nn.flags|=i,r.memoizedState=Kp(1|e,t,s,n)}function V6(i,e){return d1(8390656,8,i,e)}function k4(i,e){return Zy(2048,8,i,e)}function aA(i,e){return Zy(4,2,i,e)}function lA(i,e){return Zy(4,4,i,e)}function cA(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function uA(i,e,t){return t=t!=null?t.concat([i]):null,Zy(4,4,cA.bind(null,e,i),t)}function T4(){}function hA(i,e){var t=ns();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&A4(e,n[1])?n[0]:(t.memoizedState=[i,e],i)}function dA(i,e){var t=ns();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&A4(e,n[1])?n[0]:(i=i(),t.memoizedState=[i,e],i)}function fA(i,e,t){return Mu&21?(Os(t,e)||(t=vE(),nn.lanes|=t,Ru|=t,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,nr=!0),i.memoizedState=t)}function JT(i,e){var t=Ct;Ct=t!==0&&4>t?t:4,i(!0);var n=K_.transition;K_.transition={};try{i(!1),e()}finally{Ct=t,K_.transition=n}}function pA(){return ns().memoizedState}function ZT(i,e,t){var n=Ol(i);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},gA(i))mA(e,t);else if(t=qE(i,e,t,n),t!==null){var r=Ii();Is(t,i,n,r),yA(t,e,n)}}function eM(i,e,t){var n=Ol(i),r={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(gA(i))mA(e,r);else{var s=i.alternate;if(i.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Os(a,o)){var u=e.interleaved;u===null?(r.next=r,x4(e)):(r.next=u.next,u.next=r),e.interleaved=r;return}}catch{}finally{}t=qE(i,e,r,n),t!==null&&(r=Ii(),Is(t,i,n,r),yA(t,e,n))}}function gA(i){var e=i.alternate;return i===nn||e!==null&&e===nn}function mA(i,e){Pp=dy=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function yA(i,e,t){if(t&4194240){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,o4(i,t)}}var fy={readContext:ts,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},tM={readContext:ts,useCallback:function(i,e){return eo().memoizedState=[i,e===void 0?null:e],i},useContext:ts,useEffect:V6,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,d1(4194308,4,cA.bind(null,e,i),t)},useLayoutEffect:function(i,e){return d1(4194308,4,i,e)},useInsertionEffect:function(i,e){return d1(4,2,i,e)},useMemo:function(i,e){var t=eo();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var n=eo();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},n.queue=i,i=i.dispatch=ZT.bind(null,nn,i),[n.memoizedState,i]},useRef:function(i){var e=eo();return i={current:i},e.memoizedState=i},useState:U6,useDebugValue:T4,useDeferredValue:function(i){return eo().memoizedState=i},useTransition:function(){var i=U6(!1),e=i[0];return i=JT.bind(null,i[1]),eo().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var n=nn,r=eo();if(Xt){if(t===void 0)throw Error(se(407));t=t()}else{if(t=e(),Kn===null)throw Error(se(349));Mu&30||tA(n,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,V6(iA.bind(null,n,s,i),[i]),n.flags|=2048,Kp(9,nA.bind(null,n,s,t,e),void 0,null),t},useId:function(){var i=eo(),e=Kn.identifierPrefix;if(Xt){var t=ya,n=ma;t=(n&~(1<<32-Fs(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=$p++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=QT++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},nM={readContext:ts,useCallback:hA,useContext:ts,useEffect:k4,useImperativeHandle:uA,useInsertionEffect:aA,useLayoutEffect:lA,useMemo:dA,useReducer:q_,useRef:oA,useState:function(){return q_(Yp)},useDebugValue:T4,useDeferredValue:function(i){var e=ns();return fA(e,Ln.memoizedState,i)},useTransition:function(){var i=q_(Yp)[0],e=ns().memoizedState;return[i,e]},useMutableSource:ZE,useSyncExternalStore:eA,useId:pA,unstable_isNewReconciler:!1},iM={readContext:ts,useCallback:hA,useContext:ts,useEffect:k4,useImperativeHandle:uA,useInsertionEffect:aA,useLayoutEffect:lA,useMemo:dA,useReducer:Q_,useRef:oA,useState:function(){return Q_(Yp)},useDebugValue:T4,useDeferredValue:function(i){var e=ns();return Ln===null?e.memoizedState=i:fA(e,Ln.memoizedState,i)},useTransition:function(){var i=Q_(Yp)[0],e=ns().memoizedState;return[i,e]},useMutableSource:ZE,useSyncExternalStore:eA,useId:pA,unstable_isNewReconciler:!1};function ms(i,e){if(i&&i.defaultProps){e=rn({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}function tx(i,e,t,n){e=i.memoizedState,t=t(n,e),t=t==null?e:rn({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var e2={isMounted:function(i){return(i=i._reactInternals)?Hu(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var n=Ii(),r=Ol(i),s=va(n,r);s.payload=e,t!=null&&(s.callback=t),e=Il(i,s,r),e!==null&&(Is(e,i,r,n),u1(e,i,r))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var n=Ii(),r=Ol(i),s=va(n,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Il(i,s,r),e!==null&&(Is(e,i,r,n),u1(e,i,r))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=Ii(),n=Ol(i),r=va(t,n);r.tag=2,e!=null&&(r.callback=e),e=Il(i,r,n),e!==null&&(Is(e,i,n,t),u1(e,i,n))}};function W6(i,e,t,n,r,s,o){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Gp(t,n)||!Gp(r,s):!0}function vA(i,e,t){var n=!1,r=Hl,s=e.contextType;return typeof s=="object"&&s!==null?s=ts(s):(r=sr(e)?ku:Pi.current,n=e.contextTypes,s=(n=n!=null)?Qd(i,r):Hl),e=new e(t,s),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=e2,i.stateNode=e,e._reactInternals=i,n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=r,i.__reactInternalMemoizedMaskedChildContext=s),e}function X6(i,e,t,n){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==i&&e2.enqueueReplaceState(e,e.state,null)}function nx(i,e,t,n){var r=i.stateNode;r.props=t,r.state=i.memoizedState,r.refs={},S4(i);var s=e.contextType;typeof s=="object"&&s!==null?r.context=ts(s):(s=sr(e)?ku:Pi.current,r.context=Qd(i,s)),r.state=i.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(tx(i,e,s,t),r.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&e2.enqueueReplaceState(r,r.state,null),uy(i,t,r,n),r.state=i.memoizedState),typeof r.componentDidMount=="function"&&(i.flags|=4194308)}function tf(i,e){try{var t="",n=e;do t+=Rk(n),n=n.return;while(n);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:i,source:e,stack:r,digest:null}}function J_(i,e,t){return{value:i,source:null,stack:t??null,digest:e??null}}function ix(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var rM=typeof WeakMap=="function"?WeakMap:Map;function _A(i,e,t){t=va(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){gy||(gy=!0,fx=n),ix(i,e)},t}function xA(i,e,t){t=va(-1,t),t.tag=3;var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;t.payload=function(){return n(r)},t.callback=function(){ix(i,e)}}var s=i.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){ix(i,e),typeof n!="function"&&(Dl===null?Dl=new Set([this]):Dl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function $6(i,e,t){var n=i.pingCache;if(n===null){n=i.pingCache=new rM;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(t)||(r.add(t),i=vM.bind(null,i,e,t),e.then(i,i))}function Y6(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function K6(i,e,t,n,r){return i.mode&1?(i.flags|=65536,i.lanes=r,i):(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=va(-1,1),e.tag=2,Il(t,e,1))),t.lanes|=1),i)}var sM=Ta.ReactCurrentOwner,nr=!1;function Ni(i,e,t,n){e.child=i===null?KE(e,null,t,n):Zd(e,i.child,t,n)}function q6(i,e,t,n,r){t=t.render;var s=e.ref;return Xh(e,r),n=C4(i,e,t,n,s,r),t=P4(),i!==null&&!nr?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,Ca(i,e,r)):(Xt&&t&&p4(e),e.flags|=1,Ni(i,e,n,r),e.child)}function Q6(i,e,t,n,r){if(i===null){var s=t.type;return typeof s=="function"&&!O4(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,SA(i,e,s,n,r)):(i=m1(t.type,null,n,e,e.mode,r),i.ref=e.ref,i.return=e,e.child=i)}if(s=i.child,!(i.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Gp,t(o,n)&&i.ref===e.ref)return Ca(i,e,r)}return e.flags|=1,i=zl(s,n),i.ref=e.ref,i.return=e,e.child=i}function SA(i,e,t,n,r){if(i!==null){var s=i.memoizedProps;if(Gp(s,n)&&i.ref===e.ref)if(nr=!1,e.pendingProps=n=s,(i.lanes&r)!==0)i.flags&131072&&(nr=!0);else return e.lanes=i.lanes,Ca(i,e,r)}return rx(i,e,t,n,r)}function wA(i,e,t){var n=e.pendingProps,r=n.children,s=i!==null?i.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ot(Hh,wr),wr|=t;else{if(!(t&1073741824))return i=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,Ot(Hh,wr),wr|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,Ot(Hh,wr),wr|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,Ot(Hh,wr),wr|=n;return Ni(i,e,r,t),e.child}function bA(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function rx(i,e,t,n,r){var s=sr(t)?ku:Pi.current;return s=Qd(e,s),Xh(e,r),t=C4(i,e,t,n,s,r),n=P4(),i!==null&&!nr?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,Ca(i,e,r)):(Xt&&n&&p4(e),e.flags|=1,Ni(i,e,t,r),e.child)}function J6(i,e,t,n,r){if(sr(t)){var s=!0;sy(e)}else s=!1;if(Xh(e,r),e.stateNode===null)f1(i,e),vA(e,t,n),nx(e,t,n,r),n=!0;else if(i===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,h=t.contextType;typeof h=="object"&&h!==null?h=ts(h):(h=sr(t)?ku:Pi.current,h=Qd(e,h));var f=t.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||u!==h)&&X6(e,o,n,h),Ja=!1;var g=e.memoizedState;o.state=g,uy(e,n,o,r),u=e.memoizedState,a!==n||g!==u||rr.current||Ja?(typeof f=="function"&&(tx(e,t,f,n),u=e.memoizedState),(a=Ja||W6(e,t,a,n,g,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),o.props=n,o.state=u,o.context=h,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,QE(i,e),a=e.memoizedProps,h=e.type===e.elementType?a:ms(e.type,a),o.props=h,m=e.pendingProps,g=o.context,u=t.contextType,typeof u=="object"&&u!==null?u=ts(u):(u=sr(t)?ku:Pi.current,u=Qd(e,u));var v=t.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==u)&&X6(e,o,n,u),Ja=!1,g=e.memoizedState,o.state=g,uy(e,n,o,r);var y=e.memoizedState;a!==m||g!==y||rr.current||Ja?(typeof v=="function"&&(tx(e,t,v,n),y=e.memoizedState),(h=Ja||W6(e,t,h,n,g,y,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===i.memoizedProps&&g===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&g===i.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),o.props=n,o.state=y,o.context=u,n=h):(typeof o.componentDidUpdate!="function"||a===i.memoizedProps&&g===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&g===i.memoizedState||(e.flags|=1024),n=!1)}return sx(i,e,t,n,s,r)}function sx(i,e,t,n,r,s){bA(i,e);var o=(e.flags&128)!==0;if(!n&&!o)return r&&O6(e,t,!1),Ca(i,e,s);n=e.stateNode,sM.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,i!==null&&o?(e.child=Zd(e,i.child,null,s),e.child=Zd(e,null,a,s)):Ni(i,e,a,s),e.memoizedState=n.state,r&&O6(e,t,!0),e.child}function EA(i){var e=i.stateNode;e.pendingContext?D6(i,e.pendingContext,e.pendingContext!==e.context):e.context&&D6(i,e.context,!1),w4(i,e.containerInfo)}function Z6(i,e,t,n,r){return Jd(),m4(r),e.flags|=256,Ni(i,e,t,n),e.child}var ox={dehydrated:null,treeContext:null,retryLane:0};function ax(i){return{baseLanes:i,cachePool:null,transitions:null}}function AA(i,e,t){var n=e.pendingProps,r=tn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=i!==null&&i.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(r|=1),Ot(tn,r&1),i===null)return Z3(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,i=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=i2(o,n,0,null),i=Pu(i,n,t,null),s.return=e,i.return=e,s.sibling=i,e.child=s,e.child.memoizedState=ax(t),e.memoizedState=ox,i):M4(e,o));if(r=i.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return oM(i,e,o,n,a,r,t);if(s){s=n.fallback,o=e.mode,r=i.child,a=r.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=zl(r,u),n.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=zl(a,s):(s=Pu(s,o,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=i.child.memoizedState,o=o===null?ax(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=i.childLanes&~t,e.memoizedState=ox,n}return s=i.child,i=s.sibling,n=zl(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=n,e.memoizedState=null,n}function M4(i,e){return e=i2({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function Bm(i,e,t,n){return n!==null&&m4(n),Zd(e,i.child,null,t),i=M4(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function oM(i,e,t,n,r,s,o){if(t)return e.flags&256?(e.flags&=-257,n=J_(Error(se(422))),Bm(i,e,o,n)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(s=n.fallback,r=e.mode,n=i2({mode:"visible",children:n.children},r,0,null),s=Pu(s,r,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Zd(e,i.child,null,o),e.child.memoizedState=ax(o),e.memoizedState=ox,s);if(!(e.mode&1))return Bm(i,e,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(se(419)),n=J_(s,n,void 0),Bm(i,e,o,n)}if(a=(o&i.childLanes)!==0,nr||a){if(n=Kn,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Aa(i,r),Is(n,i,r,-1))}return D4(),n=J_(Error(se(421))),Bm(i,e,o,n)}return r.data==="$?"?(e.flags|=128,e.child=i.child,e=_M.bind(null,i),r._reactRetry=e,null):(i=s.treeContext,Er=Fl(r.nextSibling),Ar=e,Xt=!0,Ls=null,i!==null&&(Yr[Kr++]=ma,Yr[Kr++]=ya,Yr[Kr++]=Tu,ma=i.id,ya=i.overflow,Tu=e),e=M4(e,n.children),e.flags|=4096,e)}function eb(i,e,t){i.lanes|=e;var n=i.alternate;n!==null&&(n.lanes|=e),ex(i.return,e,t)}function Z_(i,e,t,n,r){var s=i.memoizedState;s===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=r)}function CA(i,e,t){var n=e.pendingProps,r=n.revealOrder,s=n.tail;if(Ni(i,e,n.children,t),n=tn.current,n&2)n=n&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&eb(i,t,e);else if(i.tag===19)eb(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}if(Ot(tn,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)i=t.alternate,i!==null&&hy(i)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Z_(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(i=r.alternate,i!==null&&hy(i)===null){e.child=r;break}i=r.sibling,r.sibling=t,t=r,r=i}Z_(e,!0,t,null,s);break;case"together":Z_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function f1(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function Ca(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),Ru|=e.lanes,!(t&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(se(153));if(e.child!==null){for(i=e.child,t=zl(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=zl(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function aM(i,e,t){switch(e.tag){case 3:EA(e),Jd();break;case 5:JE(e);break;case 1:sr(e.type)&&sy(e);break;case 4:w4(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;Ot(ly,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ot(tn,tn.current&1),e.flags|=128,null):t&e.child.childLanes?AA(i,e,t):(Ot(tn,tn.current&1),i=Ca(i,e,t),i!==null?i.sibling:null);Ot(tn,tn.current&1);break;case 19:if(n=(t&e.childLanes)!==0,i.flags&128){if(n)return CA(i,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ot(tn,tn.current),n)break;return null;case 22:case 23:return e.lanes=0,wA(i,e,t)}return Ca(i,e,t)}var PA,lx,kA,TA;PA=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};lx=function(){};kA=function(i,e,t,n){var r=i.memoizedProps;if(r!==n){i=e.stateNode,Tc(bo.current);var s=null;switch(t){case"input":r=M3(i,r),n=M3(i,n),s=[];break;case"select":r=rn({},r,{value:void 0}),n=rn({},n,{value:void 0}),s=[];break;case"textarea":r=N3(i,r),n=N3(i,n),s=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(i.onclick=iy)}I3(t,n);var o;t=null;for(h in r)if(!n.hasOwnProperty(h)&&r.hasOwnProperty(h)&&r[h]!=null)if(h==="style"){var a=r[h];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Fp.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in n){var u=n[h];if(a=r!=null?r[h]:void 0,n.hasOwnProperty(h)&&u!==a&&(u!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(s||(s=[]),s.push(h,t)),t=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Fp.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ht("scroll",i),s||a===u||(s=[])):(s=s||[]).push(h,u))}t&&(s=s||[]).push("style",t);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};TA=function(i,e,t,n){t!==n&&(e.flags|=4)};function Vf(i,e){if(!Xt)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function yi(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,n=0;if(e)for(var r=i.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=i,r=r.sibling;else for(r=i.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=i,r=r.sibling;return i.subtreeFlags|=n,i.childLanes=t,e}function lM(i,e,t){var n=e.pendingProps;switch(g4(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(e),null;case 1:return sr(e.type)&&ry(),yi(e),null;case 3:return n=e.stateNode,ef(),Bt(rr),Bt(Pi),E4(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(i===null||i.child===null)&&(Hm(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ls!==null&&(mx(Ls),Ls=null))),lx(i,e),yi(e),null;case 5:b4(e);var r=Tc(Xp.current);if(t=e.type,i!==null&&e.stateNode!=null)kA(i,e,t,n,r),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(se(166));return yi(e),null}if(i=Tc(bo.current),Hm(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[xo]=e,n[Vp]=s,i=(e.mode&1)!==0,t){case"dialog":Ht("cancel",n),Ht("close",n);break;case"iframe":case"object":case"embed":Ht("load",n);break;case"video":case"audio":for(r=0;r<tp.length;r++)Ht(tp[r],n);break;case"source":Ht("error",n);break;case"img":case"image":case"link":Ht("error",n),Ht("load",n);break;case"details":Ht("toggle",n);break;case"input":c6(n,s),Ht("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Ht("invalid",n);break;case"textarea":h6(n,s),Ht("invalid",n)}I3(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&jm(n.textContent,a,i),r=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&jm(n.textContent,a,i),r=["children",""+a]):Fp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ht("scroll",n)}switch(t){case"input":Rm(n),u6(n,s,!0);break;case"textarea":Rm(n),d6(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=iy)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=iE(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=o.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof n.is=="string"?i=o.createElement(t,{is:n.is}):(i=o.createElement(t),t==="select"&&(o=i,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):i=o.createElementNS(i,t),i[xo]=e,i[Vp]=n,PA(i,e,!1,!1),e.stateNode=i;e:{switch(o=D3(t,n),t){case"dialog":Ht("cancel",i),Ht("close",i),r=n;break;case"iframe":case"object":case"embed":Ht("load",i),r=n;break;case"video":case"audio":for(r=0;r<tp.length;r++)Ht(tp[r],i);r=n;break;case"source":Ht("error",i),r=n;break;case"img":case"image":case"link":Ht("error",i),Ht("load",i),r=n;break;case"details":Ht("toggle",i),r=n;break;case"input":c6(i,n),r=M3(i,n),Ht("invalid",i);break;case"option":r=n;break;case"select":i._wrapperState={wasMultiple:!!n.multiple},r=rn({},n,{value:void 0}),Ht("invalid",i);break;case"textarea":h6(i,n),r=N3(i,n),Ht("invalid",i);break;default:r=n}I3(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?oE(i,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&rE(i,u)):s==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&Ip(i,u):typeof u=="number"&&Ip(i,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fp.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ht("scroll",i):u!=null&&e4(i,s,u,o))}switch(t){case"input":Rm(i),u6(i,n,!1);break;case"textarea":Rm(i),d6(i);break;case"option":n.value!=null&&i.setAttribute("value",""+jl(n.value));break;case"select":i.multiple=!!n.multiple,s=n.value,s!=null?Bh(i,!!n.multiple,s,!1):n.defaultValue!=null&&Bh(i,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(i.onclick=iy)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yi(e),null;case 6:if(i&&e.stateNode!=null)TA(i,e,i.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(se(166));if(t=Tc(Xp.current),Tc(bo.current),Hm(e)){if(n=e.stateNode,t=e.memoizedProps,n[xo]=e,(s=n.nodeValue!==t)&&(i=Ar,i!==null))switch(i.tag){case 3:jm(n.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&jm(n.nodeValue,t,(i.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[xo]=e,e.stateNode=n}return yi(e),null;case 13:if(Bt(tn),n=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Xt&&Er!==null&&e.mode&1&&!(e.flags&128))$E(),Jd(),e.flags|=98560,s=!1;else if(s=Hm(e),n!==null&&n.dehydrated!==null){if(i===null){if(!s)throw Error(se(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(se(317));s[xo]=e}else Jd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yi(e),s=!1}else Ls!==null&&(mx(Ls),Ls=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(i!==null&&i.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(i===null||tn.current&1?Fn===0&&(Fn=3):D4())),e.updateQueue!==null&&(e.flags|=4),yi(e),null);case 4:return ef(),lx(i,e),i===null&&Bp(e.stateNode.containerInfo),yi(e),null;case 10:return _4(e.type._context),yi(e),null;case 17:return sr(e.type)&&ry(),yi(e),null;case 19:if(Bt(tn),s=e.memoizedState,s===null)return yi(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Vf(s,!1);else{if(Fn!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(o=hy(i),o!==null){for(e.flags|=128,Vf(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,i=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return Ot(tn,tn.current&1|2),e.child}i=i.sibling}s.tail!==null&&mn()>nf&&(e.flags|=128,n=!0,Vf(s,!1),e.lanes=4194304)}else{if(!n)if(i=hy(o),i!==null){if(e.flags|=128,n=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Vf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Xt)return yi(e),null}else 2*mn()-s.renderingStartTime>nf&&t!==1073741824&&(e.flags|=128,n=!0,Vf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=mn(),e.sibling=null,t=tn.current,Ot(tn,n?t&1|2:t&1),e):(yi(e),null);case 22:case 23:return I4(),n=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?wr&1073741824&&(yi(e),e.subtreeFlags&6&&(e.flags|=8192)):yi(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function cM(i,e){switch(g4(e),e.tag){case 1:return sr(e.type)&&ry(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return ef(),Bt(rr),Bt(Pi),E4(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return b4(e),null;case 13:if(Bt(tn),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(se(340));Jd()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return Bt(tn),null;case 4:return ef(),null;case 10:return _4(e.type._context),null;case 22:case 23:return I4(),null;case 24:return null;default:return null}}var Um=!1,Ei=!1,uM=typeof WeakSet=="function"?WeakSet:Set,_e=null;function jh(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){cn(i,e,n)}else t.current=null}function cx(i,e,t){try{t()}catch(n){cn(i,e,n)}}var tb=!1;function hM(i,e){if(X3=ey,i=FE(),f4(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var r=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,u=-1,h=0,f=0,m=i,g=null;t:for(;;){for(var v;m!==t||r!==0&&m.nodeType!==3||(a=o+r),m!==s||n!==0&&m.nodeType!==3||(u=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===i)break t;if(g===t&&++h===r&&(a=o),g===s&&++f===n&&(u=o),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}t=a===-1||u===-1?null:{start:a,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for($3={focusedElem:i,selectionRange:t},ey=!1,_e=e;_e!==null;)if(e=_e,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,_e=i;else for(;_e!==null;){e=_e;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var S=y.memoizedProps,C=y.memoizedState,b=e.stateNode,E=b.getSnapshotBeforeUpdate(e.elementType===e.type?S:ms(e.type,S),C);b.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(A){cn(e,e.return,A)}if(i=e.sibling,i!==null){i.return=e.return,_e=i;break}_e=e.return}return y=tb,tb=!1,y}function kp(i,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&i)===i){var s=r.destroy;r.destroy=void 0,s!==void 0&&cx(e,t,s)}r=r.next}while(r!==n)}}function t2(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function ux(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function MA(i){var e=i.alternate;e!==null&&(i.alternate=null,MA(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[xo],delete e[Vp],delete e[q3],delete e[$T],delete e[YT])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function RA(i){return i.tag===5||i.tag===3||i.tag===4}function nb(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||RA(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function hx(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=iy));else if(n!==4&&(i=i.child,i!==null))for(hx(i,e,t),i=i.sibling;i!==null;)hx(i,e,t),i=i.sibling}function dx(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(n!==4&&(i=i.child,i!==null))for(dx(i,e,t),i=i.sibling;i!==null;)dx(i,e,t),i=i.sibling}var ri=null,Rs=!1;function Xa(i,e,t){for(t=t.child;t!==null;)LA(i,e,t),t=t.sibling}function LA(i,e,t){if(wo&&typeof wo.onCommitFiberUnmount=="function")try{wo.onCommitFiberUnmount($y,t)}catch{}switch(t.tag){case 5:Ei||jh(t,e);case 6:var n=ri,r=Rs;ri=null,Xa(i,e,t),ri=n,Rs=r,ri!==null&&(Rs?(i=ri,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):ri.removeChild(t.stateNode));break;case 18:ri!==null&&(Rs?(i=ri,t=t.stateNode,i.nodeType===8?X_(i.parentNode,t):i.nodeType===1&&X_(i,t),jp(i)):X_(ri,t.stateNode));break;case 4:n=ri,r=Rs,ri=t.stateNode.containerInfo,Rs=!0,Xa(i,e,t),ri=n,Rs=r;break;case 0:case 11:case 14:case 15:if(!Ei&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&cx(t,e,o),r=r.next}while(r!==n)}Xa(i,e,t);break;case 1:if(!Ei&&(jh(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){cn(t,e,a)}Xa(i,e,t);break;case 21:Xa(i,e,t);break;case 22:t.mode&1?(Ei=(n=Ei)||t.memoizedState!==null,Xa(i,e,t),Ei=n):Xa(i,e,t);break;default:Xa(i,e,t)}}function ib(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new uM),e.forEach(function(n){var r=xM.bind(null,i,n);t.has(n)||(t.add(n),n.then(r,r))})}}function fs(i,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];try{var s=i,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ri=a.stateNode,Rs=!1;break e;case 3:ri=a.stateNode.containerInfo,Rs=!0;break e;case 4:ri=a.stateNode.containerInfo,Rs=!0;break e}a=a.return}if(ri===null)throw Error(se(160));LA(s,o,r),ri=null,Rs=!1;var u=r.alternate;u!==null&&(u.return=null),r.return=null}catch(h){cn(r,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NA(e,i),e=e.sibling}function NA(i,e){var t=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(fs(e,i),Js(i),n&4){try{kp(3,i,i.return),t2(3,i)}catch(S){cn(i,i.return,S)}try{kp(5,i,i.return)}catch(S){cn(i,i.return,S)}}break;case 1:fs(e,i),Js(i),n&512&&t!==null&&jh(t,t.return);break;case 5:if(fs(e,i),Js(i),n&512&&t!==null&&jh(t,t.return),i.flags&32){var r=i.stateNode;try{Ip(r,"")}catch(S){cn(i,i.return,S)}}if(n&4&&(r=i.stateNode,r!=null)){var s=i.memoizedProps,o=t!==null?t.memoizedProps:s,a=i.type,u=i.updateQueue;if(i.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&tE(r,s),D3(a,o);var h=D3(a,s);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?oE(r,m):f==="dangerouslySetInnerHTML"?rE(r,m):f==="children"?Ip(r,m):e4(r,f,m,h)}switch(a){case"input":R3(r,s);break;case"textarea":nE(r,s);break;case"select":var g=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Bh(r,!!s.multiple,v,!1):g!==!!s.multiple&&(s.defaultValue!=null?Bh(r,!!s.multiple,s.defaultValue,!0):Bh(r,!!s.multiple,s.multiple?[]:"",!1))}r[Vp]=s}catch(S){cn(i,i.return,S)}}break;case 6:if(fs(e,i),Js(i),n&4){if(i.stateNode===null)throw Error(se(162));r=i.stateNode,s=i.memoizedProps;try{r.nodeValue=s}catch(S){cn(i,i.return,S)}}break;case 3:if(fs(e,i),Js(i),n&4&&t!==null&&t.memoizedState.isDehydrated)try{jp(e.containerInfo)}catch(S){cn(i,i.return,S)}break;case 4:fs(e,i),Js(i);break;case 13:fs(e,i),Js(i),r=i.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(N4=mn())),n&4&&ib(i);break;case 22:if(f=t!==null&&t.memoizedState!==null,i.mode&1?(Ei=(h=Ei)||f,fs(e,i),Ei=h):fs(e,i),Js(i),n&8192){if(h=i.memoizedState!==null,(i.stateNode.isHidden=h)&&!f&&i.mode&1)for(_e=i,f=i.child;f!==null;){for(m=_e=f;_e!==null;){switch(g=_e,v=g.child,g.tag){case 0:case 11:case 14:case 15:kp(4,g,g.return);break;case 1:jh(g,g.return);var y=g.stateNode;if(typeof y.componentWillUnmount=="function"){n=g,t=g.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(S){cn(n,t,S)}}break;case 5:jh(g,g.return);break;case 22:if(g.memoizedState!==null){sb(m);continue}}v!==null?(v.return=g,_e=v):sb(m)}f=f.sibling}e:for(f=null,m=i;;){if(m.tag===5){if(f===null){f=m;try{r=m.stateNode,h?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=sE("display",o))}catch(S){cn(i,i.return,S)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(S){cn(i,i.return,S)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===i)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===i)break e;for(;m.sibling===null;){if(m.return===null||m.return===i)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:fs(e,i),Js(i),n&4&&ib(i);break;case 21:break;default:fs(e,i),Js(i)}}function Js(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if(RA(t)){var n=t;break e}t=t.return}throw Error(se(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(Ip(r,""),n.flags&=-33);var s=nb(i);dx(i,s,r);break;case 3:case 4:var o=n.stateNode.containerInfo,a=nb(i);hx(i,a,o);break;default:throw Error(se(161))}}catch(u){cn(i,i.return,u)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function dM(i,e,t){_e=i,FA(i)}function FA(i,e,t){for(var n=(i.mode&1)!==0;_e!==null;){var r=_e,s=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||Um;if(!o){var a=r.alternate,u=a!==null&&a.memoizedState!==null||Ei;a=Um;var h=Ei;if(Um=o,(Ei=u)&&!h)for(_e=r;_e!==null;)o=_e,u=o.child,o.tag===22&&o.memoizedState!==null?ob(r):u!==null?(u.return=o,_e=u):ob(r);for(;s!==null;)_e=s,FA(s),s=s.sibling;_e=r,Um=a,Ei=h}rb(i)}else r.subtreeFlags&8772&&s!==null?(s.return=r,_e=s):rb(i)}}function rb(i){for(;_e!==null;){var e=_e;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ei||t2(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ei)if(t===null)n.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:ms(e.type,t.memoizedProps);n.componentDidUpdate(r,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&B6(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}B6(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&jp(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Ei||e.flags&512&&ux(e)}catch(g){cn(e,e.return,g)}}if(e===i){_e=null;break}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}}function sb(i){for(;_e!==null;){var e=_e;if(e===i){_e=null;break}var t=e.sibling;if(t!==null){t.return=e.return,_e=t;break}_e=e.return}}function ob(i){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{t2(4,e)}catch(u){cn(e,t,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(u){cn(e,r,u)}}var s=e.return;try{ux(e)}catch(u){cn(e,s,u)}break;case 5:var o=e.return;try{ux(e)}catch(u){cn(e,o,u)}}}catch(u){cn(e,e.return,u)}if(e===i){_e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,_e=a;break}_e=e.return}}var fM=Math.ceil,py=Ta.ReactCurrentDispatcher,R4=Ta.ReactCurrentOwner,Zr=Ta.ReactCurrentBatchConfig,ft=0,Kn=null,En=null,si=0,wr=0,Hh=$l(0),Fn=0,qp=null,Ru=0,n2=0,L4=0,Tp=null,tr=null,N4=0,nf=1/0,Go=null,gy=!1,fx=null,Dl=null,Vm=!1,Ml=null,my=0,Mp=0,px=null,p1=-1,g1=0;function Ii(){return ft&6?mn():p1!==-1?p1:p1=mn()}function Ol(i){return i.mode&1?ft&2&&si!==0?si&-si:qT.transition!==null?(g1===0&&(g1=vE()),g1):(i=Ct,i!==0||(i=window.event,i=i===void 0?16:AE(i.type)),i):1}function Is(i,e,t,n){if(50<Mp)throw Mp=0,px=null,Error(se(185));x0(i,t,n),(!(ft&2)||i!==Kn)&&(i===Kn&&(!(ft&2)&&(n2|=t),Fn===4&&el(i,si)),or(i,n),t===1&&ft===0&&!(e.mode&1)&&(nf=mn()+500,Jy&&Yl()))}function or(i,e){var t=i.callbackNode;qk(i,e);var n=Z1(i,i===Kn?si:0);if(n===0)t!==null&&g6(t),i.callbackNode=null,i.callbackPriority=0;else if(e=n&-n,i.callbackPriority!==e){if(t!=null&&g6(t),e===1)i.tag===0?KT(ab.bind(null,i)):VE(ab.bind(null,i)),WT(function(){!(ft&6)&&Yl()}),t=null;else{switch(_E(n)){case 1:t=s4;break;case 4:t=mE;break;case 16:t=J1;break;case 536870912:t=yE;break;default:t=J1}t=BA(t,IA.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function IA(i,e){if(p1=-1,g1=0,ft&6)throw Error(se(327));var t=i.callbackNode;if($h()&&i.callbackNode!==t)return null;var n=Z1(i,i===Kn?si:0);if(n===0)return null;if(n&30||n&i.expiredLanes||e)e=yy(i,n);else{e=n;var r=ft;ft|=2;var s=OA();(Kn!==i||si!==e)&&(Go=null,nf=mn()+500,Cu(i,e));do try{mM();break}catch(a){DA(i,a)}while(!0);v4(),py.current=s,ft=r,En!==null?e=0:(Kn=null,si=0,e=Fn)}if(e!==0){if(e===2&&(r=G3(i),r!==0&&(n=r,e=gx(i,r))),e===1)throw t=qp,Cu(i,0),el(i,n),or(i,mn()),t;if(e===6)el(i,n);else{if(r=i.current.alternate,!(n&30)&&!pM(r)&&(e=yy(i,n),e===2&&(s=G3(i),s!==0&&(n=s,e=gx(i,s))),e===1))throw t=qp,Cu(i,0),el(i,n),or(i,mn()),t;switch(i.finishedWork=r,i.finishedLanes=n,e){case 0:case 1:throw Error(se(345));case 2:_c(i,tr,Go);break;case 3:if(el(i,n),(n&130023424)===n&&(e=N4+500-mn(),10<e)){if(Z1(i,0)!==0)break;if(r=i.suspendedLanes,(r&n)!==n){Ii(),i.pingedLanes|=i.suspendedLanes&r;break}i.timeoutHandle=K3(_c.bind(null,i,tr,Go),e);break}_c(i,tr,Go);break;case 4:if(el(i,n),(n&4194240)===n)break;for(e=i.eventTimes,r=-1;0<n;){var o=31-Fs(n);s=1<<o,o=e[o],o>r&&(r=o),n&=~s}if(n=r,n=mn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*fM(n/1960))-n,10<n){i.timeoutHandle=K3(_c.bind(null,i,tr,Go),n);break}_c(i,tr,Go);break;case 5:_c(i,tr,Go);break;default:throw Error(se(329))}}}return or(i,mn()),i.callbackNode===t?IA.bind(null,i):null}function gx(i,e){var t=Tp;return i.current.memoizedState.isDehydrated&&(Cu(i,e).flags|=256),i=yy(i,e),i!==2&&(e=tr,tr=t,e!==null&&mx(e)),i}function mx(i){tr===null?tr=i:tr.push.apply(tr,i)}function pM(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var r=t[n],s=r.getSnapshot;r=r.value;try{if(!Os(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function el(i,e){for(e&=~L4,e&=~n2,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-Fs(e),n=1<<t;i[t]=-1,e&=~n}}function ab(i){if(ft&6)throw Error(se(327));$h();var e=Z1(i,0);if(!(e&1))return or(i,mn()),null;var t=yy(i,e);if(i.tag!==0&&t===2){var n=G3(i);n!==0&&(e=n,t=gx(i,n))}if(t===1)throw t=qp,Cu(i,0),el(i,e),or(i,mn()),t;if(t===6)throw Error(se(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,_c(i,tr,Go),or(i,mn()),null}function F4(i,e){var t=ft;ft|=1;try{return i(e)}finally{ft=t,ft===0&&(nf=mn()+500,Jy&&Yl())}}function Lu(i){Ml!==null&&Ml.tag===0&&!(ft&6)&&$h();var e=ft;ft|=1;var t=Zr.transition,n=Ct;try{if(Zr.transition=null,Ct=1,i)return i()}finally{Ct=n,Zr.transition=t,ft=e,!(ft&6)&&Yl()}}function I4(){wr=Hh.current,Bt(Hh)}function Cu(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,VT(t)),En!==null)for(t=En.return;t!==null;){var n=t;switch(g4(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ry();break;case 3:ef(),Bt(rr),Bt(Pi),E4();break;case 5:b4(n);break;case 4:ef();break;case 13:Bt(tn);break;case 19:Bt(tn);break;case 10:_4(n.type._context);break;case 22:case 23:I4()}t=t.return}if(Kn=i,En=i=zl(i.current,null),si=wr=e,Fn=0,qp=null,L4=n2=Ru=0,tr=Tp=null,kc!==null){for(e=0;e<kc.length;e++)if(t=kc[e],n=t.interleaved,n!==null){t.interleaved=null;var r=n.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,n.next=o}t.pending=n}kc=null}return i}function DA(i,e){do{var t=En;try{if(v4(),h1.current=fy,dy){for(var n=nn.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}dy=!1}if(Mu=0,Yn=Ln=nn=null,Pp=!1,$p=0,R4.current=null,t===null||t.return===null){Fn=1,qp=e,En=null;break}e:{var s=i,o=t.return,a=t,u=e;if(e=si,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=a,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=Y6(o);if(v!==null){v.flags&=-257,K6(v,o,a,s,e),v.mode&1&&$6(s,h,e),e=v,u=h;var y=e.updateQueue;if(y===null){var S=new Set;S.add(u),e.updateQueue=S}else y.add(u);break e}else{if(!(e&1)){$6(s,h,e),D4();break e}u=Error(se(426))}}else if(Xt&&a.mode&1){var C=Y6(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),K6(C,o,a,s,e),m4(tf(u,a));break e}}s=u=tf(u,a),Fn!==4&&(Fn=2),Tp===null?Tp=[s]:Tp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=_A(s,u,e);G6(s,b);break e;case 1:a=u;var E=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Dl===null||!Dl.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=xA(s,a,e);G6(s,A);break e}}s=s.return}while(s!==null)}jA(t)}catch(k){e=k,En===t&&t!==null&&(En=t=t.return);continue}break}while(!0)}function OA(){var i=py.current;return py.current=fy,i===null?fy:i}function D4(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),Kn===null||!(Ru&268435455)&&!(n2&268435455)||el(Kn,si)}function yy(i,e){var t=ft;ft|=2;var n=OA();(Kn!==i||si!==e)&&(Go=null,Cu(i,e));do try{gM();break}catch(r){DA(i,r)}while(!0);if(v4(),ft=t,py.current=n,En!==null)throw Error(se(261));return Kn=null,si=0,Fn}function gM(){for(;En!==null;)zA(En)}function mM(){for(;En!==null&&!Gk();)zA(En)}function zA(i){var e=GA(i.alternate,i,wr);i.memoizedProps=i.pendingProps,e===null?jA(i):En=e,R4.current=null}function jA(i){var e=i;do{var t=e.alternate;if(i=e.return,e.flags&32768){if(t=cM(t,e),t!==null){t.flags&=32767,En=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Fn=6,En=null;return}}else if(t=lM(t,e,wr),t!==null){En=t;return}if(e=e.sibling,e!==null){En=e;return}En=e=i}while(e!==null);Fn===0&&(Fn=5)}function _c(i,e,t){var n=Ct,r=Zr.transition;try{Zr.transition=null,Ct=1,yM(i,e,t,n)}finally{Zr.transition=r,Ct=n}return null}function yM(i,e,t,n){do $h();while(Ml!==null);if(ft&6)throw Error(se(327));t=i.finishedWork;var r=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(se(177));i.callbackNode=null,i.callbackPriority=0;var s=t.lanes|t.childLanes;if(Qk(i,s),i===Kn&&(En=Kn=null,si=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Vm||(Vm=!0,BA(J1,function(){return $h(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Zr.transition,Zr.transition=null;var o=Ct;Ct=1;var a=ft;ft|=4,R4.current=null,hM(i,t),NA(t,i),OT($3),ey=!!X3,$3=X3=null,i.current=t,dM(t),Bk(),ft=a,Ct=o,Zr.transition=s}else i.current=t;if(Vm&&(Vm=!1,Ml=i,my=r),s=i.pendingLanes,s===0&&(Dl=null),Wk(t.stateNode),or(i,mn()),e!==null)for(n=i.onRecoverableError,t=0;t<e.length;t++)r=e[t],n(r.value,{componentStack:r.stack,digest:r.digest});if(gy)throw gy=!1,i=fx,fx=null,i;return my&1&&i.tag!==0&&$h(),s=i.pendingLanes,s&1?i===px?Mp++:(Mp=0,px=i):Mp=0,Yl(),null}function $h(){if(Ml!==null){var i=_E(my),e=Zr.transition,t=Ct;try{if(Zr.transition=null,Ct=16>i?16:i,Ml===null)var n=!1;else{if(i=Ml,Ml=null,my=0,ft&6)throw Error(se(331));var r=ft;for(ft|=4,_e=i.current;_e!==null;){var s=_e,o=s.child;if(_e.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var h=a[u];for(_e=h;_e!==null;){var f=_e;switch(f.tag){case 0:case 11:case 15:kp(8,f,s)}var m=f.child;if(m!==null)m.return=f,_e=m;else for(;_e!==null;){f=_e;var g=f.sibling,v=f.return;if(MA(f),f===h){_e=null;break}if(g!==null){g.return=v,_e=g;break}_e=v}}}var y=s.alternate;if(y!==null){var S=y.child;if(S!==null){y.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}_e=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,_e=o;else e:for(;_e!==null;){if(s=_e,s.flags&2048)switch(s.tag){case 0:case 11:case 15:kp(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,_e=b;break e}_e=s.return}}var E=i.current;for(_e=E;_e!==null;){o=_e;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,_e=x;else e:for(o=E;_e!==null;){if(a=_e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:t2(9,a)}}catch(k){cn(a,a.return,k)}if(a===o){_e=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,_e=A;break e}_e=a.return}}if(ft=r,Yl(),wo&&typeof wo.onPostCommitFiberRoot=="function")try{wo.onPostCommitFiberRoot($y,i)}catch{}n=!0}return n}finally{Ct=t,Zr.transition=e}}return!1}function lb(i,e,t){e=tf(t,e),e=_A(i,e,1),i=Il(i,e,1),e=Ii(),i!==null&&(x0(i,1,e),or(i,e))}function cn(i,e,t){if(i.tag===3)lb(i,i,t);else for(;e!==null;){if(e.tag===3){lb(e,i,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Dl===null||!Dl.has(n))){i=tf(t,i),i=xA(e,i,1),e=Il(e,i,1),i=Ii(),e!==null&&(x0(e,1,i),or(e,i));break}}e=e.return}}function vM(i,e,t){var n=i.pingCache;n!==null&&n.delete(e),e=Ii(),i.pingedLanes|=i.suspendedLanes&t,Kn===i&&(si&t)===t&&(Fn===4||Fn===3&&(si&130023424)===si&&500>mn()-N4?Cu(i,0):L4|=t),or(i,e)}function HA(i,e){e===0&&(i.mode&1?(e=Fm,Fm<<=1,!(Fm&130023424)&&(Fm=4194304)):e=1);var t=Ii();i=Aa(i,e),i!==null&&(x0(i,e,t),or(i,t))}function _M(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),HA(i,t)}function xM(i,e){var t=0;switch(i.tag){case 13:var n=i.stateNode,r=i.memoizedState;r!==null&&(t=r.retryLane);break;case 19:n=i.stateNode;break;default:throw Error(se(314))}n!==null&&n.delete(e),HA(i,t)}var GA;GA=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||rr.current)nr=!0;else{if(!(i.lanes&t)&&!(e.flags&128))return nr=!1,aM(i,e,t);nr=!!(i.flags&131072)}else nr=!1,Xt&&e.flags&1048576&&WE(e,ay,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;f1(i,e),i=e.pendingProps;var r=Qd(e,Pi.current);Xh(e,t),r=C4(null,e,n,i,r,t);var s=P4();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sr(n)?(s=!0,sy(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,S4(e),r.updater=e2,e.stateNode=r,r._reactInternals=e,nx(e,n,i,t),e=sx(null,e,n,!0,s,t)):(e.tag=0,Xt&&s&&p4(e),Ni(null,e,r,t),e=e.child),e;case 16:n=e.elementType;e:{switch(f1(i,e),i=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=wM(n),i=ms(n,i),r){case 0:e=rx(null,e,n,i,t);break e;case 1:e=J6(null,e,n,i,t);break e;case 11:e=q6(null,e,n,i,t);break e;case 14:e=Q6(null,e,n,ms(n.type,i),t);break e}throw Error(se(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:ms(n,r),rx(i,e,n,r,t);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:ms(n,r),J6(i,e,n,r,t);case 3:e:{if(EA(e),i===null)throw Error(se(387));n=e.pendingProps,s=e.memoizedState,r=s.element,QE(i,e),uy(e,n,null,t);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=tf(Error(se(423)),e),e=Z6(i,e,n,t,r);break e}else if(n!==r){r=tf(Error(se(424)),e),e=Z6(i,e,n,t,r);break e}else for(Er=Fl(e.stateNode.containerInfo.firstChild),Ar=e,Xt=!0,Ls=null,t=KE(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Jd(),n===r){e=Ca(i,e,t);break e}Ni(i,e,n,t)}e=e.child}return e;case 5:return JE(e),i===null&&Z3(e),n=e.type,r=e.pendingProps,s=i!==null?i.memoizedProps:null,o=r.children,Y3(n,r)?o=null:s!==null&&Y3(n,s)&&(e.flags|=32),bA(i,e),Ni(i,e,o,t),e.child;case 6:return i===null&&Z3(e),null;case 13:return AA(i,e,t);case 4:return w4(e,e.stateNode.containerInfo),n=e.pendingProps,i===null?e.child=Zd(e,null,n,t):Ni(i,e,n,t),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:ms(n,r),q6(i,e,n,r,t);case 7:return Ni(i,e,e.pendingProps,t),e.child;case 8:return Ni(i,e,e.pendingProps.children,t),e.child;case 12:return Ni(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ot(ly,n._currentValue),n._currentValue=o,s!==null)if(Os(s.value,o)){if(s.children===r.children&&!rr.current){e=Ca(i,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===n){if(s.tag===1){u=va(-1,t&-t),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}s.lanes|=t,u=s.alternate,u!==null&&(u.lanes|=t),ex(s.return,t,e),a.lanes|=t;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(se(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),ex(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ni(i,e,r.children,t),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,Xh(e,t),r=ts(r),n=n(r),e.flags|=1,Ni(i,e,n,t),e.child;case 14:return n=e.type,r=ms(n,e.pendingProps),r=ms(n.type,r),Q6(i,e,n,r,t);case 15:return SA(i,e,e.type,e.pendingProps,t);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:ms(n,r),f1(i,e),e.tag=1,sr(n)?(i=!0,sy(e)):i=!1,Xh(e,t),vA(e,n,r),nx(e,n,r,t),sx(null,e,n,!0,i,t);case 19:return CA(i,e,t);case 22:return wA(i,e,t)}throw Error(se(156,e.tag))};function BA(i,e){return gE(i,e)}function SM(i,e,t,n){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(i,e,t,n){return new SM(i,e,t,n)}function O4(i){return i=i.prototype,!(!i||!i.isReactComponent)}function wM(i){if(typeof i=="function")return O4(i)?1:0;if(i!=null){if(i=i.$$typeof,i===n4)return 11;if(i===i4)return 14}return 2}function zl(i,e){var t=i.alternate;return t===null?(t=Jr(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function m1(i,e,t,n,r,s){var o=2;if(n=i,typeof i=="function")O4(i)&&(o=1);else if(typeof i=="string")o=5;else e:switch(i){case Mh:return Pu(t.children,r,s,e);case t4:o=8,r|=8;break;case C3:return i=Jr(12,t,e,r|2),i.elementType=C3,i.lanes=s,i;case P3:return i=Jr(13,t,e,r),i.elementType=P3,i.lanes=s,i;case k3:return i=Jr(19,t,e,r),i.elementType=k3,i.lanes=s,i;case J8:return i2(t,r,s,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case q8:o=10;break e;case Q8:o=9;break e;case n4:o=11;break e;case i4:o=14;break e;case Qa:o=16,n=null;break e}throw Error(se(130,i==null?i:typeof i,""))}return e=Jr(o,t,e,r),e.elementType=i,e.type=n,e.lanes=s,e}function Pu(i,e,t,n){return i=Jr(7,i,n,e),i.lanes=t,i}function i2(i,e,t,n){return i=Jr(22,i,n,e),i.elementType=J8,i.lanes=t,i.stateNode={isHidden:!1},i}function e3(i,e,t){return i=Jr(6,i,null,e),i.lanes=t,i}function t3(i,e,t){return e=Jr(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function bM(i,e,t,n,r){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=I_(0),this.expirationTimes=I_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I_(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function z4(i,e,t,n,r,s,o,a,u){return i=new bM(i,e,t,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Jr(3,null,null,e),i.current=s,s.stateNode=i,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},S4(s),i}function EM(i,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Th,key:n==null?null:""+n,children:i,containerInfo:e,implementation:t}}function UA(i){if(!i)return Hl;i=i._reactInternals;e:{if(Hu(i)!==i||i.tag!==1)throw Error(se(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(i.tag===1){var t=i.type;if(sr(t))return UE(i,t,e)}return e}function VA(i,e,t,n,r,s,o,a,u){return i=z4(t,n,!0,i,r,s,o,a,u),i.context=UA(null),t=i.current,n=Ii(),r=Ol(t),s=va(n,r),s.callback=e??null,Il(t,s,r),i.current.lanes=r,x0(i,r,n),or(i,n),i}function r2(i,e,t,n){var r=e.current,s=Ii(),o=Ol(r);return t=UA(t),e.context===null?e.context=t:e.pendingContext=t,e=va(s,o),e.payload={element:i},n=n===void 0?null:n,n!==null&&(e.callback=n),i=Il(r,e,o),i!==null&&(Is(i,r,o,s),u1(i,r,o)),o}function vy(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function cb(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function j4(i,e){cb(i,e),(i=i.alternate)&&cb(i,e)}function AM(){return null}var WA=typeof reportError=="function"?reportError:function(i){console.error(i)};function H4(i){this._internalRoot=i}s2.prototype.render=H4.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(se(409));r2(i,e,null,null)};s2.prototype.unmount=H4.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Lu(function(){r2(null,i,null,null)}),e[Ea]=null}};function s2(i){this._internalRoot=i}s2.prototype.unstable_scheduleHydration=function(i){if(i){var e=wE();i={blockedOn:null,target:i,priority:e};for(var t=0;t<Za.length&&e!==0&&e<Za[t].priority;t++);Za.splice(t,0,i),t===0&&EE(i)}};function G4(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o2(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ub(){}function CM(i,e,t,n,r){if(r){if(typeof n=="function"){var s=n;n=function(){var h=vy(o);s.call(h)}}var o=VA(e,n,i,0,null,!1,!1,"",ub);return i._reactRootContainer=o,i[Ea]=o.current,Bp(i.nodeType===8?i.parentNode:i),Lu(),o}for(;r=i.lastChild;)i.removeChild(r);if(typeof n=="function"){var a=n;n=function(){var h=vy(u);a.call(h)}}var u=z4(i,0,!1,null,null,!1,!1,"",ub);return i._reactRootContainer=u,i[Ea]=u.current,Bp(i.nodeType===8?i.parentNode:i),Lu(function(){r2(e,u,t,n)}),u}function a2(i,e,t,n,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var u=vy(o);a.call(u)}}r2(e,o,i,r)}else o=CM(t,e,i,r,n);return vy(o)}xE=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=ep(e.pendingLanes);t!==0&&(o4(e,t|1),or(e,mn()),!(ft&6)&&(nf=mn()+500,Yl()))}break;case 13:Lu(function(){var n=Aa(i,1);if(n!==null){var r=Ii();Is(n,i,1,r)}}),j4(i,1)}};a4=function(i){if(i.tag===13){var e=Aa(i,134217728);if(e!==null){var t=Ii();Is(e,i,134217728,t)}j4(i,134217728)}};SE=function(i){if(i.tag===13){var e=Ol(i),t=Aa(i,e);if(t!==null){var n=Ii();Is(t,i,e,n)}j4(i,e)}};wE=function(){return Ct};bE=function(i,e){var t=Ct;try{return Ct=i,e()}finally{Ct=t}};z3=function(i,e,t){switch(e){case"input":if(R3(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==i&&n.form===i.form){var r=Qy(n);if(!r)throw Error(se(90));eE(n),R3(n,r)}}}break;case"textarea":nE(i,t);break;case"select":e=t.value,e!=null&&Bh(i,!!t.multiple,e,!1)}};cE=F4;uE=Lu;var PM={usingClientEntryPoint:!1,Events:[w0,Fh,Qy,aE,lE,F4]},Wf={findFiberByHostInstance:Pc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kM={bundleType:Wf.bundleType,version:Wf.version,rendererPackageName:Wf.rendererPackageName,rendererConfig:Wf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ta.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=fE(i),i===null?null:i.stateNode},findFiberByHostInstance:Wf.findFiberByHostInstance||AM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wm.isDisabled&&Wm.supportsFiber)try{$y=Wm.inject(kM),wo=Wm}catch{}}kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PM;kr.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!G4(e))throw Error(se(200));return EM(i,e,null,t)};kr.createRoot=function(i,e){if(!G4(i))throw Error(se(299));var t=!1,n="",r=WA;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=z4(i,1,!1,null,null,t,!1,n,r),i[Ea]=e.current,Bp(i.nodeType===8?i.parentNode:i),new H4(e)};kr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(se(188)):(i=Object.keys(i).join(","),Error(se(268,i)));return i=fE(e),i=i===null?null:i.stateNode,i};kr.flushSync=function(i){return Lu(i)};kr.hydrate=function(i,e,t){if(!o2(e))throw Error(se(200));return a2(null,i,e,!0,t)};kr.hydrateRoot=function(i,e,t){if(!G4(i))throw Error(se(405));var n=t!=null&&t.hydratedSources||null,r=!1,s="",o=WA;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=VA(e,null,i,1,t??null,r,!1,s,o),i[Ea]=e.current,Bp(i),n)for(i=0;i<n.length;i++)t=n[i],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new s2(e)};kr.render=function(i,e,t){if(!o2(e))throw Error(se(200));return a2(null,i,e,!1,t)};kr.unmountComponentAtNode=function(i){if(!o2(i))throw Error(se(40));return i._reactRootContainer?(Lu(function(){a2(null,null,i,!1,function(){i._reactRootContainer=null,i[Ea]=null})}),!0):!1};kr.unstable_batchedUpdates=F4;kr.unstable_renderSubtreeIntoContainer=function(i,e,t,n){if(!o2(t))throw Error(se(200));if(i==null||i._reactInternals===void 0)throw Error(se(38));return a2(i,e,t,!1,n)};kr.version="18.3.1-next-f1338f8080-20240426";function XA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XA)}catch(i){console.error(i)}}XA(),X8.exports=kr;var TM=X8.exports,hb=TM;E3.createRoot=hb.createRoot,E3.hydrateRoot=hb.hydrateRoot;const MM="modulepreload",RM=function(i){return"/Heatworks/"+i},db={},np=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(u=>{if(u=RM(u),u in db)return;db[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":MM,h||(m.as="script"),m.crossOrigin="",m.href=u,a&&m.setAttribute("nonce",a),document.head.appendChild(m),h)return new Promise((g,v)=>{m.addEventListener("load",g),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var Rp={};Rp.d=(i,e)=>{for(var t in e)Rp.o(e,t)&&!Rp.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})};Rp.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var ze=globalThis.pdfjsLib={};Rp.d(ze,{AbortException:()=>Bu,AnnotationEditorLayer:()=>kS,AnnotationEditorParamsType:()=>Oe,AnnotationEditorType:()=>Ve,AnnotationEditorUIManager:()=>Fu,AnnotationLayer:()=>TL,AnnotationMode:()=>tl,ColorPicker:()=>wy,DOMSVGFactory:()=>Z4,DrawLayer:()=>LS,FeatureTest:()=>Di,GlobalWorkerOptions:()=>ga,ImageKind:()=>y1,InvalidPDFException:()=>YA,MissingPDFException:()=>Gu,OPS:()=>ys,OutputScale:()=>Sx,PDFDataRangeTransport:()=>VC,PDFDateString:()=>X4,PDFWorker:()=>Kh,PasswordResponses:()=>IM,PermissionFlag:()=>FM,PixelsPerInch:()=>Gl,RenderingCancelledException:()=>V4,TextLayer:()=>Kx,UnexpectedResponseException:()=>h2,Util:()=>Se,VerbosityLevel:()=>l2,XfaLayer:()=>XC,build:()=>cL,createValidAbsoluteUrl:()=>jM,fetchData:()=>f2,getDocument:()=>eL,getFilenameFromUrl:()=>YM,getPdfFilenameFromUrl:()=>KM,getXfaPageViewport:()=>qM,isDataScheme:()=>p2,isPdfFile:()=>W4,noContextMenu:()=>is,normalizeUnicode:()=>WM,setLayerDimensions:()=>Nu,shadow:()=>at,version:()=>lL});const Ci=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),$A=[1,0,0,1,0,0],yx=[.001,0,0,.001,0,0],LM=1e7,n3=1.35,Sr={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},tl={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},NM="pdfjs_internal_editor_",Ve={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Oe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},FM={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},vi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},y1={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},kn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Xf={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},l2={ERRORS:0,WARNINGS:1,INFOS:5},ys={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},IM={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let c2=l2.WARNINGS;function DM(i){Number.isInteger(i)&&(c2=i)}function OM(){return c2}function u2(i){c2>=l2.INFOS&&console.log(`Info: ${i}`)}function Ke(i){c2>=l2.WARNINGS&&console.log(`Warning: ${i}`)}function Gt(i){throw new Error(i)}function Nn(i,e){i||Gt(e)}function zM(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function jM(i,e=null,t=null){if(!i)return null;try{if(t&&typeof i=="string"){if(t.addDefaultProtocol&&i.startsWith("www.")){const r=i.match(/\./g);(r==null?void 0:r.length)>=2&&(i=`http://${i}`)}if(t.tryConvertEncoding)try{i=VM(i)}catch{}}const n=e?new URL(i,e):new URL(i);if(zM(n))return n}catch{}return null}function at(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Kl=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class vx extends Kl{constructor(e,t){super(e,"PasswordException"),this.code=t}}class _x extends Kl{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class YA extends Kl{constructor(e){super(e,"InvalidPDFException")}}class Gu extends Kl{constructor(e){super(e,"MissingPDFException")}}class h2 extends Kl{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class HM extends Kl{constructor(e){super(e,"FormatError")}}class Bu extends Kl{constructor(e){super(e,"AbortException")}}function KA(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Gt("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const n=[];for(let r=0;r<e;r+=t){const s=Math.min(r+t,e),o=i.subarray(r,s);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function d2(i){typeof i!="string"&&Gt("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function GM(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function B4(i){const e=Object.create(null);for(const[t,n]of i)e[t]=n;return e}function BM(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function UM(){try{return new Function(""),!0}catch{return!1}}class Di{static get isLittleEndian(){return at(this,"isLittleEndian",BM())}static get isEvalSupported(){return at(this,"isEvalSupported",UM())}static get isOffscreenCanvasSupported(){return at(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?at(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):at(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return at(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const i3=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var Sa,b3,v1,xx;let Se=(b3=class{static makeHexColor(e,t,n){return`#${i3[e]}${i3[t]}${i3[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[n,r]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[r,s]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],s[0],o[0]),Math.min(n[1],r[1],s[1],o[1]),Math.max(n[0],r[0],s[0],o[0]),Math.max(n[1],r[1],s[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(n+o)/2,u=Math.sqrt((n+o)**2-4*(n*o-s*r))/2,h=a+u||1,f=a-u||1;return[Math.sqrt(h),Math.sqrt(f)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>o?null:[n,s,r,o]}static bezierBoundingBox(e,t,n,r,s,o,a,u,h){return h?(h[0]=Math.min(h[0],e,a),h[1]=Math.min(h[1],t,u),h[2]=Math.max(h[2],e,a),h[3]=Math.max(h[3],t,u)):h=[Math.min(e,a),Math.min(t,u),Math.max(e,a),Math.max(t,u)],R(this,Sa,xx).call(this,e,n,s,a,t,r,o,u,3*(-e+3*(n-s)+a),6*(e-2*n+s),3*(n-e),h),R(this,Sa,xx).call(this,e,n,s,a,t,r,o,u,3*(-t+3*(r-o)+u),6*(t-2*r+o),3*(r-t),h),h}},Sa=new WeakSet,v1=function(e,t,n,r,s,o,a,u,h,f){if(h<=0||h>=1)return;const m=1-h,g=h*h,v=g*h,y=m*(m*(m*e+3*h*t)+3*g*n)+v*r,S=m*(m*(m*s+3*h*o)+3*g*a)+v*u;f[0]=Math.min(f[0],y),f[1]=Math.min(f[1],S),f[2]=Math.max(f[2],y),f[3]=Math.max(f[3],S)},xx=function(e,t,n,r,s,o,a,u,h,f,m,g){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&R(this,Sa,v1).call(this,e,t,n,r,s,o,a,u,-m/f,g);return}const v=f**2-4*m*h;if(v<0)return;const y=Math.sqrt(v),S=2*h;R(this,Sa,v1).call(this,e,t,n,r,s,o,a,u,(-f+y)/S,g),R(this,Sa,v1).call(this,e,t,n,r,s,o,a,u,(-f-y)/S,g)},F(b3,Sa),b3);function VM(i){return decodeURIComponent(escape(i))}let r3=null,fb=null;function WM(i){return r3||(r3=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,fb=new Map([["","t"]])),i.replaceAll(r3,(e,t,n)=>t?t.normalize("NFKC"):fb.get(n))}function XM(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let e=0;e<32;e++)i[e]=Math.floor(Math.random()*255);return KA(i)}const U4="pdfjs_internal_id_",Do={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function $M(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(KA(i))}const jo="http://www.w3.org/2000/svg",Ac=class Ac{};Ne(Ac,"CSS",96),Ne(Ac,"PDF",72),Ne(Ac,"PDF_TO_CSS_UNITS",Ac.CSS/Ac.PDF);let Gl=Ac;async function f2(i,e="text"){if(ip(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class E0{constructor({viewBox:e,scale:t,rotation:n,offsetX:r=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=r,this.offsetY=s;const a=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let h,f,m,g;switch(n%=360,n<0&&(n+=360),n){case 180:h=-1,f=0,m=0,g=1;break;case 90:h=0,f=1,m=1,g=0;break;case 270:h=0,f=-1,m=-1,g=0;break;case 0:h=1,f=0,m=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(m=-m,g=-g);let v,y,S,C;h===0?(v=Math.abs(u-e[1])*t+r,y=Math.abs(a-e[0])*t+s,S=(e[3]-e[1])*t,C=(e[2]-e[0])*t):(v=Math.abs(a-e[0])*t+r,y=Math.abs(u-e[1])*t+s,S=(e[2]-e[0])*t,C=(e[3]-e[1])*t),this.transform=[h*t,f*t,m*t,g*t,v-h*t*a-m*t*u,y-f*t*a-g*t*u],this.width=S,this.height=C}get rawDims(){const{viewBox:e}=this;return at(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new E0({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){return Se.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Se.applyTransform([e[0],e[1]],this.transform),n=Se.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return Se.applyInverseTransform([e,t],this.transform)}}class V4 extends Kl{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function p2(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function W4(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function YM(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function KM(i,e="document.pdf"){if(typeof i!="string")return e;if(p2(i))return Ke('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(i);let s=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=n.exec(decodeURIComponent(s))[0]}catch{}return s||e}class pb{constructor(){Ne(this,"started",Object.create(null));Ne(this,"times",[])}time(e){e in this.started&&Ke(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ke(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:s}of this.times)e.push(`${n.padEnd(t)} ${s-r}ms
`);return e.join("")}}function ip(i,e){try{const{protocol:t}=e?new URL(i,e):new URL(i);return t==="http:"||t==="https:"}catch{return!1}}function is(i){i.preventDefault()}function gb(i){console.log("Deprecated API usage: "+i)}var ig;class X4{static toDateObject(e){if(!e||typeof e!="string")return null;d(this,ig)||T(this,ig,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=d(this,ig).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let m=parseInt(t[9],10)||0;return m=m>=0&&m<=59?m:0,h==="-"?(o+=f,a+=m):h==="+"&&(o-=f,a-=m),new Date(Date.UTC(n,r,s,o,a,u))}}ig=new WeakMap,F(X4,ig);function qM(i,{scale:e=1,rotation:t=0}){const{width:n,height:r}=i.attributes.style,s=[0,0,parseInt(n),parseInt(r)];return new E0({viewBox:s,scale:e,rotation:t})}function $4(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ke(`Not a valid color format: "${i}"`),[0,0,0])}function QM(i){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of i.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;i.set(t,$4(n))}e.remove()}function en(i){const{a:e,b:t,c:n,d:r,e:s,f:o}=i.getTransform();return[e,t,n,r,s,o]}function Oo(i){const{a:e,b:t,c:n,d:r,e:s,f:o}=i.getTransform().invertSelf();return[e,t,n,r,s,o]}function Nu(i,e,t=!1,n=!0){if(e instanceof E0){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:o}=i,a=Di.isCSSRoundSupported,u=`var(--scale-factor) * ${r}px`,h=`var(--scale-factor) * ${s}px`,f=a?`round(down, ${u}, var(--scale-round-x, 1px))`:`calc(${u})`,m=a?`round(down, ${h}, var(--scale-round-y, 1px))`:`calc(${h})`;!t||e.rotation%180===0?(o.width=f,o.height=m):(o.width=m,o.height=f)}n&&i.setAttribute("data-main-rotation",e.rotation)}class Sx{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var nl,Mc,vs,Rc,rg,sg,Ty,qA,Oi,QA,JA,_1,ZA,bx;const Bo=class Bo{constructor(e){F(this,Oi);F(this,nl,null);F(this,Mc,null);F(this,vs);F(this,Rc,null);F(this,rg,null);T(this,vs,e),d(Bo,sg)||T(Bo,sg,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=T(this,nl,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=d(this,vs)._uiManager._signal;e.addEventListener("contextmenu",is,{signal:t}),e.addEventListener("pointerdown",R(Bo,Ty,qA),{signal:t});const n=T(this,Rc,document.createElement("div"));n.className="buttons",e.append(n);const r=d(this,vs).toolbarPosition;if(r){const{style:s}=e,o=d(this,vs)._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return R(this,Oi,ZA).call(this),e}get div(){return d(this,nl)}hide(){var e;d(this,nl).classList.add("hidden"),(e=d(this,Mc))==null||e.hideDropdown()}show(){var e;d(this,nl).classList.remove("hidden"),(e=d(this,rg))==null||e.shown()}async addAltText(e){const t=await e.render();R(this,Oi,_1).call(this,t),d(this,Rc).prepend(t,d(this,Oi,bx)),T(this,rg,e)}addColorPicker(e){T(this,Mc,e);const t=e.renderButton();R(this,Oi,_1).call(this,t),d(this,Rc).prepend(t,d(this,Oi,bx))}remove(){var e;d(this,nl).remove(),(e=d(this,Mc))==null||e.destroy(),T(this,Mc,null)}};nl=new WeakMap,Mc=new WeakMap,vs=new WeakMap,Rc=new WeakMap,rg=new WeakMap,sg=new WeakMap,Ty=new WeakSet,qA=function(e){e.stopPropagation()},Oi=new WeakSet,QA=function(e){d(this,vs)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},JA=function(e){d(this,vs)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},_1=function(e){const t=d(this,vs)._uiManager._signal;e.addEventListener("focusin",R(this,Oi,QA).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",R(this,Oi,JA).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",is,{signal:t})},ZA=function(){const{editorType:e,_uiManager:t}=d(this,vs),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",d(Bo,sg)[e]),R(this,Oi,_1).call(this,n),n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),d(this,Rc).append(n)},bx=function(){const e=document.createElement("div");return e.className="divider",e},F(Bo,Ty),F(Bo,sg,null);let wx=Bo;var og,Lc,Nc,Vl,eC,tC,nC;class JM{constructor(e){F(this,Vl);F(this,og,null);F(this,Lc,null);F(this,Nc);T(this,Nc,e)}show(e,t,n){const[r,s]=R(this,Vl,tC).call(this,t,n),{style:o}=d(this,Lc)||T(this,Lc,R(this,Vl,eC).call(this));e.append(d(this,Lc)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){d(this,Lc).remove()}}og=new WeakMap,Lc=new WeakMap,Nc=new WeakMap,Vl=new WeakSet,eC=function(){const e=T(this,Lc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",is,{signal:d(this,Nc)._signal});const t=T(this,og,document.createElement("div"));return t.className="buttons",e.append(t),R(this,Vl,nC).call(this),e},tC=function(e,t){let n=0,r=0;for(const s of e){const o=s.y+s.height;if(o<n)continue;const a=s.x+(t?s.width:0);if(o>n){r=a,n=o;continue}t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,n]},nC=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=d(this,Nc)._signal;e.addEventListener("contextmenu",is,{signal:n}),e.addEventListener("click",()=>{d(this,Nc).highlightSelection("floating_button")},{signal:n}),d(this,og).append(e)};function _y(i,e,t){for(const n of t)e.addEventListener(n,i[n].bind(i))}function ZM(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var My;class eR{constructor(){F(this,My,0)}get id(){return`${NM}${Mi(this,My)._++}`}}My=new WeakMap;var Jh,ag,xi,Zh,x1;const xw=class xw{constructor(){F(this,Zh);F(this,Jh,XM());F(this,ag,0);F(this,xi,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const s=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return at(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:s}=e;return R(this,Zh,x1).call(this,`${t}_${n}_${r}_${s}`,e)}async getFromUrl(e){return R(this,Zh,x1).call(this,e,e)}async getFromBlob(e,t){const n=await t;return R(this,Zh,x1).call(this,e,n)}async getFromId(e){d(this,xi)||T(this,xi,new Map);const t=d(this,xi).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){d(this,xi)||T(this,xi,new Map);let n=d(this,xi).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${d(this,Jh)}_${Mi(this,ag)._++}`,refCounter:1,isSvg:!1},d(this,xi).set(e,n),d(this,xi).set(n.id,n),n}getSvgUrl(e){const t=d(this,xi).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;d(this,xi)||T(this,xi,new Map);const t=d(this,xi).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=s.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${d(this,Jh)}_`)}};Jh=new WeakMap,ag=new WeakMap,xi=new WeakMap,Zh=new WeakSet,x1=async function(e,t){d(this,xi)||T(this,xi,new Map);let n=d(this,xi).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${d(this,Jh)}_${Mi(this,ag)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await f2(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const s=xw._isSVGFittingCanvas,o=new FileReader,a=new Image,u=new Promise((h,f)=>{a.onload=()=>{n.bitmap=a,n.isSvg=!0,h()},o.onload=async()=>{const m=n.svgUrl=o.result;a.src=await s?`${m}#svgView(preserveAspectRatio(none))`:m},a.onerror=o.onerror=f});o.readAsDataURL(r),await u}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){console.error(r),n=null}return d(this,xi).set(e,n),n&&d(this,xi).set(n.id,n),n};let Ex=xw;var Un,il,lg,Vn;class tR{constructor(e=128){F(this,Un,[]);F(this,il,!1);F(this,lg);F(this,Vn,-1);T(this,lg,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),d(this,il))return;const u={cmd:e,undo:t,post:n,type:s};if(d(this,Vn)===-1){d(this,Un).length>0&&(d(this,Un).length=0),T(this,Vn,0),d(this,Un).push(u);return}if(o&&d(this,Un)[d(this,Vn)].type===s){a&&(u.undo=d(this,Un)[d(this,Vn)].undo),d(this,Un)[d(this,Vn)]=u;return}const h=d(this,Vn)+1;h===d(this,lg)?d(this,Un).splice(0,1):(T(this,Vn,h),h<d(this,Un).length&&d(this,Un).splice(h)),d(this,Un).push(u)}undo(){if(d(this,Vn)===-1)return;T(this,il,!0);const{undo:e,post:t}=d(this,Un)[d(this,Vn)];e(),t==null||t(),T(this,il,!1),T(this,Vn,d(this,Vn)-1)}redo(){if(d(this,Vn)<d(this,Un).length-1){T(this,Vn,d(this,Vn)+1),T(this,il,!0);const{cmd:e,post:t}=d(this,Un)[d(this,Vn)];e(),t==null||t(),T(this,il,!1)}}hasSomethingToUndo(){return d(this,Vn)!==-1}hasSomethingToRedo(){return d(this,Vn)<d(this,Un).length-1}destroy(){T(this,Un,null)}}Un=new WeakMap,il=new WeakMap,lg=new WeakMap,Vn=new WeakMap;var Ry,iC;class A0{constructor(e){F(this,Ry);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Di.platform;for(const[n,r,s={}]of e)for(const o of n){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(R(this,Ry,iC).call(this,t));if(!n)return;const{callback:r,options:{bubbles:s=!1,args:o=[],checker:a=null}}=n;a&&!a(e,t)||(r.bind(e,...o,t)(),s||(t.stopPropagation(),t.preventDefault()))}}Ry=new WeakSet,iC=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Ly=class Ly{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return QM(e),at(this,"_colors",e)}convert(e){const t=$4(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((s,o)=>s===t[o]))return Ly._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Se.makeHexColor(...t):e}};Ne(Ly,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Ax=Ly;var ed,fr,Tn,ti,td,Wo,nd,_s,rl,id,Fc,to,xs,Ic,cg,ug,rd,hg,no,sl,sd,ol,io,Ny,al,dg,ll,Dc,fg,pg,Wn,bt,Xo,Oc,gg,mg,cl,ro,$o,yg,Ur,he,S1,Cx,rC,sC,w1,oC,aC,lC,Px,cC,kx,Tx,uC,Ri,Ya,hC,dC,Mx,fC,rp,Rx;const Gh=class Gh{constructor(e,t,n,r,s,o,a,u,h,f,m){F(this,he);F(this,ed,new AbortController);F(this,fr,null);F(this,Tn,new Map);F(this,ti,new Map);F(this,td,null);F(this,Wo,null);F(this,nd,null);F(this,_s,new tR);F(this,rl,null);F(this,id,0);F(this,Fc,new Set);F(this,to,null);F(this,xs,null);F(this,Ic,new Set);F(this,cg,!1);F(this,ug,!1);F(this,rd,!1);F(this,hg,null);F(this,no,null);F(this,sl,null);F(this,sd,null);F(this,ol,!1);F(this,io,null);F(this,Ny,new eR);F(this,al,!1);F(this,dg,!1);F(this,ll,null);F(this,Dc,null);F(this,fg,null);F(this,pg,null);F(this,Wn,Ve.NONE);F(this,bt,new Set);F(this,Xo,null);F(this,Oc,null);F(this,gg,null);F(this,mg,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});F(this,cl,[0,0]);F(this,ro,null);F(this,$o,null);F(this,yg,null);F(this,Ur,null);const g=this._signal=d(this,ed).signal;T(this,$o,e),T(this,yg,t),T(this,td,n),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:g}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),r._on("setpreference",this.onSetPreference.bind(this),{signal:g}),r._on("switchannotationeditorparams",v=>this.updateParams(v.type,v.value),{signal:g}),R(this,he,oC).call(this),R(this,he,uC).call(this),R(this,he,Px).call(this),T(this,Wo,s.annotationStorage),T(this,hg,s.filterFactory),T(this,Oc,o),T(this,sd,a||null),T(this,cg,u),T(this,ug,h),T(this,rd,f),T(this,pg,m||null),this.viewParameters={realScale:Gl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=Gh.prototype,t=o=>d(o,$o).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:u}=a;return u!=="text"&&u!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return at(this,"_keyboardManager",new A0([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&d(o,$o).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&d(o,$o).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,n,r;(e=d(this,Ur))==null||e.resolve(),T(this,Ur,null),(t=d(this,ed))==null||t.abort(),T(this,ed,null),this._signal=null;for(const s of d(this,ti).values())s.destroy();d(this,ti).clear(),d(this,Tn).clear(),d(this,Ic).clear(),T(this,fr,null),d(this,bt).clear(),d(this,_s).destroy(),(n=d(this,td))==null||n.destroy(),(r=d(this,io))==null||r.hide(),T(this,io,null),d(this,no)&&(clearTimeout(d(this,no)),T(this,no,null)),d(this,ro)&&(clearTimeout(d(this,ro)),T(this,ro,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return d(this,pg)}get useNewAltTextFlow(){return d(this,ug)}get useNewAltTextWhenAddingImage(){return d(this,rd)}get hcmFilter(){return at(this,"hcmFilter",d(this,Oc)?d(this,hg).addHCMFilter(d(this,Oc).foreground,d(this,Oc).background):"none")}get direction(){return at(this,"direction",getComputedStyle(d(this,$o)).direction)}get highlightColors(){return at(this,"highlightColors",d(this,sd)?new Map(d(this,sd).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return at(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){T(this,fg,e)}editAltText(e,t=!1){var n;(n=d(this,td))==null||n.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":T(this,rd,t);break}}onPageChanging({pageNumber:e}){T(this,id,e-1)}focusMainContainer(){d(this,$o).focus()}findParent(e,t){for(const n of d(this,ti).values()){const{x:r,y:s,width:o,height:a}=n.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=s&&t<=s+a)return n}return null}disableUserSelect(e=!1){d(this,yg).classList.toggle("noUserSelect",e)}addShouldRescale(e){d(this,Ic).add(e)}removeShouldRescale(e){d(this,Ic).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Gl.PDF_TO_CSS_UNITS;for(const t of d(this,Ic))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:o}=t,a=t.toString(),h=R(this,he,S1).call(this,t).closest(".textLayer"),f=this.getSelectionBoxes(h);if(!f)return;t.empty();const m=R(this,he,Cx).call(this,h),g=d(this,Wn)===Ve.NONE,v=()=>{m==null||m.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:f,anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:o,text:a}),g&&this.showAllEditors("highlight",!0,!0)};if(g){this.switchToMode(Ve.HIGHLIGHT,v);return}v()}addToAnnotationStorage(e){!e.isEmpty()&&d(this,Wo)&&!d(this,Wo).has(e.id)&&d(this,Wo).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,d(this,ol)&&(T(this,ol,!1),R(this,he,w1).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of d(this,bt))if(t.div.contains(e)){T(this,Dc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!d(this,Dc))return;const[e,t]=d(this,Dc);T(this,Dc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){R(this,he,Px).call(this),R(this,he,kx).call(this)}removeEditListeners(){R(this,he,cC).call(this),R(this,he,Tx).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of d(this,xs))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of d(this,xs))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=d(this,fr))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of d(this,bt)){const s=r.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const o of d(this,xs))if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){Ke(`paste: "${s.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const u of n){const h=await r.deserialize(u);if(!h)return;s.push(h)}const o=()=>{for(const u of s)R(this,he,Mx).call(this,u);R(this,he,Rx).call(this,s)},a=()=>{for(const u of s)u.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(s){Ke(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),d(this,Wn)!==Ve.NONE&&!this.isEditorHandlingKeyboard&&Gh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,d(this,ol)&&(T(this,ol,!1),R(this,he,w1).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(R(this,he,aC).call(this),R(this,he,kx).call(this),R(this,he,Ri).call(this,{isEditing:d(this,Wn)!==Ve.NONE,isEmpty:R(this,he,rp).call(this),hasSomethingToUndo:d(this,_s).hasSomethingToUndo(),hasSomethingToRedo:d(this,_s).hasSomethingToRedo(),hasSelectedEditor:!1})):(R(this,he,lC).call(this),R(this,he,Tx).call(this),R(this,he,Ri).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!d(this,xs)){T(this,xs,e);for(const t of d(this,xs))R(this,he,Ya).call(this,t.defaultPropertiesToUpdate)}}getId(){return d(this,Ny).id}get currentLayer(){return d(this,ti).get(d(this,id))}getLayer(e){return d(this,ti).get(e)}get currentPageIndex(){return d(this,id)}addLayer(e){d(this,ti).set(e.pageIndex,e),d(this,al)?e.enable():e.disable()}removeLayer(e){d(this,ti).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){if(d(this,Wn)!==e&&!(d(this,Ur)&&(await d(this,Ur).promise,!d(this,Ur)))){if(T(this,Ur,Promise.withResolvers()),T(this,Wn,e),e===Ve.NONE){this.setEditingState(!1),R(this,he,dC).call(this),d(this,Ur).resolve();return}this.setEditingState(!0),await R(this,he,hC).call(this),this.unselectAll();for(const r of d(this,ti).values())r.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),d(this,Ur).resolve();return}for(const r of d(this,Tn).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();d(this,Ur).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==d(this,Wn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(d(this,xs)){switch(e){case Oe.CREATE:this.currentLayer.addNewEditor();return;case Oe.HIGHLIGHT_DEFAULT_COLOR:(n=d(this,fg))==null||n.updateColor(t);break;case Oe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(d(this,gg)||T(this,gg,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of d(this,bt))r.updateParams(e,t);for(const r of d(this,xs))r.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var s;for(const o of d(this,Tn).values())o.editorType===e&&o.show(t);(((s=d(this,gg))==null?void 0:s.get(Oe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&R(this,he,Ya).call(this,[[Oe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(d(this,dg)!==e){T(this,dg,e);for(const t of d(this,ti).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of d(this,Tn).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return d(this,Tn).get(e)}addEditor(e){d(this,Tn).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(d(this,no)&&clearTimeout(d(this,no)),T(this,no,setTimeout(()=>{this.focusMainContainer(),T(this,no,null)},0))),d(this,Tn).delete(e.id),this.unselect(e),(!e.annotationElementId||!d(this,Fc).has(e.annotationElementId))&&((t=d(this,Wo))==null||t.remove(e.id))}addDeletedAnnotationElement(e){d(this,Fc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return d(this,Fc).has(e)}removeDeletedAnnotationElement(e){d(this,Fc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){d(this,fr)!==e&&(T(this,fr,e),e&&R(this,he,Ya).call(this,e.propertiesToUpdate))}updateUI(e){d(this,he,fC)===e&&R(this,he,Ya).call(this,e.propertiesToUpdate)}toggleSelected(e){if(d(this,bt).has(e)){d(this,bt).delete(e),e.unselect(),R(this,he,Ri).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,bt).add(e),e.select(),R(this,he,Ya).call(this,e.propertiesToUpdate),R(this,he,Ri).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of d(this,bt))t!==e&&t.unselect();d(this,bt).clear(),d(this,bt).add(e),e.select(),R(this,he,Ya).call(this,e.propertiesToUpdate),R(this,he,Ri).call(this,{hasSelectedEditor:!0})}isSelected(e){return d(this,bt).has(e)}get firstSelectedEditor(){return d(this,bt).values().next().value}unselect(e){e.unselect(),d(this,bt).delete(e),R(this,he,Ri).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,bt).size!==0}get isEnterHandled(){return d(this,bt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){d(this,_s).undo(),R(this,he,Ri).call(this,{hasSomethingToUndo:d(this,_s).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:R(this,he,rp).call(this)})}redo(){d(this,_s).redo(),R(this,he,Ri).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,_s).hasSomethingToRedo(),isEmpty:R(this,he,rp).call(this)})}addCommands(e){d(this,_s).add(e),R(this,he,Ri).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:R(this,he,rp).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...d(this,bt)],t=()=>{for(const r of e)r.remove()},n=()=>{for(const r of e)R(this,he,Mx).call(this,r)};this.addCommands({cmd:t,undo:n,mustExec:!0})}commitOrRemove(){var e;(e=d(this,fr))==null||e.commitOrRemove()}hasSomethingToControl(){return d(this,fr)||this.hasSelection}selectAll(){for(const e of d(this,bt))e.commit();R(this,he,Rx).call(this,d(this,Tn).values())}unselectAll(){if(!(d(this,fr)&&(d(this,fr).commitOrRemove(),d(this,Wn)!==Ve.NONE))&&this.hasSelection){for(const e of d(this,bt))e.unselect();d(this,bt).clear(),R(this,he,Ri).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;d(this,cl)[0]+=e,d(this,cl)[1]+=t;const[r,s]=d(this,cl),o=[...d(this,bt)],a=1e3;d(this,ro)&&clearTimeout(d(this,ro)),T(this,ro,setTimeout(()=>{T(this,ro,null),d(this,cl)[0]=d(this,cl)[1]=0,this.addCommands({cmd:()=>{for(const u of o)d(this,Tn).has(u.id)&&u.translateInPage(r,s)},undo:()=>{for(const u of o)d(this,Tn).has(u.id)&&u.translateInPage(-r,-s)},mustExec:!1})},a));for(const u of o)u.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),T(this,to,new Map);for(const e of d(this,bt))d(this,to).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!d(this,to))return!1;this.disableUserSelect(!1);const e=d(this,to);T(this,to,null);let t=!1;for(const[{x:r,y:s,pageIndex:o},a]of e)a.newX=r,a.newY=s,a.newPageIndex=o,t||(t=r!==a.savedX||s!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const n=(r,s,o,a)=>{if(d(this,Tn).has(r.id)){const u=d(this,ti).get(a);u?r._setParentAndPosition(u,s,o):(r.pageIndex=a,r.x=s,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:o,newPageIndex:a}]of e)n(r,s,o,a)},undo:()=>{for(const[r,{savedX:s,savedY:o,savedPageIndex:a}]of e)n(r,s,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(d(this,to))for(const n of d(this,to).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||d(this,bt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return d(this,fr)===e}getActive(){return d(this,fr)}getMode(){return d(this,Wn)}get imageManager(){return at(this,"imageManager",new Ex)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:r,width:s,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(h,f,m,g)=>({x:(f-r)/o,y:1-(h+m-n)/s,width:g/o,height:m/s});break;case"180":a=(h,f,m,g)=>({x:1-(h+m-n)/s,y:1-(f+g-r)/o,width:m/s,height:g/o});break;case"270":a=(h,f,m,g)=>({x:1-(f+g-r)/o,y:(h-n)/s,width:g/o,height:m/s});break;default:a=(h,f,m,g)=>({x:(h-n)/s,y:(f-r)/o,width:m/s,height:g/o});break}const u=[];for(let h=0,f=t.rangeCount;h<f;h++){const m=t.getRangeAt(h);if(!m.collapsed)for(const{x:g,y:v,width:y,height:S}of m.getClientRects())y===0||S===0||u.push(a(g,v,y,S))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(d(this,nd)||T(this,nd,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=d(this,nd))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=d(this,nd))==null?void 0:r.get(e.data.id);if(!t)return;const n=d(this,Wo).getRawValue(t);n&&(d(this,Wn)===Ve.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};ed=new WeakMap,fr=new WeakMap,Tn=new WeakMap,ti=new WeakMap,td=new WeakMap,Wo=new WeakMap,nd=new WeakMap,_s=new WeakMap,rl=new WeakMap,id=new WeakMap,Fc=new WeakMap,to=new WeakMap,xs=new WeakMap,Ic=new WeakMap,cg=new WeakMap,ug=new WeakMap,rd=new WeakMap,hg=new WeakMap,no=new WeakMap,sl=new WeakMap,sd=new WeakMap,ol=new WeakMap,io=new WeakMap,Ny=new WeakMap,al=new WeakMap,dg=new WeakMap,ll=new WeakMap,Dc=new WeakMap,fg=new WeakMap,pg=new WeakMap,Wn=new WeakMap,bt=new WeakMap,Xo=new WeakMap,Oc=new WeakMap,gg=new WeakMap,mg=new WeakMap,cl=new WeakMap,ro=new WeakMap,$o=new WeakMap,yg=new WeakMap,Ur=new WeakMap,he=new WeakSet,S1=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Cx=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of d(this,ti).values())if(n.hasTextLayer(e))return n;return null},rC=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=R(this,he,S1).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(d(this,io)||T(this,io,new JM(this)),d(this,io).show(n,r,this.direction==="ltr"))},sC=function(){var s,o,a;const e=document.getSelection();if(!e||e.isCollapsed){d(this,Xo)&&((s=d(this,io))==null||s.hide(),T(this,Xo,null),R(this,he,Ri).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===d(this,Xo))return;const r=R(this,he,S1).call(this,e).closest(".textLayer");if(!r){d(this,Xo)&&((o=d(this,io))==null||o.hide(),T(this,Xo,null),R(this,he,Ri).call(this,{hasSelectedText:!1}));return}if((a=d(this,io))==null||a.hide(),T(this,Xo,t),R(this,he,Ri).call(this,{hasSelectedText:!0}),!(d(this,Wn)!==Ve.HIGHLIGHT&&d(this,Wn)!==Ve.NONE)&&(d(this,Wn)===Ve.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),T(this,ol,this.isShiftKeyDown),!this.isShiftKeyDown)){const u=d(this,Wn)===Ve.HIGHLIGHT?R(this,he,Cx).call(this,r):null;u==null||u.toggleDrawing();const h=new AbortController,f=this.combinedSignal(h),m=g=>{g.type==="pointerup"&&g.button!==0||(h.abort(),u==null||u.toggleDrawing(!0),g.type==="pointerup"&&R(this,he,w1).call(this,"main_toolbar"))};window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("blur",m,{signal:f})}},w1=function(e=""){d(this,Wn)===Ve.HIGHLIGHT?this.highlightSelection(e):d(this,cg)&&R(this,he,rC).call(this)},oC=function(){document.addEventListener("selectionchange",R(this,he,sC).bind(this),{signal:this._signal})},aC=function(){if(d(this,sl))return;T(this,sl,new AbortController);const e=this.combinedSignal(d(this,sl));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},lC=function(){var e;(e=d(this,sl))==null||e.abort(),T(this,sl,null)},Px=function(){if(d(this,ll))return;T(this,ll,new AbortController);const e=this.combinedSignal(d(this,ll));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},cC=function(){var e;(e=d(this,ll))==null||e.abort(),T(this,ll,null)},kx=function(){if(d(this,rl))return;T(this,rl,new AbortController);const e=this.combinedSignal(d(this,rl));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Tx=function(){var e;(e=d(this,rl))==null||e.abort(),T(this,rl,null)},uC=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Ri=function(e){Object.entries(e).some(([n,r])=>d(this,mg)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,mg),e)}),d(this,Wn)===Ve.HIGHLIGHT&&e.hasSelectedEditor===!1&&R(this,he,Ya).call(this,[[Oe.HIGHLIGHT_FREE,!0]]))},Ya=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},hC=async function(){if(!d(this,al)){T(this,al,!0);const e=[];for(const t of d(this,ti).values())e.push(t.enable());await Promise.all(e);for(const t of d(this,Tn).values())t.enable()}},dC=function(){if(this.unselectAll(),d(this,al)){T(this,al,!1);for(const e of d(this,ti).values())e.disable();for(const e of d(this,Tn).values())e.disable()}},Mx=function(e){const t=d(this,ti).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},fC=function(){let e=null;for(e of d(this,bt));return e},rp=function(){if(d(this,Tn).size===0)return!0;if(d(this,Tn).size===1)for(const e of d(this,Tn).values())return e.isEmpty();return!1},Rx=function(e){for(const t of d(this,bt))t.unselect();d(this,bt).clear();for(const t of e)t.isEmpty()||(d(this,bt).add(t),t.select());R(this,he,Ri).call(this,{hasSelectedEditor:this.hasSelection})},Ne(Gh,"TRANSLATE_SMALL",1),Ne(Gh,"TRANSLATE_BIG",10);let Fu=Gh;var Xn,so,Ss,od,oo,pr,ad,ao,Qi,Yo,zc,lo,ul,Ns,sp,b1;const Li=class Li{constructor(e){F(this,Ns);F(this,Xn,null);F(this,so,!1);F(this,Ss,null);F(this,od,null);F(this,oo,null);F(this,pr,null);F(this,ad,!1);F(this,ao,null);F(this,Qi,null);F(this,Yo,null);F(this,zc,null);F(this,lo,!1);T(this,Qi,e),T(this,lo,e._uiManager.useNewAltTextFlow),d(Li,ul)||T(Li,ul,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Li._l10n??(Li._l10n=e)}async render(){const e=T(this,Ss,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=T(this,od,document.createElement("span"));e.append(t),d(this,lo)?(e.classList.add("new"),e.setAttribute("data-l10n-id",d(Li,ul).missing),t.setAttribute("data-l10n-id",d(Li,ul)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=d(this,Qi)._uiManager._signal;e.addEventListener("contextmenu",is,{signal:n}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const r=s=>{s.preventDefault(),d(this,Qi)._uiManager.editAltText(d(this,Qi)),d(this,lo)&&d(this,Qi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:d(this,Ns,sp)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(T(this,ad,!0),r(s))},{signal:n}),await R(this,Ns,b1).call(this),e}finish(){d(this,Ss)&&(d(this,Ss).focus({focusVisible:d(this,ad)}),T(this,ad,!1))}isEmpty(){return d(this,lo)?d(this,Xn)===null:!d(this,Xn)&&!d(this,so)}hasData(){return d(this,lo)?d(this,Xn)!==null||!!d(this,Yo):this.isEmpty()}get guessedText(){return d(this,Yo)}async setGuessedText(e){d(this,Xn)===null&&(T(this,Yo,e),T(this,zc,await Li._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),R(this,Ns,b1).call(this))}toggleAltTextBadge(e=!1){var t;if(!d(this,lo)||d(this,Xn)){(t=d(this,ao))==null||t.remove(),T(this,ao,null);return}if(!d(this,ao)){const n=T(this,ao,document.createElement("div"));n.className="noAltTextBadge",d(this,Qi).div.append(n)}d(this,ao).classList.toggle("hidden",!e)}serialize(e){let t=d(this,Xn);return!e&&d(this,Yo)===t&&(t=d(this,zc)),{altText:t,decorative:d(this,so),guessedText:d(this,Yo),textWithDisclaimer:d(this,zc)}}get data(){return{altText:d(this,Xn),decorative:d(this,so)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:s=!1}){n&&(T(this,Yo,n),T(this,zc,r)),!(d(this,Xn)===e&&d(this,so)===t)&&(s||(T(this,Xn,e),T(this,so,t)),R(this,Ns,b1).call(this))}toggle(e=!1){d(this,Ss)&&(!e&&d(this,pr)&&(clearTimeout(d(this,pr)),T(this,pr,null)),d(this,Ss).disabled=!e)}shown(){d(this,Qi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:d(this,Ns,sp)}})}destroy(){var e,t;(e=d(this,Ss))==null||e.remove(),T(this,Ss,null),T(this,od,null),T(this,oo,null),(t=d(this,ao))==null||t.remove(),T(this,ao,null)}};Xn=new WeakMap,so=new WeakMap,Ss=new WeakMap,od=new WeakMap,oo=new WeakMap,pr=new WeakMap,ad=new WeakMap,ao=new WeakMap,Qi=new WeakMap,Yo=new WeakMap,zc=new WeakMap,lo=new WeakMap,ul=new WeakMap,Ns=new WeakSet,sp=function(){return d(this,Xn)&&"added"||d(this,Xn)===null&&this.guessedText&&"review"||"missing"},b1=async function(){var r,s,o;const e=d(this,Ss);if(!e)return;if(d(this,lo)){if(e.classList.toggle("done",!!d(this,Xn)),e.setAttribute("data-l10n-id",d(Li,ul)[d(this,Ns,sp)]),(r=d(this,od))==null||r.setAttribute("data-l10n-id",d(Li,ul)[`${d(this,Ns,sp)}-label`]),!d(this,Xn)){(s=d(this,oo))==null||s.remove();return}}else{if(!d(this,Xn)&&!d(this,so)){e.classList.remove("done"),(o=d(this,oo))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=d(this,oo);if(!t){T(this,oo,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${d(this,Qi).id}`;const a=100,u=d(this,Qi)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(d(this,pr)),T(this,pr,null)},{once:!0}),e.addEventListener("mouseenter",()=>{T(this,pr,setTimeout(()=>{T(this,pr,null),d(this,oo).classList.add("show"),d(this,Qi)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:u}),e.addEventListener("mouseleave",()=>{var h;d(this,pr)&&(clearTimeout(d(this,pr)),T(this,pr,null)),(h=d(this,oo))==null||h.classList.remove("show")},{signal:u})}d(this,so)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=d(this,Xn)),t.parentNode||e.append(t);const n=d(this,Qi).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},F(Li,ul,null),Ne(Li,"_l10n",null);let xy=Li;var jc,ws,Jt,ld,Hc,ni,Gc,hl,vg,Bc,dl,_g,Uc,Ko,co,cd,ud,Vr,xg,Fy,$e,Lx,Sg,Nx,Fx,pC,gC,Ix,Dx,Ox,mC,zx,yC,vC,_C,jx,op;const wt=class wt{constructor(e){F(this,$e);F(this,jc,null);F(this,ws,null);F(this,Jt,null);F(this,ld,!1);F(this,Hc,!1);F(this,ni,null);F(this,Gc,null);F(this,hl,null);F(this,vg,"");F(this,Bc,!1);F(this,dl,null);F(this,_g,!1);F(this,Uc,!1);F(this,Ko,!1);F(this,co,null);F(this,cd,0);F(this,ud,0);F(this,Vr,null);Ne(this,"_editToolbar",null);Ne(this,"_initialOptions",Object.create(null));Ne(this,"_initialData",null);Ne(this,"_isVisible",!0);Ne(this,"_uiManager",null);Ne(this,"_focusEventsAllowed",!0);F(this,xg,!1);F(this,Fy,wt._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[s,o];const[a,u]=this.parentDimensions;this.x=e.x/a,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=wt.prototype._resizeWithKeyboard,t=Fu.TRANSLATE_SMALL,n=Fu.TRANSLATE_BIG;return at(this,"_resizerKeyboardManager",new A0([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],wt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return at(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new nR({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(wt._l10n??(wt._l10n=e),wt._l10nResizer||(wt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),wt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);wt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Gt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return d(this,xg)}set _isDraggable(e){var t;T(this,xg,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,Fy)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):R(this,$e,op).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(d(this,Bc)?T(this,Bc,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[s,o]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/s,this.y=(t+r)/o,this.fixAndSetPosition()}translate(e,t){R(this,$e,Lx).call(this,this.parentDimensions,e,t)}translateInPage(e,t){d(this,dl)||T(this,dl,[this.x,this.y]),R(this,$e,Lx).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){d(this,dl)||T(this,dl,[this.x,this.y]);const[n,r]=this.parentDimensions;if(this.x+=e/n,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[a,u]=this.getBaseTranslation();s+=a,o+=u,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!d(this,dl)&&(d(this,dl)[0]!==this.x||d(this,dl)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=wt,r=n/e,s=n/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,n]=this.pageDimensions;let{x:r,y:s,width:o,height:a}=this;if(o*=t,a*=n,r*=t,s*=n,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-o,r)),s=Math.max(0,Math.min(n-a,s));break;case 90:r=Math.max(0,Math.min(t-a,r)),s=Math.min(n,Math.max(o,s));break;case 180:r=Math.min(t,Math.max(o,r)),s=Math.min(n,Math.max(a,s));break;case 270:r=Math.min(t,Math.max(a,r)),s=Math.max(0,Math.min(n-o,s));break}this.x=r/=t,this.y=s/=n;const[u,h]=this.getBaseTranslation();r+=u,s+=h;const{style:f}=this.div;f.left=`${(100*r).toFixed(2)}%`,f.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return R(n=wt,Sg,Nx).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return R(n=wt,Sg,Nx).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,r]=this.parentDimensions;this.div.style.width=`${(100*e/n).toFixed(2)}%`,d(this,Hc)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),s=!d(this,Hc)&&t.endsWith("%");if(r&&s)return;const[o,a]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!d(this,Hc)&&!s&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=d(this,Jt))==null||e.finish()}async addEditToolbar(){return this._editToolbar||d(this,Uc)?this._editToolbar:(this._editToolbar=new wx(this),this.div.append(this._editToolbar.render()),d(this,Jt)&&await this._editToolbar.addAltText(d(this,Jt)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=d(this,Jt))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){d(this,Jt)||(xy.initialize(wt._l10n),T(this,Jt,new xy(this)),d(this,jc)&&(d(this,Jt).data=d(this,jc),T(this,jc,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=d(this,Jt))==null?void 0:e.data}set altTextData(e){d(this,Jt)&&(d(this,Jt).data=e)}get guessedAltText(){var e;return(e=d(this,Jt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=d(this,Jt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=d(this,Jt))==null?void 0:t.serialize(e)}hasAltText(){return!!d(this,Jt)&&!d(this,Jt).isEmpty()}hasAltTextData(){var e;return((e=d(this,Jt))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=d(this,ld)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),R(this,$e,zx).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),_y(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Di.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(T(this,Bc,!0),this._isDraggable){R(this,$e,mC).call(this,e);return}R(this,$e,Ox).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){d(this,co)&&clearTimeout(d(this,co)),T(this,co,setTimeout(()=>{var e;T(this,co,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t,n=this.rotation){const r=this.parentScale,[s,o]=this.pageDimensions,[a,u]=this.pageTranslation,h=e/r,f=t/r,m=this.x*s,g=this.y*o,v=this.width*s,y=this.height*o;switch(n){case 0:return[m+h+a,o-g-f-y+u,m+h+v+a,o-g-f+u];case 90:return[m+f+a,o-g+h+u,m+f+y+a,o-g+h+v+u];case 180:return[m-h-v+a,o-g+f+u,m-h+a,o-g+f+y+u];case 270:return[m-f-y+a,o-g-h-v+u,m-f+a,o-g-h+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,s,o]=e,a=s-n,u=o-r;switch(this.rotation){case 0:return[n,t-o,a,u];case 90:return[n,t-r,u,a];case 180:return[s,t-r,a,u];case 270:return[s,t-o,u,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){T(this,Uc,!0)}disableEditMode(){T(this,Uc,!1)}isInEditMode(){return d(this,Uc)}shouldGetKeyboardEvents(){return d(this,Ko)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){R(this,$e,zx).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Gt("An editor must be serializable")}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation,T(r,jc,e.accessibilityData);const[s,o]=r.pageDimensions,[a,u,h,f]=r.getRectInCurrentCoords(e.rect,o);return r.x=a/s,r.y=u/o,r.width=h/s,r.height=f/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=d(this,hl))==null||e.abort(),T(this,hl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),d(this,co)&&(clearTimeout(d(this,co)),T(this,co,null)),R(this,$e,op).call(this),this.removeEditToolbar(),d(this,Vr)){for(const t of d(this,Vr).values())clearTimeout(t);T(this,Vr,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(R(this,$e,pC).call(this),d(this,ni).classList.remove("hidden"),_y(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),T(this,Gc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=d(this,ni).children;if(!d(this,ws)){T(this,ws,Array.from(t));const o=R(this,$e,yC).bind(this),a=R(this,$e,vC).bind(this),u=this._uiManager._signal;for(const h of d(this,ws)){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:u}),h.addEventListener("blur",a,{signal:u}),h.addEventListener("focus",R(this,$e,_C).bind(this,f),{signal:u}),h.setAttribute("data-l10n-id",wt._l10nResizer[f])}}const n=d(this,ws)[0];let r=0;for(const o of t){if(o===n)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(d(this,ws).length/4);if(s!==r){if(s<r)for(let a=0;a<r-s;a++)d(this,ni).append(d(this,ni).firstChild);else if(s>r)for(let a=0;a<s-r;a++)d(this,ni).firstChild.before(d(this,ni).lastChild);let o=0;for(const a of t){const h=d(this,ws)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",wt._l10nResizer[h])}}R(this,$e,jx).call(this,0),T(this,Ko,!0),d(this,ni).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){d(this,Ko)&&R(this,$e,Dx).call(this,d(this,vg),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){R(this,$e,op).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,s;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(n=d(this,Jt))==null||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,r,s;(e=d(this,ni))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(s=d(this,Jt))==null||s.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return d(this,_g)}set isEditing(e){T(this,_g,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){T(this,Hc,!0);const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){d(this,Vr)||T(this,Vr,new Map);const{action:n}=e;let r=d(this,Vr).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),d(this,Vr).delete(n),d(this,Vr).size===0&&T(this,Vr,null)},wt._telemetryTimeout),d(this,Vr).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),T(this,ld,!1)}disable(){this.div&&(this.div.tabIndex=-1),T(this,ld,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};jc=new WeakMap,ws=new WeakMap,Jt=new WeakMap,ld=new WeakMap,Hc=new WeakMap,ni=new WeakMap,Gc=new WeakMap,hl=new WeakMap,vg=new WeakMap,Bc=new WeakMap,dl=new WeakMap,_g=new WeakMap,Uc=new WeakMap,Ko=new WeakMap,co=new WeakMap,cd=new WeakMap,ud=new WeakMap,Vr=new WeakMap,xg=new WeakMap,Fy=new WeakMap,$e=new WeakSet,Lx=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this.fixAndSetPosition()},Sg=new WeakSet,Nx=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Fx=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},pC=function(){if(d(this,ni))return;T(this,ni,document.createElement("div")),d(this,ni).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");d(this,ni).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",R(this,$e,gC).bind(this,n),{signal:t}),r.addEventListener("contextmenu",is,{signal:t}),r.tabIndex=-1}this.div.prepend(d(this,ni))},gC=function(e,t){var y;t.preventDefault();const{isMac:n}=Di.platform;if(t.button!==0||t.ctrlKey&&n)return;(y=d(this,Jt))==null||y.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",R(this,$e,Dx).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("contextmenu",is,{signal:o});const a=this.x,u=this.y,h=this.width,f=this.height,m=this.parent.div.style.cursor,g=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const v=()=>{var S;s.abort(),this.parent.togglePointerEvents(!0),(S=d(this,Jt))==null||S.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=m,this.div.style.cursor=g,R(this,$e,Ix).call(this,a,u,h,f)};window.addEventListener("pointerup",v,{signal:o}),window.addEventListener("blur",v,{signal:o})},Ix=function(e,t,n,r){const s=this.x,o=this.y,a=this.width,u=this.height;s===e&&o===t&&a===n&&u===r||this.addCommands({cmd:()=>{this.width=a,this.height=u,this.x=s,this.y=o;const[h,f]=this.parentDimensions;this.setDims(h*a,f*u),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=r,this.x=e,this.y=t;const[h,f]=this.parentDimensions;this.setDims(h*n,f*r),this.fixAndSetPosition()},mustExec:!0})},Dx=function(e,t){const[n,r]=this.parentDimensions,s=this.x,o=this.y,a=this.width,u=this.height,h=wt.MIN_SIZE/n,f=wt.MIN_SIZE/r,m=Z=>Math.round(Z*1e4)/1e4,g=R(this,$e,Fx).call(this,this.rotation),v=(Z,G)=>[g[0]*Z+g[2]*G,g[1]*Z+g[3]*G],y=R(this,$e,Fx).call(this,360-this.rotation),S=(Z,G)=>[y[0]*Z+y[2]*G,y[1]*Z+y[3]*G];let C,b,E=!1,x=!1;switch(e){case"topLeft":E=!0,C=(Z,G)=>[0,0],b=(Z,G)=>[Z,G];break;case"topMiddle":C=(Z,G)=>[Z/2,0],b=(Z,G)=>[Z/2,G];break;case"topRight":E=!0,C=(Z,G)=>[Z,0],b=(Z,G)=>[0,G];break;case"middleRight":x=!0,C=(Z,G)=>[Z,G/2],b=(Z,G)=>[0,G/2];break;case"bottomRight":E=!0,C=(Z,G)=>[Z,G],b=(Z,G)=>[0,0];break;case"bottomMiddle":C=(Z,G)=>[Z/2,G],b=(Z,G)=>[Z/2,0];break;case"bottomLeft":E=!0,C=(Z,G)=>[0,G],b=(Z,G)=>[Z,0];break;case"middleLeft":x=!0,C=(Z,G)=>[0,G/2],b=(Z,G)=>[Z,G/2];break}const A=C(a,u),k=b(a,u);let L=v(...k);const I=m(s+L[0]),M=m(o+L[1]);let z=1,D=1,[j,U]=this.screenToPageTranslation(t.movementX,t.movementY);if([j,U]=S(j/n,U/r),E){const Z=Math.hypot(a,u);z=D=Math.max(Math.min(Math.hypot(k[0]-A[0]-j,k[1]-A[1]-U)/Z,1/a,1/u),h/a,f/u)}else x?z=Math.max(h,Math.min(1,Math.abs(k[0]-A[0]-j)))/a:D=Math.max(f,Math.min(1,Math.abs(k[1]-A[1]-U)))/u;const W=m(a*z),Y=m(u*D);L=v(...b(W,Y));const K=I-L[0],ne=M-L[1];this.width=W,this.height=Y,this.x=K,this.y=ne,this.setDims(n*W,r*Y),this.fixAndSetPosition()},Ox=function(e){const{isMac:t}=Di.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},mC=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const n=new AbortController,r=this._uiManager.combinedSignal(n);if(t){this.div.classList.add("moving"),T(this,cd,e.clientX),T(this,ud,e.clientY);const o=a=>{const{clientX:u,clientY:h}=a,[f,m]=this.screenToPageTranslation(u-d(this,cd),h-d(this,ud));T(this,cd,u),T(this,ud,h),this._uiManager.dragSelectedEditors(f,m)};window.addEventListener("pointermove",o,{passive:!0,capture:!0,signal:r})}const s=()=>{n.abort(),t&&this.div.classList.remove("moving"),T(this,Bc,!1),this._uiManager.endDragSession()||R(this,$e,Ox).call(this,e)};window.addEventListener("pointerup",s,{signal:r}),window.addEventListener("blur",s,{signal:r})},zx=function(){if(d(this,hl)||!this.div)return;T(this,hl,new AbortController);const e=this._uiManager.combinedSignal(d(this,hl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},yC=function(e){wt._resizerKeyboardManager.exec(this,e)},vC=function(e){var t;d(this,Ko)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==d(this,ni)&&R(this,$e,op).call(this)},_C=function(e){T(this,vg,d(this,Ko)?e:"")},jx=function(e){if(d(this,ws))for(const t of d(this,ws))t.tabIndex=e},op=function(){if(T(this,Ko,!1),R(this,$e,jx).call(this,-1),d(this,Gc)){const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=d(this,Gc);R(this,$e,Ix).call(this,e,t,n,r),T(this,Gc,null)}},F(wt,Sg),Ne(wt,"_l10n",null),Ne(wt,"_l10nResizer",null),Ne(wt,"_borderLineWidth",-1),Ne(wt,"_colorManager",new Ax),Ne(wt,"_zIndex",1),Ne(wt,"_telemetryTimeout",1e3);let At=wt;class nR extends At{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const mb=3285377520,Gr=4294901760,Zs=65535;class xC{constructor(e){this.h1=e?e&4294967295:mb,this.h2=e?e&4294967295:mb}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let S=0,C=e.length;S<C;S++){const b=e.charCodeAt(S);b<=255?t[n++]=b:(t[n++]=b>>>8,t[n++]=b&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,s=n-r*4,o=new Uint32Array(t.buffer,0,r);let a=0,u=0,h=this.h1,f=this.h2;const m=3432918353,g=461845907,v=m&Zs,y=g&Zs;for(let S=0;S<r;S++)S&1?(a=o[S],a=a*m&Gr|a*v&Zs,a=a<<15|a>>>17,a=a*g&Gr|a*y&Zs,h^=a,h=h<<13|h>>>19,h=h*5+3864292196):(u=o[S],u=u*m&Gr|u*v&Zs,u=u<<15|u>>>17,u=u*g&Gr|u*y&Zs,f^=u,f=f<<13|f>>>19,f=f*5+3864292196);switch(a=0,s){case 3:a^=t[r*4+2]<<16;case 2:a^=t[r*4+1]<<8;case 1:a^=t[r*4],a=a*m&Gr|a*v&Zs,a=a<<15|a>>>17,a=a*g&Gr|a*y&Zs,r&1?h^=a:f^=a}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Gr|e*36045&Zs,t=t*4283543511&Gr|((t<<16|e>>>16)*2950163797&Gr)>>>16,e^=t>>>1,e=e*444984403&Gr|e*60499&Zs,t=t*3301882366&Gr|((t<<16|e>>>16)*3120437893&Gr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Hx=Object.freeze({map:null,hash:"",transfer:void 0});var Vc,Wc,$n,Iy,SC;class Y4{constructor(){F(this,Iy);F(this,Vc,!1);F(this,Wc,null);F(this,$n,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=d(this,$n).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return d(this,$n).get(e)}remove(e){if(d(this,$n).delete(e),d(this,$n).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of d(this,$n).values())if(t instanceof At)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=d(this,$n).get(e);let r=!1;if(n!==void 0)for(const[s,o]of Object.entries(t))n[s]!==o&&(r=!0,n[s]=o);else r=!0,d(this,$n).set(e,t);r&&R(this,Iy,SC).call(this),t instanceof At&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return d(this,$n).has(e)}getAll(){return d(this,$n).size>0?B4(d(this,$n)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return d(this,$n).size}resetModified(){d(this,Vc)&&(T(this,Vc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new wC(this)}get serializable(){if(d(this,$n).size===0)return Hx;const e=new Map,t=new xC,n=[],r=Object.create(null);let s=!1;for(const[o,a]of d(this,$n)){const u=a instanceof At?a.serialize(!1,r):a;u&&(e.set(o,u),t.update(`${o}:${JSON.stringify(u)}`),s||(s=!!u.bitmap))}if(s)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Hx}get editorStats(){let e=null;const t=new Map;for(const n of d(this,$n).values()){if(!(n instanceof At))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:s}=r;t.has(s)||t.set(s,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const o=e[s]||(e[s]=new Map);for(const[a,u]of Object.entries(r)){if(a==="type")continue;let h=o.get(a);h||(h=new Map,o.set(a,h));const f=h.get(u)??0;h.set(u,f+1)}}for(const[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){T(this,Wc,null)}get modifiedIds(){if(d(this,Wc))return d(this,Wc);const e=[];for(const t of d(this,$n).values())!(t instanceof At)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return T(this,Wc,{ids:new Set(e),hash:e.join(",")})}}Vc=new WeakMap,Wc=new WeakMap,$n=new WeakMap,Iy=new WeakSet,SC=function(){d(this,Vc)||(T(this,Vc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var wg;class wC extends Y4{constructor(t){super();F(this,wg);const{map:n,hash:r,transfer:s}=t.serializable,o=structuredClone(n,s?{transfer:s}:null);T(this,wg,{map:o,hash:r,transfer:s})}get print(){Gt("Should not call PrintAnnotationStorage.print")}get serializable(){return d(this,wg)}get modifiedIds(){return at(this,"modifiedIds",{ids:new Set,hash:""})}}wg=new WeakMap;var hd;class iR{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){F(this,hd,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),d(this,hd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||d(this,hd).has(e.loadedName))){if(Nn(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:s}=e,o=new FontFace(n,r,s);this.addNativeFontFace(o);try{await o.load(),d(this,hd).add(n),t==null||t(e)}catch{Ke(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Gt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Ke(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return at(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Ci||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),at(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Nn(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const s=n.shift();setTimeout(s.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return at(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(A,k){return A.charCodeAt(k)<<24|A.charCodeAt(k+1)<<16|A.charCodeAt(k+2)<<8|A.charCodeAt(k+3)&255}function r(A,k,L,I){const M=A.substring(0,k),z=A.substring(k+L);return M+I+z}let s,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const u=a.getContext("2d");let h=0;function f(A,k){if(++h>30){Ke("Load test font never loaded."),k();return}if(u.font="30px "+A,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(f.bind(null,A,k))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=r(g,976,m.length,m);const y=16,S=1482184792;let C=n(g,y);for(s=0,o=m.length-3;s<o;s+=4)C=C-S+n(m,s)|0;s<m.length&&(C=C-S+n(m+"XXX",s)|0),g=r(g,y,4,GM(C));const b=`url(data:font/opentype;base64,${btoa(g)});`,E=`@font-face {font-family:"${m}";src:${b}}`;this.insertRule(E);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const A of[e.loadedName,m]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=A,x.append(k)}this._document.body.append(x),f(m,()=>{x.remove(),t.complete()})}}hd=new WeakMap;class rR{constructor(e,{disableFontFace:t=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=n}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${$M(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(s){Ke(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[t]=function(s,o){};const r=[];for(let s=0,o=n.length;s<o;)switch(n[s++]){case Do.BEZIER_CURVE_TO:{const[a,u,h,f,m,g]=n.slice(s,s+6);r.push(v=>v.bezierCurveTo(a,u,h,f,m,g)),s+=6}break;case Do.MOVE_TO:{const[a,u]=n.slice(s,s+2);r.push(h=>h.moveTo(a,u)),s+=2}break;case Do.LINE_TO:{const[a,u]=n.slice(s,s+2);r.push(h=>h.lineTo(a,u)),s+=2}break;case Do.QUADRATIC_CURVE_TO:{const[a,u,h,f]=n.slice(s,s+4);r.push(m=>m.quadraticCurveTo(a,u,h,f)),s+=4}break;case Do.RESTORE:r.push(a=>a.restore());break;case Do.SAVE:r.push(a=>a.save());break;case Do.SCALE:Nn(r.length===2,"Scale command is only valid at the third position.");break;case Do.TRANSFORM:{const[a,u,h,f,m,g]=n.slice(s,s+6);r.push(v=>v.transform(a,u,h,f,m,g)),s+=6}break;case Do.TRANSLATE:{const[a,u]=n.slice(s,s+2);r.push(h=>h.translate(a,u)),s+=2}break}return this.compiledGlyphs[t]=function(o,a){r[0](o),r[1](o),o.scale(a,-a);for(let u=2,h=r.length;u<h;u++)r[u](o)}}}var bg;class bC{constructor({enableHWA:e=!1}){F(this,bg,!1);T(this,bg,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!d(this,bg)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Gt("Abstract method `_createCanvas` called.")}}bg=new WeakMap;class sR extends bC{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class EC{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Gt("Abstract method `_fetch` called.")}}class AC extends EC{async _fetch(e){const t=await f2(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):d2(t)}}class CC{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,s){return"none"}destroy(e=!1){}}var Xc,$c,uo,qo,Si,Dy,Yc,me,_i,Sh,wh,E1,bh,PC,Gx,Eh,ap,lp,Bx,cp;class oR extends CC{constructor({docId:t,ownerDocument:n=globalThis.document}){super();F(this,me);F(this,Xc);F(this,$c);F(this,uo);F(this,qo);F(this,Si);F(this,Dy);F(this,Yc,0);T(this,qo,t),T(this,Si,n)}addFilter(t){if(!t)return"none";let n=d(this,me,_i).get(t);if(n)return n;const[r,s,o]=R(this,me,E1).call(this,t),a=t.length===1?r:`${r}${s}${o}`;if(n=d(this,me,_i).get(a),n)return d(this,me,_i).set(t,n),n;const u=`g_${d(this,qo)}_transfer_map_${Mi(this,Yc)._++}`,h=R(this,me,bh).call(this,u);d(this,me,_i).set(t,h),d(this,me,_i).set(a,h);const f=R(this,me,Eh).call(this,u);return R(this,me,lp).call(this,r,s,o,f),h}addHCMFilter(t,n){var y;const r=`${t}-${n}`,s="base";let o=d(this,me,Sh).get(s);if((o==null?void 0:o.key)===r||(o?((y=o.filter)==null||y.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},d(this,me,Sh).set(s,o)),!t||!n))return o.url;const a=R(this,me,cp).call(this,t);t=Se.makeHexColor(...a);const u=R(this,me,cp).call(this,n);if(n=Se.makeHexColor(...u),d(this,me,wh).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const h=new Array(256);for(let S=0;S<=255;S++){const C=S/255;h[S]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const f=h.join(","),m=`g_${d(this,qo)}_hcm_filter`,g=o.filter=R(this,me,Eh).call(this,m);R(this,me,lp).call(this,f,f,f,g),R(this,me,Gx).call(this,g);const v=(S,C)=>{const b=a[S]/255,E=u[S]/255,x=new Array(C+1);for(let A=0;A<=C;A++)x[A]=b+A/C*(E-b);return x.join(",")};return R(this,me,lp).call(this,v(0,5),v(1,5),v(2,5),g),o.url=R(this,me,bh).call(this,m),o.url}addAlphaFilter(t){let n=d(this,me,_i).get(t);if(n)return n;const[r]=R(this,me,E1).call(this,[t]),s=`alpha_${r}`;if(n=d(this,me,_i).get(s),n)return d(this,me,_i).set(t,n),n;const o=`g_${d(this,qo)}_alpha_map_${Mi(this,Yc)._++}`,a=R(this,me,bh).call(this,o);d(this,me,_i).set(t,a),d(this,me,_i).set(s,a);const u=R(this,me,Eh).call(this,o);return R(this,me,Bx).call(this,r,u),a}addLuminosityFilter(t){let n=d(this,me,_i).get(t||"luminosity");if(n)return n;let r,s;if(t?([r]=R(this,me,E1).call(this,[t]),s=`luminosity_${r}`):s="luminosity",n=d(this,me,_i).get(s),n)return d(this,me,_i).set(t,n),n;const o=`g_${d(this,qo)}_luminosity_map_${Mi(this,Yc)._++}`,a=R(this,me,bh).call(this,o);d(this,me,_i).set(t,a),d(this,me,_i).set(s,a);const u=R(this,me,Eh).call(this,o);return R(this,me,PC).call(this,u),t&&R(this,me,Bx).call(this,r,u),a}addHighlightHCMFilter(t,n,r,s,o){var E;const a=`${n}-${r}-${s}-${o}`;let u=d(this,me,Sh).get(t);if((u==null?void 0:u.key)===a||(u?((E=u.filter)==null||E.remove(),u.key=a,u.url="none",u.filter=null):(u={key:a,url:"none",filter:null},d(this,me,Sh).set(t,u)),!n||!r))return u.url;const[h,f]=[n,r].map(R(this,me,cp).bind(this));let m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,y]=[s,o].map(R(this,me,cp).bind(this));g<m&&([m,g,v,y]=[g,m,y,v]),d(this,me,wh).style.color="";const S=(x,A,k)=>{const L=new Array(256),I=(g-m)/k,M=x/255,z=(A-x)/(255*k);let D=0;for(let j=0;j<=k;j++){const U=Math.round(m+j*I),W=M+j*z;for(let Y=D;Y<=U;Y++)L[Y]=W;D=U+1}for(let j=D;j<256;j++)L[j]=L[D-1];return L.join(",")},C=`g_${d(this,qo)}_hcm_${t}_filter`,b=u.filter=R(this,me,Eh).call(this,C);return R(this,me,Gx).call(this,b),R(this,me,lp).call(this,S(v[0],y[0],5),S(v[1],y[1],5),S(v[2],y[2],5),b),u.url=R(this,me,bh).call(this,C),u.url}destroy(t=!1){t&&d(this,me,Sh).size!==0||(d(this,uo)&&(d(this,uo).parentNode.parentNode.remove(),T(this,uo,null)),d(this,$c)&&(d(this,$c).clear(),T(this,$c,null)),T(this,Yc,0))}}Xc=new WeakMap,$c=new WeakMap,uo=new WeakMap,qo=new WeakMap,Si=new WeakMap,Dy=new WeakMap,Yc=new WeakMap,me=new WeakSet,_i=function(){return d(this,$c)||T(this,$c,new Map)},Sh=function(){return d(this,Dy)||T(this,Dy,new Map)},wh=function(){if(!d(this,uo)){const t=d(this,Si).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=d(this,Si).createElementNS(jo,"svg");r.setAttribute("width",0),r.setAttribute("height",0),T(this,uo,d(this,Si).createElementNS(jo,"defs")),t.append(r),r.append(d(this,uo)),d(this,Si).body.append(t)}return d(this,uo)},E1=function(t){if(t.length===1){const h=t[0],f=new Array(256);for(let g=0;g<256;g++)f[g]=h[g]/255;const m=f.join(",");return[m,m,m]}const[n,r,s]=t,o=new Array(256),a=new Array(256),u=new Array(256);for(let h=0;h<256;h++)o[h]=n[h]/255,a[h]=r[h]/255,u[h]=s[h]/255;return[o.join(","),a.join(","),u.join(",")]},bh=function(t){if(d(this,Xc)===void 0){T(this,Xc,"");const n=d(this,Si).URL;n!==d(this,Si).baseURI&&(p2(n)?Ke('#createUrl: ignore "data:"-URL for performance reasons.'):T(this,Xc,n.split("#",1)[0]))}return`url(${d(this,Xc)}#${t})`},PC=function(t){const n=d(this,Si).createElementNS(jo,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},Gx=function(t){const n=d(this,Si).createElementNS(jo,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Eh=function(t){const n=d(this,Si).createElementNS(jo,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),d(this,me,wh).append(n),n},ap=function(t,n,r){const s=d(this,Si).createElementNS(jo,n);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),t.append(s)},lp=function(t,n,r,s){const o=d(this,Si).createElementNS(jo,"feComponentTransfer");s.append(o),R(this,me,ap).call(this,o,"feFuncR",t),R(this,me,ap).call(this,o,"feFuncG",n),R(this,me,ap).call(this,o,"feFuncB",r)},Bx=function(t,n){const r=d(this,Si).createElementNS(jo,"feComponentTransfer");n.append(r),R(this,me,ap).call(this,r,"feFuncA",t)},cp=function(t){return d(this,me,wh).style.color=t,$4(getComputedStyle(d(this,me,wh)).getPropertyValue("color"))};class kC{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Gt("Abstract method `_fetch` called.")}}class TC extends kC{async _fetch(e){const t=await f2(e,"arraybuffer");return new Uint8Array(t)}}if(Ci){var Ux=Promise.withResolvers(),Lp=null;(async()=>{const e=await np(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await np(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await np(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await np(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let s,o;return new Map(Object.entries({fs:e,http:t,https:n,url:r,canvas:s,path2d:o}))})().then(e=>{Lp=e,Ux.resolve()},e=>{Ke(`loadPackages: ${e}`),Lp=new Map,Ux.resolve()})}class Bl{static get promise(){return Ux.promise}static get(e){return Lp==null?void 0:Lp.get(e)}}async function MC(i){const t=await Bl.get("fs").promises.readFile(i);return new Uint8Array(t)}class aR extends CC{}class lR extends bC{_createCanvas(e,t){return Bl.get("canvas").createCanvas(e,t)}}class cR extends EC{async _fetch(e){return MC(e)}}class uR extends kC{async _fetch(e){return MC(e)}}const Fi={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Vx(i,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),i.clip(r)}class K4{getPattern(){Gt("Abstract method `getPattern` called.")}}class hR extends K4{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let s;if(r===Fi.STROKE||r===Fi.FILL){const o=t.current.getClippedPathBoundingBox(r,en(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,u=Math.ceil(o[3]-o[1])||1,h=t.cachedCanvases.getCanvas("pattern",a,u),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-o[0],-o[1]),n=Se.transform(n,[1,0,0,1,o[0],o[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),Vx(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),s=e.createPattern(h.canvas,"no-repeat");const m=new DOMMatrix(n);s.setTransform(m)}else Vx(e,this._bbox),s=this._createGradient(e);return s}}function s3(i,e,t,n,r,s,o,a){const u=e.coords,h=e.colors,f=i.data,m=i.width*4;let g;u[t+1]>u[n+1]&&(g=t,t=n,n=g,g=s,s=o,o=g),u[n+1]>u[r+1]&&(g=n,n=r,r=g,g=o,o=a,a=g),u[t+1]>u[n+1]&&(g=t,t=n,n=g,g=s,s=o,o=g);const v=(u[t]+e.offsetX)*e.scaleX,y=(u[t+1]+e.offsetY)*e.scaleY,S=(u[n]+e.offsetX)*e.scaleX,C=(u[n+1]+e.offsetY)*e.scaleY,b=(u[r]+e.offsetX)*e.scaleX,E=(u[r+1]+e.offsetY)*e.scaleY;if(y>=E)return;const x=h[s],A=h[s+1],k=h[s+2],L=h[o],I=h[o+1],M=h[o+2],z=h[a],D=h[a+1],j=h[a+2],U=Math.round(y),W=Math.round(E);let Y,K,ne,Z,G,ie,ee,re;for(let ae=U;ae<=W;ae++){if(ae<C){const H=ae<y?0:(y-ae)/(y-C);Y=v-(v-S)*H,K=x-(x-L)*H,ne=A-(A-I)*H,Z=k-(k-M)*H}else{let H;ae>E?H=1:C===E?H=0:H=(C-ae)/(C-E),Y=S-(S-b)*H,K=L-(L-z)*H,ne=I-(I-D)*H,Z=M-(M-j)*H}let ge;ae<y?ge=0:ae>E?ge=1:ge=(y-ae)/(y-E),G=v-(v-b)*ge,ie=x-(x-z)*ge,ee=A-(A-D)*ge,re=k-(k-j)*ge;const qe=Math.round(Math.min(Y,G)),et=Math.round(Math.max(Y,G));let Te=m*ae+qe*4;for(let H=qe;H<=et;H++)ge=(Y-H)/(Y-G),ge<0?ge=0:ge>1&&(ge=1),f[Te++]=K-(K-ie)*ge|0,f[Te++]=ne-(ne-ee)*ge|0,f[Te++]=Z-(Z-re)*ge|0,f[Te++]=255}}function dR(i,e,t){const n=e.coords,r=e.colors;let s,o;switch(e.type){case"lattice":const a=e.verticesPerRow,u=Math.floor(n.length/a)-1,h=a-1;for(s=0;s<u;s++){let f=s*a;for(let m=0;m<h;m++,f++)s3(i,t,n[f],n[f+1],n[f+a],r[f],r[f+1],r[f+a]),s3(i,t,n[f+a+1],n[f+1],n[f+a],r[f+a+1],r[f+1],r[f+a])}break;case"triangles":for(s=0,o=n.length;s<o;s+=3)s3(i,t,n[s],n[s+1],n[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class fR extends K4{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const a=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-a,f=Math.ceil(this._bounds[3])-u,m=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),v=h/m,y=f/g,S={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-u,scaleX:1/v,scaleY:1/y},C=m+2*2,b=g+2*2,E=n.getCanvas("mesh",C,b),x=E.context,A=x.createImageData(m,g);if(t){const L=A.data;for(let I=0,M=L.length;I<M;I+=4)L[I]=t[0],L[I+1]=t[1],L[I+2]=t[2],L[I+3]=255}for(const L of this._figures)dR(A,L,S);return x.putImageData(A,2,2),{canvas:E.canvas,offsetX:a-2*v,offsetY:u-2*y,scaleX:v,scaleY:y}}getPattern(e,t,n,r){Vx(e,this._bbox);let s;if(r===Fi.SHADING)s=Se.singularValueDecompose2dScale(en(e));else if(s=Se.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=Se.singularValueDecompose2dScale(this.matrix);s=[s[0]*a[0],s[1]*a[1]]}const o=this._createMeshCanvas(s,r===Fi.SHADING?null:this._background,t.cachedCanvases);return r!==Fi.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class pR extends K4{getPattern(){return"hotpink"}}function gR(i){switch(i[0]){case"RadialAxial":return new hR(i);case"Mesh":return new fR(i);case"Dummy":return new pR}throw new Error(`Unknown IR type: ${i[0]}`)}const yb={COLORED:1,UNCOLORED:2},Oy=class Oy{constructor(e,t,n,r,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:r,tilingType:s,color:o,canvasGraphicsFactory:a}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),u2("TilingType: "+s);const f=t[0],m=t[1],g=t[2],v=t[3],y=g-f,S=v-m,C=Se.singularValueDecompose2dScale(this.matrix),b=Se.singularValueDecompose2dScale(this.baseTransform),E=C[0]*b[0],x=C[1]*b[1];let A=y,k=S,L=!1,I=!1;const M=Math.ceil(u*E),z=Math.ceil(h*x),D=Math.ceil(y*E),j=Math.ceil(S*x);M>=D?A=u:L=!0,z>=j?k=h:I=!0;const U=this.getSizeAndScale(A,this.ctx.canvas.width,E),W=this.getSizeAndScale(k,this.ctx.canvas.height,x),Y=e.cachedCanvases.getCanvas("pattern",U.size,W.size),K=Y.context,ne=a.createCanvasGraphics(K);if(ne.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ne,r,o),K.translate(-U.scale*f,-W.scale*m),ne.transform(U.scale,0,0,W.scale,0,0),K.save(),this.clipBbox(ne,f,m,g,v),ne.baseTransform=en(ne.ctx),ne.executeOperatorList(n),ne.endDrawing(),K.restore(),L||I){const Z=Y.canvas;L&&(A=u),I&&(k=h);const G=this.getSizeAndScale(A,this.ctx.canvas.width,E),ie=this.getSizeAndScale(k,this.ctx.canvas.height,x),ee=G.size,re=ie.size,ae=e.cachedCanvases.getCanvas("pattern-workaround",ee,re),ge=ae.context,qe=L?Math.floor(y/u):0,et=I?Math.floor(S/h):0;for(let Te=0;Te<=qe;Te++)for(let H=0;H<=et;H++)ge.drawImage(Z,ee*Te,re*H,ee,re,0,0,ee,re);return{canvas:ae.canvas,scaleX:G.scale,scaleY:ie.scale,offsetX:f,offsetY:m}}return{canvas:Y.canvas,scaleX:U.scale,scaleY:W.scale,offsetX:f,offsetY:m}}getSizeAndScale(e,t,n){const r=Math.max(Oy.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*n);return s>=r?s=r:n=s/e,{scale:n,size:s}}clipBbox(e,t,n,r,s){const o=r-t,a=s-n;e.ctx.rect(t,n,o,a),e.current.updateRectMinMax(en(e.ctx),[t,n,r,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,s=e.current;switch(t){case yb.COLORED:const o=this.ctx;r.fillStyle=o.fillStyle,r.strokeStyle=o.strokeStyle,s.fillColor=o.fillStyle,s.strokeColor=o.strokeStyle;break;case yb.UNCOLORED:const a=Se.makeHexColor(n[0],n[1],n[2]);r.fillStyle=a,r.strokeStyle=a,s.fillColor=a,s.strokeColor=a;break;default:throw new HM(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,r){let s=n;r!==Fi.SHADING&&(s=Se.transform(s,t.baseTransform),this.matrix&&(s=Se.transform(s,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(s);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const u=e.createPattern(o.canvas,"repeat");return u.setTransform(a),u}};Ne(Oy,"MAX_PATTERN_SIZE",3e3);let Wx=Oy;function mR({src:i,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const a=Di.isLittleEndian?4278190080:255,[u,h]=o?[s,a]:[a,s],f=n>>3,m=n&7,g=i.length;t=new Uint32Array(t.buffer);let v=0;for(let y=0;y<r;y++){for(const C=e+f;e<C;e++){const b=e<g?i[e]:255;t[v++]=b&128?h:u,t[v++]=b&64?h:u,t[v++]=b&32?h:u,t[v++]=b&16?h:u,t[v++]=b&8?h:u,t[v++]=b&4?h:u,t[v++]=b&2?h:u,t[v++]=b&1?h:u}if(m===0)continue;const S=e<g?i[e++]:255;for(let C=0;C<m;C++)t[v++]=S&1<<7-C?h:u}return{srcPos:e,destPos:v}}const vb=16,_b=100,yR=15,xb=10,Sb=1e3,er=16;function vR(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},i.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},i.transform=function(n,r,s,o,a,u){e.transform(n,r,s,o,a,u),this.__originalTransform(n,r,s,o,a,u)},i.setTransform=function(n,r,s,o,a,u){e.setTransform(n,r,s,o,a,u),this.__originalSetTransform(n,r,s,o,a,u)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){e.rotate(n),this.__originalRotate(n)},i.clip=function(n){e.clip(n),this.__originalClip(n)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,r,s,o,a){e.bezierCurveTo(t,n,r,s,o,a),this.__originalBezierCurveTo(t,n,r,s,o,a)},i.rect=function(t,n,r,s){e.rect(t,n,r,s),this.__originalRect(t,n,r,s)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class _R{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Xm(i,e,t,n,r,s,o,a,u,h){const[f,m,g,v,y,S]=en(i);if(m===0&&g===0){const E=o*f+y,x=Math.round(E),A=a*v+S,k=Math.round(A),L=(o+u)*f+y,I=Math.abs(Math.round(L)-x)||1,M=(a+h)*v+S,z=Math.abs(Math.round(M)-k)||1;return i.setTransform(Math.sign(f),0,0,Math.sign(v),x,k),i.drawImage(e,t,n,r,s,0,0,I,z),i.setTransform(f,m,g,v,y,S),[I,z]}if(f===0&&v===0){const E=a*g+y,x=Math.round(E),A=o*m+S,k=Math.round(A),L=(a+h)*g+y,I=Math.abs(Math.round(L)-x)||1,M=(o+u)*m+S,z=Math.abs(Math.round(M)-k)||1;return i.setTransform(0,Math.sign(m),Math.sign(g),0,x,k),i.drawImage(e,t,n,r,s,0,0,z,I),i.setTransform(f,m,g,v,y,S),[z,I]}i.drawImage(e,t,n,r,s,o,a,u,h);const C=Math.hypot(f,m),b=Math.hypot(g,v);return[C*u,b*h]}function xR(i){const{width:e,height:t}=i;if(e>Sb||t>Sb)return null;const n=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let o=new Uint8Array(s*(t+1)),a,u,h;const f=e+7&-8;let m=new Uint8Array(f*t),g=0;for(const b of i.data){let E=128;for(;E>0;)m[g++]=b&E?0:255,E>>=1}let v=0;for(g=0,m[g]!==0&&(o[0]=1,++v),u=1;u<e;u++)m[g]!==m[g+1]&&(o[u]=m[g]?2:1,++v),g++;for(m[g]!==0&&(o[u]=2,++v),a=1;a<t;a++){g=a*f,h=a*s,m[g-f]!==m[g]&&(o[h]=m[g]?1:8,++v);let b=(m[g]?4:0)+(m[g-f]?8:0);for(u=1;u<e;u++)b=(b>>2)+(m[g+1]?4:0)+(m[g-f+1]?8:0),r[b]&&(o[h+u]=r[b],++v),g++;if(m[g-f]!==m[g]&&(o[h+u]=m[g]?2:4,++v),v>n)return null}for(g=f*(t-1),h=a*s,m[g]!==0&&(o[h]=8,++v),u=1;u<e;u++)m[g]!==m[g+1]&&(o[h+u]=m[g]?4:8,++v),g++;if(m[g]!==0&&(o[h+u]=4,++v),v>n)return null;const y=new Int32Array([0,s,-1,0,-s,0,0,0,1]),S=new Path2D;for(a=0;v&&a<=t;a++){let b=a*s;const E=b+e;for(;b<E&&!o[b];)b++;if(b===E)continue;S.moveTo(b%s,a);const x=b;let A=o[b];do{const k=y[A];do b+=k;while(!o[b]);const L=o[b];L!==5&&L!==10?(A=L,o[b]=0):(A=L&51*A>>4,o[b]&=A>>2|A<<2),S.lineTo(b%s,b/s|0),o[b]||--v}while(x!==b);--a}return m=null,o=null,function(b){b.save(),b.scale(1/e,-1/t),b.translate(0,-t),b.fill(S),b.beginPath(),b.restore()}}class wb{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=$A,this.textMatrixScale=1,this.fontMatrix=yx,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=vi.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=Se.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=Se.applyTransform(t,e),r=Se.applyTransform(t.slice(2),e),s=Se.applyTransform([t[0],t[3]],e),o=Se.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],r[0],s[0],o[0]),this.minY=Math.min(this.minY,n[1],r[1],s[1],o[1]),this.maxX=Math.max(this.maxX,n[0],r[0],s[0],o[0]),this.maxY=Math.max(this.maxY,n[1],r[1],s[1],o[1])}updateScalingPathMinMax(e,t){Se.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,r,s,o,a,u,h,f){const m=Se.bezierBoundingBox(t,n,r,s,o,a,u,h,f);f||this.updateRectMinMax(e,m)}getPathBoundingBox(e=Fi.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===Fi.STROKE){t||Gt("Stroke bounding box must include transform.");const r=Se.singularValueDecompose2dScale(t),s=r[0]*this.lineWidth/2,o=r[1]*this.lineWidth/2;n[0]-=s,n[1]-=o,n[2]+=s,n[3]+=o}return n}updateClipFromPath(){const e=Se.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Fi.FILL,t=null){return Se.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function bb(i,e){if(typeof ImageData<"u"&&e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%er,s=(t-r)/er,o=r===0?s:s+1,a=i.createImageData(n,er);let u=0,h;const f=e.data,m=a.data;let g,v,y,S;if(e.kind===y1.GRAYSCALE_1BPP){const C=f.byteLength,b=new Uint32Array(m.buffer,0,m.byteLength>>2),E=b.length,x=n+7>>3,A=4294967295,k=Di.isLittleEndian?4278190080:255;for(g=0;g<o;g++){for(y=g<s?er:r,h=0,v=0;v<y;v++){const L=C-u;let I=0;const M=L>x?n:L*8-7,z=M&-8;let D=0,j=0;for(;I<z;I+=8)j=f[u++],b[h++]=j&128?A:k,b[h++]=j&64?A:k,b[h++]=j&32?A:k,b[h++]=j&16?A:k,b[h++]=j&8?A:k,b[h++]=j&4?A:k,b[h++]=j&2?A:k,b[h++]=j&1?A:k;for(;I<M;I++)D===0&&(j=f[u++],D=128),b[h++]=j&D?A:k,D>>=1}for(;h<E;)b[h++]=0;i.putImageData(a,0,g*er)}}else if(e.kind===y1.RGBA_32BPP){for(v=0,S=n*er*4,g=0;g<s;g++)m.set(f.subarray(u,u+S)),u+=S,i.putImageData(a,0,v),v+=er;g<o&&(S=n*r*4,m.set(f.subarray(u,u+S)),i.putImageData(a,0,v))}else if(e.kind===y1.RGB_24BPP)for(y=er,S=n*y,g=0;g<o;g++){for(g>=s&&(y=r,S=n*y),h=0,v=S;v--;)m[h++]=f[u++],m[h++]=f[u++],m[h++]=f[u++],m[h++]=255;i.putImageData(a,0,g*er)}else throw new Error(`bad image kind: ${e.kind}`)}function Eb(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%er,s=(t-r)/er,o=r===0?s:s+1,a=i.createImageData(n,er);let u=0;const h=e.data,f=a.data;for(let m=0;m<o;m++){const g=m<s?er:r;({srcPos:u}=mR({src:h,srcPos:u,dest:f,width:n,height:g,nonBlackColor:0})),i.putImageData(a,0,m*er)}}function $f(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function $m(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!Ci){const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}}function Ab(i,e){if(e)return!0;const t=Se.singularValueDecompose2dScale(i);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Gl.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const SR=["butt","round","square"],wR=["miter","round","bevel"],bR={},Cb={};var Wl,Xx,$x;const Sw=class Sw{constructor(e,t,n,r,s,{optionalContentConfig:o,markedContentStack:a=null},u,h){F(this,Wl);this.ctx=e,this.current=new wb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new _R(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,n){const u=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...en(this.compositeCtx))}this.ctx.save(),$m(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=en(this.ctx)}executeOperatorList(e,t,n,r){const s=e.argsArray,o=e.fnArray;let a=t||0;const u=s.length;if(u===a)return a;const h=u-a>xb&&typeof n=="function",f=h?Date.now()+yR:0;let m=0;const g=this.commonObjs,v=this.objs;let y;for(;;){if(r!==void 0&&a===r.nextBreakPoint)return r.breakIt(a,n),a;if(y=o[a],y!==ys.dependency)this[y].apply(this,s[a]);else for(const S of s[a]){const C=S.startsWith("g_")?g:v;if(!C.has(S))return C.get(S,n),a}if(a++,a===u)return a;if(h&&++m>xb){if(Date.now()>f)return n(),a;m=0}}}endDrawing(){R(this,Wl,Xx).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),R(this,Wl,$x).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=n,u=r,h="prescale1",f,m;for(;s>2&&a>1||o>2&&u>1;){let g=a,v=u;s>2&&a>1&&(g=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/g),o>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,o/=u/v),f=this.cachedCanvases.getCanvas(h,g,v),m=f.context,m.clearRect(0,0,g,v),m.drawImage(e,0,0,a,u,0,0,g,v),e=f.canvas,a=g,u=v,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:u}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:r}=e,s=this.current.fillColor,o=this.current.patternFill,a=en(t);let u,h,f,m;if((e.bitmap||e.data)&&e.count>1){const M=e.bitmap||e.data.buffer;h=JSON.stringify(o?a:[a.slice(0,4),s]),u=this._cachedBitmapsMap.get(M),u||(u=new Map,this._cachedBitmapsMap.set(M,u));const z=u.get(h);if(z&&!o){const D=Math.round(Math.min(a[0],a[2])+a[4]),j=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:z,offsetX:D,offsetY:j}}f=z}f||(m=this.cachedCanvases.getCanvas("maskCanvas",n,r),Eb(m.context,e));let g=Se.transform(a,[1/n,0,0,-1/r,0,0]);g=Se.transform(g,[1,0,0,1,0,-r]);const[v,y,S,C]=Se.getAxialAlignedBoundingBox([0,0,n,r],g),b=Math.round(S-v)||1,E=Math.round(C-y)||1,x=this.cachedCanvases.getCanvas("fillCanvas",b,E),A=x.context,k=v,L=y;A.translate(-k,-L),A.transform(...g),f||(f=this._scaleImage(m.canvas,Oo(A)),f=f.img,u&&o&&u.set(h,f)),A.imageSmoothingEnabled=Ab(en(A),e.interpolate),Xm(A,f,0,0,f.width,f.height,0,0,n,r),A.globalCompositeOperation="source-in";const I=Se.transform(Oo(A),[1,0,0,1,-k,-L]);return A.fillStyle=o?s.getPattern(t,this,I,Fi.FILL):s,A.fillRect(0,0,n,r),u&&!o&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,x.canvas)),{canvas:x.canvas,offsetX:Math.round(k),offsetY:Math.round(L)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=SR[e]}setLineJoin(e){this.ctx.lineJoin=wR[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const s=this.ctx;s.setTransform(...en(this.suspendedCtx)),$f(this.suspendedCtx,s),vR(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),$f(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const s=r[0],o=r[1],a=r[2]-s,u=r[3]-o;a===0||u===0||(this.genericComposeSMask(t.context,n,a,u,t.subtype,t.backdrop,t.transferMap,s,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,s,o,a,u,h,f,m){let g=e.canvas,v=u-f,y=h-m;if(o){const C=Se.makeHexColor(...o);if(v<0||y<0||v+n>g.width||y+r>g.height){const b=this.cachedCanvases.getCanvas("maskExtension",n,r),E=b.context;E.drawImage(g,-v,-y),E.globalCompositeOperation="destination-atop",E.fillStyle=C,E.fillRect(0,0,n,r),E.globalCompositeOperation="source-over",g=b.canvas,v=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(v,y,n,r),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=C,e.fillRect(v,y,n,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const S=new Path2D;S.rect(u,h,n,r),t.clip(S),t.globalCompositeOperation="destination-in",t.drawImage(g,v,y,n,r,u,h,n,r),t.restore()}save(){this.inSMaskMode?($f(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),$f(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,s,o){this.ctx.transform(e,t,n,r,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const r=this.ctx,s=this.current;let o=s.x,a=s.y,u,h;const f=en(r),m=f[0]===0&&f[3]===0||f[1]===0&&f[2]===0,g=m?n.slice(0):null;for(let v=0,y=0,S=e.length;v<S;v++)switch(e[v]|0){case ys.rectangle:o=t[y++],a=t[y++];const C=t[y++],b=t[y++],E=o+C,x=a+b;r.moveTo(o,a),C===0||b===0?r.lineTo(E,x):(r.lineTo(E,a),r.lineTo(E,x),r.lineTo(o,x)),m||s.updateRectMinMax(f,[o,a,E,x]),r.closePath();break;case ys.moveTo:o=t[y++],a=t[y++],r.moveTo(o,a),m||s.updatePathMinMax(f,o,a);break;case ys.lineTo:o=t[y++],a=t[y++],r.lineTo(o,a),m||s.updatePathMinMax(f,o,a);break;case ys.curveTo:u=o,h=a,o=t[y+4],a=t[y+5],r.bezierCurveTo(t[y],t[y+1],t[y+2],t[y+3],o,a),s.updateCurvePathMinMax(f,u,h,t[y],t[y+1],t[y+2],t[y+3],o,a,g),y+=6;break;case ys.curveTo2:u=o,h=a,r.bezierCurveTo(o,a,t[y],t[y+1],t[y+2],t[y+3]),s.updateCurvePathMinMax(f,u,h,o,a,t[y],t[y+1],t[y+2],t[y+3],g),o=t[y+2],a=t[y+3],y+=4;break;case ys.curveTo3:u=o,h=a,o=t[y+2],a=t[y+3],r.bezierCurveTo(t[y],t[y+1],o,a,o,a),s.updateCurvePathMinMax(f,u,h,t[y],t[y+1],o,a,o,a,g),y+=4;break;case ys.closePath:r.closePath();break}m&&s.updateScalingPathMinMax(f,g),s.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,Oo(t),Fi.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let s=!1;r&&(t.save(),t.fillStyle=n.getPattern(t,this,Oo(t),Fi.FILL),s=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=bR}eoClip(){this.pendingClip=Cb}beginText(){this.current.textMatrix=$A,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var f;const n=this.commonObjs.get(e),r=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=n.fontMatrix||yx,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Ke("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const s=n.loadedName||"sans-serif",o=((f=n.systemFontInfo)==null?void 0:f.css)||`"${s}", ${n.fallbackName}`;let a="normal";n.black?a="900":n.bold&&(a="bold");const u=n.italic?"italic":"normal";let h=t;t<vb?h=vb:t>_b&&(h=_b),this.current.fontSizeScale=t/h,this.ctx.font=`${u} ${a} ${h}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,s,o){this.current.textMatrix=[e,t,n,r,s,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r){const s=this.ctx,o=this.current,a=o.font,u=o.textRenderingMode,h=o.fontSize/o.fontSizeScale,f=u&vi.FILL_STROKE_MASK,m=!!(u&vi.ADD_TO_PATH_FLAG),g=o.patternFill&&!a.missingFile;let v;(a.disableFontFace||m||g)&&(v=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||g?(s.save(),s.translate(t,n),s.beginPath(),v(s,h),r&&s.setTransform(...r),(f===vi.FILL||f===vi.FILL_STROKE)&&s.fill(),(f===vi.STROKE||f===vi.FILL_STROKE)&&s.stroke(),s.restore()):((f===vi.FILL||f===vi.FILL_STROKE)&&s.fillText(e,t,n),(f===vi.STROKE||f===vi.FILL_STROKE)&&s.strokeText(e,t,n)),m&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:en(s),x:t,y:n,fontSize:h,addToPath:v})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return at(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const s=this.ctx,o=t.fontSizeScale,a=t.charSpacing,u=t.wordSpacing,h=t.fontDirection,f=t.textHScale*h,m=e.length,g=n.vertical,v=g?1:-1,y=n.defaultVMetrics,S=r*t.fontMatrix[0],C=t.textRenderingMode===vi.FILL&&!n.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),h>0?s.scale(f,-1):s.scale(f,1);let b;if(t.patternFill){s.save();const L=t.fillColor.getPattern(s,this,Oo(s),Fi.FILL);b=en(s),s.restore(),s.fillStyle=L}let E=t.lineWidth;const x=t.textMatrixScale;if(x===0||E===0){const L=t.textRenderingMode&vi.FILL_STROKE_MASK;(L===vi.STROKE||L===vi.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=x;if(o!==1&&(s.scale(o,o),E/=o),s.lineWidth=E,n.isInvalidPDFjsFont){const L=[];let I=0;for(const M of e)L.push(M.unicode),I+=M.width;s.fillText(L.join(""),0,0),t.x+=I*S*f,s.restore(),this.compose();return}let A=0,k;for(k=0;k<m;++k){const L=e[k];if(typeof L=="number"){A+=v*L*r/1e3;continue}let I=!1;const M=(L.isSpace?u:0)+a,z=L.fontChar,D=L.accent;let j,U,W=L.width;if(g){const K=L.vmetric||y,ne=-(L.vmetric?K[1]:W*.5)*S,Z=K[2]*S;W=K?-K[0]:W,j=ne/o,U=(A+Z)/o}else j=A/o,U=0;if(n.remeasure&&W>0){const K=s.measureText(z).width*1e3/r*o;if(W<K&&this.isFontSubpixelAAEnabled){const ne=W/K;I=!0,s.save(),s.scale(ne,1),j/=ne}else W!==K&&(j+=(W-K)/2e3*r/o)}if(this.contentVisible&&(L.isInFont||n.missingFile)){if(C&&!D)s.fillText(z,j,U);else if(this.paintChar(z,j,U,b),D){const K=j+r*D.offset.x/o,ne=U-r*D.offset.y/o;this.paintChar(D.fontChar,K,ne,b)}}const Y=g?W*S-M*h:W*S+M*h;A+=Y,I&&s.restore()}g?t.y-=A:t.x+=A*f,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,r=n.font,s=n.fontSize,o=n.fontDirection,a=r.vertical?1:-1,u=n.charSpacing,h=n.wordSpacing,f=n.textHScale*o,m=n.fontMatrix||yx,g=e.length,v=n.textRenderingMode===vi.INVISIBLE;let y,S,C,b;if(!(v||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(f,o),y=0;y<g;++y){if(S=e[y],typeof S=="number"){b=a*S*s/1e3,this.ctx.translate(b,0),n.x+=b*f;continue}const E=(S.isSpace?h:0)+u,x=r.charProcOperatorList[S.operatorListId];if(!x){Ke(`Type3 character "${S.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=S,this.save(),t.scale(s,s),t.transform(...m),this.executeOperatorList(x),this.restore()),C=Se.applyTransform([S.width,0],m)[0]*s+E,t.translate(C,0),n.x+=C*f}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,s,o){this.ctx.rect(n,r,s-n,o-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],r=this.baseTransform||en(this.ctx),s={createCanvasGraphics:o=>new Sw(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Wx(e,n,this.ctx,s,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=Se.makeHexColor(e,t,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=Se.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=gR(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Oo(t),Fi.SHADING);const r=Oo(t);if(r){const{width:s,height:o}=t.canvas,[a,u,h,f]=Se.getAxialAlignedBoundingBox([0,0,s,o],r);this.ctx.fillRect(a,u,h-a,f-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Gt("Should not call beginInlineImage")}beginImageData(){Gt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=en(this.ctx),t)){const n=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],n,r),this.current.updateRectMinMax(en(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||u2("TODO: Support non-isolated groups."),e.knockout&&Ke("Knockout groups not supported.");const n=en(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=Se.getAxialAlignedBoundingBox(e.bbox,en(t));const s=[0,0,t.canvas.width,t.canvas.height];r=Se.intersect(r,s)||[0,0,0,0];const o=Math.floor(r[0]),a=Math.floor(r[1]),u=Math.max(Math.ceil(r[2])-o,1),h=Math.max(Math.ceil(r[3])-a,1);this.current.startNewPathAndClipBox([0,0,u,h]);let f="groupAt"+this.groupLevel;e.smask&&(f+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(f,u,h),g=m.context;g.translate(-o,-a),g.transform(...n),e.smask?this.smaskStack.push({canvas:m.canvas,context:g,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),$f(t,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=en(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const s=Se.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,n,r,s){if(R(this,Wl,Xx).call(this),$m(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(s&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[u,h]=Se.singularValueDecompose2dScale(en(this.ctx)),{viewportScale:f}=this,m=Math.ceil(o*this.outputScaleX*f),g=Math.ceil(a*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(m,g);const{canvas:v,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(u,0,0,-h,0,a*h),$m(this.ctx)}else $m(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new wb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),R(this,Wl,$x).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=xR(e)),r.compiled)){r.compiled(n);return}const s=this._createMaskCanvas(e),o=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,s.offsetX,s.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,r=0,s,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const u=en(a);a.transform(t,n,r,s,0,0);const h=this._createMaskCanvas(e);a.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]);for(let f=0,m=o.length;f<m;f+=2){const g=Se.transform(u,[t,n,r,s,o[f],o[f+1]]),[v,y]=Se.applyTransform([0,0],g);a.drawImage(h.canvas,v,y)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const s of e){const{data:o,width:a,height:u,transform:h}=s,f=this.cachedCanvases.getCanvas("maskCanvas",a,u),m=f.context;m.save();const g=this.getObject(o,s);Eb(m,g),m.globalCompositeOperation="source-in",m.fillStyle=r?n.getPattern(m,this,Oo(t),Fi.FILL):n,m.fillRect(0,0,a,u),m.restore(),t.save(),t.transform(...h),t.scale(1,-1),Xm(t,f.canvas,0,0,a,u,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ke("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){Ke("Dependent image isn't ready yet");return}const o=s.width,a=s.height,u=[];for(let h=0,f=r.length;h<f;h+=2)u.push({transform:[t,0,0,n,r[h],r[h+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(s,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,r),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;if(this.save(),!Ci){const{filter:a}=r;a!=="none"&&a!==""&&(r.filter="none")}r.scale(1/t,-1/n);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const u=this.cachedCanvases.getCanvas("inlineImage",t,n).context;bb(u,e),s=this.applyTransferMapsToCanvas(u)}const o=this._scaleImage(s,Oo(r));r.imageSmoothingEnabled=Ab(en(r),e.interpolate),Xm(r,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const s=e.width,o=e.height,u=this.cachedCanvases.getCanvas("inlineImage",s,o).context;bb(u,e),r=this.applyTransferMapsToCanvas(u)}for(const s of t)n.save(),n.transform(...s.transform),n.scale(1,-1),Xm(n,r,s.x,s.y,s.w,s.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===Cb?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=en(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:s}=this.ctx.getTransform();let o,a;if(n===0&&r===0){const u=Math.abs(t),h=Math.abs(s);if(u===h)if(e===0)o=a=1/u;else{const f=u*e;o=a=f<1?1/f:1}else if(e===0)o=1/u,a=1/h;else{const f=u*e,m=h*e;o=f<1?1/f:1,a=m<1?1/m:1}}else{const u=Math.abs(t*s-n*r),h=Math.hypot(t,n),f=Math.hypot(r,s);if(e===0)o=f/u,a=h/u;else{const m=e*u;o=f>m?f/m:1,a=h>m?h/m:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[r,s]=this.getScaleForStroking();if(t.lineWidth=n||1,r===1&&s===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(r,s),o.length>0){const a=Math.max(r,s);t.setLineDash(o.map(u=>u/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Wl=new WeakSet,Xx=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},$x=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Yh=Sw;for(const i in ys)Yh.prototype[i]!==void 0&&(Yh.prototype[ys[i]]=Yh.prototype[i]);var Eg,Ag;class ga{static get workerPort(){return d(this,Eg)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");T(this,Eg,e)}static get workerSrc(){return d(this,Ag)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");T(this,Ag,e)}}Eg=new WeakMap,Ag=new WeakMap,F(ga,Eg,null),F(ga,Ag,"");const Ym={DATA:1,ERROR:2},wn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function hr(i){switch(i instanceof Error||typeof i=="object"&&i!==null||Gt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Bu(i.message);case"MissingPDFException":return new Gu(i.message);case"PasswordException":return new vx(i.message,i.code);case"UnexpectedResponseException":return new h2(i.message,i.status);case"UnknownErrorException":return new _x(i.message,i.details);default:return new _x(i.message,i.toString())}}var dd,es,RC,LC,NC,A1;class up{constructor(e,t,n){F(this,es);F(this,dd,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",R(this,es,RC).bind(this),{signal:d(this,dd).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,t,n,r){const s=this.streamId++,o=this.sourceName,a=this.targetName,u=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[s]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:t,desiredSize:h.desiredSize},r),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[s].pullCall=f,u.postMessage({sourceName:o,targetName:a,stream:wn.PULL,streamId:s,desiredSize:h.desiredSize}),f.promise},cancel:h=>{Nn(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[s].cancelCall=f,this.streamControllers[s].isClosed=!0,u.postMessage({sourceName:o,targetName:a,stream:wn.CANCEL,streamId:s,reason:hr(h)}),f.promise}},n)}destroy(){var e;(e=d(this,dd))==null||e.abort(),T(this,dd,null)}}dd=new WeakMap,es=new WeakSet,RC=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){R(this,es,NC).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Ym.DATA)r.resolve(e.data);else if(e.callback===Ym.ERROR)r.reject(hr(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,s=this.comObj;new Promise(function(o){o(t(e.data))}).then(function(o){s.postMessage({sourceName:n,targetName:r,callback:Ym.DATA,callbackId:e.callbackId,data:o})},function(o){s.postMessage({sourceName:n,targetName:r,callback:Ym.ERROR,callbackId:e.callbackId,reason:hr(o)})});return}if(e.streamId){R(this,es,LC).call(this,e);return}t(e.data)},LC=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],u={enqueue(h,f=1,m){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=f,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:r,stream:wn.ENQUEUE,streamId:t,chunk:h},m)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:wn.CLOSE,streamId:t}),delete o.streamSinks[t])},error(h){Nn(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:wn.ERROR,streamId:t,reason:hr(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,new Promise(function(h){h(a(e.data,u))}).then(function(){s.postMessage({sourceName:n,targetName:r,stream:wn.START_COMPLETE,streamId:t,success:!0})},function(h){s.postMessage({sourceName:n,targetName:r,stream:wn.START_COMPLETE,streamId:t,reason:hr(h)})})},NC=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case wn.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(hr(e.reason));break;case wn.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(hr(e.reason));break;case wn.PULL:if(!a){s.postMessage({sourceName:n,targetName:r,stream:wn.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(u){var h;u((h=a.onPull)==null?void 0:h.call(a))}).then(function(){s.postMessage({sourceName:n,targetName:r,stream:wn.PULL_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:n,targetName:r,stream:wn.PULL_COMPLETE,streamId:t,reason:hr(u)})});break;case wn.ENQUEUE:if(Nn(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case wn.CLOSE:if(Nn(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),R(this,es,A1).call(this,o,t);break;case wn.ERROR:Nn(o,"error should have stream controller"),o.controller.error(hr(e.reason)),R(this,es,A1).call(this,o,t);break;case wn.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(hr(e.reason)),R(this,es,A1).call(this,o,t);break;case wn.CANCEL:if(!a)break;new Promise(function(u){var h;u((h=a.onCancel)==null?void 0:h.call(a,hr(e.reason)))}).then(function(){s.postMessage({sourceName:n,targetName:r,stream:wn.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:n,targetName:r,stream:wn.CANCEL_COMPLETE,streamId:t,reason:hr(u)})}),a.sinkCapability.reject(hr(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},A1=async function(e,t){var n,r,s;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var Kc,Cg;class ER{constructor({parsedData:e,rawData:t}){F(this,Kc);F(this,Cg);T(this,Kc,e),T(this,Cg,t)}getRaw(){return d(this,Cg)}get(e){return d(this,Kc).get(e)??null}getAll(){return B4(d(this,Kc))}has(e){return d(this,Kc).has(e)}}Kc=new WeakMap,Cg=new WeakMap;const Ah=Symbol("INTERNAL");var Pg,kg,Tg,fd;class AR{constructor(e,{name:t,intent:n,usage:r,rbGroups:s}){F(this,Pg,!1);F(this,kg,!1);F(this,Tg,!1);F(this,fd,!0);T(this,Pg,!!(e&Sr.DISPLAY)),T(this,kg,!!(e&Sr.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=s}get visible(){if(d(this,Tg))return d(this,fd);if(!d(this,fd))return!1;const{print:e,view:t}=this.usage;return d(this,Pg)?(t==null?void 0:t.viewState)!=="OFF":d(this,kg)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Ah&&Gt("Internal method `_setVisible` called."),T(this,Tg,n),T(this,fd,t)}}Pg=new WeakMap,kg=new WeakMap,Tg=new WeakMap,fd=new WeakMap;var fl,Et,pd,gd,Mg,Yx;class CR{constructor(e,t=Sr.DISPLAY){F(this,Mg);F(this,fl,null);F(this,Et,new Map);F(this,pd,null);F(this,gd,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,T(this,gd,e.order);for(const n of e.groups)d(this,Et).set(n.id,new AR(t,n));if(e.baseState==="OFF")for(const n of d(this,Et).values())n._setVisible(Ah,!1);for(const n of e.on)d(this,Et).get(n)._setVisible(Ah,!0);for(const n of e.off)d(this,Et).get(n)._setVisible(Ah,!1);T(this,pd,this.getHash())}}isVisible(e){if(d(this,Et).size===0)return!0;if(!e)return u2("Optional content group not defined."),!0;if(e.type==="OCG")return d(this,Et).has(e.id)?d(this,Et).get(e.id).visible:(Ke(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return R(this,Mg,Yx).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!d(this,Et).has(t))return Ke(`Optional content group not found: ${t}`),!0;if(d(this,Et).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!d(this,Et).has(t))return Ke(`Optional content group not found: ${t}`),!0;if(!d(this,Et).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!d(this,Et).has(t))return Ke(`Optional content group not found: ${t}`),!0;if(!d(this,Et).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!d(this,Et).has(t))return Ke(`Optional content group not found: ${t}`),!0;if(d(this,Et).get(t).visible)return!1}return!0}return Ke(`Unknown optional content policy ${e.policy}.`),!0}return Ke(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var s;const r=d(this,Et).get(e);if(!r){Ke(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const a of o)a!==e&&((s=d(this,Et).get(a))==null||s._setVisible(Ah,!1,!0));r._setVisible(Ah,!!t,!0),T(this,fl,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const s=d(this,Et).get(r);if(s)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!s.visible,t);break}}T(this,fl,null)}get hasInitialVisibility(){return d(this,pd)===null||this.getHash()===d(this,pd)}getOrder(){return d(this,Et).size?d(this,gd)?d(this,gd).slice():[...d(this,Et).keys()]:null}getGroups(){return d(this,Et).size>0?B4(d(this,Et)):null}getGroup(e){return d(this,Et).get(e)||null}getHash(){if(d(this,fl)!==null)return d(this,fl);const e=new xC;for(const[t,n]of d(this,Et))e.update(`${t}:${n.visible}`);return T(this,fl,e.hexdigest())}}fl=new WeakMap,Et=new WeakMap,pd=new WeakMap,gd=new WeakMap,Mg=new WeakSet,Yx=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const s=e[r];let o;if(Array.isArray(s))o=R(this,Mg,Yx).call(this,s);else if(d(this,Et).has(s))o=d(this,Et).get(s).visible;else return Ke(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class PR{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Nn(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(s==null?void 0:s.length)>0){const u=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,h)=>{this._onReceiveData({begin:u,chunk:h})}),e.addProgressListener((u,h)=>{this._onProgress({loaded:u,total:h})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(n),!0)});Nn(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,r,s;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(s=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||s.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Nn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new kR(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new TR(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class kR{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=W4(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class TR{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function MR(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let f=a(t);return f=unescape(f),f=u(f),f=h(f),s(f)}if(t=o(i),t){const f=h(t);return s(f)}if(t=n("filename","i").exec(i),t){t=t[1];let f=a(t);return f=h(f),s(f)}function n(f,m){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function r(f,m){if(f){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const g=new TextDecoder(f,{fatal:!0}),v=d2(m);m=g.decode(v),e=!1}catch{}}return m}function s(f){return e&&/[\x80-\xff]/.test(f)&&(f=r("utf-8",f),e&&(f=r("iso-8859-1",f))),f}function o(f){const m=[];let g;const v=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=v.exec(f))!==null;){let[,S,C,b]=g;if(S=parseInt(S,10),S in m){if(S===0)break;continue}m[S]=[C,b]}const y=[];for(let S=0;S<m.length&&S in m;++S){let[C,b]=m[S];b=a(b),C&&(b=unescape(b),S===0&&(b=u(b))),y.push(b)}return y.join("")}function a(f){if(f.startsWith('"')){const m=f.slice(1).split('\\"');for(let g=0;g<m.length;++g){const v=m[g].indexOf('"');v!==-1&&(m[g]=m[g].slice(0,v),m.length=g+1),m[g]=m[g].replaceAll(/\\(.)/g,"$1")}f=m.join('"')}return f}function u(f){const m=f.indexOf("'");if(m===-1)return f;const g=f.slice(0,m),y=f.slice(m+1).replace(/^[^']*'/,"");return r(g,y)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,g,v,y){if(v==="q"||v==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,C){return String.fromCharCode(parseInt(C,16))}),r(g,y);try{y=atob(y)}catch{}return r(g,y)})}return""}function q4(i,e){const t=new Headers;if(!i||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function Q4({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(i.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*t)||n||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function J4(i){const e=i.get("Content-Disposition");if(e){let t=MR(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(W4(t))return t}return null}function g2(i,e){return i===404||i===0&&e.startsWith("file:")?new Gu('Missing PDF "'+e+'".'):new h2(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i)}function FC(i){return i===200||i===206}function IC(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function DC(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Ke(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class Pb{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=q4(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Nn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new RR(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new LR(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class RR{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,IC(n,this._withCredentials,this._abortController)).then(s=>{if(!FC(s.status))throw g2(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const o=s.headers,{allowRangeRequests:a,suggestedLength:u}=Q4({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=u||this._contentLength,this._filename=J4(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Bu("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:DC(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class LR{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${n-1}`);const o=r.url;fetch(o,IC(s,this._withCredentials,this._abortController)).then(a=>{if(!FC(a.status))throw g2(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:DC(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const o3=200,a3=206;function NR(i){const e=i.response;return typeof e!="string"?e:d2(e).buffer}class FR{constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=q4(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const r={begin:e,end:t};for(const s in n)r[s]=n[s];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,o]of this.headers)t.setRequestHeader(s,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=a3):r.expectedStatus=o3,t.responseType="arraybuffer",e.onError&&(t.onerror=function(s){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var r;const n=this.pendingRequests[e];n&&((r=n.onProgress)==null||r.call(n,t))}onStateChange(e,t){var u,h,f;const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){(u=n.onError)==null||u.call(n,r.status);return}const s=r.status||o3;if(!(s===o3&&n.expectedStatus===a3)&&s!==n.expectedStatus){(h=n.onError)==null||h.call(n,r.status);return}const a=NR(r);if(s===a3){const m=r.getResponseHeader("Content-Range"),g=/bytes (\d+)-(\d+)\/(\d+)/.exec(m);n.onDone({begin:parseInt(g[1],10),chunk:a})}else a?n.onDone({begin:0,chunk:a}):(f=n.onError)==null||f.call(n,r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class IR{constructor(e){this._source=e,this._manager=new FR(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Nn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new DR(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new OR(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class DR{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(o=>{const[a,...u]=o.split(": ");return[a,u.join(": ")]})),{allowRangeRequests:r,suggestedLength:s}=Q4({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=J4(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=g2(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class OR{constructor(e,t,n){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=g2(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const zR=/^[a-z][a-z0-9\-+.]+:/i;function jR(i){if(zR.test(i))return new URL(i);const e=Bl.get("url");return new URL(e.pathToFileURL(i))}function OC(i,e,t){return i.protocol==="http:"?Bl.get("http").request(i,{headers:e},t):Bl.get("https").request(i,{headers:e},t)}class HR{constructor(e){this.source=e,this.url=jR(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=q4(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Nn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new UR(this):new GR(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new VR(this,e,t):new BR(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class zC{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Bu("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class jC{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class GR extends zC{constructor(e){super(e);const t=Object.fromEntries(e.headers),n=r=>{if(r.statusCode===404){const u=new Gu(`Missing PDF "${this._url}".`);this._storedError=u,this._headersCapability.reject(u);return}this._headersCapability.resolve(),this._setReadableStream(r);const s=new Headers(this._readableStream.headers),{allowRangeRequests:o,suggestedLength:a}=Q4({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=J4(s)};this._request=OC(this._url,t,n),this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class BR extends jC{constructor(e,t,n){super(e);const r=Object.fromEntries(e.headers);r.Range=`bytes=${t}-${n-1}`;const s=o=>{if(o.statusCode===404){const a=new Gu(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(o)};this._request=OC(this._url,r,s),this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class UR extends zC{constructor(e){super(e);const t=Bl.get("fs");t.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new Gu(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class VR extends jC{constructor(e,t,n){super(e);const r=Bl.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:n-1}))}}const WR=1e5,$i=30,XR=.8;var N8,pl,Ji,Rg,Lg,qc,Qo,Ng,Fg,Qc,md,yd,gl,vd,Ig,_d,Jc,Dg,Og,ln,Zc,eu,zg,ml,xd,Pa,HC,GC,qx,Cr,C1,Qx,BC,UC;let Kx=(ln=class{constructor({textContentSource:e,container:t,viewport:n}){F(this,Pa);F(this,pl,Promise.withResolvers());F(this,Ji,null);F(this,Rg,!1);F(this,Lg,!!((N8=globalThis.FontInspector)!=null&&N8.enabled));F(this,qc,null);F(this,Qo,null);F(this,Ng,0);F(this,Fg,0);F(this,Qc,null);F(this,md,null);F(this,yd,0);F(this,gl,0);F(this,vd,Object.create(null));F(this,Ig,[]);F(this,_d,null);F(this,Jc,[]);F(this,Dg,new WeakMap);F(this,Og,null);var u;if(e instanceof ReadableStream)T(this,_d,e);else if(typeof e=="object")T(this,_d,new ReadableStream({start(h){h.enqueue(e),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');T(this,Ji,T(this,md,t)),T(this,gl,n.scale*(globalThis.devicePixelRatio||1)),T(this,yd,n.rotation),T(this,Qo,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:s,pageX:o,pageY:a}=n.rawDims;T(this,Og,[1,0,0,-1,-o,a+s]),T(this,Fg,r),T(this,Ng,s),R(u=ln,Cr,BC).call(u),Nu(t,n),d(this,pl).promise.finally(()=>{d(ln,xd).delete(this),T(this,Qo,null),T(this,vd,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Di.platform;return at(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{d(this,Qc).read().then(({value:t,done:n})=>{if(n){d(this,pl).resolve();return}d(this,qc)??T(this,qc,t.lang),Object.assign(d(this,vd),t.styles),R(this,Pa,HC).call(this,t.items),e()},d(this,pl).reject)};return T(this,Qc,d(this,_d).getReader()),d(ln,xd).add(this),e(),d(this,pl).promise}update({viewport:e,onBefore:t=null}){var s;const n=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==d(this,yd)&&(t==null||t(),T(this,yd,r),Nu(d(this,md),{rotation:r})),n!==d(this,gl)){t==null||t(),T(this,gl,n);const o={div:null,properties:null,ctx:R(s=ln,Cr,C1).call(s,d(this,qc))};for(const a of d(this,Jc))o.properties=d(this,Dg).get(a),o.div=a,R(this,Pa,qx).call(this,o)}}cancel(){var t;const e=new Bu("TextLayer task cancelled.");(t=d(this,Qc))==null||t.cancel(e).catch(()=>{}),T(this,Qc,null),d(this,pl).reject(e)}get textDivs(){return d(this,Jc)}get textContentItemsStr(){return d(this,Ig)}static cleanup(){if(!(d(this,xd).size>0)){d(this,Zc).clear();for(const{canvas:e}of d(this,eu).values())e.remove();d(this,eu).clear()}}},pl=new WeakMap,Ji=new WeakMap,Rg=new WeakMap,Lg=new WeakMap,qc=new WeakMap,Qo=new WeakMap,Ng=new WeakMap,Fg=new WeakMap,Qc=new WeakMap,md=new WeakMap,yd=new WeakMap,gl=new WeakMap,vd=new WeakMap,Ig=new WeakMap,_d=new WeakMap,Jc=new WeakMap,Dg=new WeakMap,Og=new WeakMap,Zc=new WeakMap,eu=new WeakMap,zg=new WeakMap,ml=new WeakMap,xd=new WeakMap,Pa=new WeakSet,HC=function(e){var r,s;if(d(this,Rg))return;(s=d(this,Qo)).ctx??(s.ctx=R(r=ln,Cr,C1).call(r,d(this,qc)));const t=d(this,Jc),n=d(this,Ig);for(const o of e){if(t.length>WR){Ke("Ignoring additional textDivs for performance reasons."),T(this,Rg,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=d(this,Ji);T(this,Ji,document.createElement("span")),d(this,Ji).classList.add("markedContent"),o.id!==null&&d(this,Ji).setAttribute("id",`${o.id}`),a.append(d(this,Ji))}else o.type==="endMarkedContent"&&T(this,Ji,d(this,Ji).parentNode);continue}n.push(o.str),R(this,Pa,GC).call(this,o)}},GC=function(e){var S;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};d(this,Jc).push(t);const r=Se.transform(d(this,Og),e.transform);let s=Math.atan2(r[1],r[0]);const o=d(this,vd)[e.fontName];o.vertical&&(s+=Math.PI/2);let a=d(this,Lg)&&o.fontSubstitution||o.fontFamily;a=ln.fontFamilyMap.get(a)||a;const u=Math.hypot(r[2],r[3]),h=u*R(S=ln,Cr,UC).call(S,a,d(this,qc));let f,m;s===0?(f=r[4],m=r[5]-h):(f=r[4]+h*Math.sin(s),m=r[5]-h*Math.cos(s));const g="calc(var(--scale-factor)*",v=t.style;d(this,Ji)===d(this,md)?(v.left=`${(100*f/d(this,Fg)).toFixed(2)}%`,v.top=`${(100*m/d(this,Ng)).toFixed(2)}%`):(v.left=`${g}${f.toFixed(2)}px)`,v.top=`${g}${m.toFixed(2)}px)`),v.fontSize=`${g}${(d(ln,ml)*u).toFixed(2)}px)`,v.fontFamily=a,n.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,d(this,Lg)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),s!==0&&(n.angle=s*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const C=Math.abs(e.transform[0]),b=Math.abs(e.transform[3]);C!==b&&Math.max(C,b)/Math.min(C,b)>1.5&&(y=!0)}if(y&&(n.canvasWidth=o.vertical?e.height:e.width),d(this,Dg).set(t,n),d(this,Qo).div=t,d(this,Qo).properties=n,R(this,Pa,qx).call(this,d(this,Qo)),n.hasText&&d(this,Ji).append(t),n.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),d(this,Ji).append(C)}},qx=function(e){var a;const{div:t,properties:n,ctx:r}=e,{style:s}=t;let o="";if(d(ln,ml)>1&&(o=`scale(${1/d(ln,ml)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=s,{canvasWidth:h,fontSize:f}=n;R(a=ln,Cr,Qx).call(a,r,f*d(this,gl),u);const{width:m}=r.measureText(t.textContent);m>0&&(o=`scaleX(${h*d(this,gl)/m}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(s.transform=o)},Cr=new WeakSet,C1=function(e=null){let t=d(this,eu).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),d(this,eu).set(e,t),d(this,zg).set(t,{size:0,family:""})}return t},Qx=function(e,t,n){const r=d(this,zg).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},BC=function(){if(d(this,ml)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),T(this,ml,e.getBoundingClientRect().height),e.remove()},UC=function(e,t){const n=d(this,Zc).get(e);if(n)return n;const r=R(this,Cr,C1).call(this,t);r.canvas.width=r.canvas.height=$i,R(this,Cr,Qx).call(this,r,$i,e);const s=r.measureText("");let o=s.fontBoundingBoxAscent,a=Math.abs(s.fontBoundingBoxDescent);if(o){const f=o/(o+a);return d(this,Zc).set(e,f),r.canvas.width=r.canvas.height=0,f}r.strokeStyle="red",r.clearRect(0,0,$i,$i),r.strokeText("g",0,0);let u=r.getImageData(0,0,$i,$i).data;a=0;for(let f=u.length-1-3;f>=0;f-=4)if(u[f]>0){a=Math.ceil(f/4/$i);break}r.clearRect(0,0,$i,$i),r.strokeText("A",0,$i),u=r.getImageData(0,0,$i,$i).data,o=0;for(let f=0,m=u.length;f<m;f+=4)if(u[f]>0){o=$i-Math.floor(f/4/$i);break}r.canvas.width=r.canvas.height=0;const h=o?o/(o+a):XR;return d(this,Zc).set(e,h),h},F(ln,Cr),F(ln,Zc,new Map),F(ln,eu,new Map),F(ln,zg,new WeakMap),F(ln,ml,null),F(ln,xd,new Set),ln);class Qp{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(s){var u;if(!s)return;let o=null;const a=s.name;if(a==="#text")o=s.value;else if(Qp.shouldBuildText(a))(u=s==null?void 0:s.attributes)!=null&&u.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&t.push({str:o}),!!s.children)for(const h of s.children)r(h)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const $R=65536,YR=100,KR=5e3,qR=Ci?lR:sR,QR=Ci?cR:AC,JR=Ci?aR:oR,ZR=Ci?uR:TC;function eL(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new Jx,{docId:t}=e,n=i.url?tL(i.url):null,r=i.data?nL(i.data):null,s=i.httpHeaders||null,o=i.withCredentials===!0,a=i.password??null,u=i.range instanceof VC?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:$R;let f=i.worker instanceof Kh?i.worker:null;const m=i.verbosity,g=typeof i.docBaseUrl=="string"&&!p2(i.docBaseUrl)?i.docBaseUrl:null,v=typeof i.cMapUrl=="string"?i.cMapUrl:null,y=i.cMapPacked!==!1,S=i.CMapReaderFactory||QR,C=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,b=i.StandardFontDataFactory||ZR,E=i.stopAtErrors!==!0,x=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,A=i.isEvalSupported!==!1,k=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Ci,L=typeof i.isChrome=="boolean"?i.isChrome:!Di.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),I=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,M=typeof i.disableFontFace=="boolean"?i.disableFontFace:Ci,z=i.fontExtraProperties===!0,D=i.enableXfa===!0,j=i.ownerDocument||globalThis.document,U=i.disableRange===!0,W=i.disableStream===!0,Y=i.disableAutoFetch===!0,K=i.pdfBug===!0,ne=i.CanvasFactory||qR,Z=i.FilterFactory||JR,G=i.enableHWA===!0,ie=u?u.length:i.length??NaN,ee=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Ci&&!M,re=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:S===AC&&b===TC&&v&&C&&ip(v,document.baseURI)&&ip(C,document.baseURI);i.canvasFactory&&gb("`canvasFactory`-instance option, please use `CanvasFactory` instead."),i.filterFactory&&gb("`filterFactory`-instance option, please use `FilterFactory` instead.");const ae=null;DM(m);const ge={canvasFactory:new ne({ownerDocument:j,enableHWA:G}),filterFactory:new Z({docId:t,ownerDocument:j}),cMapReaderFactory:re?null:new S({baseUrl:v,isCompressed:y}),standardFontDataFactory:re?null:new b({baseUrl:C})};if(!f){const Te={verbosity:m,port:ga.workerPort};f=Te.port?Kh.fromPort(Te):new Kh(Te),e._worker=f}const qe={docId:t,apiVersion:"4.8.69",data:r,password:a,disableAutoFetch:Y,rangeChunkSize:h,length:ie,docBaseUrl:g,enableXfa:D,evaluatorOptions:{maxImageSize:x,disableFontFace:M,ignoreErrors:E,isEvalSupported:A,isOffscreenCanvasSupported:k,isChrome:L,canvasMaxAreaInBytes:I,fontExtraProperties:z,useSystemFonts:ee,cMapUrl:re?v:null,standardFontDataUrl:re?C:null}},et={disableFontFace:M,fontExtraProperties:z,ownerDocument:j,pdfBug:K,styleElement:ae,loadingParams:{disableAutoFetch:Y,enableXfa:D}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Te=f.messageHandler.sendWithPromise("GetDocRequest",qe,r?[r.buffer]:null);let H;if(u)H=new PR(u,{disableRange:U,disableStream:W});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");let te;Ci?te=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&ip(n)?Pb:HR:te=ip(n)?Pb:IR,H=new te({url:n,length:ie,httpHeaders:s,withCredentials:o,rangeChunkSize:h,disableRange:U,disableStream:W})}return Te.then(te=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const de=new up(t,te,f.port),we=new oL(de,e,H,et,ge);e._transport=we,de.send("Ready",null)})}).catch(e._capability.reject),e}function tL(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(Ci&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function nL(i){if(Ci&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return d2(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function kb(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var zy;const jy=class jy{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Mi(jy,zy)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};zy=new WeakMap,F(jy,zy,0);let Jx=jy,VC=class{constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Gt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class iL{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return at(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var yl,Jo,qr,Ch,P1;class rL{constructor(e,t,n,r=!1){F(this,qr);F(this,yl,null);F(this,Jo,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new pb:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new WC,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:s=!1}={}){return new E0({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return at(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:r=tl.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:f=null,isEditing:m=!1}){var A,k;(A=this._stats)==null||A.time("Overall");const g=this._transport.getRenderingIntent(n,r,f,m),{renderingIntent:v,cacheKey:y}=g;T(this,Jo,!1),R(this,qr,P1).call(this),a||(a=this._transport.getOptionalContentConfig(v));let S=this._intentStates.get(y);S||(S=Object.create(null),this._intentStates.set(y,S)),S.streamReaderCancelTimeout&&(clearTimeout(S.streamReaderCancelTimeout),S.streamReaderCancelTimeout=null);const C=!!(v&Sr.PRINT);S.displayReadyCapability||(S.displayReadyCapability=Promise.withResolvers(),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(k=this._stats)==null||k.time("Page Request"),this._pumpOperatorList(g));const b=L=>{var I;S.renderTasks.delete(E),(this._maybeCleanupAfterRender||C)&&T(this,Jo,!0),R(this,qr,Ch).call(this,!C),L?(E.capability.reject(L),this._abortOperatorList({intentState:S,reason:L instanceof Error?L:new Error(L)})):E.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(I=globalThis.Stats)!=null&&I.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},E=new eS({callback:b,params:{canvasContext:e,viewport:t,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:S.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:h});(S.renderTasks||(S.renderTasks=new Set)).add(E);const x=E.task;return Promise.all([S.displayReadyCapability.promise,a]).then(([L,I])=>{var M;if(this.destroyed){b();return}if((M=this._stats)==null||M.time("Rendering"),!(I.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");E.initializeGraphics({transparency:L,optionalContentConfig:I}),E.operatorListChanged()}).catch(b),x}getOperatorList({intent:e="display",annotationMode:t=tl.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var h;function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(u))}const o=this._transport.getRenderingIntent(e,t,n,r,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let u;return a.opListReadCapability||(u=Object.create(null),u.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(u),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Qp.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function s(){o.read().then(function({value:u,done:h}){if(h){n(a);return}a.lang??(a.lang=u.lang),Object.assign(a.styles,u.styles),a.items.push(...u.items),s()},r)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),T(this,Jo,!1),R(this,qr,P1).call(this),Promise.all(e)}cleanup(e=!1){T(this,Jo,!0);const t=R(this,qr,Ch).call(this,!1);return e&&t&&this._stats&&(this._stats=new pb),t}_startRenderPage(e,t){var r,s;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(s=n.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&R(this,qr,Ch).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:s,transfer:o}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:r},o).getReader(),h=this._intentStates.get(t);h.streamReader=u;const f=()=>{u.read().then(({value:m,done:g})=>{if(g){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,h),f())},m=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const g of h.renderTasks)g.operatorListChanged();R(this,qr,Ch).call(this,!0)}if(h.displayReadyCapability)h.displayReadyCapability.reject(m);else if(h.opListReadCapability)h.opListReadCapability.reject(m);else throw m}})};f()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof V4){let r=YR;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Bu(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}yl=new WeakMap,Jo=new WeakMap,qr=new WeakSet,Ch=function(e=!1){if(R(this,qr,P1).call(this),!d(this,Jo)||this.destroyed)return!1;if(e)return T(this,yl,setTimeout(()=>{T(this,yl,null),R(this,qr,Ch).call(this,!1)},KR)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),T(this,Jo,!1),!0},P1=function(){d(this,yl)&&(clearTimeout(d(this,yl)),T(this,yl,null))};var Zo,Hy;class sL{constructor(){F(this,Zo,new Map);F(this,Hy,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};d(this,Hy).then(()=>{for(const[r]of d(this,Zo))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted){Ke("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}d(this,Zo).set(t,r)}removeEventListener(e,t){const n=d(this,Zo).get(t);n==null||n(),d(this,Zo).delete(t)}terminate(){for(const[,e]of d(this,Zo))e==null||e();d(this,Zo).clear()}}Zo=new WeakMap,Hy=new WeakMap;var Gy,tu,nu,Sd,k1,wd,T1;const Wt=class Wt{constructor({name:e=null,port:t=null,verbosity:n=OM()}={}){F(this,Sd);var r;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=d(Wt,nu))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(d(Wt,nu)||T(Wt,nu,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Ci?Promise.all([Bl.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new up("main","worker",e),this._messageHandler.on("ready",function(){}),R(this,Sd,k1).call(this)}_initialize(){if(d(Wt,tu)||d(Wt,wd,T1)){this._setupFakeWorker();return}let{workerSrc:e}=Wt;try{Wt._isSameOrigin(window.location.href,e)||(e=Wt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new up("main","worker",t),r=()=>{s.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:s.signal}),n.on("test",a=>{if(s.abort(),this.destroyed||!a){r();return}this._messageHandler=n,this._port=t,this._webWorker=t,R(this,Sd,k1).call(this)}),n.on("ready",a=>{if(s.abort(),this.destroyed){r();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;n.send("test",a,[a.buffer])};o();return}catch{u2("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){d(Wt,tu)||(Ke("Setting up fake worker."),T(Wt,tu,!0)),Wt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new sL;this._port=t;const n=`fake${Mi(Wt,Gy)._++}`,r=new up(n+"_worker",n,t);e.setup(r,t),this._messageHandler=new up(n,n+"_worker",t),R(this,Sd,k1).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=d(Wt,nu))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=d(this,nu))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Wt(e)}static get workerSrc(){if(ga.workerSrc)return ga.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return at(this,"_setupFakeWorkerGlobal",(async()=>d(this,wd,T1)?d(this,wd,T1):(await import(this.workerSrc)).WorkerMessageHandler)())}};Gy=new WeakMap,tu=new WeakMap,nu=new WeakMap,Sd=new WeakSet,k1=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},wd=new WeakSet,T1=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},F(Wt,wd),F(Wt,Gy,0),F(Wt,tu,!1),F(Wt,nu),Ci&&(T(Wt,tu,!0),ga.workerSrc||(ga.workerSrc="./pdf.worker.mjs")),Wt._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const r=new URL(t,n);return n.origin===r.origin},Wt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Kh=Wt;var ea,ho,bd,Ed,fo,iu,hp;class oL{constructor(e,t,n,r,s){F(this,iu);F(this,ea,new Map);F(this,ho,new Map);F(this,bd,new Map);F(this,Ed,new Map);F(this,fo,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new WC,this.fontLoader=new iR({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return at(this,"annotationStorage",new Y4)}getRenderingIntent(e,t=tl.ENABLE,n=null,r=!1,s=!1){let o=Sr.DISPLAY,a=Hx;switch(e){case"any":o=Sr.ANY;break;case"display":break;case"print":o=Sr.PRINT;break;default:Ke(`getRenderingIntent - invalid intent: ${e}`)}const u=o&Sr.PRINT&&n instanceof wC?n:this.annotationStorage;switch(t){case tl.DISABLE:o+=Sr.ANNOTATIONS_DISABLE;break;case tl.ENABLE:break;case tl.ENABLE_FORMS:o+=Sr.ANNOTATIONS_FORMS;break;case tl.ENABLE_STORAGE:o+=Sr.ANNOTATIONS_STORAGE,a=u.serializable;break;default:Ke(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=Sr.IS_EDITING),s&&(o+=Sr.OPLIST);const{ids:h,hash:f}=u.modifiedIds,m=[o,a.hash,f];return{renderingIntent:o,cacheKey:m.join("_"),annotationStorageSerializable:a,modifiedIds:h}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=d(this,fo))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of d(this,ho).values())e.push(r._destroy());d(this,ho).clear(),d(this,bd).clear(),d(this,Ed).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),d(this,ea).clear(),this.filterFactory.destroy(),Kx.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Bu("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{Nn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){r.close();return}Nn(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async n=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:o}=this._fullReader;return(!r||!s)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=u=>{var h;(h=t.onProgress)==null||h.call(t,{loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:o}}),e.on("GetRangeReader",(n,r)=>{Nn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:o,done:a}){if(a){r.close();return}Nn(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{s.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new iL(n,this))}),e.on("DocException",function(n){let r;switch(n.name){case"PasswordException":r=new vx(n.message,n.code);break;case"InvalidPDFException":r=new YA(n.message);break;case"MissingPDFException":r=new Gu(n.message);break;case"UnexpectedResponseException":r=new h2(n.message,n.status);break;case"UnknownErrorException":r=new _x(n.message,n.details);break;default:Gt("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",n=>{if(T(this,fo,Promise.withResolvers()),t.onPassword){const r=s=>{s instanceof Error?d(this,fo).reject(s):d(this,fo).resolve({password:s})};try{t.onPassword(r,n.code)}catch(s){d(this,fo).reject(s)}}else d(this,fo).reject(new vx(n.message,n.code));return d(this,fo).promise}),e.on("DataLoaded",n=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;d(this,ho).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,s])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":const{disableFontFace:a,fontExtraProperties:u,pdfBug:h}=this._params;if("error"in s){const v=s.error;Ke(`Error during font loading: ${v}`),this.commonObjs.resolve(n,v);break}const f=h&&((o=globalThis.FontInspector)!=null&&o.enabled)?(v,y)=>globalThis.FontInspector.fontAdded(v,y):null,m=new rR(s,{disableFontFace:a,inspectFont:f});this.fontLoader.bind(m).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u&&m.data&&(m.data=null),this.commonObjs.resolve(n,m)});break;case"CopyLocalImage":const{imageRef:g}=s;Nn(g,"The imageRef must be defined.");for(const v of d(this,ho).values())for(const[,y]of v.objs)if((y==null?void 0:y.ref)===g)return y.dataLen?(this.commonObjs.resolve(n,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,s);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,s,o])=>{var u;if(this.destroyed)return;const a=d(this,ho).get(r);if(!a.objs.has(n)){if(a._intentStates.size===0){(u=o==null?void 0:o.bitmap)==null||u.close();return}switch(s){case"Image":a.objs.resolve(n,o),(o==null?void 0:o.dataLen)>LM&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",n=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Ke("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=d(this,bd).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&d(this,Ed).set(s.refStr,e);const o=new rL(t,s,this,this._params.pdfBug);return d(this,ho).set(t,o),o});return d(this,bd).set(t,r),r}getPageIndex(e){return kb(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return R(this,iu,hp).call(this,"GetFieldObjects")}hasJSActions(){return R(this,iu,hp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return R(this,iu,hp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return R(this,iu,hp).call(this,"GetOptionalContentConfig").then(t=>new CR(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=d(this,ea).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var s,o;return{info:r[0],metadata:r[1]?new ER(r[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return d(this,ea).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of d(this,ho).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),d(this,ea).clear(),this.filterFactory.destroy(!0),Kx.cleanup()}}cachedPageNumber(e){if(!kb(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return d(this,Ed).get(t)??null}}ea=new WeakMap,ho=new WeakMap,bd=new WeakMap,Ed=new WeakMap,fo=new WeakMap,iu=new WeakSet,hp=function(e,t=null){const n=d(this,ea).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return d(this,ea).set(e,r),r};const Km=Symbol("INITIAL_DATA");var bs,jg,Zx;class WC{constructor(){F(this,jg);F(this,bs,Object.create(null))}get(e,t=null){if(t){const r=R(this,jg,Zx).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=d(this,bs)[e];if(!n||n.data===Km)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=d(this,bs)[e];return!!t&&t.data!==Km}resolve(e,t=null){const n=R(this,jg,Zx).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in d(this,bs)){const{data:n}=d(this,bs)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}T(this,bs,Object.create(null))}*[Symbol.iterator](){for(const e in d(this,bs)){const{data:t}=d(this,bs)[e];t!==Km&&(yield[e,t])}}}bs=new WeakMap,jg=new WeakSet,Zx=function(e){var t;return(t=d(this,bs))[e]||(t[e]={...Promise.withResolvers(),data:Km})};var vl;class aL{constructor(e){F(this,vl,null);T(this,vl,e),this.onContinue=null}get promise(){return d(this,vl).capability.promise}cancel(e=0){d(this,vl).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=d(this,vl).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=d(this,vl);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}vl=new WeakMap;var _l,ru;const Cc=class Cc{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:u,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:m=!1,pageColors:g=null}){F(this,_l,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=u,this.filterFactory=h,this._pdfBug=m,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new aL(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,u;if(this.cancelled)return;if(this._canvas){if(d(Cc,ru).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");d(Cc,ru).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:s,background:o}=this.params;this.gfx=new Yh(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),d(this,_l)&&(window.cancelAnimationFrame(d(this,_l)),T(this,_l,null)),d(Cc,ru).delete(this._canvas),this.callback(e||new V4(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?T(this,_l,window.requestAnimationFrame(()=>{T(this,_l,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),d(Cc,ru).delete(this._canvas),this.callback())))}};_l=new WeakMap,ru=new WeakMap,F(Cc,ru,new WeakSet);let eS=Cc;const lL="4.8.69",cL="3634dab10";function Tb(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Yf(i){return Math.max(0,Math.min(255,255*i))}class Mb{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Yf(e),[e,e,e]}static G_HTML([e]){const t=Tb(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Yf)}static RGB_HTML(e){return`#${e.map(Tb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[Yf(1-Math.min(1,e+r)),Yf(1-Math.min(1,n+r)),Yf(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,s=1-t,o=1-n,a=Math.min(r,s,o);return["CMYK",r,s,o,a]}}class uL{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Gt("Abstract method `_createSVG` called.")}}class Z4 extends uL{_createSVG(e){return document.createElementNS(jo,e)}}class XC{static setupStorage(e,t,n,r,s){const o=r.getValue(t,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),s==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",a=>{r.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),s==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of n.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const u=a.target.options,h=u.selectedIndex===-1?"":u[u.selectedIndex].value;r.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:s}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[u,h]of Object.entries(o))if(h!=null)switch(u){case"class":h.length&&e.setAttribute(u,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!a||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,h)}a&&s.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,t,n)}static render(e){var m,g;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,s=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:s,linkService:n});const a=s!=="richText",u=e.div;if(u.append(o),e.viewport){const v=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=v}a&&u.setAttribute("class","xfaLayer xfaFont");const h=[];if(r.children.length===0){if(r.value){const v=document.createTextNode(r.value);o.append(v),a&&Qp.shouldBuildText(r.name)&&h.push(v)}return{textDivs:h}}const f=[[r,-1,o]];for(;f.length>0;){const[v,y,S]=f.at(-1);if(y+1===v.children.length){f.pop();continue}const C=v.children[++f.at(-1)[1]];if(C===null)continue;const{name:b}=C;if(b==="#text"){const x=document.createTextNode(C.value);h.push(x),S.append(x);continue}const E=(m=C==null?void 0:C.attributes)!=null&&m.xmlns?document.createElementNS(C.attributes.xmlns,b):document.createElement(b);if(S.append(E),C.attributes&&this.setAttributes({html:E,element:C,storage:t,intent:s,linkService:n}),((g=C.children)==null?void 0:g.length)>0)f.push([C,-1,E]);else if(C.value){const x=document.createTextNode(C.value);a&&Qp.shouldBuildText(b)&&h.push(x),E.append(x)}}for(const v of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const C0=1e3,hL=9,Iu=new WeakSet;function _a(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class dL{static create(e){switch(e.data.annotationType){case kn.LINK:return new $C(e);case kn.TEXT:return new fL(e);case kn.WIDGET:switch(e.data.fieldType){case"Tx":return new pL(e);case"Btn":return e.data.radioButton?new qC(e):e.data.checkBox?new mL(e):new yL(e);case"Ch":return new vL(e);case"Sig":return new gL(e)}return new Uu(e);case kn.POPUP:return new nS(e);case kn.FREETEXT:return new t9(e);case kn.LINE:return new xL(e);case kn.SQUARE:return new SL(e);case kn.CIRCLE:return new wL(e);case kn.POLYLINE:return new n9(e);case kn.CARET:return new EL(e);case kn.INK:return new ew(e);case kn.POLYGON:return new bL(e);case kn.HIGHLIGHT:return new i9(e);case kn.UNDERLINE:return new AL(e);case kn.SQUIGGLY:return new CL(e);case kn.STRIKEOUT:return new PL(e);case kn.STAMP:return new r9(e);case kn.FILEATTACHMENT:return new kL(e);default:return new yn(e)}}}var su,Ad,Cd,Hg,tS;const ww=class ww{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){F(this,Hg);F(this,su,null);F(this,Ad,!1);F(this,Cd,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ww._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;d(this,su)||T(this,su,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&R(this,Hg,tS).call(this,t),(n=d(this,Cd))==null||n.popup.updateEdited(e)}resetEdited(){var e;d(this,su)&&(R(this,Hg,tS).call(this,d(this,su).rect),(e=d(this,Cd))==null||e.popup.resetEdited(),T(this,su,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof Uu||(s.tabIndex=C0);const{style:o}=s;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof nS){const{rotation:S}=t;return!t.hasOwnCanvas&&S!==0&&this.setRotation(S,s),s}const{width:a,height:u}=_a(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const S=t.borderStyle.horizontalCornerRadius,C=t.borderStyle.verticalCornerRadius;if(S>0||C>0){const E=`calc(${S}px * var(--scale-factor)) / calc(${C}px * var(--scale-factor))`;o.borderRadius=E}else if(this instanceof qC){const E=`calc(${a}px * var(--scale-factor)) / calc(${u}px * var(--scale-factor))`;o.borderRadius=E}switch(t.borderStyle.style){case Xf.SOLID:o.borderStyle="solid";break;case Xf.DASHED:o.borderStyle="dashed";break;case Xf.BEVELED:Ke("Unimplemented border style: beveled");break;case Xf.INSET:Ke("Unimplemented border style: inset");break;case Xf.UNDERLINE:o.borderBottomStyle="solid";break}const b=t.borderColor||null;b?(T(this,Ad,!0),o.borderColor=Se.makeHexColor(b[0]|0,b[1]|0,b[2]|0)):o.borderWidth=0}const h=Se.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:m,pageX:g,pageY:v}=r.rawDims;o.left=`${100*(h[0]-g)/f}%`,o.top=`${100*(h[1]-v)/m}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(o.width=`${100*a/f}%`,o.height=`${100*u/m}%`):this.setRotation(y,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:s,height:o}=_a(this.data.rect);let a,u;e%180===0?(a=100*s/n,u=100*o/r):(a=100*o/n,u=100*s/r),t.style.width=`${a}%`,t.style.height=`${u}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const s=r.detail[t],o=s[0],a=s.slice(1);r.target.style[n]=Mb[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[n]:Mb[`${o}_rgb`](a)})};return at(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const s=e[r]||n[r];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,s]of Object.entries(t)){const o=n[r];if(o){const a={detail:{[r]:s},target:e};o(a),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,s]=this.data.rect.map(S=>Math.fround(S));if(e.length===8){const[S,C,b,E]=e.subarray(2,6);if(r===S&&s===C&&t===b&&n===E)return}const{style:o}=this.container;let a;if(d(this,Ad)){const{borderColor:S,borderWidth:C}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const u=r-t,h=s-n,{svgFactory:f}=this,m=f.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0);const g=f.createElement("defs");m.append(g);const v=f.createElement("clipPath"),y=`clippath_${this.data.id}`;v.setAttribute("id",y),v.setAttribute("clipPathUnits","objectBoundingBox"),g.append(v);for(let S=2,C=e.length;S<C;S+=8){const b=e[S],E=e[S+1],x=e[S+2],A=e[S+3],k=f.createElement("rect"),L=(x-t)/u,I=(s-E)/h,M=(b-x)/u,z=(E-A)/h;k.setAttribute("x",L),k.setAttribute("y",I),k.setAttribute("width",M),k.setAttribute("height",z),v.append(k),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${L}" y="${I}" width="${M}" height="${z}"/>`)}d(this,Ad)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(m),this.container.style.clipPath=`url(#${y})`}_createPopup(){const{data:e}=this,t=T(this,Cd,new nS({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Gt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:o,exportValues:a}of r){if(s===-1||o===t)continue;const u=typeof a=="string"?a:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!Iu.has(h)){Ke(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:u,domElement:h})}return n}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,o=r.getAttribute("data-element-id");o!==t&&Iu.has(r)&&n.push({id:o,exportValue:s,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};su=new WeakMap,Ad=new WeakMap,Cd=new WeakMap,Hg=new WeakSet,tS=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:u}}}}=this;n==null||n.splice(0,4,...e);const{width:h,height:f}=_a(e);t.left=`${100*(e[0]-a)/s}%`,t.top=`${100*(o-e[3]+u)/o}%`,r===0?(t.width=`${100*h/s}%`,t.height=`${100*f/o}%`):this.setRotation(r)};let yn=ww;var br,xc,YC,KC;class $C extends yn{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});F(this,br);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let s=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(r,t.action),s=!0):t.attachment?(R(this,br,YC).call(this,r,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(R(this,br,KC).call(this,r,t.setOCGState),s=!0):t.dest?(this._bindLink(r,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),s=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(r),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&R(this,br,xc).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),R(this,br,xc).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(n.actions)){const o=r.get(s);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:s}}),!1})}t.onclick||(t.onclick=()=>!1),R(this,br,xc).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),R(this,br,xc).call(this),!this._fieldObjects){Ke('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var m;r==null||r();const{fields:s,refs:o,include:a}=n,u=[];if(s.length!==0||o.length!==0){const g=new Set(o);for(const v of s){const y=this._fieldObjects[v]||[];for(const{id:S}of y)g.add(S)}for(const v of Object.values(this._fieldObjects))for(const y of v)g.has(y.id)===a&&u.push(y)}else for(const g of Object.values(this._fieldObjects))u.push(...g);const h=this.annotationStorage,f=[];for(const g of u){const{id:v}=g;switch(f.push(v),g.type){case"text":{const S=g.defaultValue||"";h.setValue(v,{value:S});break}case"checkbox":case"radiobutton":{const S=g.defaultValue===g.exportValues;h.setValue(v,{value:S});break}case"combobox":case"listbox":{const S=g.defaultValue||"";h.setValue(v,{value:S});break}default:continue}const y=document.querySelector(`[data-element-id="${v}"]`);if(y){if(!Iu.has(y)){Ke(`_bindResetFormAction - element not allowed: ${v}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}})),!1}}}br=new WeakSet,xc=function(){this.container.setAttribute("data-internal-link","")},YC=function(t,n,r=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(n.content,n.filename,r),!1},R(this,br,xc).call(this)},KC=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),R(this,br,xc).call(this)};class fL extends yn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Uu extends yn{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Di.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,s){n.includes("mouse")?e.addEventListener(n,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{var a;if(n==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}s&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o)}}))})}_setEventListeners(e,t,n,r){var s,o,a;for(const[u,h]of n)(h==="Action"||(s=this.data.actions)!=null&&s[h])&&((h==="Focus"||h==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,u,h,r),h==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):h==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Se.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||hL,s=e.style;let o;const a=2,u=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a),f=Math.round(h/(n3*r))||1,m=h/f;o=Math.min(r,u(m/n3))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(r,u(h/n3))}s.fontSize=`calc(${o}px * var(--scale-factor))`,s.color=Se.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class pL extends Uu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=n),s.setValue(o.id,{[r]:n})}render(){var r,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const u=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;u&&a.length>u&&(a=a.slice(0,u));let h=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const f={userValue:a,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=h??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",h??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Iu.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=C0,this._setRequired(n,this.data.required),u&&(n.maxLength=u),n.addEventListener("input",g=>{e.setValue(t,{value:g.target.value}),this.setPropertyOnSiblings(n,"value",g.target.value,"value"),f.formattedValue=null}),n.addEventListener("resetform",g=>{const v=this.data.defaultFieldValue??"";n.value=f.userValue=v,f.formattedValue=null});let m=g=>{const{formattedValue:v}=f;v!=null&&(g.target.value=v),g.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{var S;if(f.focused)return;const{target:y}=v;f.userValue&&(y.value=f.userValue),f.lastCommittedValue=y.value,f.commitKey=1,(S=this.data.actions)!=null&&S.Focus||(f.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const y={value(S){f.userValue=S.detail.value??"",e.setValue(t,{value:f.userValue.toString()}),S.target.value=f.userValue},formattedValue(S){const{formattedValue:C}=S.detail;f.formattedValue=C,C!=null&&S.target!==document.activeElement&&(S.target.value=C),e.setValue(t,{formattedValue:C})},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{var x;const{charLimit:C}=S.detail,{target:b}=S;if(C===0){b.removeAttribute("maxLength");return}b.setAttribute("maxLength",C);let E=f.userValue;!E||E.length<=C||(E=E.slice(0,C),b.value=f.userValue=E,e.setValue(t,{value:E}),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:1,selStart:b.selectionStart,selEnd:b.selectionEnd}}))}};this._dispatchEventFromSandbox(y,v)}),n.addEventListener("keydown",v=>{var C;f.commitKey=1;let y=-1;if(v.key==="Escape"?y=0:v.key==="Enter"&&!this.data.multiLine?y=2:v.key==="Tab"&&(f.commitKey=3),y===-1)return;const{value:S}=v.target;f.lastCommittedValue!==S&&(f.lastCommittedValue=S,f.userValue=S,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:y,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const g=m;m=null,n.addEventListener("blur",v=>{var S,C;if(!f.focused||!v.relatedTarget)return;(S=this.data.actions)!=null&&S.Blur||(f.focused=!1);const{value:y}=v.target;f.userValue=y,f.lastCommittedValue!==y&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:f.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),g(v)}),(s=this.data.actions)!=null&&s.Keystroke&&n.addEventListener("beforeinput",v=>{var k;f.lastCommittedValue=null;const{data:y,target:S}=v,{value:C,selectionStart:b,selectionEnd:E}=S;let x=b,A=E;switch(v.inputType){case"deleteWordBackward":{const L=C.substring(0,b).match(/\w*[^\w]*$/);L&&(x-=L[0].length);break}case"deleteWordForward":{const L=C.substring(b).match(/^[^\w]*\w*/);L&&(A+=L[0].length);break}case"deleteContentBackward":b===E&&(x-=1);break;case"deleteContentForward":b===E&&(A+=1);break}v.preventDefault(),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,change:y||"",willCommit:!1,selStart:x,selEnd:A}})}),this._setEventListeners(n,f,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(m&&n.addEventListener("blur",m),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/u;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class gL extends Uu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class mL extends Uu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Iu.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=C0,s.addEventListener("change",o=>{const{name:a,checked:u}=o.target;for(const h of this._getElementsByName(a,n)){const f=u&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(n,{value:u})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const a={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class qC extends Uu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,n))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(Iu.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=C0,s.addEventListener("change",o=>{const{name:a,checked:u}=o.target;for(const h of this._getElementsByName(a,n))e.setValue(h.id,{value:!1});e.setValue(n,{value:u})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;s.addEventListener("updatefromsandbox",a=>{const u={value:h=>{const f=o===h.detail.value;for(const m of this._getElementsByName(h.target.name)){const g=f&&m.id===n;m.domElement&&(m.domElement.checked=g),e.setValue(m.id,{value:g})}}};this._dispatchEventFromSandbox(u,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class yL extends $C{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class vL extends Uu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Iu.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=C0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",f=>{const m=this.data.defaultFieldValue;for(const g of r.options)g.selected=g.value===m});for(const f of this.data.options){const m=document.createElement("option");m.textContent=f.displayValue,m.value=f.exportValue,n.value.includes(f.exportValue)&&(m.setAttribute("selected",!0),s=!1),r.append(m)}let o=null;if(s){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),r.prepend(f),o=()=>{f.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=f=>{const m=f?"value":"textContent",{options:g,multiple:v}=r;return v?Array.prototype.filter.call(g,y=>y.selected).map(y=>y[m]):g.selectedIndex===-1?null:g[g.selectedIndex][m]};let u=a(!1);const h=f=>{const m=f.target.options;return Array.prototype.map.call(m,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",f=>{const m={value(g){o==null||o();const v=g.detail.value,y=new Set(Array.isArray(v)?v:[v]);for(const S of r.options)S.selected=y.has(S.value);e.setValue(t,{value:a(!0)}),u=a(!1)},multipleSelection(g){r.multiple=!0},remove(g){const v=r.options,y=g.detail.remove;v[y].selected=!1,r.remove(y),v.length>0&&Array.prototype.findIndex.call(v,C=>C.selected)===-1&&(v[0].selected=!0),e.setValue(t,{value:a(!0),items:h(g)}),u=a(!1)},clear(g){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),u=a(!1)},insert(g){const{index:v,displayValue:y,exportValue:S}=g.detail.insert,C=r.children[v],b=document.createElement("option");b.textContent=y,b.value=S,C?C.before(b):r.append(b),e.setValue(t,{value:a(!0),items:h(g)}),u=a(!1)},items(g){const{items:v}=g.detail;for(;r.length!==0;)r.remove(0);for(const y of v){const{displayValue:S,exportValue:C}=y,b=document.createElement("option");b.textContent=S,b.value=C,r.append(b)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:h(g)}),u=a(!1)},indices(g){const v=new Set(g.detail.indices);for(const y of g.target.options)y.selected=v.has(y.index);e.setValue(t,{value:a(!0)}),u=a(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(m,f)}),r.addEventListener("input",f=>{var v;const m=a(!0),g=a(!1);e.setValue(t,{value:m}),f.preventDefault(),(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:g,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):r.addEventListener("input",function(f){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class nS extends yn{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:yn._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new _L({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${U4}${n}`).join(",")),this.container}}var Pd,By,Uy,kd,ou,an,ta,Td,Gg,Bg,Md,na,Es,ia,Ug,ra,Vg,au,lu,Rt,M1,iS,QC,JC,ZC,e9,R1,L1,rS;class _L{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:s,contentsObj:o,richText:a,parent:u,rect:h,parentRect:f,open:m}){F(this,Rt);F(this,Pd,R(this,Rt,ZC).bind(this));F(this,By,R(this,Rt,rS).bind(this));F(this,Uy,R(this,Rt,L1).bind(this));F(this,kd,R(this,Rt,R1).bind(this));F(this,ou,null);F(this,an,null);F(this,ta,null);F(this,Td,null);F(this,Gg,null);F(this,Bg,null);F(this,Md,null);F(this,na,!1);F(this,Es,null);F(this,ia,null);F(this,Ug,null);F(this,ra,null);F(this,Vg,null);F(this,au,null);F(this,lu,!1);var g;T(this,an,e),T(this,Vg,r),T(this,ta,o),T(this,ra,a),T(this,Bg,u),T(this,ou,t),T(this,Ug,h),T(this,Md,f),T(this,Gg,n),T(this,Td,X4.toDateObject(s)),this.trigger=n.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",d(this,kd)),v.addEventListener("mouseenter",d(this,Uy)),v.addEventListener("mouseleave",d(this,By)),v.classList.add("popupTriggerArea");for(const v of n)(g=v.container)==null||g.addEventListener("keydown",d(this,Pd));d(this,an).hidden=!0,m&&R(this,Rt,R1).call(this)}render(){if(d(this,Es))return;const e=T(this,Es,document.createElement("div"));if(e.className="popup",d(this,ou)){const s=e.style.outlineColor=Se.makeHexColor(...d(this,ou));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=Se.makeHexColor(...d(this,ou).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=d(this,Vg),e.append(t),d(this,Td)){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:d(this,Td).valueOf()})),t.append(s)}const r=d(this,Rt,M1);if(r)XC.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(d(this,ta));e.append(s)}d(this,an).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let s=0,o=r.length;s<o;++s){const a=r[s];n.append(document.createTextNode(a)),s<o-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;d(this,au)||T(this,au,{contentsObj:d(this,ta),richText:d(this,ra)}),e&&T(this,ia,null),t&&(T(this,ra,R(this,Rt,JC).call(this,t)),T(this,ta,null)),(n=d(this,Es))==null||n.remove(),T(this,Es,null)}resetEdited(){var e;d(this,au)&&({contentsObj:Mi(this,ta)._,richText:Mi(this,ra)._}=d(this,au),T(this,au,null),(e=d(this,Es))==null||e.remove(),T(this,Es,null),T(this,ia,null))}forceHide(){T(this,lu,this.isVisible),d(this,lu)&&(d(this,an).hidden=!0)}maybeShow(){d(this,lu)&&(d(this,Es)||R(this,Rt,L1).call(this),T(this,lu,!1),d(this,an).hidden=!1)}get isVisible(){return d(this,an).hidden===!1}}Pd=new WeakMap,By=new WeakMap,Uy=new WeakMap,kd=new WeakMap,ou=new WeakMap,an=new WeakMap,ta=new WeakMap,Td=new WeakMap,Gg=new WeakMap,Bg=new WeakMap,Md=new WeakMap,na=new WeakMap,Es=new WeakMap,ia=new WeakMap,Ug=new WeakMap,ra=new WeakMap,Vg=new WeakMap,au=new WeakMap,lu=new WeakMap,Rt=new WeakSet,M1=function(){const e=d(this,ra),t=d(this,ta);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&d(this,ra).html||null},iS=function(){var e,t,n;return((n=(t=(e=d(this,Rt,M1))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},QC=function(){var e,t,n;return((n=(t=(e=d(this,Rt,M1))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},JC=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:d(this,Rt,QC),fontSize:d(this,Rt,iS)?`calc(${d(this,Rt,iS)}px * var(--scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:r});return n},ZC=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&d(this,na))&&R(this,Rt,R1).call(this)},e9=function(){if(d(this,ia)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:s}}}=d(this,Bg);let o=!!d(this,Md),a=o?d(this,Md):d(this,Ug);for(const y of d(this,Gg))if(!a||Se.intersect(y.data.rect,a)!==null){a=y.data.rect,o=!0;break}const u=Se.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),f=o?a[2]-a[0]+5:0,m=u[0]+f,g=u[1];T(this,ia,[100*(m-r)/t,100*(g-s)/n]);const{style:v}=d(this,an);v.left=`${d(this,ia)[0]}%`,v.top=`${d(this,ia)[1]}%`},R1=function(){T(this,na,!d(this,na)),d(this,na)?(R(this,Rt,L1).call(this),d(this,an).addEventListener("click",d(this,kd)),d(this,an).addEventListener("keydown",d(this,Pd))):(R(this,Rt,rS).call(this),d(this,an).removeEventListener("click",d(this,kd)),d(this,an).removeEventListener("keydown",d(this,Pd)))},L1=function(){d(this,Es)||this.render(),this.isVisible?d(this,na)&&d(this,an).classList.add("focused"):(R(this,Rt,e9).call(this),d(this,an).hidden=!1,d(this,an).style.zIndex=parseInt(d(this,an).style.zIndex)+1e3)},rS=function(){d(this,an).classList.remove("focused"),!(d(this,na)||!this.isVisible)&&(d(this,an).hidden=!0,d(this,an).style.zIndex=parseInt(d(this,an).style.zIndex)-1e3)};class t9 extends yn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ve.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Wg;class xL extends yn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});F(this,Wg,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:r}=_a(t.rect),s=this.svgFactory.create(n,r,!0),o=T(this,Wg,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Wg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wg=new WeakMap;var Xg;class SL extends yn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});F(this,Xg,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:r}=_a(t.rect),s=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,a=T(this,Xg,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",n-o),a.setAttribute("height",r-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Xg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xg=new WeakMap;var $g;class wL extends yn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});F(this,$g,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:r}=_a(t.rect),s=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,a=T(this,$g,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",n/2),a.setAttribute("cy",r/2),a.setAttribute("rx",n/2-o/2),a.setAttribute("ry",r/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,$g)}addHighlightArea(){this.container.classList.add("highlightArea")}}$g=new WeakMap;var Yg;class n9 extends yn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});F(this,Yg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:s}}=this;if(!n)return this.container;const{width:o,height:a}=_a(t),u=this.svgFactory.create(o,a,!0);let h=[];for(let m=0,g=n.length;m<g;m+=2){const v=n[m]-t[0],y=t[3]-n[m+1];h.push(`${v},${y}`)}h=h.join(" ");const f=T(this,Yg,this.svgFactory.createElement(this.svgElementName));return f.setAttribute("points",h),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Yg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yg=new WeakMap;class bL extends n9{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class EL extends yn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Kg;class ew extends yn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});F(this,Kg,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ve.HIGHLIGHT:Ve.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:n,borderStyle:r,popupRef:s}}=this,{width:o,height:a}=_a(t),u=this.svgFactory.create(o,a,!0);for(const h of n){let f=[];for(let g=0,v=h.length;g<v;g+=2){const y=h[g]-t[0],S=t[3]-h[g+1];f.push(`${y},${S}`)}f=f.join(" ");const m=this.svgFactory.createElement(this.svgElementName);d(this,Kg).push(m),m.setAttribute("points",f),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),u.append(m)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return d(this,Kg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kg=new WeakMap;class i9 extends yn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ve.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class AL extends yn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class CL extends yn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class PL extends yn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class r9 extends yn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ve.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var qg,Qg,sS;class kL extends yn{constructor(t){var r;super(t,{isRenderable:!0});F(this,Qg);F(this,qg,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",R(this,Qg,sS).bind(this)),T(this,qg,r);const{isMac:s}=Di.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(s?o.metaKey:o.ctrlKey)&&R(this,Qg,sS).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return d(this,qg)}addHighlightArea(){this.container.classList.add("highlightArea")}}qg=new WeakMap,Qg=new WeakSet,sS=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Jg,cu,uu,Zg,Ou,s9,oS,F8;let TL=(F8=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:s,viewport:o,structTreeLayer:a}){F(this,Ou);F(this,Jg,null);F(this,cu,null);F(this,uu,new Map);F(this,Zg,null);this.div=e,T(this,Jg,t),T(this,cu,n),T(this,Zg,a||null),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return d(this,uu).size>0}async render(e){var o;const{annotations:t}=e,n=this.div;Nu(n,this.viewport);const r=new Map,s={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Z4,annotationStorage:e.annotationStorage||new Y4,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const u=a.annotationType===kn.POPUP;if(u){const m=r.get(a.id);if(!m)continue;s.elements=m}else{const{width:m,height:g}=_a(a.rect);if(m<=0||g<=0)continue}s.data=a;const h=dL.create(s);if(!h.isRenderable)continue;if(!u&&a.popupRef){const m=r.get(a.popupRef);m?m.push(h):r.set(a.popupRef,[h])}const f=h.render();a.hidden&&(f.style.visibility="hidden"),await R(this,Ou,s9).call(this,f,a.id),h._isEditable&&(d(this,uu).set(h.data.id,h),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(h))}R(this,Ou,oS).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Nu(t,{rotation:e.rotation}),R(this,Ou,oS).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(d(this,uu).values())}getEditableAnnotation(e){return d(this,uu).get(e)}},Jg=new WeakMap,cu=new WeakMap,uu=new WeakMap,Zg=new WeakMap,Ou=new WeakSet,s9=async function(e,t){var o,a;const n=e.firstChild||e,r=n.id=`${U4}${t}`,s=await((o=d(this,Zg))==null?void 0:o.getAriaAttributes(r));if(s)for(const[u,h]of s)n.setAttribute(u,h);this.div.append(e),(a=d(this,Jg))==null||a.moveElementInDOM(this.div,e,n,!1)},oS=function(){if(!d(this,cu))return;const e=this.div;for(const[t,n]of d(this,cu)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:s}=r;s?s.nodeName==="CANVAS"?s.replaceWith(n):s.classList.contains("annotationContent")?s.after(n):s.before(n):r.append(n)}d(this,cu).clear()},F8);const qm=/\r\n?|\n/g;var As,gr,e0,hu,mr,An,o9,a9,l9,N1,wa,F1,I1,c9,lS,u9;const Dt=class Dt extends At{constructor(t){super({...t,name:"freeTextEditor"});F(this,An);F(this,As);F(this,gr,"");F(this,e0,`${this.id}-editor`);F(this,hu,null);F(this,mr);T(this,As,t.color||Dt._defaultColor||At._defaultLineColor),T(this,mr,t.fontSize||Dt._defaultFontSize)}static get _keyboardManager(){const t=Dt.prototype,n=o=>o.isEmpty(),r=Fu.TRANSLATE_SMALL,s=Fu.TRANSLATE_BIG;return at(this,"_keyboardManager",new A0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}]]))}static initialize(t,n){At.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Oe.FREETEXT_SIZE:Dt._defaultFontSize=n;break;case Oe.FREETEXT_COLOR:Dt._defaultColor=n;break}}updateParams(t,n){switch(t){case Oe.FREETEXT_SIZE:R(this,An,o9).call(this,n);break;case Oe.FREETEXT_COLOR:R(this,An,a9).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Oe.FREETEXT_SIZE,Dt._defaultFontSize],[Oe.FREETEXT_COLOR,Dt._defaultColor||At._defaultLineColor]]}get propertiesToUpdate(){return[[Oe.FREETEXT_SIZE,d(this,mr)],[Oe.FREETEXT_COLOR,d(this,As)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-Dt._internalPadding*t,-(Dt._internalPadding+d(this,mr))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Ve.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),T(this,hu,new AbortController);const t=this._uiManager.combinedSignal(d(this,hu));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",d(this,e0)),this._isDraggable=!0,(t=d(this,hu))==null||t.abort(),T(this,hu,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=d(this,gr),n=T(this,gr,R(this,An,l9).call(this).trimEnd());if(t===n)return;const r=s=>{if(T(this,gr,s),!s){this.remove();return}R(this,An,I1).call(this),this._uiManager.rebuild(this),R(this,An,N1).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),R(this,An,N1).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Dt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",d(this,e0)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${d(this,mr)}px * var(--scale-factor))`,r.color=d(this,As),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),_y(this,this.div,["dblclick","keydown"]),this.width){const[s,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[f,m]=this.pageDimensions,[g,v]=this.pageTranslation;let y,S;switch(this.rotation){case 0:y=t+(a[0]-g)/f,S=n+this.height-(a[1]-v)/m;break;case 90:y=t+(a[0]-g)/f,S=n-(a[1]-v)/m,[u,h]=[h,-u];break;case 180:y=t-this.width+(a[0]-g)/f,S=n-(a[1]-v)/m,[u,h]=[-u,-h];break;case 270:y=t+(a[0]-g-this.height*m)/f,S=n+(a[1]-v-this.width*f)/m,[u,h]=[-h,u];break}this.setAt(y*s,S*o,u,h)}else this.setAt(t*s,n*o,this.width*s,this.height*o);R(this,An,I1).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,S,C;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const s=R(y=Dt,wa,lS).call(y,n.getData("text")||"").replaceAll(qm,`
`);if(!s)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:h}=a,f=[],m=[];if(u.nodeType===Node.TEXT_NODE){const b=u.parentElement;if(m.push(u.nodeValue.slice(h).replaceAll(qm,"")),b!==this.editorDiv){let E=f;for(const x of this.editorDiv.childNodes){if(x===b){E=m;continue}E.push(R(S=Dt,wa,F1).call(S,x))}}f.push(u.nodeValue.slice(0,h).replaceAll(qm,""))}else if(u===this.editorDiv){let b=f,E=0;for(const x of this.editorDiv.childNodes)E++===h&&(b=m),b.push(R(C=Dt,wa,F1).call(C,x))}T(this,gr,`${f.join(`
`)}${s}${m.join(`
`)}`),R(this,An,I1).call(this);const g=new Range;let v=f.reduce((b,E)=>b+E.length,0);for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const E=b.nodeValue.length;if(v<=E){g.setStart(b,v),g.setEnd(b,v);break}v-=E}o.removeAllRanges(),o.addRange(g)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,r){var a;let s=null;if(t instanceof t9){const{data:{defaultAppearanceData:{fontSize:u,fontColor:h},rect:f,rotation:m,id:g,popupRef:v},textContent:y,textPosition:S,parent:{page:{pageNumber:C}}}=t;if(!y||y.length===0)return null;s=t={annotationType:Ve.FREETEXT,color:Array.from(h),fontSize:u,value:y.join(`
`),position:S,pageIndex:C-1,rect:f.slice(0),rotation:m,id:g,deleted:!1,popupRef:v}}const o=await super.deserialize(t,n,r);return T(o,mr,t.fontSize),T(o,As,Se.makeHexColor(...t.color)),T(o,gr,R(a=Dt,wa,lS).call(a,t.value)),o.annotationElementId=t.id||null,o._initialData=s,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Dt._internalPadding*this.parentScale,r=this.getRect(n,n),s=At._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:d(this,As)),o={annotationType:Ve.FREETEXT,color:s,fontSize:d(this,mr),value:R(this,An,c9).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!R(this,An,u9).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:r}=n;r.fontSize=`calc(${d(this,mr)}px * var(--scale-factor))`,r.color=d(this,As),n.replaceChildren();for(const o of d(this,gr).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),n.append(a)}const s=Dt._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:d(this,gr)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};As=new WeakMap,gr=new WeakMap,e0=new WeakMap,hu=new WeakMap,mr=new WeakMap,An=new WeakSet,o9=function(t){const n=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-d(this,mr))*this.parentScale),T(this,mr,s),R(this,An,N1).call(this)},r=d(this,mr);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},a9=function(t){const n=s=>{T(this,As,this.editorDiv.style.color=s)},r=d(this,As);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},l9=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(R(r=Dt,wa,F1).call(r,s)),n=s);return t.join(`
`)},N1=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:o}=this,a=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",s.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},wa=new WeakSet,F1=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(qm,"")},I1=function(){if(this.editorDiv.replaceChildren(),!!d(this,gr))for(const t of d(this,gr).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},c9=function(){return d(this,gr).replaceAll(""," ")},lS=function(t){return t.replaceAll(" ","")},u9=function(t){const{value:n,fontSize:r,color:s,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((a,u)=>a!==s[u])||t.pageIndex!==o},F(Dt,wa),Ne(Dt,"_freeTextDefaultContent",""),Ne(Dt,"_internalPadding",0),Ne(Dt,"_defaultColor",null),Ne(Dt,"_defaultFontSize",10),Ne(Dt,"_type","freetext"),Ne(Dt,"_editorType",Ve.FREETEXT);let aS=Dt;class h9{toSVGPath(){Gt("Abstract method `toSVGPath` must be implemented.")}get box(){Gt("Abstract getter `box` must be implemented.")}serialize(e,t){Gt("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Gt("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Gt("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var yr,Cs,Rd,Ld,po,Je,du,fu,t0,n0,Nd,Fd,xl,i0,Vy,Wy,In,dp,d9,f9,p9,g9,m9,y9;const Uo=class Uo{constructor({x:e,y:t},n,r,s,o,a=0){F(this,In);F(this,yr);F(this,Cs,[]);F(this,Rd);F(this,Ld);F(this,po,[]);F(this,Je,new Float64Array(18));F(this,du);F(this,fu);F(this,t0);F(this,n0);F(this,Nd);F(this,Fd);F(this,xl,[]);T(this,yr,n),T(this,Fd,s*r),T(this,Ld,o),d(this,Je).set([NaN,NaN,NaN,NaN,e,t],6),T(this,Rd,a),T(this,n0,d(Uo,i0)*r),T(this,t0,d(Uo,Wy)*r),T(this,Nd,r),d(this,xl).push(e,t)}isEmpty(){return isNaN(d(this,Je)[8])}add({x:e,y:t}){var z;T(this,du,e),T(this,fu,t);const[n,r,s,o]=d(this,yr);let[a,u,h,f]=d(this,Je).subarray(8,12);const m=e-h,g=t-f,v=Math.hypot(m,g);if(v<d(this,t0))return!1;const y=v-d(this,n0),S=y/v,C=S*m,b=S*g;let E=a,x=u;a=h,u=f,h+=C,f+=b,(z=d(this,xl))==null||z.push(e,t);const A=-b/y,k=C/y,L=A*d(this,Fd),I=k*d(this,Fd);return d(this,Je).set(d(this,Je).subarray(2,8),0),d(this,Je).set([h+L,f+I],4),d(this,Je).set(d(this,Je).subarray(14,18),12),d(this,Je).set([h-L,f-I],16),isNaN(d(this,Je)[6])?(d(this,po).length===0&&(d(this,Je).set([a+L,u+I],2),d(this,po).push(NaN,NaN,NaN,NaN,(a+L-n)/s,(u+I-r)/o),d(this,Je).set([a-L,u-I],14),d(this,Cs).push(NaN,NaN,NaN,NaN,(a-L-n)/s,(u-I-r)/o)),d(this,Je).set([E,x,a,u,h,f],6),!this.isEmpty()):(d(this,Je).set([E,x,a,u,h,f],6),Math.abs(Math.atan2(x-u,E-a)-Math.atan2(b,C))<Math.PI/2?([a,u,h,f]=d(this,Je).subarray(2,6),d(this,po).push(NaN,NaN,NaN,NaN,((a+h)/2-n)/s,((u+f)/2-r)/o),[a,u,E,x]=d(this,Je).subarray(14,18),d(this,Cs).push(NaN,NaN,NaN,NaN,((E+a)/2-n)/s,((x+u)/2-r)/o),!0):([E,x,a,u,h,f]=d(this,Je).subarray(0,6),d(this,po).push(((E+5*a)/6-n)/s,((x+5*u)/6-r)/o,((5*a+h)/6-n)/s,((5*u+f)/6-r)/o,((a+h)/2-n)/s,((u+f)/2-r)/o),[h,f,a,u,E,x]=d(this,Je).subarray(12,18),d(this,Cs).push(((E+5*a)/6-n)/s,((x+5*u)/6-r)/o,((5*a+h)/6-n)/s,((5*u+f)/6-r)/o,((a+h)/2-n)/s,((u+f)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=d(this,po),t=d(this,Cs);if(isNaN(d(this,Je)[6])&&!this.isEmpty())return R(this,In,d9).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);R(this,In,p9).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return R(this,In,f9).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,s,o){return new v9(e,t,n,r,s,o)}getOutlines(){var m;const e=d(this,po),t=d(this,Cs),n=d(this,Je),[r,s,o,a]=d(this,yr),u=new Float64Array((((m=d(this,xl))==null?void 0:m.length)??0)+2);for(let g=0,v=u.length-2;g<v;g+=2)u[g]=(d(this,xl)[g]-r)/o,u[g+1]=(d(this,xl)[g+1]-s)/a;if(u[u.length-2]=(d(this,du)-r)/o,u[u.length-1]=(d(this,fu)-s)/a,isNaN(n[6])&&!this.isEmpty())return R(this,In,g9).call(this,u);const h=new Float64Array(d(this,po).length+24+d(this,Cs).length);let f=e.length;for(let g=0;g<f;g+=2){if(isNaN(e[g])){h[g]=h[g+1]=NaN;continue}h[g]=e[g],h[g+1]=e[g+1]}f=R(this,In,y9).call(this,h,f);for(let g=t.length-6;g>=6;g-=6)for(let v=0;v<6;v+=2){if(isNaN(t[g+v])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[g+v],h[f+1]=t[g+v+1],f+=2}return R(this,In,m9).call(this,h,f),this.newFreeDrawOutline(h,u,d(this,yr),d(this,Nd),d(this,Rd),d(this,Ld))}};yr=new WeakMap,Cs=new WeakMap,Rd=new WeakMap,Ld=new WeakMap,po=new WeakMap,Je=new WeakMap,du=new WeakMap,fu=new WeakMap,t0=new WeakMap,n0=new WeakMap,Nd=new WeakMap,Fd=new WeakMap,xl=new WeakMap,i0=new WeakMap,Vy=new WeakMap,Wy=new WeakMap,In=new WeakSet,dp=function(){const e=d(this,Je).subarray(4,6),t=d(this,Je).subarray(16,18),[n,r,s,o]=d(this,yr);return[(d(this,du)+(e[0]-t[0])/2-n)/s,(d(this,fu)+(e[1]-t[1])/2-r)/o,(d(this,du)+(t[0]-e[0])/2-n)/s,(d(this,fu)+(t[1]-e[1])/2-r)/o]},d9=function(){const[e,t,n,r]=d(this,yr),[s,o,a,u]=R(this,In,dp).call(this);return`M${(d(this,Je)[2]-e)/n} ${(d(this,Je)[3]-t)/r} L${(d(this,Je)[4]-e)/n} ${(d(this,Je)[5]-t)/r} L${s} ${o} L${a} ${u} L${(d(this,Je)[16]-e)/n} ${(d(this,Je)[17]-t)/r} L${(d(this,Je)[14]-e)/n} ${(d(this,Je)[15]-t)/r} Z`},f9=function(e){const t=d(this,Cs);e.push(`L${t[4]} ${t[5]} Z`)},p9=function(e){const[t,n,r,s]=d(this,yr),o=d(this,Je).subarray(4,6),a=d(this,Je).subarray(16,18),[u,h,f,m]=R(this,In,dp).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-n)/s} L${u} ${h} L${f} ${m} L${(a[0]-t)/r} ${(a[1]-n)/s}`)},g9=function(e){const t=d(this,Je),[n,r,s,o]=d(this,yr),[a,u,h,f]=R(this,In,dp).call(this),m=new Float64Array(36);return m.set([NaN,NaN,NaN,NaN,(t[2]-n)/s,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-n)/s,(t[5]-r)/o,NaN,NaN,NaN,NaN,a,u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-n)/s,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-n)/s,(t[15]-r)/o],0),this.newFreeDrawOutline(m,e,d(this,yr),d(this,Nd),d(this,Rd),d(this,Ld))},m9=function(e,t){const n=d(this,Cs);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},y9=function(e,t){const n=d(this,Je).subarray(4,6),r=d(this,Je).subarray(16,18),[s,o,a,u]=d(this,yr),[h,f,m,g]=R(this,In,dp).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-s)/a,(n[1]-o)/u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,m,g,NaN,NaN,NaN,NaN,(r[0]-s)/a,(r[1]-o)/u],t),t+=24},F(Uo,i0,8),F(Uo,Vy,2),F(Uo,Wy,d(Uo,i0)+d(Uo,Vy));let Sy=Uo;var Id,pu,sa,r0,vr,s0,gn,ir,fp,pp,_9;class v9 extends h9{constructor(t,n,r,s,o,a){super();F(this,ir);F(this,Id);F(this,pu,null);F(this,sa);F(this,r0);F(this,vr);F(this,s0);F(this,gn);T(this,gn,t),T(this,vr,n),T(this,Id,r),T(this,s0,s),T(this,sa,o),T(this,r0,a),R(this,ir,_9).call(this,a);const{x:u,y:h,width:f,height:m}=d(this,pu);for(let g=0,v=t.length;g<v;g+=2)t[g]=(t[g]-u)/f,t[g+1]=(t[g+1]-h)/m;for(let g=0,v=n.length;g<v;g+=2)n[g]=(n[g]-u)/f,n[g+1]=(n[g+1]-h)/m}toSVGPath(){const t=[`M${d(this,gn)[4]} ${d(this,gn)[5]}`];for(let n=6,r=d(this,gn).length;n<r;n+=6){if(isNaN(d(this,gn)[n])){t.push(`L${d(this,gn)[n+4]} ${d(this,gn)[n+5]}`);continue}t.push(`C${d(this,gn)[n]} ${d(this,gn)[n+1]} ${d(this,gn)[n+2]} ${d(this,gn)[n+3]} ${d(this,gn)[n+4]} ${d(this,gn)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,s],o){const a=r-t,u=s-n;let h,f;switch(o){case 0:h=R(this,ir,fp).call(this,d(this,gn),t,s,a,-u),f=R(this,ir,fp).call(this,d(this,vr),t,s,a,-u);break;case 90:h=R(this,ir,pp).call(this,d(this,gn),t,n,a,u),f=R(this,ir,pp).call(this,d(this,vr),t,n,a,u);break;case 180:h=R(this,ir,fp).call(this,d(this,gn),r,n,-a,u),f=R(this,ir,fp).call(this,d(this,vr),r,n,-a,u);break;case 270:h=R(this,ir,pp).call(this,d(this,gn),r,s,-a,-u),f=R(this,ir,pp).call(this,d(this,vr),r,s,-a,-u);break}return{outline:Array.from(h),points:[Array.from(f)]}}get box(){return d(this,pu)}newOutliner(t,n,r,s,o,a=0){return new Sy(t,n,r,s,o,a)}getNewOutline(t,n){const{x:r,y:s,width:o,height:a}=d(this,pu),[u,h,f,m]=d(this,Id),g=o*f,v=a*m,y=r*f+u,S=s*m+h,C=this.newOutliner({x:d(this,vr)[0]*g+y,y:d(this,vr)[1]*v+S},d(this,Id),d(this,s0),t,d(this,r0),n??d(this,sa));for(let b=2;b<d(this,vr).length;b+=2)C.add({x:d(this,vr)[b]*g+y,y:d(this,vr)[b+1]*v+S});return C.getOutlines()}get mustRemoveSelfIntersections(){return!0}}Id=new WeakMap,pu=new WeakMap,sa=new WeakMap,r0=new WeakMap,vr=new WeakMap,s0=new WeakMap,gn=new WeakMap,ir=new WeakSet,fp=function(t,n,r,s,o){const a=new Float64Array(t.length);for(let u=0,h=t.length;u<h;u+=2)a[u]=n+t[u]*s,a[u+1]=r+t[u+1]*o;return a},pp=function(t,n,r,s,o){const a=new Float64Array(t.length);for(let u=0,h=t.length;u<h;u+=2)a[u]=n+t[u+1]*s,a[u+1]=r+t[u]*o;return a},_9=function(t){const n=d(this,gn);let r=n[4],s=n[5],o=r,a=s,u=r,h=s,f=r,m=s;const g=t?Math.max:Math.min;for(let b=6,E=n.length;b<E;b+=6){if(isNaN(n[b]))o=Math.min(o,n[b+4]),a=Math.min(a,n[b+5]),u=Math.max(u,n[b+4]),h=Math.max(h,n[b+5]),m<n[b+5]?(f=n[b+4],m=n[b+5]):m===n[b+5]&&(f=g(f,n[b+4]));else{const x=Se.bezierBoundingBox(r,s,...n.slice(b,b+6));o=Math.min(o,x[0]),a=Math.min(a,x[1]),u=Math.max(u,x[2]),h=Math.max(h,x[3]),m<x[3]?(f=x[2],m=x[3]):m===x[3]&&(f=g(f,x[2]))}r=n[b+4],s=n[b+5]}const v=o-d(this,sa),y=a-d(this,sa),S=u-o+2*d(this,sa),C=h-a+2*d(this,sa);T(this,pu,{x:v,y,width:S,height:C,lastPoint:[f,m]})};var o0,Sl,Ps,zi,x9,D1,S9,w9,cS;class Rb{constructor(e,t=0,n=0,r=!0){F(this,zi);F(this,o0);F(this,Sl,[]);F(this,Ps,[]);let s=1/0,o=-1/0,a=1/0,u=-1/0;const h=10**-4;for(const{x:C,y:b,width:E,height:x}of e){const A=Math.floor((C-t)/h)*h,k=Math.ceil((C+E+t)/h)*h,L=Math.floor((b-t)/h)*h,I=Math.ceil((b+x+t)/h)*h,M=[A,L,I,!0],z=[k,L,I,!1];d(this,Sl).push(M,z),s=Math.min(s,A),o=Math.max(o,k),a=Math.min(a,L),u=Math.max(u,I)}const f=o-s+2*n,m=u-a+2*n,g=s-n,v=a-n,y=d(this,Sl).at(r?-1:-2),S=[y[0],y[2]];for(const C of d(this,Sl)){const[b,E,x]=C;C[0]=(b-g)/f,C[1]=(E-v)/m,C[2]=(x-v)/m}T(this,o0,{x:g,y:v,width:f,height:m,lastPoint:S})}getOutlines(){d(this,Sl).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of d(this,Sl))t[3]?(e.push(...R(this,zi,cS).call(this,t)),R(this,zi,S9).call(this,t)):(R(this,zi,w9).call(this,t),e.push(...R(this,zi,cS).call(this,t)));return R(this,zi,x9).call(this,e)}}o0=new WeakMap,Sl=new WeakMap,Ps=new WeakMap,zi=new WeakSet,x9=function(e){const t=[],n=new Set;for(const o of e){const[a,u,h]=o;t.push([a,u,o],[a,h,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const u=t[o][2],h=t[o+1][2];u.push(h),h.push(u),n.add(u),n.add(h)}const r=[];let s;for(;n.size>0;){const o=n.values().next().value;let[a,u,h,f,m]=o;n.delete(o);let g=a,v=u;for(s=[a,h],r.push(s);;){let y;if(n.has(f))y=f;else if(n.has(m))y=m;else break;n.delete(y),[a,u,h,f,m]=y,g!==a&&(s.push(g,v,a,v===u?u:h),g=a),v=v===u?h:u}s.push(g,v)}return new ML(r,d(this,o0))},D1=function(e){const t=d(this,Ps);let n=0,r=t.length-1;for(;n<=r;){const s=n+r>>1,o=t[s][0];if(o===e)return s;o<e?n=s+1:r=s-1}return r+1},S9=function([,e,t]){const n=R(this,zi,D1).call(this,e);d(this,Ps).splice(n,0,[e,t])},w9=function([,e,t]){const n=R(this,zi,D1).call(this,e);for(let r=n;r<d(this,Ps).length;r++){const[s,o]=d(this,Ps)[r];if(s!==e)break;if(s===e&&o===t){d(this,Ps).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[s,o]=d(this,Ps)[r];if(s!==e)break;if(s===e&&o===t){d(this,Ps).splice(r,1);return}}},cS=function(e){const[t,n,r]=e,s=[[t,n,r]],o=R(this,zi,D1).call(this,r);for(let a=0;a<o;a++){const[u,h]=d(this,Ps)[a];for(let f=0,m=s.length;f<m;f++){const[,g,v]=s[f];if(!(h<=g||v<=u)){if(g>=u){if(v>h)s[f][1]=h;else{if(m===1)return[];s.splice(f,1),f--,m--}continue}s[f][2]=u,v>h&&s.push([t,h,v])}}}return s};var a0,Dd;class ML extends h9{constructor(t,n){super();F(this,a0);F(this,Dd);T(this,Dd,t),T(this,a0,n)}toSVGPath(){const t=[];for(const n of d(this,Dd)){let[r,s]=n;t.push(`M${r} ${s}`);for(let o=2;o<n.length;o+=2){const a=n[o],u=n[o+1];a===r?(t.push(`V${u}`),s=u):u===s&&(t.push(`H${a}`),r=a)}t.push("Z")}return t.join(" ")}serialize([t,n,r,s],o){const a=[],u=r-t,h=s-n;for(const f of d(this,Dd)){const m=new Array(f.length);for(let g=0;g<f.length;g+=2)m[g]=t+f[g]*u,m[g+1]=s-f[g+1]*h;a.push(m)}return a}get box(){return d(this,a0)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}a0=new WeakMap,Dd=new WeakMap;class uS extends Sy{newFreeDrawOutline(e,t,n,r,s,o){return new RL(e,t,n,r,s,o)}get classNamesForDrawing(){return["highlight","free"]}}class RL extends v9{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,n,r,s,o=0){return new uS(e,t,n,r,s,o)}}var ks,gu,Od,Mn,l0,zd,c0,u0,wl,Ts,jd,h0,Mt,hS,dS,fS,Sc,b9,Ka;const qi=class qi{constructor({editor:e=null,uiManager:t=null}){F(this,Mt);F(this,ks,null);F(this,gu,null);F(this,Od);F(this,Mn,null);F(this,l0,!1);F(this,zd,!1);F(this,c0,null);F(this,u0);F(this,wl,null);F(this,Ts,null);F(this,jd);var n;e?(T(this,zd,!1),T(this,jd,Oe.HIGHLIGHT_COLOR),T(this,c0,e)):(T(this,zd,!0),T(this,jd,Oe.HIGHLIGHT_DEFAULT_COLOR)),T(this,Ts,(e==null?void 0:e._uiManager)||t),T(this,u0,d(this,Ts)._eventBus),T(this,Od,(e==null?void 0:e.color)||((n=d(this,Ts))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),d(qi,h0)||T(qi,h0,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return at(this,"_keyboardManager",new A0([[["Escape","mac+Escape"],qi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],qi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],qi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],qi.prototype._moveToPrevious],[["Home","mac+Home"],qi.prototype._moveToBeginning],[["End","mac+End"],qi.prototype._moveToEnd]]))}renderButton(){const e=T(this,ks,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=d(this,Ts)._signal;e.addEventListener("click",R(this,Mt,Sc).bind(this),{signal:t}),e.addEventListener("keydown",R(this,Mt,fS).bind(this),{signal:t});const n=T(this,gu,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=d(this,Od),e.append(n),e}renderMainDropdown(){const e=T(this,Mn,R(this,Mt,hS).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===d(this,ks)){R(this,Mt,Sc).call(this,e);return}const t=e.target.getAttribute("data-color");t&&R(this,Mt,dS).call(this,t,e)}_moveToNext(e){var t,n;if(!d(this,Mt,Ka)){R(this,Mt,Sc).call(this,e);return}if(e.target===d(this,ks)){(t=d(this,Mn).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=d(this,Mn))==null?void 0:t.firstChild)||e.target===d(this,ks)){d(this,Mt,Ka)&&this._hideDropdownFromKeyboard();return}d(this,Mt,Ka)||R(this,Mt,Sc).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!d(this,Mt,Ka)){R(this,Mt,Sc).call(this,e);return}(t=d(this,Mn).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!d(this,Mt,Ka)){R(this,Mt,Sc).call(this,e);return}(t=d(this,Mn).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=d(this,Mn))==null||e.classList.add("hidden"),(t=d(this,wl))==null||t.abort(),T(this,wl,null)}_hideDropdownFromKeyboard(){var e;if(!d(this,zd)){if(!d(this,Mt,Ka)){(e=d(this,c0))==null||e.unselect();return}this.hideDropdown(),d(this,ks).focus({preventScroll:!0,focusVisible:d(this,l0)})}}updateColor(e){if(d(this,gu)&&(d(this,gu).style.backgroundColor=e),!d(this,Mn))return;const t=d(this,Ts).highlightColors.values();for(const n of d(this,Mn).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=d(this,ks))==null||e.remove(),T(this,ks,null),T(this,gu,null),(t=d(this,Mn))==null||t.remove(),T(this,Mn,null)}};ks=new WeakMap,gu=new WeakMap,Od=new WeakMap,Mn=new WeakMap,l0=new WeakMap,zd=new WeakMap,c0=new WeakMap,u0=new WeakMap,wl=new WeakMap,Ts=new WeakMap,jd=new WeakMap,h0=new WeakMap,Mt=new WeakSet,hS=function(){const e=document.createElement("div"),t=d(this,Ts)._signal;e.addEventListener("contextmenu",is,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,r]of d(this,Ts).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=n,s.setAttribute("data-l10n-id",d(qi,h0)[n]);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=r,s.setAttribute("aria-selected",r===d(this,Od)),s.addEventListener("click",R(this,Mt,dS).bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",R(this,Mt,fS).bind(this),{signal:t}),e},dS=function(e,t){t.stopPropagation(),d(this,u0).dispatch("switchannotationeditorparams",{source:this,type:d(this,jd),value:e})},fS=function(e){qi._keyboardManager.exec(this,e)},Sc=function(e){if(d(this,Mt,Ka)){this.hideDropdown();return}if(T(this,l0,e.detail===0),d(this,wl)||(T(this,wl,new AbortController),window.addEventListener("pointerdown",R(this,Mt,b9).bind(this),{signal:d(this,Ts).combinedSignal(d(this,wl))})),d(this,Mn)){d(this,Mn).classList.remove("hidden");return}const t=T(this,Mn,R(this,Mt,hS).call(this));d(this,ks).append(t)},b9=function(e){var t;(t=d(this,Mn))!=null&&t.contains(e.target)||this.hideDropdown()},Ka=function(){return d(this,Mn)&&!d(this,Mn).classList.contains("hidden")},F(qi,h0,null);let wy=qi;var Hd,d0,oa,mu,Gd,Wr,f0,p0,yu,Ms,wi,Zi,Bd,aa,Rn,Ud,Xr,g0,Ue,pS,O1,E9,A9,C9,gS,wc,Qr,Ph,P9,z1,gp,k9,T9,M9,R9,L9;const vt=class vt extends At{constructor(t){super({...t,name:"highlightEditor"});F(this,Ue);F(this,Hd,null);F(this,d0,0);F(this,oa);F(this,mu,null);F(this,Gd,null);F(this,Wr,null);F(this,f0,null);F(this,p0,0);F(this,yu,null);F(this,Ms,null);F(this,wi,null);F(this,Zi,!1);F(this,Bd,null);F(this,aa);F(this,Rn,null);F(this,Ud,"");F(this,Xr);F(this,g0,"");this.color=t.color||vt._defaultColor,T(this,Xr,t.thickness||vt._defaultThickness),T(this,aa,t.opacity||vt._defaultOpacity),T(this,oa,t.boxes||null),T(this,g0,t.methodOfCreation||""),T(this,Ud,t.text||""),this._isDraggable=!1,t.highlightId>-1?(T(this,Zi,!0),R(this,Ue,O1).call(this,t),R(this,Ue,wc).call(this)):d(this,oa)&&(T(this,Hd,t.anchorNode),T(this,d0,t.anchorOffset),T(this,f0,t.focusNode),T(this,p0,t.focusOffset),R(this,Ue,pS).call(this),R(this,Ue,wc).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=vt.prototype;return at(this,"_keyboardManager",new A0([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:d(this,Zi)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:d(this,Xr),methodOfCreation:d(this,g0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;At.initialize(t,n),vt._defaultColor||(vt._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Oe.HIGHLIGHT_DEFAULT_COLOR:vt._defaultColor=n;break;case Oe.HIGHLIGHT_THICKNESS:vt._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return d(this,Bd)}updateParams(t,n){switch(t){case Oe.HIGHLIGHT_COLOR:R(this,Ue,E9).call(this,n);break;case Oe.HIGHLIGHT_THICKNESS:R(this,Ue,A9).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Oe.HIGHLIGHT_DEFAULT_COLOR,vt._defaultColor],[Oe.HIGHLIGHT_THICKNESS,vt._defaultThickness]]}get propertiesToUpdate(){return[[Oe.HIGHLIGHT_COLOR,this.color||vt._defaultColor],[Oe.HIGHLIGHT_THICKNESS,d(this,Xr)||vt._defaultThickness],[Oe.HIGHLIGHT_FREE,d(this,Zi)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(T(this,Gd,new wy({editor:this})),t.addColorPicker(d(this,Gd))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(R(this,Ue,gp).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,R(this,Ue,gp).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){R(this,Ue,gS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,Ue,wc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?R(this,Ue,gS).call(this):t&&(R(this,Ue,wc).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var s,o,a;const{drawLayer:n}=this.parent;let r;d(this,Zi)?(t=(t-this.rotation+360)%360,r=R(s=vt,Qr,Ph).call(s,d(this,Ms).box,t)):r=R(o=vt,Qr,Ph).call(o,this,t),n.rotate(d(this,wi),t),n.rotate(d(this,Rn),t),n.updateBox(d(this,wi),r),n.updateBox(d(this,Rn),R(a=vt,Qr,Ph).call(a,d(this,Wr).box,t))}render(){if(this.div)return this.div;const t=super.render();d(this,Ud)&&(t.setAttribute("aria-label",d(this,Ud)),t.setAttribute("role","mark")),d(this,Zi)?t.classList.add("free"):this.div.addEventListener("keydown",R(this,Ue,P9).bind(this),{signal:this._uiManager._signal});const n=T(this,yu,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=d(this,mu);const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),_y(this,d(this,yu),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(d(this,Rn),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(d(this,Rn),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:R(this,Ue,z1).call(this,!0);break;case 1:case 3:R(this,Ue,z1).call(this,!1);break}}select(){var t,n;super.select(),d(this,Rn)&&((t=this.parent)==null||t.drawLayer.removeClass(d(this,Rn),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(d(this,Rn),"selected"))}unselect(){var t;super.unselect(),d(this,Rn)&&((t=this.parent)==null||t.drawLayer.removeClass(d(this,Rn),"selected"),d(this,Zi)||R(this,Ue,z1).call(this,!1))}get _mustFixPosition(){return!d(this,Zi)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(d(this,wi),t),this.parent.drawLayer.show(d(this,Rn),t))}static startHighlighting(t,n,{target:r,x:s,y:o}){const{x:a,y:u,width:h,height:f}=r.getBoundingClientRect(),m=new AbortController,g=t.combinedSignal(m),v=S=>{S.preventDefault(),S.stopPropagation()},y=S=>{m.abort(),R(this,Qr,R9).call(this,t,S)};window.addEventListener("blur",y,{signal:g}),window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("pointerdown",v,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",is,{signal:g}),r.addEventListener("pointermove",R(this,Qr,M9).bind(this,t),{signal:g}),this._freeHighlight=new uS({x:s,y:o},[a,u,h,f],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,n,r){var S,C,b,E;let s=null;if(t instanceof i9){const{data:{quadPoints:x,rect:A,rotation:k,id:L,color:I,opacity:M,popupRef:z},parent:{page:{pageNumber:D}}}=t;s=t={annotationType:Ve.HIGHLIGHT,color:Array.from(I),opacity:M,quadPoints:x,boxes:null,pageIndex:D-1,rect:A.slice(0),rotation:k,id:L,deleted:!1,popupRef:z}}else if(t instanceof ew){const{data:{inkLists:x,rect:A,rotation:k,id:L,color:I,borderStyle:{rawWidth:M},popupRef:z},parent:{page:{pageNumber:D}}}=t;s=t={annotationType:Ve.HIGHLIGHT,color:Array.from(I),thickness:M,inkLists:x,boxes:null,pageIndex:D-1,rect:A.slice(0),rotation:k,id:L,deleted:!1,popupRef:z}}const{color:o,quadPoints:a,inkLists:u,opacity:h}=t,f=await super.deserialize(t,n,r);f.color=Se.makeHexColor(...o),T(f,aa,h||1),u&&T(f,Xr,t.thickness),f.annotationElementId=t.id||null,f._initialData=s;const[m,g]=f.pageDimensions,[v,y]=f.pageTranslation;if(a){const x=T(f,oa,[]);for(let A=0;A<a.length;A+=8)x.push({x:(a[A]-v)/m,y:1-(a[A+1]-y)/g,width:(a[A+2]-a[A])/m,height:(a[A+1]-a[A+5])/g});R(S=f,Ue,pS).call(S),R(C=f,Ue,wc).call(C),f.rotate(f.rotation)}else if(u){T(f,Zi,!0);const x=u[0],A={x:x[0]-v,y:g-(x[1]-y)},k=new uS(A,[0,0,m,g],1,d(f,Xr)/2,!0,.001);for(let M=0,z=x.length;M<z;M+=2)A.x=x[M]-v,A.y=g-(x[M+1]-y),k.add(A);const{id:L,clipPathId:I}=n.drawLayer.draw(k,f.color,f._defaultOpacity,!0);R(b=f,Ue,O1).call(b,{highlightOutlines:k.getOutlines(),highlightId:L,clipPathId:I}),R(E=f,Ue,wc).call(E)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),r=At._colorManager.convert(this.color),s={annotationType:Ve.HIGHLIGHT,color:r,opacity:d(this,aa),thickness:d(this,Xr),quadPoints:R(this,Ue,k9).call(this),outlines:R(this,Ue,T9).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:R(this,Ue,gp).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!R(this,Ue,L9).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Hd=new WeakMap,d0=new WeakMap,oa=new WeakMap,mu=new WeakMap,Gd=new WeakMap,Wr=new WeakMap,f0=new WeakMap,p0=new WeakMap,yu=new WeakMap,Ms=new WeakMap,wi=new WeakMap,Zi=new WeakMap,Bd=new WeakMap,aa=new WeakMap,Rn=new WeakMap,Ud=new WeakMap,Xr=new WeakMap,g0=new WeakMap,Ue=new WeakSet,pS=function(){const t=new Rb(d(this,oa),.001);T(this,Ms,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=d(this,Ms).box;const n=new Rb(d(this,oa),.0025,.001,this._uiManager.direction==="ltr");T(this,Wr,n.getOutlines());const{lastPoint:r}=d(this,Wr).box;T(this,Bd,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},O1=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var m,g;if(T(this,Ms,t),T(this,Wr,t.getNewOutline(d(this,Xr)/2+1.5,.0025)),n>=0)T(this,wi,n),T(this,mu,r),this.parent.drawLayer.finalizeLine(n,t),T(this,Rn,this.parent.drawLayer.drawOutline(d(this,Wr)));else if(this.parent){const v=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(d(this,wi),t),this.parent.drawLayer.updateBox(d(this,wi),R(m=vt,Qr,Ph).call(m,d(this,Ms).box,(v-this.rotation+360)%360)),this.parent.drawLayer.updateLine(d(this,Rn),d(this,Wr)),this.parent.drawLayer.updateBox(d(this,Rn),R(g=vt,Qr,Ph).call(g,d(this,Wr).box,v))}const{x:o,y:a,width:u,height:h}=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=u,this.height=h;break;case 90:{const[v,y]=this.parentDimensions;this.x=a,this.y=1-o,this.width=u*y/v,this.height=h*v/y;break}case 180:this.x=1-o,this.y=1-a,this.width=u,this.height=h;break;case 270:{const[v,y]=this.parentDimensions;this.x=1-a,this.y=o,this.width=u*y/v,this.height=h*v/y;break}}const{lastPoint:f}=d(this,Wr).box;T(this,Bd,[(f[0]-o)/u,(f[1]-a)/h])},E9=function(t){const n=(o,a)=>{var u,h,f;this.color=o,(u=this.parent)==null||u.drawLayer.changeColor(d(this,wi),o),(h=d(this,Gd))==null||h.updateColor(o),T(this,aa,a),(f=this.parent)==null||f.drawLayer.changeOpacity(d(this,wi),a)},r=this.color,s=d(this,aa);this.addCommands({cmd:n.bind(this,t,vt._defaultOpacity),undo:n.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},A9=function(t){const n=d(this,Xr),r=s=>{T(this,Xr,s),R(this,Ue,C9).call(this,s)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},C9=function(t){if(!d(this,Zi))return;R(this,Ue,O1).call(this,{highlightOutlines:d(this,Ms).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)},gS=function(){d(this,wi)===null||!this.parent||(this.parent.drawLayer.remove(d(this,wi)),T(this,wi,null),this.parent.drawLayer.remove(d(this,Rn)),T(this,Rn,null))},wc=function(t=this.parent){d(this,wi)===null&&({id:Mi(this,wi)._,clipPathId:Mi(this,mu)._}=t.drawLayer.draw(d(this,Ms),this.color,d(this,aa)),T(this,Rn,t.drawLayer.drawOutline(d(this,Wr))),d(this,yu)&&(d(this,yu).style.clipPath=d(this,mu)))},Qr=new WeakSet,Ph=function({x:t,y:n,width:r,height:s},o){switch(o){case 90:return{x:1-n-s,y:t,width:s,height:r};case 180:return{x:1-t-r,y:1-n-s,width:r,height:s};case 270:return{x:n,y:1-t-r,width:s,height:r}}return{x:t,y:n,width:r,height:s}},P9=function(t){vt._keyboardManager.exec(this,t)},z1=function(t){if(!d(this,Hd))return;const n=window.getSelection();t?n.setPosition(d(this,Hd),d(this,d0)):n.setPosition(d(this,f0),d(this,p0))},gp=function(){return d(this,Zi)?this.rotation:0},k9=function(){if(d(this,Zi))return null;const[t,n]=this.pageDimensions,[r,s]=this.pageTranslation,o=d(this,oa),a=new Float32Array(o.length*8);let u=0;for(const{x:h,y:f,width:m,height:g}of o){const v=h*t+r,y=(1-f-g)*n+s;a[u]=a[u+4]=v,a[u+1]=a[u+3]=y,a[u+2]=a[u+6]=v+m*t,a[u+5]=a[u+7]=y+g*n,u+=8}return a},T9=function(t){return d(this,Ms).serialize(t,R(this,Ue,gp).call(this))},M9=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},R9=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},L9=function(t){const{color:n}=this._initialData;return t.color.some((r,s)=>r!==n[s])},F(vt,Qr),Ne(vt,"_defaultColor",null),Ne(vt,"_defaultOpacity",1),Ne(vt,"_defaultThickness",12),Ne(vt,"_type","highlight"),Ne(vt,"_editorType",Ve.HIGHLIGHT),Ne(vt,"_freeHighlightId",-1),Ne(vt,"_freeHighlight",null),Ne(vt,"_freeHighlightClipId","");let by=vt;var vu,_u,go,la,$r,xu,Su,wu,ca,Vd,bu,Eu,bl,ue,N9,F9,I9,D9,yS,O9,vS,z9,j9,H9,G9,B9,bc,_S,xS,SS,j1,H1,kh,wS,G1,ka,U9,bS,V9,W9,ES,B1,mp;const Qt=class Qt extends At{constructor(t){super({...t,name:"inkEditor"});F(this,ue);F(this,vu,0);F(this,_u,0);F(this,go,null);F(this,la,new Path2D);F(this,$r,!1);F(this,xu,null);F(this,Su,!1);F(this,wu,!1);F(this,ca,null);F(this,Vd,null);F(this,bu,0);F(this,Eu,0);F(this,bl,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,n){At.initialize(t,n)}static updateDefaultParams(t,n){switch(t){case Oe.INK_THICKNESS:Qt._defaultThickness=n;break;case Oe.INK_COLOR:Qt._defaultColor=n;break;case Oe.INK_OPACITY:Qt._defaultOpacity=n/100;break}}updateParams(t,n){switch(t){case Oe.INK_THICKNESS:R(this,ue,N9).call(this,n);break;case Oe.INK_COLOR:R(this,ue,F9).call(this,n);break;case Oe.INK_OPACITY:R(this,ue,I9).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Oe.INK_THICKNESS,Qt._defaultThickness],[Oe.INK_COLOR,Qt._defaultColor||At._defaultLineColor],[Oe.INK_OPACITY,Math.round(Qt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Oe.INK_THICKNESS,this.thickness||Qt._defaultThickness],[Oe.INK_COLOR,this.color||Qt._defaultColor||At._defaultLineColor],[Oe.INK_OPACITY,Math.round(100*(this.opacity??Qt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(R(this,ue,j1).call(this),R(this,ue,H1).call(this)),this.isAttachedToDOM||(this.parent.add(this),R(this,ue,kh).call(this)),R(this,ue,mp).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,d(this,go)&&(clearTimeout(d(this,go)),T(this,go,null)),(t=d(this,ca))==null||t.disconnect(),T(this,ca,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,n]=this.parentDimensions,r=this.width*t,s=this.height*n;this.setDimensions(r,s)}enableEditMode(){d(this,$r)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,R(this,ue,_S).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),R(this,ue,xS).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){d(this,$r)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),T(this,$r,!0),this.div.classList.add("disabled"),R(this,ue,mp).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||d(this,$r)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),R(this,ue,O9).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),R(this,ue,vS).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),R(this,ue,SS).call(this,t)}canvasPointerleave(t){R(this,ue,SS).call(this,t)}get isResizable(){return!this.isEmpty()&&d(this,$r)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,s,o,a]=R(this,ue,D9).call(this);if(this.setAt(r,s,0,0),this.setDims(o,a),R(this,ue,j1).call(this),this.width){const[u,h]=this.parentDimensions;this.setAspectRatio(this.width*u,this.height*h),this.setAt(t*u,n*h,this.width*u,this.height*h),T(this,wu,!0),R(this,ue,kh).call(this),this.setDims(this.width*u,this.height*h),R(this,ue,bc).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return R(this,ue,H1).call(this),this.div}setDimensions(t,n){const r=Math.round(t),s=Math.round(n);if(d(this,bu)===r&&d(this,Eu)===s)return;T(this,bu,r),T(this,Eu,s),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=t/o,this.height=n/a,this.fixAndSetPosition(),d(this,$r)&&R(this,ue,wS).call(this,t,n),R(this,ue,kh).call(this),R(this,ue,bc).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,n,r){var C,b,E;if(t instanceof ew)return null;const s=await super.deserialize(t,n,r);s.thickness=t.thickness,s.color=Se.makeHexColor(...t.color),s.opacity=t.opacity;const[o,a]=s.pageDimensions,u=s.width*o,h=s.height*a,f=s.parentScale,m=t.thickness/2;T(s,$r,!0),T(s,bu,Math.round(u)),T(s,Eu,Math.round(h));const{paths:g,rect:v,rotation:y}=t;for(let{bezier:x}of g){x=R(C=Qt,ka,V9).call(C,x,v,y);const A=[];s.paths.push(A);let k=f*(x[0]-m),L=f*(x[1]-m);for(let M=2,z=x.length;M<z;M+=6){const D=f*(x[M]-m),j=f*(x[M+1]-m),U=f*(x[M+2]-m),W=f*(x[M+3]-m),Y=f*(x[M+4]-m),K=f*(x[M+5]-m);A.push([[k,L],[D,j],[U,W],[Y,K]]),k=Y,L=K}const I=R(this,ka,U9).call(this,A);s.bezierPath2D.push(I)}const S=R(b=s,ue,ES).call(b);return T(s,_u,Math.max(At.MIN_SIZE,S[2]-S[0])),T(s,vu,Math.max(At.MIN_SIZE,S[3]-S[1])),R(E=s,ue,wS).call(E,u,h),s}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),n=At._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Ve.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:R(this,ue,W9).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};vu=new WeakMap,_u=new WeakMap,go=new WeakMap,la=new WeakMap,$r=new WeakMap,xu=new WeakMap,Su=new WeakMap,wu=new WeakMap,ca=new WeakMap,Vd=new WeakMap,bu=new WeakMap,Eu=new WeakMap,bl=new WeakMap,ue=new WeakSet,N9=function(t){const n=s=>{this.thickness=s,R(this,ue,mp).call(this)},r=this.thickness;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},F9=function(t){const n=s=>{this.color=s,R(this,ue,bc).call(this)},r=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},I9=function(t){const n=s=>{this.opacity=s,R(this,ue,bc).call(this)};t/=100;const r=this.opacity;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},D9=function(){const{parentRotation:t,parentDimensions:[n,r]}=this;switch(t){case 90:return[0,r,r,n];case 180:return[n,r,n,r];case 270:return[n,0,r,n];default:return[0,0,n,r]}},yS=function(){const{ctx:t,color:n,opacity:r,thickness:s,parentScale:o,scaleFactor:a}=this;t.lineWidth=s*o/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${n}${ZM(r)}`},O9=function(t,n){this.canvas.addEventListener("contextmenu",is,{signal:this._uiManager._signal}),R(this,ue,xS).call(this),T(this,xu,new AbortController);const r=this._uiManager.combinedSignal(d(this,xu));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,d(this,wu)||(T(this,wu,!0),R(this,ue,kh).call(this),this.thickness||(this.thickness=Qt._defaultThickness),this.color||(this.color=Qt._defaultColor||At._defaultLineColor),this.opacity??(this.opacity=Qt._defaultOpacity)),this.currentPath.push([t,n]),T(this,Su,!1),R(this,ue,yS).call(this),T(this,bl,()=>{R(this,ue,H9).call(this),d(this,bl)&&window.requestAnimationFrame(d(this,bl))}),window.requestAnimationFrame(d(this,bl))},vS=function(t,n){const[r,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===r&&n===s)return;const o=this.currentPath;let a=d(this,la);if(o.push([t,n]),T(this,Su,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(t,n);return}o.length===3&&(T(this,la,a=new Path2D),a.moveTo(...o[0])),R(this,ue,G9).call(this,a,...o.at(-3),...o.at(-2),t,n)},z9=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);d(this,la).lineTo(...t)},j9=function(t,n){T(this,bl,null),t=Math.min(Math.max(t,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),R(this,ue,vS).call(this,t,n),R(this,ue,z9).call(this);let r;if(this.currentPath.length!==1)r=R(this,ue,B9).call(this);else{const h=[t,n];r=[[h,h.slice(),h.slice(),h]]}const s=d(this,la),o=this.currentPath;this.currentPath=[],T(this,la,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(r),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},u=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(R(this,ue,j1).call(this),R(this,ue,H1).call(this)),R(this,ue,mp).call(this))};this.addCommands({cmd:a,undo:u,mustExec:!0})},H9=function(){if(!d(this,Su))return;T(this,Su,!1);const t=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),r=n.map(a=>a[0]),s=n.map(a=>a[1]);Math.min(...r)-t,Math.max(...r)+t,Math.min(...s)-t,Math.max(...s)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(d(this,la)),o.restore()},G9=function(t,n,r,s,o,a,u){const h=(n+s)/2,f=(r+o)/2,m=(s+a)/2,g=(o+u)/2;t.bezierCurveTo(h+2*(s-h)/3,f+2*(o-f)/3,m+2*(s-m)/3,g+2*(o-g)/3,m,g)},B9=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const n=[];let r,[s,o]=t[0];for(r=1;r<t.length-2;r++){const[v,y]=t[r],[S,C]=t[r+1],b=(v+S)/2,E=(y+C)/2,x=[s+2*(v-s)/3,o+2*(y-o)/3],A=[b+2*(v-b)/3,E+2*(y-E)/3];n.push([[s,o],x,A,[b,E]]),[s,o]=[b,E]}const[a,u]=t[r],[h,f]=t[r+1],m=[s+2*(a-s)/3,o+2*(u-o)/3],g=[h+2*(a-h)/3,f+2*(u-f)/3];return n.push([[s,o],m,g,[h,f]]),n},bc=function(){if(this.isEmpty()){R(this,ue,G1).call(this);return}R(this,ue,yS).call(this);const{canvas:t,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),R(this,ue,G1).call(this);for(const r of this.bezierPath2D)n.stroke(r)},_S=function(){if(d(this,Vd))return;T(this,Vd,new AbortController);const t=this._uiManager.combinedSignal(d(this,Vd));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},xS=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},SS=function(t){var n;(n=d(this,xu))==null||n.abort(),T(this,xu,null),R(this,ue,_S).call(this),d(this,go)&&clearTimeout(d(this,go)),T(this,go,setTimeout(()=>{T(this,go,null),this.canvas.removeEventListener("contextmenu",is)},10)),R(this,ue,j9).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},j1=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},H1=function(){T(this,ca,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),d(this,ca).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=d(this,ca))==null||t.disconnect(),T(this,ca,null)},{once:!0})},kh=function(){if(!d(this,wu))return;const[t,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*n),R(this,ue,G1).call(this)},wS=function(t,n){const r=R(this,ue,B1).call(this),s=(t-r)/d(this,_u),o=(n-r)/d(this,vu);this.scaleFactor=Math.min(s,o)},G1=function(){const t=R(this,ue,B1).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},ka=new WeakSet,U9=function(t){const n=new Path2D;for(let r=0,s=t.length;r<s;r++){const[o,a,u,h]=t[r];r===0&&n.moveTo(...o),n.bezierCurveTo(a[0],a[1],u[0],u[1],h[0],h[1])}return n},bS=function(t,n,r){const[s,o,a,u]=n;switch(r){case 0:for(let h=0,f=t.length;h<f;h+=2)t[h]+=s,t[h+1]=u-t[h+1];break;case 90:for(let h=0,f=t.length;h<f;h+=2){const m=t[h];t[h]=t[h+1]+s,t[h+1]=m+o}break;case 180:for(let h=0,f=t.length;h<f;h+=2)t[h]=a-t[h],t[h+1]+=o;break;case 270:for(let h=0,f=t.length;h<f;h+=2){const m=t[h];t[h]=a-t[h+1],t[h+1]=u-m}break;default:throw new Error("Invalid rotation")}return t},V9=function(t,n,r){const[s,o,a,u]=n;switch(r){case 0:for(let h=0,f=t.length;h<f;h+=2)t[h]-=s,t[h+1]=u-t[h+1];break;case 90:for(let h=0,f=t.length;h<f;h+=2){const m=t[h];t[h]=t[h+1]-o,t[h+1]=m-s}break;case 180:for(let h=0,f=t.length;h<f;h+=2)t[h]=a-t[h],t[h+1]-=o;break;case 270:for(let h=0,f=t.length;h<f;h+=2){const m=t[h];t[h]=u-t[h+1],t[h+1]=a-m}break;default:throw new Error("Invalid rotation")}return t},W9=function(t,n,r,s){var f,m;const o=[],a=this.thickness/2,u=t*n+a,h=t*r+a;for(const g of this.paths){const v=[],y=[];for(let S=0,C=g.length;S<C;S++){const[b,E,x,A]=g[S];if(b[0]===A[0]&&b[1]===A[1]&&C===1){const W=t*b[0]+u,Y=t*b[1]+h;v.push(W,Y),y.push(W,Y);break}const k=t*b[0]+u,L=t*b[1]+h,I=t*E[0]+u,M=t*E[1]+h,z=t*x[0]+u,D=t*x[1]+h,j=t*A[0]+u,U=t*A[1]+h;S===0&&(v.push(k,L),y.push(k,L)),v.push(I,M,z,D,j,U),y.push(I,M),S===C-1&&y.push(j,U)}o.push({bezier:R(f=Qt,ka,bS).call(f,v,s,this.rotation),points:R(m=Qt,ka,bS).call(m,y,s,this.rotation)})}return o},ES=function(){let t=1/0,n=-1/0,r=1/0,s=-1/0;for(const o of this.paths)for(const[a,u,h,f]of o){const m=Se.bezierBoundingBox(...a,...u,...h,...f);t=Math.min(t,m[0]),r=Math.min(r,m[1]),n=Math.max(n,m[2]),s=Math.max(s,m[3])}return[t,r,n,s]},B1=function(){return d(this,$r)?Math.ceil(this.thickness*this.parentScale):0},mp=function(t=!1){if(this.isEmpty())return;if(!d(this,$r)){R(this,ue,bc).call(this);return}const n=R(this,ue,ES).call(this),r=R(this,ue,B1).call(this);T(this,_u,Math.max(At.MIN_SIZE,n[2]-n[0])),T(this,vu,Math.max(At.MIN_SIZE,n[3]-n[1]));const s=Math.ceil(r+d(this,_u)*this.scaleFactor),o=Math.ceil(r+d(this,vu)*this.scaleFactor),[a,u]=this.parentDimensions;this.width=s/a,this.height=o/u,this.setAspectRatio(s,o);const h=this.translationX,f=this.translationY;this.translationX=-n[0],this.translationY=-n[1],R(this,ue,kh).call(this),R(this,ue,bc).call(this),T(this,bu,s),T(this,Eu,o),this.setDims(s,o);const m=t?r/this.scaleFactor/2:0;this.translate(h-this.translationX-m,f-this.translationY-m)},F(Qt,ka),Ne(Qt,"_defaultColor",null),Ne(Qt,"_defaultOpacity",1),Ne(Qt,"_defaultThickness",1),Ne(Qt,"_type","ink"),Ne(Qt,"_editorType",Ve.INK);let mS=Qt;var Zt,ii,El,ua,Al,Wd,mo,ha,yo,_r,Xd,rt,yp,vp,U1,CS,X9,V1,PS,W1,$9,Y9;const Np=class Np extends At{constructor(t){super({...t,name:"stampEditor"});F(this,rt);F(this,Zt,null);F(this,ii,null);F(this,El,null);F(this,ua,null);F(this,Al,null);F(this,Wd,"");F(this,mo,null);F(this,ha,null);F(this,yo,null);F(this,_r,!1);F(this,Xd,!1);T(this,ua,t.bitmapUrl),T(this,Al,t.bitmapFile)}static initialize(t,n){At.initialize(t,n)}static get supportedTypes(){return at(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return at(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(Ve.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,u=await r.guess({name:"altText",request:{data:s,width:o,height:a,channels:s.length/(o*a)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),n&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var t,n;d(this,ii)&&(T(this,Zt,null),this._uiManager.imageManager.deleteId(d(this,ii)),(t=d(this,mo))==null||t.remove(),T(this,mo,null),(n=d(this,ha))==null||n.disconnect(),T(this,ha,null),d(this,yo)&&(clearTimeout(d(this,yo)),T(this,yo,null))),super.remove()}rebuild(){if(!this.parent){d(this,ii)&&R(this,rt,U1).call(this);return}super.rebuild(),this.div!==null&&(d(this,ii)&&d(this,mo)===null&&R(this,rt,U1).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(d(this,El)||d(this,Zt)||d(this,ua)||d(this,Al)||d(this,ii))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),d(this,Zt)?R(this,rt,CS).call(this):R(this,rt,U1).call(this),this.width&&!this.annotationElementId){const[r,s]=this.parentDimensions;this.setAt(t*r,n*s,this.width*r,this.height*s)}return this.div}copyCanvas(t,n,r=!1){var v;t||(t=224);const{width:s,height:o}=d(this,Zt),a=new Sx;let u=d(this,Zt),h=s,f=o,m=null;if(n){if(s>n||o>n){const M=Math.min(n/s,n/o);h=Math.floor(s*M),f=Math.floor(o*M)}m=document.createElement("canvas");const y=m.width=Math.ceil(h*a.sx),S=m.height=Math.ceil(f*a.sy);d(this,_r)||(u=R(this,rt,V1).call(this,y,S));const C=m.getContext("2d");C.filter=this._uiManager.hcmFilter;let b="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":(v=window.matchMedia)!=null&&v.call(window,"(prefers-color-scheme: dark)").matches&&(b="#8f8f9d",E="#42414d");const x=15,A=x*a.sx,k=x*a.sy,L=new OffscreenCanvas(A*2,k*2),I=L.getContext("2d");I.fillStyle=b,I.fillRect(0,0,A*2,k*2),I.fillStyle=E,I.fillRect(0,0,A,k),I.fillRect(A,k,A,k),C.fillStyle=C.createPattern(L,"repeat"),C.fillRect(0,0,y,S),C.drawImage(u,0,0,u.width,u.height,0,0,y,S)}let g=null;if(r){let y,S;if(a.symmetric&&u.width<t&&u.height<t)y=u.width,S=u.height;else if(u=d(this,Zt),s>t||o>t){const E=Math.min(t/s,t/o);y=Math.floor(s*E),S=Math.floor(o*E),d(this,_r)||(u=R(this,rt,V1).call(this,y,S))}const b=new OffscreenCanvas(y,S).getContext("2d",{willReadFrequently:!0});b.drawImage(u,0,0,u.width,u.height,0,0,y,S),g={width:y,height:S,data:b.getImageData(0,0,y,S).data}}return{canvas:m,width:h,height:f,imageData:g}}getImageForAltText(){return d(this,mo)}static async deserialize(t,n,r){var S;let s=null;if(t instanceof r9){const{data:{rect:C,rotation:b,id:E,structParent:x,popupRef:A},container:k,parent:{page:{pageNumber:L}}}=t,I=k.querySelector("canvas"),M=r.imageManager.getFromCanvas(k.id,I);I.remove();const z=((S=await n._structTree.getAriaAttributes(`${U4}${E}`))==null?void 0:S.get("aria-label"))||"";s=t={annotationType:Ve.STAMP,bitmapId:M.id,bitmap:M.bitmap,pageIndex:L-1,rect:C.slice(0),rotation:b,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:z},isSvg:!1,structParent:x,popupRef:A}}const o=await super.deserialize(t,n,r),{rect:a,bitmap:u,bitmapUrl:h,bitmapId:f,isSvg:m,accessibilityData:g}=t;f&&r.imageManager.isValidId(f)?(T(o,ii,f),u&&T(o,Zt,u)):T(o,ua,h),T(o,_r,m);const[v,y]=o.pageDimensions;return o.width=(a[2]-a[0])/v,o.height=(a[3]-a[1])/y,o.annotationElementId=t.id||null,g&&(o.altTextData=g),o._initialData=s,T(o,Xd,!!s),o}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Ve.STAMP,bitmapId:d(this,ii),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:d(this,_r),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=R(this,rt,W1).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:s,altText:o}=this.serializeAltText(!1);if(!s&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=R(this,rt,Y9).call(this,r);if(u.isSame)return null;u.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,n===null)return r;n.stamps||(n.stamps=new Map);const a=d(this,_r)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(d(this,ii)))n.stamps.set(d(this,ii),{area:a,serialized:r}),r.bitmap=R(this,rt,W1).call(this,!1);else if(d(this,_r)){const u=n.stamps.get(d(this,ii));a>u.area&&(u.area=a,u.serialized.bitmap.close(),u.serialized.bitmap=R(this,rt,W1).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Zt=new WeakMap,ii=new WeakMap,El=new WeakMap,ua=new WeakMap,Al=new WeakMap,Wd=new WeakMap,mo=new WeakMap,ha=new WeakMap,yo=new WeakMap,_r=new WeakMap,Xd=new WeakMap,rt=new WeakSet,yp=function(t,n=!1){if(!t){this.remove();return}T(this,Zt,t.bitmap),n||(T(this,ii,t.id),T(this,_r,t.isSvg)),t.file&&T(this,Wd,t.file.name),R(this,rt,CS).call(this)},vp=function(){if(T(this,El,null),this._uiManager.enableWaiting(!1),!!d(this,mo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Zt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Zt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},U1=function(){if(d(this,ii)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(d(this,ii)).then(r=>R(this,rt,yp).call(this,r,!0)).finally(()=>R(this,rt,vp).call(this));return}if(d(this,ua)){const r=d(this,ua);T(this,ua,null),this._uiManager.enableWaiting(!0),T(this,El,this._uiManager.imageManager.getFromUrl(r).then(s=>R(this,rt,yp).call(this,s)).finally(()=>R(this,rt,vp).call(this)));return}if(d(this,Al)){const r=d(this,Al);T(this,Al,null),this._uiManager.enableWaiting(!0),T(this,El,this._uiManager.imageManager.getFromFile(r).then(s=>R(this,rt,yp).call(this,s)).finally(()=>R(this,rt,vp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Np.supportedTypesStr;const n=this._uiManager._signal;T(this,El,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),R(this,rt,yp).call(this,s)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>R(this,rt,vp).call(this))),t.click()},CS=function(){const{div:t}=this;let{width:n,height:r}=d(this,Zt);const[s,o]=this.pageDimensions,a=.75;if(this.width)n=this.width*s,r=this.height*o;else if(n>a*s||r>a*o){const m=Math.min(a*s/n,a*o/r);n*=m,r*=m}const[u,h]=this.parentDimensions;this.setDims(n*u/s,r*h/o),this._uiManager.enableWaiting(!1);const f=T(this,mo,document.createElement("canvas"));f.setAttribute("role","img"),this.addContainer(f),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),R(this,rt,PS).call(this,n,r),R(this,rt,$9).call(this),d(this,Xd)||(this.parent.addUndoableEditor(this),T(this,Xd,!0)),this._reportTelemetry({action:"inserted_image"}),d(this,Wd)&&f.setAttribute("aria-label",d(this,Wd))},X9=function(t,n){var a;const[r,s]=this.parentDimensions;this.width=t/r,this.height=n/s,(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,d(this,yo)!==null&&clearTimeout(d(this,yo)),T(this,yo,setTimeout(()=>{T(this,yo,null),R(this,rt,PS).call(this,t,n)},200))},V1=function(t,n){const{width:r,height:s}=d(this,Zt);let o=r,a=s,u=d(this,Zt);for(;o>2*t||a>2*n;){const h=o,f=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const m=new OffscreenCanvas(o,a);m.getContext("2d").drawImage(u,0,0,h,f,0,0,o,a),u=m.transferToImageBitmap()}return u},PS=function(t,n){const r=new Sx,s=Math.ceil(t*r.sx),o=Math.ceil(n*r.sy),a=d(this,mo);if(!a||a.width===s&&a.height===o)return;a.width=s,a.height=o;const u=d(this,_r)?d(this,Zt):R(this,rt,V1).call(this,s,o),h=a.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(u,0,0,u.width,u.height,0,0,s,o)},W1=function(t){if(t){if(d(this,_r)){const s=this._uiManager.imageManager.getSvgUrl(d(this,ii));if(s)return s}const n=document.createElement("canvas");return{width:n.width,height:n.height}=d(this,Zt),n.getContext("2d").drawImage(d(this,Zt),0,0),n.toDataURL()}if(d(this,_r)){const[n,r]=this.pageDimensions,s=Math.round(this.width*n*Gl.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*Gl.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,o);return a.getContext("2d").drawImage(d(this,Zt),0,0,d(this,Zt).width,d(this,Zt).height,0,0,s,o),a.transferToImageBitmap()}return structuredClone(d(this,Zt))},$9=function(){this._uiManager._signal&&(T(this,ha,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&R(this,rt,X9).call(this,n.width,n.height)})),d(this,ha).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=d(this,ha))==null||t.disconnect(),T(this,ha,null)},{once:!0}))},Y9=function(t){var h;const{rect:n,pageIndex:r,accessibilityData:{altText:s}}=this._initialData,o=t.rect.every((f,m)=>Math.abs(f-n[m])<1),a=t.pageIndex===r,u=(((h=t.accessibilityData)==null?void 0:h.alt)||"")===s;return{isSame:o&&a&&u,isSameAltText:u}},Ne(Np,"_type","stamp"),Ne(Np,"_editorType",Ve.STAMP);let AS=Np;var Au,$d,vo,Cl,da,xr,Pl,Yd,Kd,bi,fa,Ae,kl,oi,K9,TS,MS,RS,X1;const gs=class gs{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:s,annotationLayer:o,drawLayer:a,textLayer:u,viewport:h,l10n:f}){F(this,oi);F(this,Au);F(this,$d,!1);F(this,vo,null);F(this,Cl,null);F(this,da,null);F(this,xr,new Map);F(this,Pl,!1);F(this,Yd,!1);F(this,Kd,!1);F(this,bi,null);F(this,fa,null);F(this,Ae);const m=[...d(gs,kl).values()];if(!gs._initialized){gs._initialized=!0;for(const g of m)g.initialize(f,e)}e.registerEditorTypes(m),T(this,Ae,e),this.pageIndex=t,this.div=n,T(this,Au,s),T(this,vo,o),this.viewport=h,T(this,bi,u),this.drawLayer=a,this._structTree=r,d(this,Ae).addLayer(this)}get isEmpty(){return d(this,xr).size===0}get isInvisible(){return this.isEmpty&&d(this,Ae).getMode()===Ve.NONE}updateToolbar(e){d(this,Ae).updateToolbar(e)}updateMode(e=d(this,Ae).getMode()){switch(R(this,oi,X1).call(this),e){case Ve.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ve.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Ve.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of d(gs,kl).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=d(this,bi))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(d(this,Ae).getMode()!==Ve.INK)return;if(!e){for(const n of d(this,xr).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){d(this,Ae).setEditingState(e)}addCommands(e){d(this,Ae).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=d(this,vo))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of d(this,xr).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(d(this,Ae).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!d(this,vo))return;const t=d(this,vo).getEditableAnnotations();for(const n of t){if(n.hide(),d(this,Ae).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var r;T(this,Kd,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of d(this,xr).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);(r=this.getEditableAnnotation(s.annotationElementId))==null||r.show(),s.remove()}if(d(this,vo)){const s=d(this,vo).getEditableAnnotations();for(const o of s){const{id:a}=o.data;if(d(this,Ae).isDeletedAnnotationElement(a))continue;let u=t.get(a);if(u){u.resetAnnotationElement(o),u.show(!1),o.show();continue}u=e.get(a),u&&(d(this,Ae).addChangedExistingAnnotation(u),u.renderAnnotationElement(o)&&u.show(!1)),o.show()}}R(this,oi,X1).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of d(gs,kl).values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),T(this,Kd,!1)}getEditableAnnotation(e){var t;return((t=d(this,vo))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){d(this,Ae).getActive()!==e&&d(this,Ae).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=d(this,bi))!=null&&e.div&&!d(this,fa)){T(this,fa,new AbortController);const t=d(this,Ae).combinedSignal(d(this,fa));d(this,bi).div.addEventListener("pointerdown",R(this,oi,K9).bind(this),{signal:t}),d(this,bi).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=d(this,bi))!=null&&e.div&&d(this,fa)&&(d(this,fa).abort(),T(this,fa,null),d(this,bi).div.classList.remove("highlighting"))}enableClick(){if(d(this,Cl))return;T(this,Cl,new AbortController);const e=d(this,Ae).combinedSignal(d(this,Cl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=d(this,Cl))==null||e.abort(),T(this,Cl,null)}attach(e){d(this,xr).set(e.id,e);const{annotationElementId:t}=e;t&&d(this,Ae).isDeletedAnnotationElement(t)&&d(this,Ae).removeDeletedAnnotationElement(e)}detach(e){var t;d(this,xr).delete(e.id),(t=d(this,Au))==null||t.removePointerInTextLayer(e.contentDiv),!d(this,Kd)&&e.annotationElementId&&d(this,Ae).addDeletedAnnotationElement(e)}remove(e){this.detach(e),d(this,Ae).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,d(this,Yd)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(d(this,Ae).addDeletedAnnotationElement(e.annotationElementId),At.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),d(this,Ae).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),d(this,Ae).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!d(this,da)&&(e._focusEventsAllowed=!1,T(this,da,setTimeout(()=>{T(this,da,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:d(this,Ae)._signal}),t.focus())},0))),e._structTreeParentId=(n=d(this,Au))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return d(this,Ae).getId()}combinedSignal(e){return d(this,Ae).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=d(this,oi,TS))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){d(this,Ae).updateToolbar(e),d(this,Ae).updateMode(e);const{offsetX:n,offsetY:r}=R(this,oi,RS).call(this),s=this.getNextId(),o=R(this,oi,MS).call(this,{parent:this,id:s,x:n,y:r,uiManager:d(this,Ae),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=d(gs,kl).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,d(this,Ae)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),s=R(this,oi,MS).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:d(this,Ae),isCentered:t,...n});return s&&this.add(s),s}addNewEditor(){this.createAndAddNewEditor(R(this,oi,RS).call(this),!0)}setSelected(e){d(this,Ae).setSelected(e)}toggleSelected(e){d(this,Ae).toggleSelected(e)}unselect(e){d(this,Ae).unselect(e)}pointerup(e){const{isMac:t}=Di.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&d(this,Pl)){if(T(this,Pl,!1),!d(this,$d)){T(this,$d,!0);return}if(d(this,Ae).getMode()===Ve.STAMP){d(this,Ae).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(d(this,Ae).getMode()===Ve.HIGHLIGHT&&this.enableTextSelection(),d(this,Pl)){T(this,Pl,!1);return}const{isMac:t}=Di.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;T(this,Pl,!0);const n=d(this,Ae).getActive();T(this,$d,!n||n.isEmpty())}findNewParent(e,t,n){const r=d(this,Ae).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=d(this,Ae).getActive())==null?void 0:e.parent)===this&&(d(this,Ae).commitOrRemove(),d(this,Ae).setActiveEditor(null)),d(this,da)&&(clearTimeout(d(this,da)),T(this,da,null));for(const n of d(this,xr).values())(t=d(this,Au))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,d(this,xr).clear(),d(this,Ae).removeLayer(this)}render({viewport:e}){this.viewport=e,Nu(this.div,e);for(const t of d(this,Ae).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){d(this,Ae).commitOrRemove(),R(this,oi,X1).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Nu(this.div,{rotation:n}),t!==n)for(const r of d(this,xr).values())r.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return d(this,Ae).viewParameters.realScale}};Au=new WeakMap,$d=new WeakMap,vo=new WeakMap,Cl=new WeakMap,da=new WeakMap,xr=new WeakMap,Pl=new WeakMap,Yd=new WeakMap,Kd=new WeakMap,bi=new WeakMap,fa=new WeakMap,Ae=new WeakMap,kl=new WeakMap,oi=new WeakSet,K9=function(e){d(this,Ae).unselectAll();const{target:t}=e;if(t===d(this,bi).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&d(this,bi).div.contains(t)){const{isMac:n}=Di.platform;if(e.button!==0||e.ctrlKey&&n)return;d(this,Ae).showAllEditors("highlight",!0,!0),d(this,bi).div.classList.add("free"),this.toggleDrawing(),by.startHighlighting(this,d(this,Ae).direction==="ltr",{target:d(this,bi).div,x:e.x,y:e.y}),d(this,bi).div.addEventListener("pointerup",()=>{d(this,bi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:d(this,Ae)._signal}),e.preventDefault()}},TS=function(){return d(gs,kl).get(d(this,Ae).getMode())},MS=function(e){const t=d(this,oi,TS);return t?new t.prototype.constructor(e):null},RS=function(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),s=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+n),u=Math.min(window.innerHeight,t+r),h=(s+a)/2-e,f=(o+u)/2-t,[m,g]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:m,offsetY:g}},X1=function(){T(this,Yd,!0);for(const e of d(this,xr).values())e.isEmpty()&&e.remove();T(this,Yd,!1)},Ne(gs,"_initialized",!1),F(gs,kl,new Map([aS,mS,AS,by].map(e=>[e._editorType,e])));let kS=gs;var _o,m0,bn,pa,y0,NS,zu,FS,q9;const ei=class ei{constructor({pageIndex:e}){F(this,zu);F(this,_o,null);F(this,m0,0);F(this,bn,new Map);F(this,pa,new Map);this.pageIndex=e}setParent(e){if(!d(this,_o)){T(this,_o,e);return}if(d(this,_o)!==e){if(d(this,bn).size>0)for(const t of d(this,bn).values())t.remove(),e.append(t);T(this,_o,e)}}static get _svgFactory(){return at(this,"_svgFactory",new Z4)}draw(e,t,n,r=!1){const s=Mi(this,m0)._++,o=R(this,zu,FS).call(this,e.box);o.classList.add(...e.classNamesForDrawing);const a=ei._svgFactory.createElement("defs");o.append(a);const u=ei._svgFactory.createElement("path");a.append(u);const h=`path_p${this.pageIndex}_${s}`;u.setAttribute("id",h),u.setAttribute("d",e.toSVGPath()),r&&d(this,pa).set(s,u);const f=R(this,zu,q9).call(this,a,h),m=ei._svgFactory.createElement("use");return o.append(m),o.setAttribute("fill",t),o.setAttribute("fill-opacity",n),m.setAttribute("href",`#${h}`),d(this,bn).set(s,o),{id:s,clipPathId:`url(#${f})`}}drawOutline(e){const t=Mi(this,m0)._++,n=R(this,zu,FS).call(this,e.box);n.classList.add(...e.classNamesForOutlining);const r=ei._svgFactory.createElement("defs");n.append(r);const s=ei._svgFactory.createElement("path");r.append(s);const o=`path_p${this.pageIndex}_${t}`;s.setAttribute("id",o),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.mustRemoveSelfIntersections){const f=ei._svgFactory.createElement("mask");r.append(f),a=`mask_p${this.pageIndex}_${t}`,f.setAttribute("id",a),f.setAttribute("maskUnits","objectBoundingBox");const m=ei._svgFactory.createElement("rect");f.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const g=ei._svgFactory.createElement("use");f.append(g),g.setAttribute("href",`#${o}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const u=ei._svgFactory.createElement("use");n.append(u),u.setAttribute("href",`#${o}`),a&&u.setAttribute("mask",`url(#${a})`);const h=u.cloneNode();return n.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),d(this,bn).set(t,n),t}finalizeLine(e,t){const n=d(this,pa).get(e);d(this,pa).delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){d(this,bn).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){d(this,pa).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var n;R(n=ei,y0,NS).call(n,d(this,bn).get(e),t)}show(e,t){d(this,bn).get(e).classList.toggle("hidden",!t)}rotate(e,t){d(this,bn).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){d(this,bn).get(e).setAttribute("fill",t)}changeOpacity(e,t){d(this,bn).get(e).setAttribute("fill-opacity",t)}addClass(e,t){d(this,bn).get(e).classList.add(t)}removeClass(e,t){d(this,bn).get(e).classList.remove(t)}getSVGRoot(e){return d(this,bn).get(e)}remove(e){d(this,pa).delete(e),d(this,_o)!==null&&(d(this,bn).get(e).remove(),d(this,bn).delete(e))}destroy(){T(this,_o,null);for(const e of d(this,bn).values())e.remove();d(this,bn).clear(),d(this,pa).clear()}};_o=new WeakMap,m0=new WeakMap,bn=new WeakMap,pa=new WeakMap,y0=new WeakSet,NS=function(e,{x:t=0,y:n=0,width:r=1,height:s=1}={}){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*s}%`},zu=new WeakSet,FS=function(e){var n;const t=ei._svgFactory.create(1,1,!0);return d(this,_o).append(t),t.setAttribute("aria-hidden",!0),R(n=ei,y0,NS).call(n,t,e),t},q9=function(e,t){const n=ei._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const s=ei._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r},F(ei,y0);let LS=ei;var LL=ze.AbortException,NL=ze.AnnotationEditorLayer,FL=ze.AnnotationEditorParamsType,IL=ze.AnnotationEditorType,DL=ze.AnnotationEditorUIManager,Q9=ze.AnnotationLayer,J9=ze.AnnotationMode,OL=ze.ColorPicker,zL=ze.DOMSVGFactory,jL=ze.DrawLayer,HL=ze.FeatureTest,tw=ze.GlobalWorkerOptions,GL=ze.ImageKind,BL=ze.InvalidPDFException,UL=ze.MissingPDFException,VL=ze.OPS,WL=ze.OutputScale,XL=ze.PDFDataRangeTransport,$L=ze.PDFDateString,YL=ze.PDFWorker,KL=ze.PasswordResponses,qL=ze.PermissionFlag,QL=ze.PixelsPerInch,JL=ze.RenderingCancelledException,Z9=ze.TextLayer,ZL=ze.UnexpectedResponseException,eN=ze.Util,tN=ze.VerbosityLevel,nN=ze.XfaLayer,iN=ze.build,rN=ze.createValidAbsoluteUrl,sN=ze.fetchData,e7=ze.getDocument,oN=ze.getFilenameFromUrl,aN=ze.getPdfFilenameFromUrl,lN=ze.getXfaPageViewport,cN=ze.isDataScheme,uN=ze.isPdfFile,hN=ze.noContextMenu,dN=ze.normalizeUnicode,fN=ze.setLayerDimensions,pN=ze.shadow,gN=ze.version;const mN=Object.freeze(Object.defineProperty({__proto__:null,AbortException:LL,AnnotationEditorLayer:NL,AnnotationEditorParamsType:FL,AnnotationEditorType:IL,AnnotationEditorUIManager:DL,AnnotationLayer:Q9,AnnotationMode:J9,ColorPicker:OL,DOMSVGFactory:zL,DrawLayer:jL,FeatureTest:HL,GlobalWorkerOptions:tw,ImageKind:GL,InvalidPDFException:BL,MissingPDFException:UL,OPS:VL,OutputScale:WL,PDFDataRangeTransport:XL,PDFDateString:$L,PDFWorker:YL,PasswordResponses:KL,PermissionFlag:qL,PixelsPerInch:QL,RenderingCancelledException:JL,TextLayer:Z9,UnexpectedResponseException:ZL,Util:eN,VerbosityLevel:tN,XfaLayer:nN,build:iN,createValidAbsoluteUrl:rN,fetchData:sN,getDocument:e7,getFilenameFromUrl:oN,getPdfFilenameFromUrl:aN,getXfaPageViewport:lN,isDataScheme:cN,isPdfFile:uN,noContextMenu:hN,normalizeUnicode:dN,setLayerDimensions:fN,shadow:pN,version:gN},Symbol.toStringTag,{value:"Module"}));var Bn=function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))},yN=["onCopy","onCut","onPaste"],vN=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],_N=["onFocus","onBlur"],xN=["onInput","onInvalid","onReset","onSubmit"],SN=["onLoad","onError"],wN=["onKeyDown","onKeyPress","onKeyUp"],bN=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],EN=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],AN=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],CN=["onSelect"],PN=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],kN=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],TN=["onScroll"],MN=["onWheel"],RN=["onAnimationStart","onAnimationEnd","onAnimationIteration"],LN=["onTransitionEnd"],NN=["onToggle"],FN=["onChange"],IN=Bn(Bn(Bn(Bn(Bn(Bn(Bn(Bn(Bn(Bn(Bn(Bn(Bn(Bn(Bn(Bn(Bn(Bn([],yN,!0),vN,!0),_N,!0),xN,!0),SN,!0),wN,!0),bN,!0),EN,!0),AN,!0),CN,!0),PN,!0),kN,!0),TN,!0),MN,!0),RN,!0),LN,!0),FN,!0),NN,!0);function t7(i,e){var t={};return IN.forEach(function(n){var r=i[n];r&&(e?t[n]=function(s){return r(s,e(n))}:t[n]=r)}),t}function P0(i){var e=!1,t=new Promise(function(n,r){i.then(function(s){return!e&&n(s)}).catch(function(s){return!e&&r(s)})});return{promise:t,cancel:function(){e=!0}}}function n7(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var r=i.length;for(e=0;e<r;e++)i[e]&&(t=n7(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function m2(){for(var i,e,t=0,n="",r=arguments.length;t<r;t++)(i=arguments[t])&&(e=n7(i))&&(n&&(n+=" "),n+=e);return n}var DN="Invariant failed";function Nt(i,e){if(!i)throw new Error(DN)}var ON=function(){},zN=ON;const Ai=v0(zN);var Lb=Object.prototype.hasOwnProperty;function Nb(i,e,t){for(t of i.keys())if(qh(t,e))return t}function qh(i,e){var t,n,r;if(i===e)return!0;if(i&&e&&(t=i.constructor)===e.constructor){if(t===Date)return i.getTime()===e.getTime();if(t===RegExp)return i.toString()===e.toString();if(t===Array){if((n=i.length)===e.length)for(;n--&&qh(i[n],e[n]););return n===-1}if(t===Set){if(i.size!==e.size)return!1;for(n of i)if(r=n,r&&typeof r=="object"&&(r=Nb(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(i.size!==e.size)return!1;for(n of i)if(r=n[0],r&&typeof r=="object"&&(r=Nb(e,r),!r)||!qh(n[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)i=new Uint8Array(i),e=new Uint8Array(e);else if(t===DataView){if((n=i.byteLength)===e.byteLength)for(;n--&&i.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(i)){if((n=i.byteLength)===e.byteLength)for(;n--&&i[n]===e[n];);return n===-1}if(!t||typeof i=="object"){n=0;for(t in i)if(Lb.call(i,t)&&++n&&!Lb.call(e,t)||!(t in e)||!qh(i[t],e[t]))return!1;return Object.keys(e).length===n}}return i!==i&&e!==e}const i7=J.createContext(null);function Qh({children:i,type:e}){return N.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:i})}const jN="noopener noreferrer nofollow";class HN{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Nt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Nt(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Nt(this.pdfDocument),Nt(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Nt(Array.isArray(t));const n=t[0];new Promise(r=>{Nt(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(s=>{r(s)}).catch(()=>{Nt(!1)}):typeof n=="number"?r(n):Nt(!1)}).then(r=>{const s=r+1;Nt(this.pdfViewer),Nt(s>=1&&s<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:s})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Nt(this.pdfViewer),Nt(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||jN,e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Fb={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},y2=typeof window<"u",r7=y2&&window.location.protocol==="file:";function GN(i){return typeof i<"u"}function mc(i){return GN(i)&&i!==null}function BN(i){return typeof i=="string"}function UN(i){return i instanceof ArrayBuffer}function VN(i){return Nt(y2),i instanceof Blob}function IS(i){return BN(i)&&/^data:/.test(i)}function Ib(i){Nt(IS(i));const[e="",t=""]=i.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function WN(){return y2&&window.devicePixelRatio||1}const s7="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Db(){Ai(!r7,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${s7}`)}function XN(){Ai(!r7,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${s7}`)}function Du(i){i!=null&&i.cancel&&i.cancel()}function DS(i,e){return Object.defineProperty(i,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function $N(i){return i.name==="RenderingCancelledException"}function YN(i){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:s}=r.target;if(!s)return t(new Error("Error while reading a file."));switch(s.code){case s.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case s.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case s.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(i)})}function KN(i,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function rf(){return J.useReducer(KN,{value:void 0,error:void 0})}var qN=function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{h(n.next(f))}catch(m){o(m)}}function u(f){try{h(n.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):r(f.value).then(a,u)}h((n=n.apply(i,e||[])).next())})},Ob=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const{PDFDataRangeTransport:QN}=mN,JN=(i,e)=>{switch(e){case Fb.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");i(t);break}case Fb.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");i(t);break}}};function zb(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const ZN=J.forwardRef(function(e,t){var{children:n,className:r,error:s="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:a,file:u,inputRef:h,imageResourcesPath:f,loading:m="Loading PDF",noData:g="No PDF file specified.",onItemClick:v,onLoadError:y,onLoadProgress:S,onLoadSuccess:C,onPassword:b=JN,onSourceError:E,onSourceSuccess:x,options:A,renderMode:k,rotate:L}=e,I=Ob(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[M,z]=rf(),{value:D,error:j}=M,[U,W]=rf(),{value:Y,error:K}=U,ne=J.useRef(new HN),Z=J.useRef([]),G=J.useRef(void 0),ie=J.useRef(void 0);u&&u!==G.current&&zb(u)&&(Ai(!qh(u,G.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),G.current=u),A&&A!==ie.current&&(Ai(!qh(A,ie.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ie.current=A);const ee=J.useRef({scrollPageIntoView:Ee=>{const{dest:nt,pageNumber:Me,pageIndex:xt=Me-1}=Ee;if(v){v({dest:nt,pageIndex:xt,pageNumber:Me});return}const fn=Z.current[xt];if(fn){fn.scrollIntoView();return}Ai(!1,`An internal link leading to page ${Me} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});J.useImperativeHandle(t,()=>({linkService:ne,pages:Z,viewer:ee}),[]);function re(){x&&x()}function ae(){j&&(Ai(!1,j.toString()),E&&E(j))}function ge(){z({type:"RESET"})}J.useEffect(ge,[u,z]);const qe=J.useCallback(()=>qN(this,void 0,void 0,function*(){if(!u)return null;if(typeof u=="string")return IS(u)?{data:Ib(u)}:(Db(),{url:u});if(u instanceof QN)return{range:u};if(UN(u))return{data:u};if(y2&&VN(u))return{data:yield YN(u)};if(Nt(typeof u=="object"),Nt(zb(u)),"url"in u&&typeof u.url=="string"){if(IS(u.url)){const{url:Ee}=u,nt=Ob(u,["url"]),Me=Ib(Ee);return Object.assign({data:Me},nt)}Db()}return u}),[u]);J.useEffect(()=>{const Ee=P0(qe());return Ee.promise.then(nt=>{z({type:"RESOLVE",value:nt})}).catch(nt=>{z({type:"REJECT",error:nt})}),()=>{Du(Ee)}},[qe,z]),J.useEffect(()=>{if(!(typeof D>"u")){if(D===!1){ae();return}re()}},[D]);function et(){Y&&(C&&C(Y),Z.current=new Array(Y.numPages),ne.current.setDocument(Y))}function Te(){K&&(Ai(!1,K.toString()),y&&y(K))}J.useEffect(function(){W({type:"RESET"})},[W,D]),J.useEffect(function(){if(!D)return;const nt=A?Object.assign(Object.assign({},D),A):D,Me=e7(nt);S&&(Me.onProgress=S),b&&(Me.onPassword=b);const xt=Me,fn=xt.promise.then(qn=>{W({type:"RESOLVE",value:qn})}).catch(qn=>{xt.destroyed||W({type:"REJECT",error:qn})});return()=>{fn.finally(()=>xt.destroy())}},[A,W,D]),J.useEffect(()=>{if(!(typeof Y>"u")){if(Y===!1){Te();return}et()}},[Y]),J.useEffect(function(){ne.current.setViewer(ee.current),ne.current.setExternalLinkRel(o),ne.current.setExternalLinkTarget(a)},[o,a]);const H=J.useCallback((Ee,nt)=>{Z.current[Ee]=nt},[]),te=J.useCallback(Ee=>{delete Z.current[Ee]},[]),de=J.useMemo(()=>({imageResourcesPath:f,linkService:ne.current,onItemClick:v,pdf:Y,registerPage:H,renderMode:k,rotate:L,unregisterPage:te}),[f,v,Y,H,k,L,te]),we=J.useMemo(()=>t7(I,()=>Y),[I,Y]);function Pe(){return N.jsx(i7.Provider,{value:de,children:n})}function st(){return u?Y==null?N.jsx(Qh,{type:"loading",children:typeof m=="function"?m():m}):Y===!1?N.jsx(Qh,{type:"error",children:typeof s=="function"?s():s}):Pe():N.jsx(Qh,{type:"no-data",children:typeof g=="function"?g():g})}return N.jsx("div",Object.assign({className:m2("react-pdf__Document",r),ref:h,style:{"--scale-factor":"1"}},we,{children:st()}))});function o7(){return J.useContext(i7)}function a7(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var t=i.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(s){t.forEach(function(o){typeof o=="function"?o(s):o&&(o.current=s)})}}const l7=J.createContext(null),c7={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},eF=/^H(\d+)$/;function tF(i){return i in c7}function v2(i){return"children"in i}function u7(i){return v2(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function nF(i){const e={};if(v2(i)){const{role:t}=i,n=t.match(eF);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(tF(t)){const r=c7[t];r&&(e.role=r)}}return e}function h7(i){const e={};if(v2(i)){if(i.alt!==void 0&&(e["aria-label"]=i.alt),i.lang!==void 0&&(e.lang=i.lang),u7(i)){const[t]=i.children;if(t){const n=h7(t);return Object.assign(Object.assign({},e),n)}}}else"id"in i&&(e["aria-owns"]=i.id);return e}function iF(i){return i?Object.assign(Object.assign({},nF(i)),h7(i)):null}function d7({className:i,node:e}){const t=J.useMemo(()=>iF(e),[e]),n=J.useMemo(()=>!v2(e)||u7(e)?null:e.children.map((r,s)=>N.jsx(d7,{node:r},s)),[e]);return N.jsx("span",Object.assign({className:i},t,{children:n}))}function _2(){return J.useContext(l7)}function rF(){const i=_2();Nt(i);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=i,[n,r]=rf(),{value:s,error:o}=n,{customTextRenderer:a,page:u}=i;function h(){s&&t&&t(s)}function f(){o&&(Ai(!1,o.toString()),e&&e(o))}return J.useEffect(function(){r({type:"RESET"})},[r,u]),J.useEffect(function(){if(a||!u)return;const g=P0(u.getStructTree()),v=g;return g.promise.then(y=>{r({type:"RESOLVE",value:y})}).catch(y=>{r({type:"REJECT",error:y})}),()=>Du(v)},[a,u,r]),J.useEffect(()=>{if(s!==void 0){if(s===!1){f();return}h()}},[s]),s?N.jsx(d7,{className:"react-pdf__Page__structTree structTree",node:s}):null}const jb=J9;function sF(i){const e=_2();Nt(e);const t=Object.assign(Object.assign({},e),i),{_className:n,canvasBackground:r,devicePixelRatio:s=WN(),onRenderError:o,onRenderSuccess:a,page:u,renderForms:h,renderTextLayer:f,rotate:m,scale:g}=t,{canvasRef:v}=i;Nt(u);const y=J.useRef(null);function S(){u&&a&&a(DS(u,g))}function C(A){$N(A)||(Ai(!1,A.toString()),o&&o(A))}const b=J.useMemo(()=>u.getViewport({scale:g*s,rotation:m}),[s,u,m,g]),E=J.useMemo(()=>u.getViewport({scale:g,rotation:m}),[u,m,g]);J.useEffect(function(){if(!u)return;u.cleanup();const{current:k}=y;if(!k)return;k.width=b.width,k.height=b.height,k.style.width=`${Math.floor(E.width)}px`,k.style.height=`${Math.floor(E.height)}px`,k.style.visibility="hidden";const L={annotationMode:h?jb.ENABLE_FORMS:jb.ENABLE,canvasContext:k.getContext("2d",{alpha:!1}),viewport:b};r&&(L.background=r);const I=u.render(L),M=I;return I.promise.then(()=>{k.style.visibility="",S()}).catch(C),()=>Du(M)},[r,u,h,b,E]);const x=J.useCallback(()=>{const{current:A}=y;A&&(A.width=0,A.height=0)},[]);return J.useEffect(()=>x,[x]),N.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:a7(v,y),style:{display:"block",userSelect:"none"},children:f?N.jsx(rF,{}):null})}function oF(i){return"str"in i}function aF(){const i=_2();Nt(i);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:r,onRenderTextLayerSuccess:s,page:o,pageIndex:a,pageNumber:u,rotate:h,scale:f}=i;Nt(o);const[m,g]=rf(),{value:v,error:y}=m,S=J.useRef(null);Ai(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function C(){v&&n&&n(v)}function b(){y&&(Ai(!1,y.toString()),t&&t(y))}J.useEffect(function(){g({type:"RESET"})},[o,g]),J.useEffect(function(){if(!o)return;const M=P0(o.getTextContent()),z=M;return M.promise.then(D=>{g({type:"RESOLVE",value:D})}).catch(D=>{g({type:"REJECT",error:D})}),()=>Du(z)},[o,g]),J.useEffect(()=>{if(v!==void 0){if(v===!1){b();return}C()}},[v]);const E=J.useCallback(()=>{s&&s()},[s]),x=J.useCallback(I=>{Ai(!1,I.toString()),r&&r(I)},[r]);function A(){const I=S.current;I&&I.classList.add("selecting")}function k(){const I=S.current;I&&I.classList.remove("selecting")}const L=J.useMemo(()=>o.getViewport({scale:f,rotation:h}),[o,h,f]);return J.useLayoutEffect(function(){if(!o||!v)return;const{current:M}=S;if(!M)return;M.innerHTML="";const z=o.streamTextContent({includeMarkedContent:!0}),D={container:M,textContentSource:z,viewport:L},j=new Z9(D),U=j;return j.render().then(()=>{const W=document.createElement("div");W.className="endOfContent",M.append(W);const Y=M.querySelectorAll('[role="presentation"]');if(e){let K=0;v.items.forEach((ne,Z)=>{if(!oF(ne))return;const G=Y[K];if(!G)return;const ie=e(Object.assign({pageIndex:a,pageNumber:u,itemIndex:Z},ne));G.innerHTML=ie,K+=ne.str&&ne.hasEOL?2:1})}E()}).catch(x),()=>Du(U)},[e,x,E,o,a,u,v,L]),N.jsx("div",{className:m2("react-pdf__Page__textContent","textLayer"),onMouseUp:k,onMouseDown:A,ref:S})}function lF(){const i=o7(),e=_2();Nt(e);const t=Object.assign(Object.assign({},i),e),{imageResourcesPath:n,linkService:r,onGetAnnotationsError:s,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:u,page:h,pdf:f,renderForms:m,rotate:g,scale:v=1}=t;Nt(f),Nt(h),Nt(r);const[y,S]=rf(),{value:C,error:b}=y,E=J.useRef(null);Ai(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function x(){C&&o&&o(C)}function A(){b&&(Ai(!1,b.toString()),s&&s(b))}J.useEffect(function(){S({type:"RESET"})},[S,h]),J.useEffect(function(){if(!h)return;const z=P0(h.getAnnotations()),D=z;return z.promise.then(j=>{S({type:"RESOLVE",value:j})}).catch(j=>{S({type:"REJECT",error:j})}),()=>{Du(D)}},[S,h]),J.useEffect(()=>{if(C!==void 0){if(C===!1){A();return}x()}},[C]);function k(){u&&u()}function L(M){Ai(!1,`${M}`),a&&a(M)}const I=J.useMemo(()=>h.getViewport({scale:v,rotation:g}),[h,g,v]);return J.useEffect(function(){if(!f||!h||!r||!C)return;const{current:z}=E;if(!z)return;const D=I.clone({dontFlip:!0}),j={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:z,l10n:null,page:h,structTreeLayer:null,viewport:D},U={annotations:C,annotationStorage:f.annotationStorage,div:z,imageResourcesPath:n,linkService:r,page:h,renderForms:m,viewport:D};z.innerHTML="";try{new Q9(j).render(U),k()}catch(W){L(W)}return()=>{}},[C,n,r,h,f,m,I]),N.jsx("div",{className:m2("react-pdf__Page__annotations","annotationLayer"),ref:E})}var cF=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const Hb=1;function uF(i){const e=o7(),t=Object.assign(Object.assign({},e),i),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:s,canvasRef:o,children:a,className:u,customRenderer:h,customTextRenderer:f,devicePixelRatio:m,error:g="Failed to load the page.",height:v,inputRef:y,loading:S="Loading page",noData:C="No page specified.",onGetAnnotationsError:b,onGetAnnotationsSuccess:E,onGetStructTreeError:x,onGetStructTreeSuccess:A,onGetTextError:k,onGetTextSuccess:L,onLoadError:I,onLoadSuccess:M,onRenderAnnotationLayerError:z,onRenderAnnotationLayerSuccess:D,onRenderError:j,onRenderSuccess:U,onRenderTextLayerError:W,onRenderTextLayerSuccess:Y,pageIndex:K,pageNumber:ne,pdf:Z,registerPage:G,renderAnnotationLayer:ie=!0,renderForms:ee=!1,renderMode:re="canvas",renderTextLayer:ae=!0,rotate:ge,scale:qe=Hb,unregisterPage:et,width:Te}=t,H=cF(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[te,de]=rf(),{value:we,error:Pe}=te,st=J.useRef(null);Nt(Z);const Ee=mc(ne)?ne-1:K??null,nt=ne??(mc(K)?K+1:null),Me=ge??(we?we.rotate:null),xt=J.useMemo(()=>{if(!we)return null;let li=1;const js=qe??Hb;if(Te||v){const as=we.getViewport({scale:1,rotation:Me});Te?li=Te/as.width:v&&(li=v/as.height)}return js*li},[v,we,Me,qe,Te]);J.useEffect(function(){return()=>{mc(Ee)&&r&&et&&et(Ee)}},[r,Z,Ee,et]);function fn(){if(M){if(!we||!xt)return;M(DS(we,xt))}if(r&&G){if(!mc(Ee)||!st.current)return;G(Ee,st.current)}}function qn(){Pe&&(Ai(!1,Pe.toString()),I&&I(Pe))}J.useEffect(function(){de({type:"RESET"})},[de,Z,Ee]),J.useEffect(function(){if(!Z||!nt)return;const js=P0(Z.getPage(nt)),as=js;return js.promise.then(rc=>{de({type:"RESOLVE",value:rc})}).catch(rc=>{de({type:"REJECT",error:rc})}),()=>Du(as)},[de,Z,nt]),J.useEffect(()=>{if(we!==void 0){if(we===!1){qn();return}fn()}},[we,xt]);const ic=J.useMemo(()=>we&&mc(Ee)&&nt&&mc(Me)&&mc(xt)?{_className:n,canvasBackground:s,customTextRenderer:f,devicePixelRatio:m,onGetAnnotationsError:b,onGetAnnotationsSuccess:E,onGetStructTreeError:x,onGetStructTreeSuccess:A,onGetTextError:k,onGetTextSuccess:L,onRenderAnnotationLayerError:z,onRenderAnnotationLayerSuccess:D,onRenderError:j,onRenderSuccess:U,onRenderTextLayerError:W,onRenderTextLayerSuccess:Y,page:we,pageIndex:Ee,pageNumber:nt,renderForms:ee,renderTextLayer:ae,rotate:Me,scale:xt}:null,[n,s,f,m,b,E,x,A,k,L,z,D,j,U,W,Y,we,Ee,nt,ee,ae,Me,xt]),rs=J.useMemo(()=>t7(H,()=>we&&(xt?DS(we,xt):void 0)),[H,we,xt]),ar=`${Ee}@${xt}/${Me}`;function ss(){switch(re){case"custom":return Nt(h),N.jsx(h,{},`${ar}_custom`);case"none":return null;case"canvas":default:return N.jsx(sF,{canvasRef:o},`${ar}_canvas`)}}function _f(){return ae?N.jsx(aF,{},`${ar}_text`):null}function Co(){return ie?N.jsx(lF,{},`${ar}_annotations`):null}function os(){return N.jsxs(l7.Provider,{value:ic,children:[ss(),_f(),Co(),a]})}function Zu(){return nt?Z===null||we===void 0||we===null?N.jsx(Qh,{type:"loading",children:typeof S=="function"?S():S}):Z===!1||we===!1?N.jsx(Qh,{type:"error",children:typeof g=="function"?g():g}):os():N.jsx(Qh,{type:"no-data",children:typeof C=="function"?C():C})}return N.jsx("div",Object.assign({className:m2(n,u),"data-page-number":nt,ref:a7(y,st),style:{"--scale-factor":`${xt}`,backgroundColor:s||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},rs,{children:Zu()}))}XN();tw.workerSrc="pdf.worker.mjs";const hF={},Gb=i=>{let e;const t=new Set,n=(f,m)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const v=e;e=m??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(y=>y(e,v))}},r=()=>e,u={setState:n,getState:r,getInitialState:()=>h,subscribe:f=>(t.add(f),()=>t.delete(f)),destroy:()=>{(hF?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},h=e=i(n,r,u);return u},dF=i=>i?Gb(i):Gb;var f7={exports:{}},p7={},g7={exports:{}},m7={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sf=J;function fF(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var pF=typeof Object.is=="function"?Object.is:fF,gF=sf.useState,mF=sf.useEffect,yF=sf.useLayoutEffect,vF=sf.useDebugValue;function _F(i,e){var t=e(),n=gF({inst:{value:t,getSnapshot:e}}),r=n[0].inst,s=n[1];return yF(function(){r.value=t,r.getSnapshot=e,l3(r)&&s({inst:r})},[i,t,e]),mF(function(){return l3(r)&&s({inst:r}),i(function(){l3(r)&&s({inst:r})})},[i]),vF(t),t}function l3(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!pF(i,t)}catch{return!0}}function xF(i,e){return e()}var SF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?xF:_F;m7.useSyncExternalStore=sf.useSyncExternalStore!==void 0?sf.useSyncExternalStore:SF;g7.exports=m7;var wF=g7.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x2=J,bF=wF;function EF(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var AF=typeof Object.is=="function"?Object.is:EF,CF=bF.useSyncExternalStore,PF=x2.useRef,kF=x2.useEffect,TF=x2.useMemo,MF=x2.useDebugValue;p7.useSyncExternalStoreWithSelector=function(i,e,t,n,r){var s=PF(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=TF(function(){function u(v){if(!h){if(h=!0,f=v,v=n(v),r!==void 0&&o.hasValue){var y=o.value;if(r(y,v))return m=y}return m=v}if(y=m,AF(f,v))return y;var S=n(v);return r!==void 0&&r(y,S)?(f=v,y):(f=v,m=S)}var h=!1,f,m,g=t===void 0?null:t;return[function(){return u(e())},g===null?void 0:function(){return u(g())}]},[e,t,n,r]);var a=CF(i,s[0],s[1]);return kF(function(){o.hasValue=!0,o.value=a},[a]),MF(a),a};f7.exports=p7;var RF=f7.exports;const LF=v0(RF),y7={},{useDebugValue:NF}=un,{useSyncExternalStoreWithSelector:FF}=LF;let Bb=!1;const IF=i=>i;function DF(i,e=IF,t){(y7?"production":void 0)!=="production"&&t&&!Bb&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Bb=!0);const n=FF(i.subscribe,i.getState,i.getServerState||i.getInitialState,e,t);return NF(n),n}const OF=i=>{(y7?"production":void 0)!=="production"&&typeof i!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof i=="function"?dF(i):i,t=(n,r)=>DF(e,n,r);return Object.assign(t,e),t},zF=i=>OF,jF={};function HF(i,e){let t;try{t=i()}catch{return}return{getItem:r=>{var s;const o=u=>u===null?null:JSON.parse(u,void 0),a=(s=t.getItem(r))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(r,s)=>t.setItem(r,JSON.stringify(s,void 0)),removeItem:r=>t.removeItem(r)}}const Jp=i=>e=>{try{const t=i(e);return t instanceof Promise?t:{then(n){return Jp(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return Jp(n)(t)}}}},GF=(i,e)=>(t,n,r)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:C=>C,version:0,merge:(C,b)=>({...b,...C}),...e},o=!1;const a=new Set,u=new Set;let h;try{h=s.getStorage()}catch{}if(!h)return i((...C)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...C)},n,r);const f=Jp(s.serialize),m=()=>{const C=s.partialize({...n()});let b;const E=f({state:C,version:s.version}).then(x=>h.setItem(s.name,x)).catch(x=>{b=x});if(b)throw b;return E},g=r.setState;r.setState=(C,b)=>{g(C,b),m()};const v=i((...C)=>{t(...C),m()},n,r);let y;const S=()=>{var C;if(!h)return;o=!1,a.forEach(E=>E(n()));const b=((C=s.onRehydrateStorage)==null?void 0:C.call(s,n()))||void 0;return Jp(h.getItem.bind(h))(s.name).then(E=>{if(E)return s.deserialize(E)}).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==s.version){if(s.migrate)return s.migrate(E.state,E.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return E.state}).then(E=>{var x;return y=s.merge(E,(x=n())!=null?x:v),t(y,!0),m()}).then(()=>{b==null||b(y,void 0),o=!0,u.forEach(E=>E(y))}).catch(E=>{b==null||b(void 0,E)})};return r.persist={setOptions:C=>{s={...s,...C},C.getStorage&&(h=C.getStorage())},clearStorage:()=>{h==null||h.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>S(),hasHydrated:()=>o,onHydrate:C=>(a.add(C),()=>{a.delete(C)}),onFinishHydration:C=>(u.add(C),()=>{u.delete(C)})},S(),y||v},BF=(i,e)=>(t,n,r)=>{let s={storage:HF(()=>localStorage),partialize:S=>S,version:0,merge:(S,C)=>({...C,...S}),...e},o=!1;const a=new Set,u=new Set;let h=s.storage;if(!h)return i((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...S)},n,r);const f=()=>{const S=s.partialize({...n()});return h.setItem(s.name,{state:S,version:s.version})},m=r.setState;r.setState=(S,C)=>{m(S,C),f()};const g=i((...S)=>{t(...S),f()},n,r);r.getInitialState=()=>g;let v;const y=()=>{var S,C;if(!h)return;o=!1,a.forEach(E=>{var x;return E((x=n())!=null?x:g)});const b=((C=s.onRehydrateStorage)==null?void 0:C.call(s,(S=n())!=null?S:g))||void 0;return Jp(h.getItem.bind(h))(s.name).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==s.version){if(s.migrate)return[!0,s.migrate(E.state,E.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,E.state];return[!1,void 0]}).then(E=>{var x;const[A,k]=E;if(v=s.merge(k,(x=n())!=null?x:g),t(v,!0),A)return f()}).then(()=>{b==null||b(v,void 0),v=n(),o=!0,u.forEach(E=>E(v))}).catch(E=>{b==null||b(void 0,E)})};return r.persist={setOptions:S=>{s={...s,...S},S.storage&&(h=S.storage)},clearStorage:()=>{h==null||h.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:S=>(a.add(S),()=>{a.delete(S)}),onFinishHydration:S=>(u.add(S),()=>{u.delete(S)})},s.skipHydration||y(),v||g},UF=(i,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((jF?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),GF(i,e)):BF(i,e),VF=UF;class _p{constructor(e,t){Ne(this,"pxPerMeter");Ne(this,"settings");Ne(this,"LENGTH_STEP_MM",100);Ne(this,"MIN_PROFILE_LENGTH_MM",1e3);this.pxPerMeter=e,this.settings=t}mmToPx(e){return e/1e3*this.pxPerMeter}getBoundingBox(e){const t=e.map(u=>u.x),n=e.map(u=>u.y),r=Math.min(...t),s=Math.max(...t),o=Math.min(...n),a=Math.max(...n);return{minX:r,maxX:s,minY:o,maxY:a,width:s-r,height:a-o}}calculatePolygonArea(e){if(e.length<3)return 0;let t=0;for(let r=0;r<e.length;r++){const s=(r+1)%e.length;t+=e[r].x*e[s].y,t-=e[s].x*e[r].y}return t=Math.abs(t)/2,t/(this.pxPerMeter*this.pxPerMeter)}quantizeLength(e){return Math.floor(e/this.LENGTH_STEP_MM)*this.LENGTH_STEP_MM}lineIntersection(e,t,n,r,s,o,a,u){const h=(e-n)*(o-u)-(t-r)*(s-a);if(Math.abs(h)<1e-4)return null;const f=((e-s)*(o-u)-(t-o)*(s-a))/h,m=-((e-n)*(t-o)-(t-r)*(e-s))/h;return f>=0&&f<=1&&m>=0&&m<=1?{x:e+f*(n-e),y:t+f*(r-t)}:null}castVerticalRay(e,t){const n=[];for(let o=0;o<t.length;o++){const a=t[o],u=t[(o+1)%t.length],h=this.lineIntersection(e,-1e9,e,1e9,a.x,a.y,u.x,u.y);h&&n.push(h.y)}return n.sort((o,a)=>o-a)}castHorizontalRay(e,t){const n=[];for(let o=0;o<t.length;o++){const a=t[o],u=t[(o+1)%t.length],h=this.lineIntersection(-1e9,e,1e9,e,a.x,a.y,u.x,u.y);h&&n.push(h.x)}return n.sort((o,a)=>o-a)}generateCDProfiles(e){const{points:t,orientation:n}=e,r=this.getBoundingBox(t),s=this.mmToPx(this.settings.cdProfileWidth),o=this.mmToPx(this.settings.cdProfileSpacing),a=this.mmToPx(this.settings.wallBuffer),u=[];if(n==="Vertical"){const h=r.maxX-r.minX,f=h/this.pxPerMeter*1e3,m=f-2*this.settings.gridMargin,g=Math.floor(m/this.settings.cdProfileSpacing)+1;if(g<1)return console.warn("Room too narrow for vertical profiles with margins"),[];const v=(g-1)*this.settings.cdProfileSpacing,y=this.mmToPx(v),C=(h-y)/2;console.log("Vertical Grid Calculation:",{roomWidthMM:f.toFixed(0)+"mm",usableWidthMM:m.toFixed(0)+"mm",profileCount:g,totalGridSpanMM:v.toFixed(0)+"mm",startOffsetMM:(C/this.pxPerMeter*1e3).toFixed(0)+"mm",marginsMM:(C/this.pxPerMeter*1e3).toFixed(0)+"mm (equal on both sides)"});for(let b=0;b<g;b++){const E=r.minX+C+b*o,x=s/2,A=this.castVerticalRay(E-x,t),k=this.castVerticalRay(E+x,t);if(A.length<2||k.length<2){console.log(`Profile ${b+1} at X=${E.toFixed(0)}: Insufficient intersections`);continue}const L=Math.max(A[0],k[0]),I=Math.min(A[1],k[1]),M=I-L,z=M/this.pxPerMeter*1e3;if(M<0){console.log(`Profile ${b+1} at X=${E.toFixed(0)}: No valid space (edges cross)`);continue}const j=(M-2*a)/this.pxPerMeter*1e3;if(j<100){console.log(`Profile ${b+1} at X=${E.toFixed(0)} discarded: MaxLength=${j.toFixed(0)}mm < 100mm`);continue}const U=this.quantizeLength(j),W=this.mmToPx(U),Y=I-a,K=Y-W,ne=(K-L)/this.pxPerMeter*1e3,Z=(I-Y)/this.pxPerMeter*1e3;console.log(` Profile ${b+1} at X=${E.toFixed(0)} [BOTTOM-ANCHORED]:`,{rawMM:z.toFixed(0),maxPossibleMM:j.toFixed(0),steppedMM:U.toFixed(0),topGap:ne.toFixed(0)+"mm (remainder)",bottomGap:Z.toFixed(0)+"mm (fixed 250mm)",edgeCheck:" Both edges clear"}),U>=this.MIN_PROFILE_LENGTH_MM?u.push({id:`profile-v-${u.length}`,x1:E-s/2,y1:K,x2:E-s/2,y2:Y,width:s,orientation:"Vertical"}):console.log(` Skipping profile (too short: ${U.toFixed(0)}mm < ${this.MIN_PROFILE_LENGTH_MM}mm)`)}}else{const h=r.maxY-r.minY,f=h/this.pxPerMeter*1e3,m=f-2*this.settings.gridMargin,g=Math.floor(m/this.settings.cdProfileSpacing)+1;if(g<1)return console.warn("Room too short for horizontal profiles with margins"),[];const v=(g-1)*this.settings.cdProfileSpacing,y=this.mmToPx(v),C=(h-y)/2;console.log("Horizontal Grid Calculation:",{roomHeightMM:f.toFixed(0)+"mm",usableHeightMM:m.toFixed(0)+"mm",profileCount:g,totalGridSpanMM:v.toFixed(0)+"mm",startOffsetMM:(C/this.pxPerMeter*1e3).toFixed(0)+"mm",marginsMM:(C/this.pxPerMeter*1e3).toFixed(0)+"mm (equal on both sides)"});for(let b=0;b<g;b++){const E=r.minY+C+b*o,x=s/2,A=this.castHorizontalRay(E-x,t),k=this.castHorizontalRay(E+x,t);if(A.length<2||k.length<2){console.log(`Profile ${b+1} at Y=${E.toFixed(0)}: Insufficient intersections`);continue}const L=Math.max(A[0],k[0]),I=Math.min(A[1],k[1]),M=I-L,z=M/this.pxPerMeter*1e3;if(M<0){console.log(`Profile ${b+1} at Y=${E.toFixed(0)}: No valid space (edges cross)`);continue}const j=(M-2*a)/this.pxPerMeter*1e3;if(j<100){console.log(`Profile ${b+1} at Y=${E.toFixed(0)} discarded: MaxLength=${j.toFixed(0)}mm < 100mm`);continue}const U=this.quantizeLength(j),W=this.mmToPx(U),Y=L+a,K=Y+W,ne=(Y-L)/this.pxPerMeter*1e3,Z=(I-K)/this.pxPerMeter*1e3;console.log(` Profile ${b+1} at Y=${E.toFixed(0)} [LEFT-ANCHORED]:`,{rawMM:z.toFixed(0),maxPossibleMM:j.toFixed(0),steppedMM:U.toFixed(0),leftGap:ne.toFixed(0)+"mm (fixed 250mm)",rightGap:Z.toFixed(0)+"mm (remainder)",edgeCheck:" Both edges clear"}),U>=this.MIN_PROFILE_LENGTH_MM?u.push({id:`profile-h-${u.length}`,x1:Y,y1:E-s/2,x2:K,y2:E-s/2,width:s,orientation:"Horizontal"}):console.log(` Skipping profile (too short: ${U.toFixed(0)}mm < ${this.MIN_PROFILE_LENGTH_MM}mm)`)}}return u}generateHeatPlates(e,t,n){if(e.length<2)return console.log("Not enough profiles to generate heat plates"),[];const r=[],s=this.settings.plateWidth,o=this.settings.cdProfileWidth,a=t==="System 4"?this.settings.system4Gap:this.settings.system6Gap,u=t==="System 4"?4:6,h=u*s+(u-1)*a,f=this.mmToPx(s),m=this.mmToPx(o),g=this.mmToPx(h),v=this.mmToPx(this.settings.visualOffset),y=this.mmToPx(a),S=f+y;console.log(`
=== Generating Heat Plates (${t}, ${u} plates per gap) ===`),console.log(`Physical Gap Center Method (2mm side margins, offset: ${this.settings.visualOffset}mm)`),console.log(`Recipe: ${u}${s}mm + ${u-1}${a.toFixed(2)}mm = ${h.toFixed(2)}mm | Stride: ${(S/this.pxPerMeter*1e3).toFixed(2)}mm`);for(let C=0;C<e.length-1;C++){const b=e[C],E=e[C+1];let x,A;n==="Vertical"?(x=Math.max(b.y1,E.y1),A=Math.min(b.y2,E.y2)):(x=Math.max(b.x1,E.x1),A=Math.min(b.x2,E.x2));const k=A-x;if(k<=0){console.warn(`Gap ${C+1}: No longitudinal overlap between profiles (SafeLength=${k.toFixed(0)}px), skipping plates`);continue}const L=k/this.pxPerMeter*1e3;if(console.log(`Gap ${C+1}: SafeZone=${L.toFixed(0)}mm (Common overlap of both profiles)`),n==="Vertical"){const M=b.x1+m,z=E.x1,D=M,j=z,W=(j-D)/this.pxPerMeter*1e3,Y=(D+j)/2;if(W<h){console.warn(`Gap ${C+1}: Size ${W.toFixed(0)}mm < ${h}mm required, skipping`);continue}const ne=Y-g/2-v,Z=x,G=A,ie=f/2;for(let ge=0;ge<u;ge++){const et=ne+ge*S+ie;r.push({id:`plate-v-${r.length}`,x1:et,y1:Z,x2:et,y2:G,width:f,orientation:"Vertical"})}const ee=(ne-D)/this.pxPerMeter*1e3,re=ne+g,ae=(j-re)/this.pxPerMeter*1e3;console.log(` Gap ${C+1} (V): GapSize=${W.toFixed(1)}mm, ${u} plates, Margins: L=${ee.toFixed(2)}mm R=${ae.toFixed(2)}mm`)}else{const M=b.y1+m,z=E.y1,D=M,j=z,W=(j-D)/this.pxPerMeter*1e3,Y=(D+j)/2;if(W<h){console.warn(`Gap ${C+1}: Size ${W.toFixed(0)}mm < ${h}mm required, skipping`);continue}const ne=Y-g/2-v,Z=x,G=A,ie=f/2;for(let ge=0;ge<u;ge++){const et=ne+ge*S+ie;r.push({id:`plate-h-${r.length}`,x1:Z,y1:et,x2:G,y2:et,width:f,orientation:"Horizontal"})}const ee=(ne-D)/this.pxPerMeter*1e3,re=ne+g,ae=(j-re)/this.pxPerMeter*1e3;console.log(` Gap ${C+1} (H): GapSize=${W.toFixed(1)}mm, ${u} plates, Margins: T=${ee.toFixed(2)}mm B=${ae.toFixed(2)}mm`)}}return console.log(`Total heat plates generated: ${r.length}`),r}calculateProfileStats(e){const t=new Map;for(const n of e){const r=n.x2-n.x1,s=n.y2-n.y1,a=Math.sqrt(r*r+s*s)/this.pxPerMeter*1e3,u=Math.round(a/10);t.set(u,(t.get(u)||0)+1)}return Array.from(t.entries()).map(([n,r])=>({lengthCm:n,count:r})).sort((n,r)=>r.lengthCm-n.lengthCm)}calculateHeatPlateMaterials(e){const t=new Map;console.log(`
=== Material List Calculation (5cm Rule) ===`);for(const s of e){const o=s.x2-s.x1,a=s.y2-s.y1,h=Math.sqrt(o*o+a*a)/this.pxPerMeter*1e3,f=Math.floor(h/50)*50;if(f<=0){console.warn(`Plate with actual length ${h.toFixed(0)}mm rounds down to 0mm, skipping`);continue}t.set(f,(t.get(f)||0)+1)}const n=Array.from(t.entries()).map(([s,o])=>({lengthMm:s,count:o})).sort((s,o)=>o.lengthMm-s.lengthMm);console.log("Material List (Standardized 50mm increments):"),n.forEach(s=>{console.log(`  ${s.lengthMm} mm: ${s.count} db`)});const r=n.reduce((s,o)=>s+o.lengthMm*o.count/1e3,0);return console.log(`Total: ${r.toFixed(2)} m`),n}generateRoomGrid(e){const t=this.generateCDProfiles(e),n=this.generateHeatPlates(t,e.systemType,e.orientation),r=this.calculatePolygonArea(e.points),s=this.calculateProfileStats(t),o=this.calculateHeatPlateMaterials(n),a=n.map((h,f)=>{const m=h.x2-h.x1,g=h.y2-h.y1,y=Math.sqrt(m*m+g*g)/this.pxPerMeter*1e3;return{id:`preview-pipe-${f}`,color:"#32CD32",pathData:`M ${h.x1} ${h.y1} L ${h.x2} ${h.y2}`,length:y}});return{...e,cdProfiles:t,heatPlates:n,area:r,profileStats:s,plateMaterials:o,heatingCircuits:a,pipePatterns:[]}}}const WF={id:"system4-indulo",name:"Indul (Start)",category:"SYSTEM_4",description:"Starting connection block for System 4 pipes",width:200,anchors:[{x:100,y:1100}],paths:["m -32.126,177.64 v 944.88 H 32.126 V 177.64 Z","m 394.14,177.64 h -64.252 v 944.88 h 64.252 z","m 626.99,640.98 64.913,368.14 v 113.39 h 64.252 v -113.39 l -64.913,-368.14 6.1493,-50.631 18.085,-47.683 28.974,-41.972 38.173,-33.819 45.162,-23.701 49.516,-12.204 h 51.001 l 49.519,12.204 45.158,23.701 38.173,33.819 28.974,41.972 18.085,47.683 6.1493,50.631 -58.551,368.14 v 113.39 h 60.472 v -113.39 l 62.324,-368.14 -6.0095,-57.343 -17.839,-54.837 -28.823,-49.935 -38.582,-42.849 -46.647,-33.891 -52.675,-23.452 -56.398,-11.985 h -57.661 l -56.398,11.985 -52.675,23.452 -46.647,33.891 -38.581,42.849 -28.83,49.935 -17.82,54.837 z"]},XF={id:"system4-atfordulo",name:"tfordul (Turn)",category:"SYSTEM_4",description:"Turn/curve block connecting pipes in System 4 - Critical arc pattern",width:600,anchors:[{x:100,y:1100},{x:500,y:1100}],paths:["m 1027.0832,754.39313 10.4769,-58.20482 22.6167,-54.68985 33.721,-48.567 43.2832,-40.32762 50.865,-30.19847 56.1261,-18.70869 58.3531,-6.26283 58.3531,6.26283 56.1261,18.70869 50.8649,30.19847 43.2832,40.32762 33.721,48.567 22.6168,54.68985 10.4768,58.20482 -28.7289,368.12657 h -60.4725 l 24.9494,-368.12657 -9.91,-47.16858 -20.2885,-43.767 -29.624,-38.0221 -37.4174,-30.38745 -43.3512,-21.16539 -46.9418,-10.88505 h -23.657 -23.657 l -46.9418,10.88505 -43.3513,21.16539 -37.4173,30.38745 -29.624,38.0221 -20.2886,43.767 -9.9099,47.16858 24.9493,368.12657 h -60.4724 z","m 693.79606,1122.5197 0.0268,-136.89473 8.63245,-84.81273 20.37547,-82.73398 31.71406,-79.10564 42.4366,-73.88987 52.33142,-67.2379 61.1982,-59.30087 68.87066,-50.1922 75.19758,-40.10086 80.0543,-29.21579 83.3463,-17.72601 84.5453,-5.9396 84.5453,5.9396 83.3462,17.72601 80.0543,29.21579 75.1976,40.10086 68.8707,50.1922 61.1982,59.30087 52.3314,67.2379 42.4366,73.88987 31.7141,79.10564 20.3754,82.73398 8.6325,84.81273 0.027,136.89473 h -60.4724 l -3.8065,-136.89473 -8.6211,-79.21902 -20.0655,-77.10248 -31.0905,-73.32293 -41.4464,-68.0694 -50.914,-61.26624 -59.3009,-53.17804 -66.4215,-43.99377 -72.1211,-33.86461 -76.2861,-22.94177 -78.8033,-11.60317 h -39.3798 -39.3799 l -78.8032,11.60317 -76.2861,22.94177 -72.1211,33.86461 -66.42155,43.99377 -59.30088,53.17804 -50.91408,61.26624 -41.44637,68.0694 -31.09044,73.32293 -20.06555,77.10248 -8.6211,79.21902 -3.80646,136.89473 z","m 392.25237,1122.5197 h -60.47245 l 2.70428,-13.2791 2.57343,-11.7037 23.70145,-107.79225 35.69012,-104.42848 47.22527,-99.7797 58.16325,-93.80801 68.35664,-86.62689 77.68074,-78.42532 86.0146,-69.16546 93.26002,-59.03631 99.31099,-48.15127 104.10349,-36.66147 107.5731,-24.68034 109.6631,-12.43467 h 54.7248 54.7248 l 109.6631,12.43467 107.5731,24.68034 104.1034,36.66147 99.311,48.15127 93.2601,59.03631 86.0146,69.16546 77.6807,78.42532 68.3566,86.62689 58.1633,93.80801 47.2253,99.7797 35.6901,104.42848 23.7014,107.79225 2.5735,11.7037 2.7042,13.2791 h -60.4724 l -4.8182,-11.7871 -4.3865,-13.6492 -24.3327,-103.78597 -36.2343,-100.27102 -47.6524,-95.35762 -58.4202,-89.1592 -68.3907,-81.7891 -77.4389,-73.24735 -85.4363,-63.76074 -92.2697,-53.40479 -97.8522,-42.293 -102.1078,-30.61421 -104.9577,-18.55749 -105.9752,-6.17186 -105.9752,6.17186 -104.9577,18.55749 -102.10787,30.61421 -97.85212,42.293 -92.26972,53.40479 -85.43637,63.76074 -77.43885,73.24735 -68.39067,81.7891 -58.42024,89.1592 -47.65236,95.35762 -36.23437,100.27102 -24.33266,103.78597 -4.38653,13.6492 z","m -30.236212,1115.2094 11.329211,-25.6065 54.127285,-119.66299 62.84987,-115.31355 73.304056,-108.96396 83.13085,-101.63164 92.22814,-93.50567 100.52803,-84.47257 107.95481,-74.79696 114.44429,-64.40325 119.93971,-53.44261 124.39579,-42.10397 127.77467,-30.31188 130.0235,-18.29294 130.7312,-6.10154 130.7311,6.10154 130.0236,18.29294 127.7746,30.31188 124.3958,42.10397 119.9397,53.44261 114.4443,64.40325 107.9548,74.79696 100.5281,84.47257 92.2281,93.50567 83.1308,101.63164 73.3041,108.96396 62.8499,115.31355 54.1273,119.66299 11.3292,25.6065 v 7.3103 h -60.4724 l -2.6312,-9.4976 -12.3014,-23.0064 -56.0346,-117.39231 -64.048,-111.79862 -74.4228,-105.18442 -84.1097,-97.62533 -93.037,-89.15918 L 2087.1194,488.9943 1978.8509,419.14853 1864.4142,359.92322 1744.8524,311.88535 1621.2541,275.48846 1494.7494,251.03488 1366.472,238.7136 h -63.9468 -63.9468 l -128.2774,12.32128 -126.50476,24.45358 -123.5983,36.39689 -119.56174,48.03787 -114.43674,59.22531 -108.26852,69.84577 -101.11004,79.86154 -93.03702,89.15918 -84.10974,97.62533 -74.42275,105.18442 -64.04801,111.79862 -56.034572,117.39231 -12.301462,23.0064 -2.631134,9.4976 h -60.472424 z"]},$F={id:"system4-vege",name:"Vge (End)",category:"SYSTEM_4",description:"Ending connection block for System 4 pipes",width:200,anchors:[{x:100,y:1100}],paths:["M -32.126033,812.67732 V 1122.5197 H 32.126033 V 812.67732 l 6.198435,-78.88642 18.481918,-76.94752 30.274062,-73.10751 41.348092,-67.46845 51.40166,-60.17395 60.17017,-51.39032 67.46467,-41.34809 73.09617,-30.28162 76.9513,-18.47058 78.87886,-6.20977 78.87886,6.20977 76.9513,18.47058 73.13397,30.28162 67.46467,41.34809 60.17017,51.39032 51.40165,60.17395 41.3103,67.46845 30.31191,73.10751 18.4441,76.94752 7.5461,78.82251 13.8078,309.90629 h 60.4724 l -8.9064,-309.84238 -8.7812,-84.73713 -18.9355,-82.8436 -31.03,-79.09807 -42.4819,-73.59129 -52.98909,-66.43286 -62.28671,-57.79662 -70.22373,-47.86779 -76.53555,-36.86935 -81.22217,-25.04697 -84.01902,-12.66522 h -84.96391 l -84.01903,12.66522 -81.18438,25.04697 -76.57334,36.86935 -70.22373,47.86779 -62.28671,57.79662 -52.951262,66.43286 -42.51975,73.59129 -31.029969,79.09807 -18.897666,82.8436 z","m 394.14217,1009.1337 -64.93238,-368.14168 6.16064,-50.65331 18.10396,-47.70904 28.98902,-41.99062 38.17329,-33.83438 45.16542,-23.71279 49.54968,-12.21168 h 51.0237 l 49.54969,12.21168 45.16542,23.71279 38.21108,33.83438 28.98902,41.99062 18.06617,47.70904 6.16064,50.65331 -61.84753,368.14168 3.12606,113.386 h 60.47244 v -115.1394 l 62.5011,-366.38828 -6.00946,-57.36576 -17.8394,-54.85614 -28.83784,-49.95032 -38.58903,-42.86746 -46.67724,-33.90242 -52.68669,-23.45956 -56.42844,-11.99246 h -57.67568 l -56.42843,11.99246 -52.68669,23.45956 -46.63944,33.90242 -38.62684,42.86746 -28.83783,49.95032 -17.80161,54.85614 -6.04725,57.36576 64.93238,368.14168 v 113.386 h 64.25207 z"]},YF={id:"system4-egyenes",name:"Egyenes Cs (Straight Pipe)",category:"SYSTEM_4",description:"Straight vertical pipe segment for System 4",width:60,anchors:[{x:30,y:0}],paths:["M 30,0 L 30,1200"]},Qm={indulo:WF,atfordulo:XF,vege:$F,egyenes:YF},Zp={SYSTEM_4:[Qm.indulo,Qm.atfordulo,Qm.vege,Qm.egyenes],SYSTEM_6:[],FITTINGS:[],TOOLS:[]};function KF(i){for(const e of Object.keys(Zp)){const t=Zp[e].find(n=>n.id===i);if(t)return t}}function qF(){return Object.values(Zp).flat()}const dt=zF()(VF((i,e)=>({isLoaded:!1,setIsLoaded:t=>i({isLoaded:t}),pdf:{file:null,url:null,numPages:0,currentPage:1,scale:1,pxPerMeter:null,pagePosition:null,pageWidth:0,pageHeight:0,viewScale:1},calibration:{isCalibrating:!1,line:null,isDrawingLine:!1},measurement:{isActive:!1,isDrawing:!1,currentLine:null,measurements:[]},rooms:[],roomDrawing:{isActive:!1,currentPoints:[],pendingRoom:null},manualElements:[],hoveredRoomId:null,selectedRoomId:null,stageRef:null,settings:{cdProfileWidth:60,cdProfileSpacing:400,wallBuffer:250,gridMargin:100,plateWidth:50,system4Gap:45.33,system6Gap:7.2,visualOffset:30,startPipeLength:1e3,calibration:{rightSideMirrorOffset:320.335,induloOffsetY:0,svgInternalPaddingX:40,effectivePipeWidth:303.85,visualPipeLength:300,atforduloOffsetX:0,atforduloOffsetY:0,vegeOffsetX:0,vegeOffsetY:0}},updateSettings:t=>{i(s=>({settings:{...s.settings,...t}}));const{rooms:n,pdf:r}=e();if(r.pxPerMeter&&n.length>0){const s=new _p(r.pxPerMeter,e().settings),o=n.map(a=>s.generateRoomGrid(a));i({rooms:o})}},setPDFFile:t=>{if(t){const n=URL.createObjectURL(t);i(r=>({pdf:{...r.pdf,file:t,url:n}}))}else i(n=>(n.pdf.url&&URL.revokeObjectURL(n.pdf.url),{pdf:{...n.pdf,file:null,url:null,numPages:0,currentPage:1}}))},setPDFUrl:t=>i(n=>({pdf:{...n.pdf,url:t}})),setNumPages:t=>i(n=>({pdf:{...n.pdf,numPages:t}})),setCurrentPage:t=>i(n=>({pdf:{...n.pdf,currentPage:t}})),setScale:t=>i(n=>({pdf:{...n.pdf,scale:t}})),setPxPerMeter:t=>i(n=>({pdf:{...n.pdf,pxPerMeter:t}})),setPagePosition:t=>i(n=>({pdf:{...n.pdf,pagePosition:t}})),setPageDimensions:(t,n)=>i(r=>({pdf:{...r.pdf,pageWidth:t,pageHeight:n}})),setViewScale:t=>i(n=>({pdf:{...n.pdf,viewScale:t}})),setIsCalibrating:t=>i(n=>({calibration:{...n.calibration,isCalibrating:t}})),setCalibrationLine:t=>i(n=>({calibration:{...n.calibration,line:t}})),setIsDrawingLine:t=>i(n=>({calibration:{...n.calibration,isDrawingLine:t}})),updateCalibrationLineStart:t=>{var s,o;const{calibration:n}=e(),r={start:t,end:((s=n.line)==null?void 0:s.end)||t,realLengthMeters:((o=n.line)==null?void 0:o.realLengthMeters)||null};i({calibration:{...n,line:r}})},updateCalibrationLineEnd:t=>{var s,o;const{calibration:n}=e(),r={start:((s=n.line)==null?void 0:s.start)||t,end:t,realLengthMeters:((o=n.line)==null?void 0:o.realLengthMeters)||null};i({calibration:{...n,line:r}})},setRealLengthMeters:t=>{var s,o;const{calibration:n}=e(),r={start:((s=n.line)==null?void 0:s.start)||{x:0,y:0},end:((o=n.line)==null?void 0:o.end)||{x:0,y:0},realLengthMeters:t};i({calibration:{...n,line:r}})},completeCalibration:()=>{const{calibration:t,setPxPerMeter:n}=e();if(t.line&&t.line.realLengthMeters){const r=t.line.end.x-t.line.start.x,s=t.line.end.y-t.line.start.y,a=Math.sqrt(r*r+s*s)/t.line.realLengthMeters;n(a),i({calibration:{isCalibrating:!1,line:null,isDrawingLine:!1}})}},setMeasurementActive:t=>{i(n=>({measurement:{...n.measurement,isActive:t,isDrawing:!1,currentLine:null}}))},startMeasurement:t=>{i(n=>({measurement:{...n.measurement,isDrawing:!0,currentLine:{start:t,end:t}}}))},updateMeasurement:t=>{const{measurement:n}=e();n.currentLine&&i(r=>({measurement:{...r.measurement,currentLine:{...n.currentLine,end:t}}}))},completeMeasurement:t=>{const{measurement:n,pdf:r}=e();if(n.currentLine&&r.pxPerMeter){const s=t.x-n.currentLine.start.x,o=t.y-n.currentLine.start.y,u=Math.sqrt(s*s+o*o)/r.pxPerMeter,h={id:Date.now().toString(),start:n.currentLine.start,end:t,distanceMeters:u};i(f=>({measurement:{...f.measurement,isDrawing:!1,currentLine:null,measurements:[...f.measurement.measurements,h]}}))}},clearMeasurements:()=>{i(t=>({measurement:{...t.measurement,measurements:[],currentLine:null,isDrawing:!1}}))},setRoomDrawingActive:t=>{i(n=>({roomDrawing:{...n.roomDrawing,isActive:t,currentPoints:t?[]:n.roomDrawing.currentPoints}}))},addRoomPoint:t=>{i(n=>({roomDrawing:{...n.roomDrawing,currentPoints:[...n.roomDrawing.currentPoints,t]}}))},closeRoomPolygon:()=>{const{roomDrawing:t}=e();if(t.currentPoints.length<3){alert("A room needs at least 3 points");return}const n={id:Date.now().toString(),name:"",points:t.currentPoints,systemType:"System 4",orientation:"Vertical",connectionSide:"bottom",connectionPoint:null,cdProfiles:[],heatPlates:[],area:0,profileStats:[],plateMaterials:[],heatingCircuits:[]};i(r=>({roomDrawing:{...r.roomDrawing,pendingRoom:n}}))},cancelRoomDrawing:()=>{i(()=>({roomDrawing:{isActive:!1,currentPoints:[],pendingRoom:null}}))},setPendingRoomProperties:(t,n,r,s)=>{const{roomDrawing:o}=e();o.pendingRoom&&i(()=>{var a;return{roomDrawing:{...o,pendingRoom:{...o.pendingRoom,name:t,systemType:n,orientation:r,connectionSide:s??((a=o.pendingRoom)==null?void 0:a.connectionSide)}}}})},finishRoom:()=>{const{roomDrawing:t,rooms:n}=e();t.pendingRoom&&i({rooms:[...n,t.pendingRoom],roomDrawing:{isActive:!1,currentPoints:[],pendingRoom:null}})},deleteRoom:t=>{i(n=>({rooms:n.rooms.filter(r=>r.id!==t)}))},updateRoom:(t,n)=>{i(r=>{const s=r.rooms.findIndex(u=>u.id===t);if(s===-1)return console.warn(` Room ${t} not found`),r;const a={...r.rooms[s],...n};if(n.systemType||n.orientation||n.connectionSide)if(r.pdf.pxPerMeter){const h=new _p(r.pdf.pxPerMeter,r.settings).generateRoomGrid(a);return{rooms:[...r.rooms.map((f,m)=>m===s?h:f)]}}else console.warn(" Store: No pxPerMeter set, cannot regenerate grid");return{rooms:[...r.rooms.map((u,h)=>h===s?a:u)]}})},updateRoomPoints:(t,n)=>{i(r=>({rooms:[...r.rooms.map(s=>s.id===t?{...s,points:n}:s)]}))},finalizeRoomPoints:t=>{i(n=>{const r=n.rooms.findIndex(o=>o.id===t);if(r===-1)return console.warn(` Room ${t} not found`),n;const s=n.rooms[r];if(n.pdf.pxPerMeter){const a=new _p(n.pdf.pxPerMeter,n.settings).generateRoomGrid(s);return{rooms:[...n.rooms.map((u,h)=>h===r?a:u)]}}else return console.log(" Store: No pxPerMeter set, cannot regenerate grid"),n})},setConnectionPoint:(t,n)=>{i(r=>{const s=r.rooms.findIndex(u=>u.id===t);if(s===-1)return console.warn(` Room ${t} not found`),r;const a={...r.rooms[s],connectionPoint:n};if(r.pdf.pxPerMeter){const h=new _p(r.pdf.pxPerMeter,r.settings).generateRoomGrid(a);return{rooms:[...r.rooms.map((f,m)=>m===s?h:f)]}}else return{rooms:[...r.rooms.map((u,h)=>h===s?a:u)]}})},isSettingConnectionPoint:!1,setIsSettingConnectionPoint:t=>i({isSettingConnectionPoint:t}),setHoveredRoomId:t=>{i({hoveredRoomId:t})},selectRoom:t=>{i({selectedRoomId:t})},setStageRef:t=>{i({stageRef:t})},exportToPDF:async()=>{const t=e();if(!t.pdf.url){console.error(" Export failed: No PDF uploaded"),alert("Krem elszr tltsn fel egy PDF alaprajzot!");return}if(t.rooms.length===0){console.error(" Export failed: No rooms defined"),alert("Krem elszr rajzoljon legalbb egy helyisget!");return}try{const{PDFDocument:n,rgb:r}=await np(async()=>{const{PDFDocument:z,rgb:D}=await import("./index-BbW5A4bE.js");return{PDFDocument:z,rgb:D}},[]),s=await fetch(t.pdf.url).then(z=>z.arrayBuffer()),o=await n.load(s),u=o.getPages()[0],{width:h,height:f}=u.getSize(),m=t.pdf.pageWidth,g=t.pdf.pageHeight,v=h/m,y=f/g,S=z=>z*v,C=z=>f-z*y,b=z=>t.pdf.pxPerMeter?z/1e3*t.pdf.pxPerMeter*v:z*2.83465;let E=0;for(const z of t.rooms){if(z.cdProfiles&&z.cdProfiles.length>0){const D=b(60);for(const j of z.cdProfiles){const U=S(j.x1),W=C(j.y1),Y=S(j.x2),K=C(j.y2);u.drawLine({start:{x:U,y:W},end:{x:Y,y:K},thickness:D,color:r(.27,.51,.71),opacity:1}),E++}}if(z.heatPlates&&z.heatPlates.length>0){const D=b(50);for(const j of z.heatPlates){const U=S(j.x1),W=C(j.y1),Y=S(j.x2),K=C(j.y2);u.drawLine({start:{x:U,y:W},end:{x:Y,y:K},thickness:D,color:r(.545,.271,.075),opacity:.8}),E++}}if(z.heatPlates&&z.heatPlates.length>0){const D=b(16);for(const j of z.heatPlates){const U=S(j.x1),W=C(j.y1),Y=S(j.x2),K=C(j.y2);u.drawLine({start:{x:U,y:W},end:{x:Y,y:K},thickness:D,color:r(.196,.804,.196),opacity:1})}}}const x=await o.save(),k=`mennyezetfutes_terv_${new Date().toISOString().slice(0,10)}.pdf`,L=new Blob([x.buffer],{type:"application/pdf"}),I=URL.createObjectURL(L),M=document.createElement("a");M.href=I,M.download=k,M.click(),URL.revokeObjectURL(I),alert(` Vektoros PDF sikeresen exportlva!
Fjl: ${k}

Elemek: ${E} db`)}catch(n){console.error(" PDF export failed:",n),alert(`Hiba trtnt a PDF exportls sorn.
Krem teleptse: npm install pdf-lib`)}},selectedElementIds:[],setSelectedElementIds:t=>i({selectedElementIds:t}),addToSelection:t=>{const n=e();n.selectedElementIds.includes(t)||i({selectedElementIds:[...n.selectedElementIds,t]})},removeFromSelection:t=>{const n=e();i({selectedElementIds:n.selectedElementIds.filter(r=>r!==t)})},clearSelection:()=>i({selectedElementIds:[]}),clipboard:[],copyToClipboard:()=>{const t=e(),n=t.rooms.filter(r=>t.selectedElementIds.includes(r.id)||r.id===t.selectedRoomId);i({clipboard:n})},pasteFromClipboard:()=>{e().clipboard.length},snapEnabled:!0,setSnapEnabled:t=>i({snapEnabled:t}),snapThreshold:20,isDragging:!1,setIsDragging:t=>i({isDragging:t}),dragStartPos:null,setDragStartPos:t=>i({dragStartPos:t}),selectionRect:null,setSelectionRect:t=>i({selectionRect:t}),selectionMode:null,setSelectionMode:t=>i({selectionMode:t}),isAssetMenuOpen:!1,toggleAssetMenu:()=>i(t=>({isAssetMenuOpen:!t.isAssetMenuOpen})),openAssetMenu:()=>i({isAssetMenuOpen:!0}),closeAssetMenu:()=>i({isAssetMenuOpen:!1}),placingAsset:null,setPlacingAsset:t=>i({placingAsset:t}),addManualElement:t=>{i(n=>({manualElements:[...n.manualElements,t],placingAsset:null}))},removeManualElement:t=>{i(n=>({manualElements:n.manualElements.filter(r=>r.id!==t)}))},updateManualElement:(t,n)=>{i(r=>({manualElements:r.manualElements.map(s=>s.id===t?{...s,...n}:s)}))},updateSelectedPositions:(t,n)=>{i(r=>({manualElements:r.manualElements.map(s=>r.selectedElementIds.includes(s.id)?{...s,position:{x:s.position.x+t,y:s.position.y+n}}:s)}))},assetOverrides:{},setAssetOverride:(t,n)=>{i(r=>({assetOverrides:{...r.assetOverrides,[t]:{...r.assetOverrides[t],...n}}}))},mirrorMode:!1,setMirrorMode:t=>i({mirrorMode:t}),mirrorSelected:t=>{i(n=>({manualElements:n.manualElements.map(r=>n.selectedElementIds.includes(r.id)?{...r,scaleX:t==="x"?r.scaleX*-1:r.scaleX,scaleY:t==="y"?r.scaleY*-1:r.scaleY}:r)}))},rotationMode:!1,setRotationMode:t=>i({rotationMode:t}),setElementRotation:(t,n)=>{i(r=>({manualElements:r.manualElements.map(s=>s.id===t?{...s,rotation:n}:s)}))},rotateSelected:t=>{i(n=>({manualElements:n.manualElements.map(r=>n.selectedElementIds.includes(r.id)?{...r,rotation:((r.rotation+t)%360+360)%360}:r)}))},activeAxisLock:null,setAxisLock:t=>i({activeAxisLock:t}),placementRotation:0,setPlacementRotation:t=>i({placementRotation:t}),showSnapPoints:!1,toggleSnapPoints:()=>i(t=>({showSnapPoints:!t.showSnapPoints})),isDebugOpen:!1,toggleDebug:()=>i(t=>({isDebugOpen:!t.isDebugOpen})),debugPoints:[],addDebugPoint:(t=.5)=>{const n={id:`debug-${Date.now()}-${Math.random()}`,t:Math.max(0,Math.min(1,t))};i(r=>({debugPoints:[...r.debugPoints,n]}))},updateDebugPoint:(t,n)=>{i(r=>({debugPoints:r.debugPoints.map(s=>s.id===t?{...s,t:Math.max(0,Math.min(1,n))}:s)}))},removeDebugPoint:t=>{i(n=>({debugPoints:n.debugPoints.filter(r=>r.id!==t)}))},clearDebugPoints:()=>i({debugPoints:[]})}),{name:"heating-designer-storage",partialize:i=>({manualElements:i.manualElements,assetOverrides:i.assetOverrides,settings:i.settings,rooms:i.rooms})}));function mh(i){const e=dt.getState(),t=KF(i);if(!t)return;const n=e.assetOverrides[i];if(!n)return t;const r={...t,anchors:t.anchors?[...t.anchors]:[{x:100,y:1100}],anchors90:t.anchors90?[...t.anchors90]:void 0};return r.anchors.length>0&&(n.snapX!==void 0&&(r.anchors[0]={...r.anchors[0],x:n.snapX}),n.snapY!==void 0&&(r.anchors[0]={...r.anchors[0],y:n.snapY})),n.anchors90&&(r.anchors90=n.anchors90),r}var v7={exports:{}},S2={},Ey={},Ye={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i._registerNode=i.Konva=i.glob=void 0;const e=Math.PI/180;function t(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}i.glob=typeof n6<"u"?n6:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},i.Konva={_global:i.glob,version:"9.3.22",isBrowser:t(),isUnminified:/param/.test((function(r){}).toString()),dblClickWindow:400,getAngle(r){return i.Konva.angleDeg?r*e:r},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return i.Konva.DD.isDragging},isTransforming(){var r;return(r=i.Konva.Transformer)===null||r===void 0?void 0:r.isTransforming()},isDragReady(){return!!i.Konva.DD.node},releaseCanvasOnDestroy:!0,document:i.glob.document,_injectGlobal(r){i.glob.Konva=r}};const n=r=>{i.Konva[r.prototype.getClassName()]=r};i._registerNode=n,i.Konva._injectGlobal(i.Konva)})(Ye);var sn={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Util=i.Transform=void 0;const e=Ye;class t{constructor(A=[1,0,0,1,0,0]){this.dirty=!1,this.m=A&&A.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new t(this.m)}copyInto(A){A.m[0]=this.m[0],A.m[1]=this.m[1],A.m[2]=this.m[2],A.m[3]=this.m[3],A.m[4]=this.m[4],A.m[5]=this.m[5]}point(A){const k=this.m;return{x:k[0]*A.x+k[2]*A.y+k[4],y:k[1]*A.x+k[3]*A.y+k[5]}}translate(A,k){return this.m[4]+=this.m[0]*A+this.m[2]*k,this.m[5]+=this.m[1]*A+this.m[3]*k,this}scale(A,k){return this.m[0]*=A,this.m[1]*=A,this.m[2]*=k,this.m[3]*=k,this}rotate(A){const k=Math.cos(A),L=Math.sin(A),I=this.m[0]*k+this.m[2]*L,M=this.m[1]*k+this.m[3]*L,z=this.m[0]*-L+this.m[2]*k,D=this.m[1]*-L+this.m[3]*k;return this.m[0]=I,this.m[1]=M,this.m[2]=z,this.m[3]=D,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(A,k){const L=this.m[0]+this.m[2]*k,I=this.m[1]+this.m[3]*k,M=this.m[2]+this.m[0]*A,z=this.m[3]+this.m[1]*A;return this.m[0]=L,this.m[1]=I,this.m[2]=M,this.m[3]=z,this}multiply(A){const k=this.m[0]*A.m[0]+this.m[2]*A.m[1],L=this.m[1]*A.m[0]+this.m[3]*A.m[1],I=this.m[0]*A.m[2]+this.m[2]*A.m[3],M=this.m[1]*A.m[2]+this.m[3]*A.m[3],z=this.m[0]*A.m[4]+this.m[2]*A.m[5]+this.m[4],D=this.m[1]*A.m[4]+this.m[3]*A.m[5]+this.m[5];return this.m[0]=k,this.m[1]=L,this.m[2]=I,this.m[3]=M,this.m[4]=z,this.m[5]=D,this}invert(){const A=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),k=this.m[3]*A,L=-this.m[1]*A,I=-this.m[2]*A,M=this.m[0]*A,z=A*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),D=A*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=k,this.m[1]=L,this.m[2]=I,this.m[3]=M,this.m[4]=z,this.m[5]=D,this}getMatrix(){return this.m}decompose(){const A=this.m[0],k=this.m[1],L=this.m[2],I=this.m[3],M=this.m[4],z=this.m[5],D=A*I-k*L,j={x:M,y:z,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(A!=0||k!=0){const U=Math.sqrt(A*A+k*k);j.rotation=k>0?Math.acos(A/U):-Math.acos(A/U),j.scaleX=U,j.scaleY=D/U,j.skewX=(A*L+k*I)/D,j.skewY=0}else if(L!=0||I!=0){const U=Math.sqrt(L*L+I*I);j.rotation=Math.PI/2-(I>0?Math.acos(-L/U):-Math.acos(L/U)),j.scaleX=D/U,j.scaleY=U,j.skewX=0,j.skewY=(A*L+k*I)/D}return j.rotation=i.Util._getRotation(j.rotation),j}}i.Transform=t;const n="[object Array]",r="[object Number]",s="[object String]",o="[object Boolean]",a=Math.PI/180,u=180/Math.PI,h="#",f="",m="0",g="Konva warning: ",v="Konva error: ",y="rgb(",S={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},C=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let b=[];const E=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(x){setTimeout(x,60)};i.Util={_isElement(x){return!!(x&&x.nodeType==1)},_isFunction(x){return!!(x&&x.constructor&&x.call&&x.apply)},_isPlainObject(x){return!!x&&x.constructor===Object},_isArray(x){return Object.prototype.toString.call(x)===n},_isNumber(x){return Object.prototype.toString.call(x)===r&&!isNaN(x)&&isFinite(x)},_isString(x){return Object.prototype.toString.call(x)===s},_isBoolean(x){return Object.prototype.toString.call(x)===o},isObject(x){return x instanceof Object},isValidSelector(x){if(typeof x!="string")return!1;const A=x[0];return A==="#"||A==="."||A===A.toUpperCase()},_sign(x){return x===0||x>0?1:-1},requestAnimFrame(x){b.push(x),b.length===1&&E(function(){const A=b;b=[],A.forEach(function(k){k()})})},createCanvasElement(){const x=document.createElement("canvas");try{x.style=x.style||{}}catch{}return x},createImageElement(){return document.createElement("img")},_isInDocument(x){for(;x=x.parentNode;)if(x==document)return!0;return!1},_urlToImage(x,A){const k=i.Util.createImageElement();k.onload=function(){A(k)},k.src=x},_rgbToHex(x,A,k){return((1<<24)+(x<<16)+(A<<8)+k).toString(16).slice(1)},_hexToRgb(x){x=x.replace(h,f);const A=parseInt(x,16);return{r:A>>16&255,g:A>>8&255,b:A&255}},getRandomColor(){let x=(Math.random()*16777215<<0).toString(16);for(;x.length<6;)x=m+x;return h+x},getRGB(x){let A;return x in S?(A=S[x],{r:A[0],g:A[1],b:A[2]}):x[0]===h?this._hexToRgb(x.substring(1)):x.substr(0,4)===y?(A=C.exec(x.replace(/ /g,"")),{r:parseInt(A[1],10),g:parseInt(A[2],10),b:parseInt(A[3],10)}):{r:0,g:0,b:0}},colorToRGBA(x){return x=x||"black",i.Util._namedColorToRBA(x)||i.Util._hex3ColorToRGBA(x)||i.Util._hex4ColorToRGBA(x)||i.Util._hex6ColorToRGBA(x)||i.Util._hex8ColorToRGBA(x)||i.Util._rgbColorToRGBA(x)||i.Util._rgbaColorToRGBA(x)||i.Util._hslColorToRGBA(x)},_namedColorToRBA(x){const A=S[x.toLowerCase()];return A?{r:A[0],g:A[1],b:A[2],a:1}:null},_rgbColorToRGBA(x){if(x.indexOf("rgb(")===0){x=x.match(/rgb\(([^)]+)\)/)[1];const A=x.split(/ *, */).map(Number);return{r:A[0],g:A[1],b:A[2],a:1}}},_rgbaColorToRGBA(x){if(x.indexOf("rgba(")===0){x=x.match(/rgba\(([^)]+)\)/)[1];const A=x.split(/ *, */).map((k,L)=>k.slice(-1)==="%"?L===3?parseInt(k)/100:parseInt(k)/100*255:Number(k));return{r:A[0],g:A[1],b:A[2],a:A[3]}}},_hex8ColorToRGBA(x){if(x[0]==="#"&&x.length===9)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:parseInt(x.slice(7,9),16)/255}},_hex6ColorToRGBA(x){if(x[0]==="#"&&x.length===7)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:1}},_hex4ColorToRGBA(x){if(x[0]==="#"&&x.length===5)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:parseInt(x[4]+x[4],16)/255}},_hex3ColorToRGBA(x){if(x[0]==="#"&&x.length===4)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:1}},_hslColorToRGBA(x){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(x)){const[A,...k]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(x),L=Number(k[0])/360,I=Number(k[1])/100,M=Number(k[2])/100;let z,D,j;if(I===0)return j=M*255,{r:Math.round(j),g:Math.round(j),b:Math.round(j),a:1};M<.5?z=M*(1+I):z=M+I-M*I;const U=2*M-z,W=[0,0,0];for(let Y=0;Y<3;Y++)D=L+1/3*-(Y-1),D<0&&D++,D>1&&D--,6*D<1?j=U+(z-U)*6*D:2*D<1?j=z:3*D<2?j=U+(z-U)*(2/3-D)*6:j=U,W[Y]=j*255;return{r:Math.round(W[0]),g:Math.round(W[1]),b:Math.round(W[2]),a:1}}},haveIntersection(x,A){return!(A.x>x.x+x.width||A.x+A.width<x.x||A.y>x.y+x.height||A.y+A.height<x.y)},cloneObject(x){const A={};for(const k in x)this._isPlainObject(x[k])?A[k]=this.cloneObject(x[k]):this._isArray(x[k])?A[k]=this.cloneArray(x[k]):A[k]=x[k];return A},cloneArray(x){return x.slice(0)},degToRad(x){return x*a},radToDeg(x){return x*u},_degToRad(x){return i.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),i.Util.degToRad(x)},_radToDeg(x){return i.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),i.Util.radToDeg(x)},_getRotation(x){return e.Konva.angleDeg?i.Util.radToDeg(x):x},_capitalize(x){return x.charAt(0).toUpperCase()+x.slice(1)},throw(x){throw new Error(v+x)},error(x){console.error(v+x)},warn(x){e.Konva.showWarnings&&console.warn(g+x)},each(x,A){for(const k in x)A(k,x[k])},_inRange(x,A,k){return A<=x&&x<k},_getProjectionToSegment(x,A,k,L,I,M){let z,D,j;const U=(x-k)*(x-k)+(A-L)*(A-L);if(U==0)z=x,D=A,j=(I-k)*(I-k)+(M-L)*(M-L);else{const W=((I-x)*(k-x)+(M-A)*(L-A))/U;W<0?(z=x,D=A,j=(x-I)*(x-I)+(A-M)*(A-M)):W>1?(z=k,D=L,j=(k-I)*(k-I)+(L-M)*(L-M)):(z=x+W*(k-x),D=A+W*(L-A),j=(z-I)*(z-I)+(D-M)*(D-M))}return[z,D,j]},_getProjectionToLine(x,A,k){const L=i.Util.cloneObject(x);let I=Number.MAX_VALUE;return A.forEach(function(M,z){if(!k&&z===A.length-1)return;const D=A[(z+1)%A.length],j=i.Util._getProjectionToSegment(M.x,M.y,D.x,D.y,x.x,x.y),U=j[0],W=j[1],Y=j[2];Y<I&&(L.x=U,L.y=W,I=Y)}),L},_prepareArrayForTween(x,A,k){const L=[],I=[];if(x.length>A.length){const z=A;A=x,x=z}for(let z=0;z<x.length;z+=2)L.push({x:x[z],y:x[z+1]});for(let z=0;z<A.length;z+=2)I.push({x:A[z],y:A[z+1]});const M=[];return I.forEach(function(z){const D=i.Util._getProjectionToLine(z,L,k);M.push(D.x),M.push(D.y)}),M},_prepareToStringify(x){let A;x.visitedByCircularReferenceRemoval=!0;for(const k in x)if(x.hasOwnProperty(k)&&x[k]&&typeof x[k]=="object"){if(A=Object.getOwnPropertyDescriptor(x,k),x[k].visitedByCircularReferenceRemoval||i.Util._isElement(x[k]))if(A.configurable)delete x[k];else return null;else if(i.Util._prepareToStringify(x[k])===null)if(A.configurable)delete x[k];else return null}return delete x.visitedByCircularReferenceRemoval,x},_assign(x,A){for(const k in A)x[k]=A[k];return x},_getFirstPointerId(x){return x.touches?x.changedTouches[0].identifier:x.pointerId||999},releaseCanvas(...x){e.Konva.releaseCanvasOnDestroy&&x.forEach(A=>{A.width=0,A.height=0})},drawRoundedRectPath(x,A,k,L){let I=0,M=0,z=0,D=0;typeof L=="number"?I=M=z=D=Math.min(L,A/2,k/2):(I=Math.min(L[0]||0,A/2,k/2),M=Math.min(L[1]||0,A/2,k/2),D=Math.min(L[2]||0,A/2,k/2),z=Math.min(L[3]||0,A/2,k/2)),x.moveTo(I,0),x.lineTo(A-M,0),x.arc(A-M,M,M,Math.PI*3/2,0,!1),x.lineTo(A,k-D),x.arc(A-D,k-D,D,0,Math.PI/2,!1),x.lineTo(z,k),x.arc(z,k-z,z,Math.PI/2,Math.PI,!1),x.lineTo(0,I),x.arc(I,I,I,Math.PI,Math.PI*3/2,!1)}}})(sn);var $t={},Ds={},xa={};Object.defineProperty(xa,"__esModule",{value:!0});xa.HitContext=xa.SceneContext=xa.Context=void 0;const _7=sn,QF=Ye;function JF(i){const e=[],t=i.length,n=_7.Util;for(let r=0;r<t;r++){let s=i[r];n._isNumber(s)?s=Math.round(s*1e3)/1e3:n._isString(s)||(s=s+""),e.push(s)}return e}const Ub=",",ZF="(",eI=")",tI="([",nI="])",iI=";",rI="()",sI="=",Vb=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],oI=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],aI=100;class w2{constructor(e){this.canvas=e,QF.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){let n=this.traceArr,r=n.length,s="",o,a,u,h;for(o=0;o<r;o++)a=n[o],u=a.method,u?(h=a.args,s+=u,e?s+=rI:_7.Util._isArray(h[0])?s+=tI+h.join(Ub)+nI:(t&&(h=h.map(f=>typeof f=="number"?Math.floor(f):f)),s+=ZF+h.join(Ub)+eI)):(s+=a.property,e||(s+=sI+a.val)),s+=iI;return s}clearTrace(){this.traceArr=[]}_trace(e){let t=this.traceArr,n;t.push(e),n=t.length,n>=aI&&t.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){const t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}setAttr(e,t){this._context[e]=t}arc(e,t,n,r,s,o){this._context.arc(e,t,n,r,s,o)}arcTo(e,t,n,r,s){this._context.arcTo(e,t,n,r,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,n,r,s,o){this._context.bezierCurveTo(e,t,n,r,s,o)}clearRect(e,t,n,r){this._context.clearRect(e,t,n,r)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,t){const n=arguments;if(n.length===2)return this._context.createImageData(e,t);if(n.length===1)return this._context.createImageData(e)}createLinearGradient(e,t,n,r){return this._context.createLinearGradient(e,t,n,r)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,n,r,s,o){return this._context.createRadialGradient(e,t,n,r,s,o)}drawImage(e,t,n,r,s,o,a,u,h){const f=arguments,m=this._context;f.length===3?m.drawImage(e,t,n):f.length===5?m.drawImage(e,t,n,r,s):f.length===9&&m.drawImage(e,t,n,r,s,o,a,u,h)}ellipse(e,t,n,r,s,o,a,u){this._context.ellipse(e,t,n,r,s,o,a,u)}isPointInPath(e,t,n,r){return n?this._context.isPointInPath(n,e,t,r):this._context.isPointInPath(e,t,r)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,t,n,r){this._context.fillRect(e,t,n,r)}strokeRect(e,t,n,r){this._context.strokeRect(e,t,n,r)}fillText(e,t,n,r){r?this._context.fillText(e,t,n,r):this._context.fillText(e,t,n)}measureText(e){return this._context.measureText(e)}getImageData(e,t,n,r){return this._context.getImageData(e,t,n,r)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,n,r){this._context.rect(e,t,n,r)}roundRect(e,t,n,r,s){this._context.roundRect(e,t,n,r,s)}putImageData(e,t,n){this._context.putImageData(e,t,n)}quadraticCurveTo(e,t,n,r){this._context.quadraticCurveTo(e,t,n,r)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,n,r,s,o){this._context.setTransform(e,t,n,r,s,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,n,r){this._context.strokeText(e,t,n,r)}transform(e,t,n,r,s,o){this._context.transform(e,t,n,r,s,o)}translate(e,t){this._context.translate(e,t)}_enableTrace(){let e=this,t=Vb.length,n=this.setAttr,r,s;const o=function(a){let u=e[a],h;e[a]=function(){return s=JF(Array.prototype.slice.call(arguments,0)),h=u.apply(e,arguments),e._trace({method:a,args:s}),h}};for(r=0;r<t;r++)o(Vb[r]);e.setAttr=function(){n.apply(e,arguments);const a=arguments[0];let u=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(u=u/this.canvas.getPixelRatio()),e._trace({property:a,val:u})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||t==="source-over"||this.setAttr("globalCompositeOperation",t)}}xa.Context=w2;oI.forEach(function(i){Object.defineProperty(w2.prototype,i,{get(){return this._context[i]},set(e){this._context[i]=e}})});class lI extends w2{constructor(e,{willReadFrequently:t=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:t})}_fillColor(e){const t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){const t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){const t=e.fill(),n=e.getFillPriority();if(t&&n==="color"){this._fillColor(e);return}const r=e.getFillPatternImage();if(r&&n==="pattern"){this._fillPattern(e);return}const s=e.getFillLinearGradientColorStops();if(s&&n==="linear-gradient"){this._fillLinearGradient(e);return}const o=e.getFillRadialGradientColorStops();if(o&&n==="radial-gradient"){this._fillRadialGradient(e);return}t?this._fillColor(e):r?this._fillPattern(e):s?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const t=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),r=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(t.x,t.y,n.x,n.y);if(r){for(let o=0;o<r.length;o+=2)s.addColorStop(r[o],r[o+1]);this.setAttr("strokeStyle",s)}}_stroke(e){const t=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var t,n,r;const s=(t=e.getShadowRGBA())!==null&&t!==void 0?t:"black",o=(n=e.getShadowBlur())!==null&&n!==void 0?n:5,a=(r=e.getShadowOffset())!==null&&r!==void 0?r:{x:0,y:0},u=e.getAbsoluteScale(),h=this.canvas.getPixelRatio(),f=u.x*h,m=u.y*h;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",o*Math.min(Math.abs(f),Math.abs(m))),this.setAttr("shadowOffsetX",a.x*f),this.setAttr("shadowOffsetY",a.y*m)}}xa.SceneContext=lI;class cI extends w2{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const t=e.getStrokeScaleEnabled();if(!t){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e);const n=e.hitStrokeWidth(),r=n==="auto"?e.strokeWidth():n;this.setAttr("lineWidth",r),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),t||this.restore()}}}xa.HitContext=cI;Object.defineProperty(Ds,"__esModule",{value:!0});Ds.HitCanvas=Ds.SceneCanvas=Ds.Canvas=void 0;const Ay=sn,x7=xa,S7=Ye;let Jm;function uI(){if(Jm)return Jm;const i=Ay.Util.createCanvasElement(),e=i.getContext("2d");return Jm=function(){const t=S7.Konva._global.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}(),Ay.Util.releaseCanvas(i),Jm}class nw{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const n=(e||{}).pixelRatio||S7.Konva.pixelRatio||uI();this.pixelRatio=n,this._canvas=Ay.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(r){return Ay.Util.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Ds.Canvas=nw;class hI extends nw{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new x7.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Ds.SceneCanvas=hI;class dI extends nw{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new x7.HitContext(this),this.setSize(e.width,e.height)}}Ds.HitCanvas=dI;var b2={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DD=void 0;const e=Ye,t=sn;i.DD={get isDragging(){let n=!1;return i.DD._dragElements.forEach(r=>{r.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return i.DD._dragElements.forEach(r=>{n=r.node}),n},_dragElements:new Map,_drag(n){const r=[];i.DD._dragElements.forEach((s,o)=>{const{node:a}=s,u=a.getStage();u.setPointersPositions(n),s.pointerId===void 0&&(s.pointerId=t.Util._getFirstPointerId(n));const h=u._changedPointerPositions.find(f=>f.id===s.pointerId);if(h){if(s.dragStatus!=="dragging"){const f=a.dragDistance();if(Math.max(Math.abs(h.x-s.startPointerPos.x),Math.abs(h.y-s.startPointerPos.y))<f||(a.startDrag({evt:n}),!a.isDragging()))return}a._setDragPosition(n,s),r.push(a)}}),r.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:n},!0)})},_endDragBefore(n){const r=[];i.DD._dragElements.forEach(s=>{const{node:o}=s,a=o.getStage();if(n&&a.setPointersPositions(n),!a._changedPointerPositions.find(f=>f.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(i.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,s.dragStatus="stopped");const h=s.node.getLayer()||s.node instanceof e.Konva.Stage&&s.node;h&&r.indexOf(h)===-1&&r.push(h)}),r.forEach(s=>{s.draw()})},_endDragAfter(n){i.DD._dragElements.forEach((r,s)=>{r.dragStatus==="stopped"&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:n},!0),r.dragStatus!=="dragging"&&i.DD._dragElements.delete(s)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",i.DD._endDragBefore,!0),window.addEventListener("touchend",i.DD._endDragBefore,!0),window.addEventListener("touchcancel",i.DD._endDragBefore,!0),window.addEventListener("mousemove",i.DD._drag),window.addEventListener("touchmove",i.DD._drag),window.addEventListener("mouseup",i.DD._endDragAfter,!1),window.addEventListener("touchend",i.DD._endDragAfter,!1),window.addEventListener("touchcancel",i.DD._endDragAfter,!1))})(b2);var Ze={},Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.RGBComponent=fI;Fe.alphaComponent=pI;Fe.getNumberValidator=gI;Fe.getNumberOrArrayOfNumbersValidator=mI;Fe.getNumberOrAutoValidator=yI;Fe.getStringValidator=vI;Fe.getStringOrGradientValidator=_I;Fe.getFunctionValidator=xI;Fe.getNumberArrayValidator=SI;Fe.getBooleanValidator=wI;Fe.getComponentValidator=bI;const Ma=Ye,hn=sn;function Ra(i){return hn.Util._isString(i)?'"'+i+'"':Object.prototype.toString.call(i)==="[object Number]"||hn.Util._isBoolean(i)?i:Object.prototype.toString.call(i)}function fI(i){return i>255?255:i<0?0:Math.round(i)}function pI(i){return i>1?1:i<1e-4?1e-4:i}function gI(){if(Ma.Konva.isUnminified)return function(i,e){return hn.Util._isNumber(i)||hn.Util.warn(Ra(i)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),i}}function mI(i){if(Ma.Konva.isUnminified)return function(e,t){let n=hn.Util._isNumber(e),r=hn.Util._isArray(e)&&e.length==i;return!n&&!r&&hn.Util.warn(Ra(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or Array<number>('+i+")"),e}}function yI(){if(Ma.Konva.isUnminified)return function(i,e){return hn.Util._isNumber(i)||i==="auto"||hn.Util.warn(Ra(i)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),i}}function vI(){if(Ma.Konva.isUnminified)return function(i,e){return hn.Util._isString(i)||hn.Util.warn(Ra(i)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),i}}function _I(){if(Ma.Konva.isUnminified)return function(i,e){const t=hn.Util._isString(i),n=Object.prototype.toString.call(i)==="[object CanvasGradient]"||i&&i.addColorStop;return t||n||hn.Util.warn(Ra(i)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),i}}function xI(){if(Ma.Konva.isUnminified)return function(i,e){return hn.Util._isFunction(i)||hn.Util.warn(Ra(i)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),i}}function SI(){if(Ma.Konva.isUnminified)return function(i,e){const t=Int8Array?Object.getPrototypeOf(Int8Array):null;return t&&i instanceof t||(hn.Util._isArray(i)?i.forEach(function(n){hn.Util._isNumber(n)||hn.Util.warn('"'+e+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):hn.Util.warn(Ra(i)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),i}}function wI(){if(Ma.Konva.isUnminified)return function(i,e){return i===!0||i===!1||hn.Util.warn(Ra(i)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),i}}function bI(i){if(Ma.Konva.isUnminified)return function(e,t){return e==null||hn.Util.isObject(e)||hn.Util.warn(Ra(e)+' is a not valid value for "'+t+'" attribute. The value should be an object with properties '+i),e}}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Factory=void 0;const e=sn,t=Fe,n="get",r="set";i.Factory={addGetterSetter(s,o,a,u,h){i.Factory.addGetter(s,o,a),i.Factory.addSetter(s,o,u,h),i.Factory.addOverloadedGetterSetter(s,o)},addGetter(s,o,a){const u=n+e.Util._capitalize(o);s.prototype[u]=s.prototype[u]||function(){const h=this.attrs[o];return h===void 0?a:h}},addSetter(s,o,a,u){const h=r+e.Util._capitalize(o);s.prototype[h]||i.Factory.overWriteSetter(s,o,a,u)},overWriteSetter(s,o,a,u){const h=r+e.Util._capitalize(o);s.prototype[h]=function(f){return a&&f!==void 0&&f!==null&&(f=a.call(this,f,o)),this._setAttr(o,f),u&&u.call(this),this}},addComponentsGetterSetter(s,o,a,u,h){const f=a.length,m=e.Util._capitalize,g=n+m(o),v=r+m(o);s.prototype[g]=function(){const S={};for(let C=0;C<f;C++){const b=a[C];S[b]=this.getAttr(o+m(b))}return S};const y=(0,t.getComponentValidator)(a);s.prototype[v]=function(S){const C=this.attrs[o];u&&(S=u.call(this,S,o)),y&&y.call(this,S,o);for(const b in S)S.hasOwnProperty(b)&&this._setAttr(o+m(b),S[b]);return S||a.forEach(b=>{this._setAttr(o+m(b),void 0)}),this._fireChangeEvent(o,C,S),h&&h.call(this),this},i.Factory.addOverloadedGetterSetter(s,o)},addOverloadedGetterSetter(s,o){const a=e.Util._capitalize(o),u=r+a,h=n+a;s.prototype[o]=function(){return arguments.length?(this[u](arguments[0]),this):this[h]()}},addDeprecatedGetterSetter(s,o,a,u){e.Util.error("Adding deprecated "+o);const h=n+e.Util._capitalize(o),f=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[h]=function(){e.Util.error(f);const m=this.attrs[o];return m===void 0?a:m},i.Factory.addSetter(s,o,u,function(){e.Util.error(f)}),i.Factory.addOverloadedGetterSetter(s,o)},backCompat(s,o){e.Util.each(o,function(a,u){const h=s.prototype[u],f=n+e.Util._capitalize(a),m=r+e.Util._capitalize(a);function g(){h.apply(this,arguments),e.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+u+'" instead.')}s.prototype[a]=g,s.prototype[f]=g,s.prototype[m]=g})},afterSetFilter(){this._filterUpToDate=!1}}})(Ze);Object.defineProperty($t,"__esModule",{value:!0});$t.Node=void 0;const yh=Ds,Br=b2,k0=Ze,$a=Ye,it=sn,vn=Fe,$1="absoluteOpacity",Zm="allEventListeners",Ho="absoluteTransform",Wb="absoluteScale",yc="canvas",EI="Change",AI="children",CI="konva",OS="listening",PI="mouseenter",kI="mouseleave",TI="pointerenter",MI="pointerleave",RI="touchenter",LI="touchleave",Xb="set",$b="Shape",Y1=" ",Yb="stage",qa="transform",NI="Stage",zS="visible",FI=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Y1);let II=1,Ge=class jS{constructor(e){this._id=II++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===qa||e===Ho)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,t){let n=this._cache.get(e);return(n===void 0||(e===qa||e===Ho)&&n.dirty===!0)&&(n=t.call(this),this._cache.set(e,n)),n}_calculate(e,t,n){if(!this._attachedDepsListeners.get(e)){const r=t.map(s=>s+"Change.konva").join(Y1);this.on(r,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get(yc)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Ho&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(yc)){const{scene:e,filter:t,hit:n,buffer:r}=this._cache.get(yc);it.Util.releaseCanvas(e,t,n,r),this._cache.delete(yc)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const t=e||{};let n={};(t.x===void 0||t.y===void 0||t.width===void 0||t.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let r=Math.ceil(t.width||n.width),s=Math.ceil(t.height||n.height),o=t.pixelRatio,a=t.x===void 0?Math.floor(n.x):t.x,u=t.y===void 0?Math.floor(n.y):t.y,h=t.offset||0,f=t.drawBorder||!1,m=t.hitCanvasPixelRatio||1;if(!r||!s){it.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const g=Math.abs(Math.round(n.x)-a)>.5?1:0,v=Math.abs(Math.round(n.y)-u)>.5?1:0;r+=h*2+g,s+=h*2+v,a-=h,u-=h;const y=new yh.SceneCanvas({pixelRatio:o,width:r,height:s}),S=new yh.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),C=new yh.HitCanvas({pixelRatio:m,width:r,height:s}),b=y.getContext(),E=C.getContext(),x=new yh.SceneCanvas({width:y.width/y.pixelRatio+Math.abs(a),height:y.height/y.pixelRatio+Math.abs(u),pixelRatio:y.pixelRatio}),A=x.getContext();return C.isCache=!0,y.isCache=!0,this._cache.delete(yc),this._filterUpToDate=!1,t.imageSmoothingEnabled===!1&&(y.getContext()._context.imageSmoothingEnabled=!1,S.getContext()._context.imageSmoothingEnabled=!1),b.save(),E.save(),A.save(),b.translate(-a,-u),E.translate(-a,-u),A.translate(-a,-u),x.x=a,x.y=u,this._isUnderCache=!0,this._clearSelfAndDescendantCache($1),this._clearSelfAndDescendantCache(Wb),this.drawScene(y,this,x),this.drawHit(C,this),this._isUnderCache=!1,b.restore(),E.restore(),f&&(b.save(),b.beginPath(),b.rect(0,0,r,s),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(yc,{scene:y,filter:S,hit:C,buffer:x,x:a,y:u}),this._requestDraw(),this}isCached(){return this._cache.has(yc)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){const n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let r=1/0,s=1/0,o=-1/0,a=-1/0;const u=this.getAbsoluteTransform(t);return n.forEach(function(h){const f=u.point(h);r===void 0&&(r=o=f.x,s=a=f.y),r=Math.min(r,f.x),s=Math.min(s,f.y),o=Math.max(o,f.x),a=Math.max(a,f.y)}),{x:r,y:s,width:o-r,height:a-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);const n=this._getCachedSceneCanvas(),r=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/r,n.height/r),e.restore()}_drawCachedHitCanvas(e){const t=this._getCanvasCache(),n=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),t=this._getCanvasCache(),n=t.scene,r=t.filter,s=r.getContext(),o,a,u,h;if(e){if(!this._filterUpToDate){const f=n.pixelRatio;r.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio);try{for(o=e.length,s.clear(),s.drawImage(n._canvas,0,0,n.getWidth()/f,n.getHeight()/f),a=s.getImageData(0,0,r.getWidth(),r.getHeight()),u=0;u<o;u++){if(h=e[u],typeof h!="function"){it.Util.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,a),s.putImageData(a,0,0)}}catch(m){it.Util.error("Unable to apply filter. "+m.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return r}return n}on(e,t){if(this._cache&&this._cache.delete(Zm),arguments.length===3)return this._delegate.apply(this,arguments);const n=e.split(Y1);for(let r=0;r<n.length;r++){const o=n[r].split("."),a=o[0],u=o[1]||"";this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:u,handler:t})}return this}off(e,t){let n=(e||"").split(Y1),r=n.length,s,o,a,u,h,f;if(this._cache&&this._cache.delete(Zm),!e)for(o in this.eventListeners)this._off(o);for(s=0;s<r;s++)if(a=n[s],u=a.split("."),h=u[0],f=u[1],h)this.eventListeners[h]&&this._off(h,f,t);else for(o in this.eventListeners)this._off(o,f,t);return this}dispatchEvent(e){const t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(n){t.call(this,n.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,n){const r=this;this.on(e,function(s){const o=s.target.findAncestors(t,!0,r);for(let a=0;a<o.length;a++)s=it.Util.cloneObject(s),s.currentTarget=o[a],n.call(o[a],s)})}remove(){return this.isDragging()&&this.stopDrag(),Br.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Ho),this._clearSelfAndDescendantCache($1),this._clearSelfAndDescendantCache(Wb),this._clearSelfAndDescendantCache(Yb),this._clearSelfAndDescendantCache(zS),this._clearSelfAndDescendantCache(OS)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const t="get"+it.Util._capitalize(e);return it.Util._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){let e=this.getParent(),t=[];for(;e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let t,n;if(!e)return this;for(t in e)t!==AI&&(n=Xb+it.Util._capitalize(t),it.Util._isFunction(this[n])?this[n](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(OS,this._isListening)}_isListening(e){if(!this.listening())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isListening(e):!0}isVisible(){return this._getCache(zS,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isVisible(e):!0}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);const n=this.getLayer();let r=!1;Br.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===n)&&(r=!0)});const s=!t&&!$a.Konva.hitOnDragEnabled&&(r||$a.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),t=this,n=0,r,s,o,a;function u(f){for(r=[],s=f.length,o=0;o<s;o++)a=f[o],n++,a.nodeType!==$b&&(r=r.concat(a.getChildren().slice())),a._id===t._id&&(o=s);r.length>0&&r[0].getDepth()<=e&&u(r)}const h=this.getStage();return t.nodeType!==NI&&h&&u(h.getChildren()),n}getDepth(){let e=0,t=this.parent;for(;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(qa),this._clearSelfAndDescendantCache(Ho)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const t=e.getPointerPosition();if(!t)return null;const n=this.getAbsoluteTransform().copy();return n.invert(),n.point(t)}getAbsolutePosition(e){let t=!1,n=this.parent;for(;n;){if(n.isCached()){t=!0;break}n=n.parent}t&&!e&&(e=!0);const r=this.getAbsoluteTransform(e).getMatrix(),s=new it.Transform,o=this.offset();return s.m=r.slice(),s.translate(o.x,o.y),s.getTranslation()}setAbsolutePosition(e){const{x:t,y:n,...r}=this._clearTransform();this.attrs.x=t,this.attrs.y=n,this._clearCache(qa);const s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(e.x,e.y),e={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(r),this.setPosition({x:e.x,y:e.y}),this._clearCache(qa),this._clearSelfAndDescendantCache(Ho),this}_setTransform(e){let t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let t=e.x,n=e.y,r=this.x(),s=this.y();return t!==void 0&&(r+=t),n!==void 0&&(s+=n),this.setPosition({x:r,y:s}),this}_eachAncestorReverse(e,t){let n=[],r=this.getParent(),s,o;if(!(t&&t._id===this._id)){for(n.unshift(this);r&&(!t||r._id!==t._id);)n.unshift(r),r=r.parent;for(s=n.length,o=0;o<s;o++)e(n[o])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return it.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return it.Util.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return it.Util.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return it.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return it.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&it.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache($1,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),t,n,r,s,o;const a={attrs:{},className:this.getClassName()};for(t in e)n=e[t],o=it.Util.isObject(n)&&!it.Util._isPlainObject(n)&&!it.Util._isArray(n),!o&&(r=typeof this[t]=="function"&&this[t],delete e[t],s=r?r.call(this):null,e[t]=n,s!==n&&(a.attrs[t]=n));return it.Util._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,n){const r=[];t&&this._isMatch(e)&&r.push(this);let s=this.parent;for(;s;){if(s===n)return r;s._isMatch(e)&&r.push(s),s=s.parent}return r}isAncestorOf(e){return!1}findAncestor(e,t,n){return this.findAncestors(e,t,n)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let t=e.replace(/ /g,"").split(","),n=t.length,r,s;for(r=0;r<n;r++)if(s=t[r],it.Util.isValidSelector(s)||(it.Util.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),it.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),it.Util.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(Yb,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,t={},n){return t.target=t.target||this,n?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Ho,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let t;if(e)return t=new it.Transform,this._eachAncestorReverse(function(n){const r=n.transformsEnabled();r==="all"?t.multiply(n.getTransform()):r==="position"&&t.translate(n.x()-n.offsetX(),n.y()-n.offsetY())},e),t;{t=this._cache.get(Ho)||new it.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();const n=this.transformsEnabled();if(n==="all")t.multiply(this.getTransform());else if(n==="position"){const r=this.attrs.x||0,s=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;t.translate(r-o,s-a)}return t.dirty=!1,t}}getAbsoluteScale(e){let t=this;for(;t;)t._isUnderCache&&(e=t),t=t.getParent();const r=this.getAbsoluteTransform(e).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(qa,this._getTransform)}_getTransform(){var e,t;const n=this._cache.get(qa)||new it.Transform;n.reset();const r=this.x(),s=this.y(),o=$a.Konva.getAngle(this.rotation()),a=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,u=(t=this.attrs.scaleY)!==null&&t!==void 0?t:1,h=this.attrs.skewX||0,f=this.attrs.skewY||0,m=this.attrs.offsetX||0,g=this.attrs.offsetY||0;return(r!==0||s!==0)&&n.translate(r,s),o!==0&&n.rotate(o),(h!==0||f!==0)&&n.skew(h,f),(a!==1||u!==1)&&n.scale(a,u),(m!==0||g!==0)&&n.translate(-1*m,-1*g),n.dirty=!1,n}clone(e){let t=it.Util.cloneObject(this.attrs),n,r,s,o,a;for(n in e)t[n]=e[n];const u=new this.constructor(t);for(n in this.eventListeners)for(r=this.eventListeners[n],s=r.length,o=0;o<s;o++)a=r[o],a.name.indexOf(CI)<0&&(u.eventListeners[n]||(u.eventListeners[n]=[]),u.eventListeners[n].push(a));return u}_toKonvaCanvas(e){e=e||{};const t=this.getClientRect(),n=this.getStage(),r=e.x!==void 0?e.x:Math.floor(t.x),s=e.y!==void 0?e.y:Math.floor(t.y),o=e.pixelRatio||1,a=new yh.SceneCanvas({width:e.width||Math.ceil(t.width)||(n?n.width():0),height:e.height||Math.ceil(t.height)||(n?n.height():0),pixelRatio:o}),u=a.getContext(),h=new yh.SceneCanvas({width:a.width/a.pixelRatio+Math.abs(r),height:a.height/a.pixelRatio+Math.abs(s),pixelRatio:a.pixelRatio});return e.imageSmoothingEnabled===!1&&(u._context.imageSmoothingEnabled=!1),u.save(),(r||s)&&u.translate(-1*r,-1*s),this.drawScene(a,void 0,h),u.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const t=e.mimeType||null,n=e.quality||null,r=this._toKonvaCanvas(e).toDataURL(t,n);return e.callback&&e.callback(r),r}toImage(e){return new Promise((t,n)=>{try{const r=e==null?void 0:e.callback;r&&delete e.callback,it.Util._urlToImage(this.toDataURL(e),function(s){t(s),r==null||r(s)})}catch(r){n(r)}})}toBlob(e){return new Promise((t,n)=>{try{const r=e==null?void 0:e.callback;r&&delete e.callback,this.toCanvas(e).toBlob(s=>{t(s),r==null||r(s)},e==null?void 0:e.mimeType,e==null?void 0:e.quality)}catch(r){n(r)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():$a.Konva.dragDistance}_off(e,t,n){let r=this.eventListeners[e],s,o,a;for(s=0;s<r.length;s++)if(o=r[s].name,a=r[s].handler,(o!=="konva"||t==="konva")&&(!t||o===t)&&(!n||n===a)){if(r.splice(s,1),r.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,t,n){this._fire(e+EI,{oldVal:t,newVal:n})}addName(e){if(!this.hasName(e)){const t=this.name(),n=t?t+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;const t=this.name();return t?(t||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const t=(this.name()||"").split(/\s/g),n=t.indexOf(e);return n!==-1&&(t.splice(n,1),this.name(t.join(" "))),this}setAttr(e,t){const n=this[Xb+it.Util._capitalize(e)];return it.Util._isFunction(n)?n.call(this,t):this._setAttr(e,t),this}_requestDraw(){if($a.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,t){const n=this.attrs[e];n===t&&!it.Util.isObject(t)||(t==null?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,t),this._requestDraw())}_setComponentAttr(e,t,n){let r;n!==void 0&&(r=this.attrs[e],r||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=n,this._fireChangeEvent(e,r,n))}_fireAndBubble(e,t,n){t&&this.nodeType===$b&&(t.target=this);const r=[PI,kI,TI,MI,RI,LI];if(!(r.indexOf(e)!==-1&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n))){this._fire(e,t);const o=r.indexOf(e)!==-1&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!o&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,t,n):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,n,r;const s=(t=this._cache.get(Zm))!==null&&t!==void 0?t:{};let o=s==null?void 0:s[e];if(o===void 0){o=[];let a=Object.getPrototypeOf(this);for(;a;){const u=(r=(n=a.eventListeners)===null||n===void 0?void 0:n[e])!==null&&r!==void 0?r:[];o.push(...u),a=Object.getPrototypeOf(a)}s[e]=o,this._cache.set(Zm,s)}return o}_fire(e,t){t=t||{},t.currentTarget=this,t.type=e;const n=this._getProtoListeners(e);if(n)for(let s=0;s<n.length;s++)n[s].handler.call(this,t);const r=this.eventListeners[e];if(r)for(let s=0;s<r.length;s++)r[s].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const t=e?e.pointerId:void 0,n=this.getStage(),r=this.getAbsolutePosition();if(!n)return;const s=n._getPointerById(t)||n._changedPointerPositions[0]||r;Br.DD._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-r.x,y:s.y-r.y},dragStatus:"ready",pointerId:t})}startDrag(e,t=!0){Br.DD._dragElements.has(this._id)||this._createDragElement(e);const n=Br.DD._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){const n=this.getStage()._getPointerById(t.pointerId);if(!n)return;let r={x:n.x-t.offset.x,y:n.y-t.offset.y};const s=this.dragBoundFunc();if(s!==void 0){const o=s.call(this,r,e);o?r=o:it.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==r.x||this._lastPos.y!==r.y)&&(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}stopDrag(e){const t=Br.DD._dragElements.get(this._id);t&&(t.dragStatus="stopped"),Br.DD._endDragBefore(e),Br.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=Br.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||$a.Konva.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let r=!1;Br.DD._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(r=!0)}),r||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const t=Br.DD._dragElements.get(this._id),n=t&&t.dragStatus==="dragging",r=t&&t.dragStatus==="ready";n?this.stopDrag():r&&Br.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const n={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return it.Util.haveIntersection(n,this.getClientRect())}static create(e,t){return it.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){let n=jS.prototype.getClassName.call(e),r=e.children,s,o,a;t&&(e.attrs.container=t),$a.Konva[n]||(it.Util.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");const u=$a.Konva[n];if(s=new u(e.attrs),r)for(o=r.length,a=0;a<o;a++)s.add(jS._createNode(r[a]));return s}};$t.Node=Ge;Ge.prototype.nodeType="Node";Ge.prototype._attrsAffectingSize=[];Ge.prototype.eventListeners={};Ge.prototype.on.call(Ge.prototype,FI,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(qa),this._clearSelfAndDescendantCache(Ho)});Ge.prototype.on.call(Ge.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(zS)});Ge.prototype.on.call(Ge.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(OS)});Ge.prototype.on.call(Ge.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache($1)});const Ft=k0.Factory.addGetterSetter;Ft(Ge,"zIndex");Ft(Ge,"absolutePosition");Ft(Ge,"position");Ft(Ge,"x",0,(0,vn.getNumberValidator)());Ft(Ge,"y",0,(0,vn.getNumberValidator)());Ft(Ge,"globalCompositeOperation","source-over",(0,vn.getStringValidator)());Ft(Ge,"opacity",1,(0,vn.getNumberValidator)());Ft(Ge,"name","",(0,vn.getStringValidator)());Ft(Ge,"id","",(0,vn.getStringValidator)());Ft(Ge,"rotation",0,(0,vn.getNumberValidator)());k0.Factory.addComponentsGetterSetter(Ge,"scale",["x","y"]);Ft(Ge,"scaleX",1,(0,vn.getNumberValidator)());Ft(Ge,"scaleY",1,(0,vn.getNumberValidator)());k0.Factory.addComponentsGetterSetter(Ge,"skew",["x","y"]);Ft(Ge,"skewX",0,(0,vn.getNumberValidator)());Ft(Ge,"skewY",0,(0,vn.getNumberValidator)());k0.Factory.addComponentsGetterSetter(Ge,"offset",["x","y"]);Ft(Ge,"offsetX",0,(0,vn.getNumberValidator)());Ft(Ge,"offsetY",0,(0,vn.getNumberValidator)());Ft(Ge,"dragDistance",void 0,(0,vn.getNumberValidator)());Ft(Ge,"width",0,(0,vn.getNumberValidator)());Ft(Ge,"height",0,(0,vn.getNumberValidator)());Ft(Ge,"listening",!0,(0,vn.getBooleanValidator)());Ft(Ge,"preventDefault",!0,(0,vn.getBooleanValidator)());Ft(Ge,"filters",void 0,function(i){return this._filterUpToDate=!1,i});Ft(Ge,"visible",!0,(0,vn.getBooleanValidator)());Ft(Ge,"transformsEnabled","all",(0,vn.getStringValidator)());Ft(Ge,"size");Ft(Ge,"dragBoundFunc");Ft(Ge,"draggable",!1,(0,vn.getBooleanValidator)());k0.Factory.backCompat(Ge,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Vu={};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.Container=void 0;const df=Ze,c3=$t,E2=Fe;class Wu extends c3.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){const t=this.children||[];return e?t.filter(e):t}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let n=0;n<e.length;n++)this.add(e[n]);return this}const t=e[0];return t.getParent()?(t.moveTo(this),this):(this._validateAdd(t),t.index=this.getChildren().length,t.parent=this,t._clearCaches(),this.getChildren().push(t),this._fire("add",{child:t}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){const n=[];return this._descendants(r=>{const s=r._isMatch(e);return s&&n.push(r),!!(s&&t)}),n}_descendants(e){let t=!1;const n=this.getChildren();for(const r of n){if(t=e(r),t)return!0;if(r.hasChildren()&&(t=r._descendants(e),t))return!0}return!1}toObject(){const e=c3.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){let t=e.getParent();for(;t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){const t=c3.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(n){t.add(n.clone())}),t}getAllIntersections(e){const t=[];return this.find("Shape").forEach(n=>{n.isVisible()&&n.intersects(e)&&t.push(n)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),!this.isCached()&&((t=this.children)===null||t===void 0||t.forEach(function(n){n._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(t,n){t.index=n}),this._requestDraw()}drawScene(e,t,n){const r=this.getLayer(),s=e||r&&r.getCanvas(),o=s&&s.getContext(),a=this._getCanvasCache(),u=a&&a.scene,h=s&&s.isCache;if(!this.isVisible()&&!h)return this;if(u){o.save();const f=this.getAbsoluteTransform(t).getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",s,t,n);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;const n=this.getLayer(),r=e||n&&n.hitCanvas,s=r&&r.getContext(),o=this._getCanvasCache();if(o&&o.hit){s.save();const u=this.getAbsoluteTransform(t).getMatrix();s.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",r,t);return this}_drawChildren(e,t,n,r){var s;const o=t&&t.getContext(),a=this.clipWidth(),u=this.clipHeight(),h=this.clipFunc(),f=typeof a=="number"&&typeof u=="number"||h,m=n===this;if(f){o.save();const v=this.getAbsoluteTransform(n);let y=v.getMatrix();o.transform(y[0],y[1],y[2],y[3],y[4],y[5]),o.beginPath();let S;if(h)S=h.call(this,o,this);else{const C=this.clipX(),b=this.clipY();o.rect(C||0,b||0,a,u)}o.clip.apply(o,S),y=v.copy().invert().getMatrix(),o.transform(y[0],y[1],y[2],y[3],y[4],y[5])}const g=!m&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";g&&(o.save(),o._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(v){v[e](t,n,r)}),g&&o.restore(),f&&o.restore()}getClientRect(e={}){var t;const n=e.skipTransform,r=e.relativeTo;let s,o,a,u,h={x:1/0,y:1/0,width:0,height:0};const f=this;(t=this.children)===null||t===void 0||t.forEach(function(v){if(!v.visible())return;const y=v.getClientRect({relativeTo:f,skipShadow:e.skipShadow,skipStroke:e.skipStroke});y.width===0&&y.height===0||(s===void 0?(s=y.x,o=y.y,a=y.x+y.width,u=y.y+y.height):(s=Math.min(s,y.x),o=Math.min(o,y.y),a=Math.max(a,y.x+y.width),u=Math.max(u,y.y+y.height)))});const m=this.find("Shape");let g=!1;for(let v=0;v<m.length;v++)if(m[v]._isVisible(this)){g=!0;break}return g&&s!==void 0?h={x:s,y:o,width:a-s,height:u-o}:h={x:0,y:0,width:0,height:0},n?h:this._transformedRect(h,r)}}Vu.Container=Wu;df.Factory.addComponentsGetterSetter(Wu,"clip",["x","y","width","height"]);df.Factory.addGetterSetter(Wu,"clipX",void 0,(0,E2.getNumberValidator)());df.Factory.addGetterSetter(Wu,"clipY",void 0,(0,E2.getNumberValidator)());df.Factory.addGetterSetter(Wu,"clipWidth",void 0,(0,E2.getNumberValidator)());df.Factory.addGetterSetter(Wu,"clipHeight",void 0,(0,E2.getNumberValidator)());df.Factory.addGetterSetter(Wu,"clipFunc");var w7={},ql={};Object.defineProperty(ql,"__esModule",{value:!0});ql.getCapturedShape=OI;ql.createEvent=iw;ql.hasPointerCapture=zI;ql.setPointerCapture=jI;ql.releaseCapture=E7;const DI=Ye,eg=new Map,b7=DI.Konva._global.PointerEvent!==void 0;function OI(i){return eg.get(i)}function iw(i){return{evt:i,pointerId:i.pointerId}}function zI(i,e){return eg.get(i)===e}function jI(i,e){E7(i),e.getStage()&&(eg.set(i,e),b7&&e._fire("gotpointercapture",iw(new PointerEvent("gotpointercapture"))))}function E7(i,e){const t=eg.get(i);if(!t)return;const n=t.getStage();n&&n.content,eg.delete(i),b7&&t._fire("lostpointercapture",iw(new PointerEvent("lostpointercapture")))}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Stage=i.stages=void 0;const e=sn,t=Ze,n=Vu,r=Ye,s=Ds,o=b2,a=Ye,u=ql,h="Stage",f="string",m="px",g="mouseout",v="mouseleave",y="mouseover",S="mouseenter",C="mousemove",b="mousedown",E="mouseup",x="pointermove",A="pointerdown",k="pointerup",L="pointercancel",I="lostpointercapture",M="pointerout",z="pointerleave",D="pointerover",j="pointerenter",U="contextmenu",W="touchstart",Y="touchend",K="touchmove",ne="touchcancel",Z="wheel",G=5,ie=[[S,"_pointerenter"],[b,"_pointerdown"],[C,"_pointermove"],[E,"_pointerup"],[v,"_pointerleave"],[W,"_pointerdown"],[K,"_pointermove"],[Y,"_pointerup"],[ne,"_pointercancel"],[y,"_pointerover"],[Z,"_wheel"],[U,"_contextmenu"],[A,"_pointerdown"],[x,"_pointermove"],[k,"_pointerup"],[L,"_pointercancel"],[z,"_pointerleave"],[I,"_lostpointercapture"]],ee={mouse:{[M]:g,[z]:v,[D]:y,[j]:S,[x]:C,[A]:b,[k]:E,[L]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[M]:"touchout",[z]:"touchleave",[D]:"touchover",[j]:"touchenter",[x]:K,[A]:W,[k]:Y,[L]:ne,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[M]:M,[z]:z,[D]:D,[j]:j,[x]:x,[A]:A,[k]:k,[L]:L,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},re=Te=>Te.indexOf("pointer")>=0?"pointer":Te.indexOf("touch")>=0?"touch":"mouse",ae=Te=>{const H=re(Te);if(H==="pointer")return r.Konva.pointerEventsEnabled&&ee.pointer;if(H==="touch")return ee.touch;if(H==="mouse")return ee.mouse};function ge(Te={}){return(Te.clipFunc||Te.clipWidth||Te.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Te}const qe="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";i.stages=[];class et extends n.Container{constructor(H){super(ge(H)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),i.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{ge(this.attrs)}),this._checkVisibility()}_validateAdd(H){const te=H.getType()==="Layer",de=H.getType()==="FastLayer";te||de||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const H=this.visible()?"":"none";this.content.style.display=H}setContainer(H){if(typeof H===f){let te;if(H.charAt(0)==="."){const de=H.slice(1);H=document.getElementsByClassName(de)[0]}else H.charAt(0)!=="#"?te=H:te=H.slice(1),H=document.getElementById(te);if(!H)throw"Can not find container in document with id "+te}return this._setAttr("container",H),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),H.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const H=this.children,te=H.length;for(let de=0;de<te;de++)H[de].clear();return this}clone(H){return H||(H={}),H.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,H)}destroy(){super.destroy();const H=this.content;H&&e.Util._isInDocument(H)&&this.container().removeChild(H);const te=i.stages.indexOf(this);return te>-1&&i.stages.splice(te,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const H=this._pointerPositions[0]||this._changedPointerPositions[0];return H?{x:H.x,y:H.y}:(e.Util.warn(qe),null)}_getPointerById(H){return this._pointerPositions.find(te=>te.id===H)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(H){H=H||{},H.x=H.x||0,H.y=H.y||0,H.width=H.width||this.width(),H.height=H.height||this.height();const te=new s.SceneCanvas({width:H.width,height:H.height,pixelRatio:H.pixelRatio||1}),de=te.getContext()._context,we=this.children;return(H.x||H.y)&&de.translate(-1*H.x,-1*H.y),we.forEach(function(Pe){if(!Pe.isVisible())return;const st=Pe._toKonvaCanvas(H);de.drawImage(st._canvas,H.x,H.y,st.getWidth()/st.getPixelRatio(),st.getHeight()/st.getPixelRatio())}),te}getIntersection(H){if(!H)return null;const te=this.children,de=te.length,we=de-1;for(let Pe=we;Pe>=0;Pe--){const st=te[Pe].getIntersection(H);if(st)return st}return null}_resizeDOM(){const H=this.width(),te=this.height();this.content&&(this.content.style.width=H+m,this.content.style.height=te+m),this.bufferCanvas.setSize(H,te),this.bufferHitCanvas.setSize(H,te),this.children.forEach(de=>{de.setSize({width:H,height:te}),de.draw()})}add(H,...te){if(arguments.length>1){for(let we=0;we<arguments.length;we++)this.add(arguments[we]);return this}super.add(H);const de=this.children.length;return de>G&&e.Util.warn("The stage has "+de+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),H.setSize({width:this.width(),height:this.height()}),H.draw(),r.Konva.isBrowser&&this.content.appendChild(H.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(H){return u.hasPointerCapture(H,this)}setPointerCapture(H){u.setPointerCapture(H,this)}releaseCapture(H){u.releaseCapture(H,this)}getLayers(){return this.children}_bindContentEvents(){r.Konva.isBrowser&&ie.forEach(([H,te])=>{this.content.addEventListener(H,de=>{this[te](de)},{passive:!1})})}_pointerenter(H){this.setPointersPositions(H);const te=ae(H.type);te&&this._fire(te.pointerenter,{evt:H,target:this,currentTarget:this})}_pointerover(H){this.setPointersPositions(H);const te=ae(H.type);te&&this._fire(te.pointerover,{evt:H,target:this,currentTarget:this})}_getTargetShape(H){let te=this[H+"targetShape"];return te&&!te.getStage()&&(te=null),te}_pointerleave(H){const te=ae(H.type),de=re(H.type);if(!te)return;this.setPointersPositions(H);const we=this._getTargetShape(de),Pe=!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled;we&&Pe?(we._fireAndBubble(te.pointerout,{evt:H}),we._fireAndBubble(te.pointerleave,{evt:H}),this._fire(te.pointerleave,{evt:H,target:this,currentTarget:this}),this[de+"targetShape"]=null):Pe&&(this._fire(te.pointerleave,{evt:H,target:this,currentTarget:this}),this._fire(te.pointerout,{evt:H,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(H){const te=ae(H.type),de=re(H.type);if(!te)return;this.setPointersPositions(H);let we=!1;this._changedPointerPositions.forEach(Pe=>{const st=this.getIntersection(Pe);if(o.DD.justDragged=!1,r.Konva["_"+de+"ListenClick"]=!0,!st||!st.isListening()){this[de+"ClickStartShape"]=void 0;return}r.Konva.capturePointerEventsEnabled&&st.setPointerCapture(Pe.id),this[de+"ClickStartShape"]=st,st._fireAndBubble(te.pointerdown,{evt:H,pointerId:Pe.id}),we=!0;const Ee=H.type.indexOf("touch")>=0;st.preventDefault()&&H.cancelable&&Ee&&H.preventDefault()}),we||this._fire(te.pointerdown,{evt:H,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(H){const te=ae(H.type),de=re(H.type);if(!te||(r.Konva.isDragging()&&o.DD.node.preventDefault()&&H.cancelable&&H.preventDefault(),this.setPointersPositions(H),!(!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled)))return;const Pe={};let st=!1;const Ee=this._getTargetShape(de);this._changedPointerPositions.forEach(nt=>{const Me=u.getCapturedShape(nt.id)||this.getIntersection(nt),xt=nt.id,fn={evt:H,pointerId:xt},qn=Ee!==Me;if(qn&&Ee&&(Ee._fireAndBubble(te.pointerout,{...fn},Me),Ee._fireAndBubble(te.pointerleave,{...fn},Me)),Me){if(Pe[Me._id])return;Pe[Me._id]=!0}Me&&Me.isListening()?(st=!0,qn&&(Me._fireAndBubble(te.pointerover,{...fn},Ee),Me._fireAndBubble(te.pointerenter,{...fn},Ee),this[de+"targetShape"]=Me),Me._fireAndBubble(te.pointermove,{...fn})):Ee&&(this._fire(te.pointerover,{evt:H,target:this,currentTarget:this,pointerId:xt}),this[de+"targetShape"]=null)}),st||this._fire(te.pointermove,{evt:H,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(H){const te=ae(H.type),de=re(H.type);if(!te)return;this.setPointersPositions(H);const we=this[de+"ClickStartShape"],Pe=this[de+"ClickEndShape"],st={};let Ee=!1;this._changedPointerPositions.forEach(nt=>{const Me=u.getCapturedShape(nt.id)||this.getIntersection(nt);if(Me){if(Me.releaseCapture(nt.id),st[Me._id])return;st[Me._id]=!0}const xt=nt.id,fn={evt:H,pointerId:xt};let qn=!1;r.Konva["_"+de+"InDblClickWindow"]?(qn=!0,clearTimeout(this[de+"DblTimeout"])):o.DD.justDragged||(r.Konva["_"+de+"InDblClickWindow"]=!0,clearTimeout(this[de+"DblTimeout"])),this[de+"DblTimeout"]=setTimeout(function(){r.Konva["_"+de+"InDblClickWindow"]=!1},r.Konva.dblClickWindow),Me&&Me.isListening()?(Ee=!0,this[de+"ClickEndShape"]=Me,Me._fireAndBubble(te.pointerup,{...fn}),r.Konva["_"+de+"ListenClick"]&&we&&we===Me&&(Me._fireAndBubble(te.pointerclick,{...fn}),qn&&Pe&&Pe===Me&&Me._fireAndBubble(te.pointerdblclick,{...fn}))):(this[de+"ClickEndShape"]=null,r.Konva["_"+de+"ListenClick"]&&this._fire(te.pointerclick,{evt:H,target:this,currentTarget:this,pointerId:xt}),qn&&this._fire(te.pointerdblclick,{evt:H,target:this,currentTarget:this,pointerId:xt}))}),Ee||this._fire(te.pointerup,{evt:H,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),r.Konva["_"+de+"ListenClick"]=!1,H.cancelable&&de!=="touch"&&de!=="pointer"&&H.preventDefault()}_contextmenu(H){this.setPointersPositions(H);const te=this.getIntersection(this.getPointerPosition());te&&te.isListening()?te._fireAndBubble(U,{evt:H}):this._fire(U,{evt:H,target:this,currentTarget:this})}_wheel(H){this.setPointersPositions(H);const te=this.getIntersection(this.getPointerPosition());te&&te.isListening()?te._fireAndBubble(Z,{evt:H}):this._fire(Z,{evt:H,target:this,currentTarget:this})}_pointercancel(H){this.setPointersPositions(H);const te=u.getCapturedShape(H.pointerId)||this.getIntersection(this.getPointerPosition());te&&te._fireAndBubble(k,u.createEvent(H)),u.releaseCapture(H.pointerId)}_lostpointercapture(H){u.releaseCapture(H.pointerId)}setPointersPositions(H){const te=this._getContentPosition();let de=null,we=null;H=H||window.event,H.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(H.touches,Pe=>{this._pointerPositions.push({id:Pe.identifier,x:(Pe.clientX-te.left)/te.scaleX,y:(Pe.clientY-te.top)/te.scaleY})}),Array.prototype.forEach.call(H.changedTouches||H.touches,Pe=>{this._changedPointerPositions.push({id:Pe.identifier,x:(Pe.clientX-te.left)/te.scaleX,y:(Pe.clientY-te.top)/te.scaleY})})):(de=(H.clientX-te.left)/te.scaleX,we=(H.clientY-te.top)/te.scaleY,this.pointerPos={x:de,y:we},this._pointerPositions=[{x:de,y:we,id:e.Util._getFirstPointerId(H)}],this._changedPointerPositions=[{x:de,y:we,id:e.Util._getFirstPointerId(H)}])}_setPointerPosition(H){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(H)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const H=this.content.getBoundingClientRect();return{top:H.top,left:H.left,scaleX:H.width/this.content.clientWidth||1,scaleY:H.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!r.Konva.isBrowser)return;const H=this.container();if(!H)throw"Stage has no container. A container is required.";H.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),H.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(H){H.batchDraw()}),this}}i.Stage=et,et.prototype.nodeType=h,(0,a._registerNode)(et),t.Factory.addGetterSetter(et,"container"),r.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{i.stages.forEach(Te=>{Te.batchDraw()})})})(w7);var T0={},Dn={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Shape=i.shapes=void 0;const e=Ye,t=sn,n=Ze,r=$t,s=Fe,o=Ye,a=ql,u="hasShadow",h="shadowRGBA",f="patternImage",m="linearGradient",g="radialGradient";let v;function y(){return v||(v=t.Util.createCanvasElement().getContext("2d"),v)}i.shapes={};function S(z){const D=this.attrs.fillRule;D?z.fill(D):z.fill()}function C(z){z.stroke()}function b(z){const D=this.attrs.fillRule;D?z.fill(D):z.fill()}function E(z){z.stroke()}function x(){this._clearCache(u)}function A(){this._clearCache(h)}function k(){this._clearCache(f)}function L(){this._clearCache(m)}function I(){this._clearCache(g)}class M extends r.Node{constructor(D){super(D);let j;for(;j=t.Util.getRandomColor(),!(j&&!(j in i.shapes)););this.colorKey=j,i.shapes[j]=this}getContext(){return t.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return t.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(u,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(f,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const j=y().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(j&&j.setTransform){const U=new t.Transform;U.translate(this.fillPatternX(),this.fillPatternY()),U.rotate(e.Konva.getAngle(this.fillPatternRotation())),U.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),U.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const W=U.getMatrix(),Y=typeof DOMMatrix>"u"?{a:W[0],b:W[1],c:W[2],d:W[3],e:W[4],f:W[5]}:new DOMMatrix(W);j.setTransform(Y)}return j}}_getLinearGradient(){return this._getCache(m,this.__getLinearGradient)}__getLinearGradient(){const D=this.fillLinearGradientColorStops();if(D){const j=y(),U=this.fillLinearGradientStartPoint(),W=this.fillLinearGradientEndPoint(),Y=j.createLinearGradient(U.x,U.y,W.x,W.y);for(let K=0;K<D.length;K+=2)Y.addColorStop(D[K],D[K+1]);return Y}}_getRadialGradient(){return this._getCache(g,this.__getRadialGradient)}__getRadialGradient(){const D=this.fillRadialGradientColorStops();if(D){const j=y(),U=this.fillRadialGradientStartPoint(),W=this.fillRadialGradientEndPoint(),Y=j.createRadialGradient(U.x,U.y,this.fillRadialGradientStartRadius(),W.x,W.y,this.fillRadialGradientEndRadius());for(let K=0;K<D.length;K+=2)Y.addColorStop(D[K],D[K+1]);return Y}}getShadowRGBA(){return this._getCache(h,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const D=t.Util.colorToRGBA(this.shadowColor());if(D)return"rgba("+D.r+","+D.g+","+D.b+","+D.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const D=this.hitStrokeWidth();return D==="auto"?this.hasStroke():this.strokeEnabled()&&!!D}intersects(D){const j=this.getStage();if(!j)return!1;const U=j.bufferHitCanvas;return U.getContext().clear(),this.drawHit(U,void 0,!0),U.context.getImageData(Math.round(D.x),Math.round(D.y),1,1).data[3]>0}destroy(){return r.Node.prototype.destroy.call(this),delete i.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(D){var j;if(!((j=this.attrs.perfectDrawEnabled)!==null&&j!==void 0?j:!0))return!1;const W=D||this.hasFill(),Y=this.hasStroke(),K=this.getAbsoluteOpacity()!==1;if(W&&Y&&K)return!0;const ne=this.hasShadow(),Z=this.shadowForStrokeEnabled();return!!(W&&Y&&ne&&Z)}setStrokeHitEnabled(D){t.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),D?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const D=this.size();return{x:this._centroid?-D.width/2:0,y:this._centroid?-D.height/2:0,width:D.width,height:D.height}}getClientRect(D={}){let j=!1,U=this.getParent();for(;U;){if(U.isCached()){j=!0;break}U=U.getParent()}const W=D.skipTransform,Y=D.relativeTo||j&&this.getStage()||void 0,K=this.getSelfRect(),Z=!D.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,G=K.width+Z,ie=K.height+Z,ee=!D.skipShadow&&this.hasShadow(),re=ee?this.shadowOffsetX():0,ae=ee?this.shadowOffsetY():0,ge=G+Math.abs(re),qe=ie+Math.abs(ae),et=ee&&this.shadowBlur()||0,Te=ge+et*2,H=qe+et*2,te={width:Te,height:H,x:-(Z/2+et)+Math.min(re,0)+K.x,y:-(Z/2+et)+Math.min(ae,0)+K.y};return W?te:this._transformedRect(te,Y)}drawScene(D,j,U){const W=this.getLayer(),Y=D||W.getCanvas(),K=Y.getContext(),ne=this._getCanvasCache(),Z=this.getSceneFunc(),G=this.hasShadow();let ie;const ee=j===this;if(!this.isVisible()&&!ee)return this;if(ne){K.save();const re=this.getAbsoluteTransform(j).getMatrix();return K.transform(re[0],re[1],re[2],re[3],re[4],re[5]),this._drawCachedSceneCanvas(K),K.restore(),this}if(!Z)return this;if(K.save(),this._useBufferCanvas()){ie=this.getStage();const re=U||ie.bufferCanvas,ae=re.getContext();ae.clear(),ae.save(),ae._applyLineJoin(this);const ge=this.getAbsoluteTransform(j).getMatrix();ae.transform(ge[0],ge[1],ge[2],ge[3],ge[4],ge[5]),Z.call(this,ae,this),ae.restore();const qe=re.pixelRatio;G&&K._applyShadow(this),K._applyOpacity(this),K._applyGlobalCompositeOperation(this),K.drawImage(re._canvas,re.x||0,re.y||0,re.width/qe,re.height/qe)}else{if(K._applyLineJoin(this),!ee){const re=this.getAbsoluteTransform(j).getMatrix();K.transform(re[0],re[1],re[2],re[3],re[4],re[5]),K._applyOpacity(this),K._applyGlobalCompositeOperation(this)}G&&K._applyShadow(this),Z.call(this,K,this)}return K.restore(),this}drawHit(D,j,U=!1){if(!this.shouldDrawHit(j,U))return this;const W=this.getLayer(),Y=D||W.hitCanvas,K=Y&&Y.getContext(),ne=this.hitFunc()||this.sceneFunc(),Z=this._getCanvasCache(),G=Z&&Z.hit;if(this.colorKey||t.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),G){K.save();const ee=this.getAbsoluteTransform(j).getMatrix();return K.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5]),this._drawCachedHitCanvas(K),K.restore(),this}if(!ne)return this;if(K.save(),K._applyLineJoin(this),!(this===j)){const ee=this.getAbsoluteTransform(j).getMatrix();K.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5])}return ne.call(this,K,this),K.restore(),this}drawHitFromCache(D=0){const j=this._getCanvasCache(),U=this._getCachedSceneCanvas(),W=j.hit,Y=W.getContext(),K=W.getWidth(),ne=W.getHeight();Y.clear(),Y.drawImage(U._canvas,0,0,K,ne);try{const Z=Y.getImageData(0,0,K,ne),G=Z.data,ie=G.length,ee=t.Util._hexToRgb(this.colorKey);for(let re=0;re<ie;re+=4)G[re+3]>D?(G[re]=ee.r,G[re+1]=ee.g,G[re+2]=ee.b,G[re+3]=255):G[re+3]=0;Y.putImageData(Z,0,0)}catch(Z){t.Util.error("Unable to draw hit graph from cached scene canvas. "+Z.message)}return this}hasPointerCapture(D){return a.hasPointerCapture(D,this)}setPointerCapture(D){a.setPointerCapture(D,this)}releaseCapture(D){a.releaseCapture(D,this)}}i.Shape=M,M.prototype._fillFunc=S,M.prototype._strokeFunc=C,M.prototype._fillFuncHit=b,M.prototype._strokeFuncHit=E,M.prototype._centroid=!1,M.prototype.nodeType="Shape",(0,o._registerNode)(M),M.prototype.eventListeners={},M.prototype.on.call(M.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x),M.prototype.on.call(M.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",A),M.prototype.on.call(M.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",k),M.prototype.on.call(M.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",L),M.prototype.on.call(M.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",I),n.Factory.addGetterSetter(M,"stroke",void 0,(0,s.getStringOrGradientValidator)()),n.Factory.addGetterSetter(M,"strokeWidth",2,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(M,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(M,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(M,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),n.Factory.addGetterSetter(M,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),n.Factory.addGetterSetter(M,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),n.Factory.addGetterSetter(M,"lineJoin"),n.Factory.addGetterSetter(M,"lineCap"),n.Factory.addGetterSetter(M,"sceneFunc"),n.Factory.addGetterSetter(M,"hitFunc"),n.Factory.addGetterSetter(M,"dash"),n.Factory.addGetterSetter(M,"dashOffset",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(M,"shadowColor",void 0,(0,s.getStringValidator)()),n.Factory.addGetterSetter(M,"shadowBlur",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(M,"shadowOpacity",1,(0,s.getNumberValidator)()),n.Factory.addComponentsGetterSetter(M,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(M,"shadowOffsetX",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(M,"shadowOffsetY",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(M,"fillPatternImage"),n.Factory.addGetterSetter(M,"fill",void 0,(0,s.getStringOrGradientValidator)()),n.Factory.addGetterSetter(M,"fillPatternX",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(M,"fillPatternY",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(M,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(M,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(M,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(M,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(M,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(M,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(M,"fillEnabled",!0),n.Factory.addGetterSetter(M,"strokeEnabled",!0),n.Factory.addGetterSetter(M,"shadowEnabled",!0),n.Factory.addGetterSetter(M,"dashEnabled",!0),n.Factory.addGetterSetter(M,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(M,"fillPriority","color"),n.Factory.addComponentsGetterSetter(M,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(M,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(M,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),n.Factory.addComponentsGetterSetter(M,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(M,"fillPatternScaleX",1,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(M,"fillPatternScaleY",1,(0,s.getNumberValidator)()),n.Factory.addComponentsGetterSetter(M,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(M,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(M,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(M,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(M,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(M,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(M,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(M,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(M,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(M,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(M,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(M,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(M,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(M,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(M,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(M,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(M,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(M,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(M,"fillPatternRotation",0),n.Factory.addGetterSetter(M,"fillRule",void 0,(0,s.getStringValidator)()),n.Factory.backCompat(M,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Dn);Object.defineProperty(T0,"__esModule",{value:!0});T0.Layer=void 0;const zo=sn,u3=Vu,vh=$t,rw=Ze,Kb=Ds,HI=Fe,GI=Dn,BI=Ye,UI="#",VI="beforeDraw",WI="draw",A7=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],XI=A7.length;let ff=class extends u3.Container{constructor(e){super(e),this.canvas=new Kb.SceneCanvas,this.hitCanvas=new Kb.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){vh.Node.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!vh.Node.prototype.moveUp.call(this))return!1;const t=this.getStage();return!t||!t.content?!1:(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(vh.Node.prototype.moveDown.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(vh.Node.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return vh.Node.prototype.remove.call(this),e&&e.parentNode&&zo.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){const t=e.getType();t!=="Group"&&t!=="Shape"&&zo.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),vh.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){zo.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){zo.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,zo.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let t=1,n=!1;for(;;){for(let r=0;r<XI;r++){const s=A7[r],o=this._getIntersection({x:e.x+s.x*t,y:e.y+s.y*t}),a=o.shape;if(a)return a;if(n=!!o.antialiased,!o.antialiased)break}if(n)t+=1;else return null}}_getIntersection(e){const t=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,r=n[3];if(r===255){const s=zo.Util._rgbToHex(n[0],n[1],n[2]),o=GI.shapes[UI+s];return o?{shape:o}:{antialiased:!0}}else if(r>0)return{antialiased:!0};return{}}drawScene(e,t,n){const r=this.getLayer(),s=e||r&&r.getCanvas();return this._fire(VI,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),u3.Container.prototype.drawScene.call(this,s,t,n),this._fire(WI,{node:this}),this}drawHit(e,t){const n=this.getLayer(),r=e||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),u3.Container.prototype.drawHit.call(this,r,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){zo.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return zo.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return zo.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};T0.Layer=ff;ff.prototype.nodeType="Layer";(0,BI._registerNode)(ff);rw.Factory.addGetterSetter(ff,"imageSmoothingEnabled",!0);rw.Factory.addGetterSetter(ff,"clearBeforeDraw",!0);rw.Factory.addGetterSetter(ff,"hitGraphEnabled",!0,(0,HI.getBooleanValidator)());var A2={};Object.defineProperty(A2,"__esModule",{value:!0});A2.FastLayer=void 0;const $I=sn,YI=T0,KI=Ye;class sw extends YI.Layer{constructor(e){super(e),this.listening(!1),$I.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}A2.FastLayer=sw;sw.prototype.nodeType="FastLayer";(0,KI._registerNode)(sw);var pf={};Object.defineProperty(pf,"__esModule",{value:!0});pf.Group=void 0;const qI=sn,QI=Vu,JI=Ye;let ow=class extends QI.Container{_validateAdd(e){const t=e.getType();t!=="Group"&&t!=="Shape"&&qI.Util.throw("You may only add groups and shapes to groups.")}};pf.Group=ow;ow.prototype.nodeType="Group";(0,JI._registerNode)(ow);var gf={};Object.defineProperty(gf,"__esModule",{value:!0});gf.Animation=void 0;const h3=Ye,qb=sn,d3=function(){return h3.glob.performance&&h3.glob.performance.now?function(){return h3.glob.performance.now()}:function(){return new Date().getTime()}}();class So{constructor(e,t){this.id=So.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:d3(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){const t=this.layers,n=t.length;for(let r=0;r<n;r++)if(t[r]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const t=So.animations,n=t.length;for(let r=0;r<n;r++)if(t[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=d3(),So._addAnimation(this),this}stop(){return So._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const t=e.id,n=this.animations,r=n.length;for(let s=0;s<r;s++)if(n[s].id===t){this.animations.splice(s,1);break}}static _runFrames(){const e={},t=this.animations;for(let n=0;n<t.length;n++){const r=t[n],s=r.layers,o=r.func;r._updateFrameObject(d3());const a=s.length;let u;if(o?u=o.call(r,r.frame)!==!1:u=!0,!!u)for(let h=0;h<a;h++){const f=s[h];f._id!==void 0&&(e[f._id]=f)}}for(const n in e)e.hasOwnProperty(n)&&e[n].batchDraw()}static _animationLoop(){const e=So;e.animations.length?(e._runFrames(),qb.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,qb.Util.requestAnimFrame(this._animationLoop))}}gf.Animation=So;So.animations=[];So.animIdCounter=0;So.animRunning=!1;var C7={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Easings=i.Tween=void 0;const e=sn,t=gf,n=$t,r=Ye,s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,a=2,u=3,h=["fill","stroke","shadowColor"];let f=0;class m{constructor(y,S,C,b,E,x,A){this.prop=y,this.propFunc=S,this.begin=b,this._pos=b,this.duration=x,this._change=0,this.prevPos=0,this.yoyo=A,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=C,this._change=E-this.begin,this.pause()}fire(y){const S=this[y];S&&S()}setTime(y){y>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():y<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=y,this.update())}getTime(){return this._time}setPosition(y){this.prevPos=this._pos,this.propFunc(y),this._pos=y}getPosition(y){return y===void 0&&(y=this._time),this.func(y,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=u,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(y){this.pause(),this._time=y,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const y=this.getTimer()-this._startTime;this.state===a?this.setTime(y):this.state===u&&this.setTime(this.duration-y)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class g{constructor(y){const S=this,C=y.node,b=C._id,E=y.easing||i.Easings.Linear,x=!!y.yoyo;let A,k;typeof y.duration>"u"?A=.3:y.duration===0?A=.001:A=y.duration,this.node=C,this._id=f++;const L=C.getLayer()||(C instanceof r.Konva.Stage?C.getLayers():null);L||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new t.Animation(function(){S.tween.onEnterFrame()},L),this.tween=new m(k,function(I){S._tweenFunc(I)},E,0,1,A*1e3,x),this._addListeners(),g.attrs[b]||(g.attrs[b]={}),g.attrs[b][this._id]||(g.attrs[b][this._id]={}),g.tweens[b]||(g.tweens[b]={});for(k in y)s[k]===void 0&&this._addAttr(k,y[k]);this.reset(),this.onFinish=y.onFinish,this.onReset=y.onReset,this.onUpdate=y.onUpdate}_addAttr(y,S){const C=this.node,b=C._id;let E,x,A,k,L;const I=g.tweens[b][y];I&&delete g.attrs[b][I][y];let M=C.getAttr(y);if(e.Util._isArray(S))if(E=[],x=Math.max(S.length,M.length),y==="points"&&S.length!==M.length&&(S.length>M.length?(k=M,M=e.Util._prepareArrayForTween(M,S,C.closed())):(A=S,S=e.Util._prepareArrayForTween(S,M,C.closed()))),y.indexOf("fill")===0)for(let z=0;z<x;z++)if(z%2===0)E.push(S[z]-M[z]);else{const D=e.Util.colorToRGBA(M[z]);L=e.Util.colorToRGBA(S[z]),M[z]=D,E.push({r:L.r-D.r,g:L.g-D.g,b:L.b-D.b,a:L.a-D.a})}else for(let z=0;z<x;z++)E.push(S[z]-M[z]);else h.indexOf(y)!==-1?(M=e.Util.colorToRGBA(M),L=e.Util.colorToRGBA(S),E={r:L.r-M.r,g:L.g-M.g,b:L.b-M.b,a:L.a-M.a}):E=S-M;g.attrs[b][this._id][y]={start:M,diff:E,end:S,trueEnd:A,trueStart:k},g.tweens[b][y]=this._id}_tweenFunc(y){const S=this.node,C=g.attrs[S._id][this._id];let b,E,x,A,k,L,I,M;for(b in C){if(E=C[b],x=E.start,A=E.diff,M=E.end,e.Util._isArray(x))if(k=[],I=Math.max(x.length,M.length),b.indexOf("fill")===0)for(L=0;L<I;L++)L%2===0?k.push((x[L]||0)+A[L]*y):k.push("rgba("+Math.round(x[L].r+A[L].r*y)+","+Math.round(x[L].g+A[L].g*y)+","+Math.round(x[L].b+A[L].b*y)+","+(x[L].a+A[L].a*y)+")");else for(L=0;L<I;L++)k.push((x[L]||0)+A[L]*y);else h.indexOf(b)!==-1?k="rgba("+Math.round(x.r+A.r*y)+","+Math.round(x.g+A.g*y)+","+Math.round(x.b+A.b*y)+","+(x.a+A.a*y)+")":k=x+A*y;S.setAttr(b,k)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const y=this.node,S=g.attrs[y._id][this._id];S.points&&S.points.trueEnd&&y.setAttr("points",S.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const y=this.node,S=g.attrs[y._id][this._id];S.points&&S.points.trueStart&&y.points(S.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(y){return this.tween.seek(y*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const y=this.node._id,S=this._id,C=g.tweens[y];this.pause(),this.anim&&this.anim.stop();for(const b in C)delete g.tweens[y][b];delete g.attrs[y][S],g.tweens[y]&&(Object.keys(g.tweens[y]).length===0&&delete g.tweens[y],Object.keys(g.attrs[y]).length===0&&delete g.attrs[y])}}i.Tween=g,g.attrs={},g.tweens={},n.Node.prototype.to=function(v){const y=v.onFinish;v.node=this,v.onFinish=function(){this.destroy(),y&&y()},new g(v).play()},i.Easings={BackEaseIn(v,y,S,C){return S*(v/=C)*v*((1.70158+1)*v-1.70158)+y},BackEaseOut(v,y,S,C){return S*((v=v/C-1)*v*((1.70158+1)*v+1.70158)+1)+y},BackEaseInOut(v,y,S,C){let b=1.70158;return(v/=C/2)<1?S/2*(v*v*(((b*=1.525)+1)*v-b))+y:S/2*((v-=2)*v*(((b*=1.525)+1)*v+b)+2)+y},ElasticEaseIn(v,y,S,C,b,E){let x=0;return v===0?y:(v/=C)===1?y+S:(E||(E=C*.3),!b||b<Math.abs(S)?(b=S,x=E/4):x=E/(2*Math.PI)*Math.asin(S/b),-(b*Math.pow(2,10*(v-=1))*Math.sin((v*C-x)*(2*Math.PI)/E))+y)},ElasticEaseOut(v,y,S,C,b,E){let x=0;return v===0?y:(v/=C)===1?y+S:(E||(E=C*.3),!b||b<Math.abs(S)?(b=S,x=E/4):x=E/(2*Math.PI)*Math.asin(S/b),b*Math.pow(2,-10*v)*Math.sin((v*C-x)*(2*Math.PI)/E)+S+y)},ElasticEaseInOut(v,y,S,C,b,E){let x=0;return v===0?y:(v/=C/2)===2?y+S:(E||(E=C*(.3*1.5)),!b||b<Math.abs(S)?(b=S,x=E/4):x=E/(2*Math.PI)*Math.asin(S/b),v<1?-.5*(b*Math.pow(2,10*(v-=1))*Math.sin((v*C-x)*(2*Math.PI)/E))+y:b*Math.pow(2,-10*(v-=1))*Math.sin((v*C-x)*(2*Math.PI)/E)*.5+S+y)},BounceEaseOut(v,y,S,C){return(v/=C)<1/2.75?S*(7.5625*v*v)+y:v<2/2.75?S*(7.5625*(v-=1.5/2.75)*v+.75)+y:v<2.5/2.75?S*(7.5625*(v-=2.25/2.75)*v+.9375)+y:S*(7.5625*(v-=2.625/2.75)*v+.984375)+y},BounceEaseIn(v,y,S,C){return S-i.Easings.BounceEaseOut(C-v,0,S,C)+y},BounceEaseInOut(v,y,S,C){return v<C/2?i.Easings.BounceEaseIn(v*2,0,S,C)*.5+y:i.Easings.BounceEaseOut(v*2-C,0,S,C)*.5+S*.5+y},EaseIn(v,y,S,C){return S*(v/=C)*v+y},EaseOut(v,y,S,C){return-S*(v/=C)*(v-2)+y},EaseInOut(v,y,S,C){return(v/=C/2)<1?S/2*v*v+y:-S/2*(--v*(v-2)-1)+y},StrongEaseIn(v,y,S,C){return S*(v/=C)*v*v*v*v+y},StrongEaseOut(v,y,S,C){return S*((v=v/C-1)*v*v*v*v+1)+y},StrongEaseInOut(v,y,S,C){return(v/=C/2)<1?S/2*v*v*v*v*v+y:S/2*((v-=2)*v*v*v*v+2)+y},Linear(v,y,S,C){return S*v/C+y}}})(C7);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Konva=void 0;const e=Ye,t=sn,n=$t,r=Vu,s=w7,o=T0,a=A2,u=pf,h=b2,f=Dn,m=gf,g=C7,v=xa,y=Ds;i.Konva=t.Util._assign(e.Konva,{Util:t.Util,Transform:t.Transform,Node:n.Node,Container:r.Container,Stage:s.Stage,stages:s.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:u.Group,DD:h.DD,Shape:f.Shape,shapes:f.shapes,Animation:m.Animation,Tween:g.Tween,Easings:g.Easings,Context:v.Context,Canvas:y.Canvas}),i.default=i.Konva})(Ey);var C2={};Object.defineProperty(C2,"__esModule",{value:!0});C2.Arc=void 0;const P2=Ze,ZI=Dn,Qb=Ye,k2=Fe,eD=Ye;class La extends ZI.Shape{_sceneFunc(e){const t=Qb.Konva.getAngle(this.angle()),n=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,n),e.arc(0,0,this.innerRadius(),t,0,!n),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),t=this.outerRadius(),n=this.clockwise(),r=Qb.Konva.getAngle(n?360-this.angle():this.angle()),s=Math.cos(Math.min(r,Math.PI)),o=1,a=Math.sin(Math.min(Math.max(Math.PI,r),3*Math.PI/2)),u=Math.sin(Math.min(r,Math.PI/2)),h=s*(s>0?e:t),f=o*t,m=a*(a>0?e:t),g=u*(u>0?t:e);return{x:h,y:n?-1*g:m,width:f-h,height:g-m}}}C2.Arc=La;La.prototype._centroid=!0;La.prototype.className="Arc";La.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];(0,eD._registerNode)(La);P2.Factory.addGetterSetter(La,"innerRadius",0,(0,k2.getNumberValidator)());P2.Factory.addGetterSetter(La,"outerRadius",0,(0,k2.getNumberValidator)());P2.Factory.addGetterSetter(La,"angle",0,(0,k2.getNumberValidator)());P2.Factory.addGetterSetter(La,"clockwise",!1,(0,k2.getBooleanValidator)());var T2={},M0={};Object.defineProperty(M0,"__esModule",{value:!0});M0.Line=void 0;const M2=Ze,tD=Ye,nD=Dn,P7=Fe;function HS(i,e,t,n,r,s,o){const a=Math.sqrt(Math.pow(t-i,2)+Math.pow(n-e,2)),u=Math.sqrt(Math.pow(r-t,2)+Math.pow(s-n,2)),h=o*a/(a+u),f=o*u/(a+u),m=t-h*(r-i),g=n-h*(s-e),v=t+f*(r-i),y=n+f*(s-e);return[m,g,v,y]}function Jb(i,e){const t=i.length,n=[];for(let r=2;r<t-2;r+=2){const s=HS(i[r-2],i[r-1],i[r],i[r+1],i[r+2],i[r+3],e);isNaN(s[0])||(n.push(s[0]),n.push(s[1]),n.push(i[r]),n.push(i[r+1]),n.push(s[2]),n.push(s[3]))}return n}let Ql=class extends nD.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const t=this.points(),n=t.length,r=this.tension(),s=this.closed(),o=this.bezier();if(!n)return;let a=0;if(e.beginPath(),e.moveTo(t[0],t[1]),r!==0&&n>4){const u=this.getTensionPoints(),h=u.length;for(a=s?0:4,s||e.quadraticCurveTo(u[0],u[1],u[2],u[3]);a<h-2;)e.bezierCurveTo(u[a++],u[a++],u[a++],u[a++],u[a++],u[a++]);s||e.quadraticCurveTo(u[h-2],u[h-1],t[n-2],t[n-1])}else if(o)for(a=2;a<n;)e.bezierCurveTo(t[a++],t[a++],t[a++],t[a++],t[a++],t[a++]);else for(a=2;a<n;a+=2)e.lineTo(t[a],t[a+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Jb(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),t=e.length,n=this.tension(),r=HS(e[t-2],e[t-1],e[0],e[1],e[2],e[3],n),s=HS(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],n),o=Jb(e,n);return[r[2],r[3]].concat(o).concat([s[0],s[1],e[t-2],e[t-1],s[2],s[3],r[0],r[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();let t=e[0],n=e[0],r=e[1],s=e[1],o,a;for(let u=0;u<e.length/2;u++)o=e[u*2],a=e[u*2+1],t=Math.min(t,o),n=Math.max(n,o),r=Math.min(r,a),s=Math.max(s,a);return{x:t,y:r,width:n-t,height:s-r}}};M0.Line=Ql;Ql.prototype.className="Line";Ql.prototype._attrsAffectingSize=["points","bezier","tension"];(0,tD._registerNode)(Ql);M2.Factory.addGetterSetter(Ql,"closed",!1);M2.Factory.addGetterSetter(Ql,"bezier",!1);M2.Factory.addGetterSetter(Ql,"tension",0,(0,P7.getNumberValidator)());M2.Factory.addGetterSetter(Ql,"points",[],(0,P7.getNumberArrayValidator)());var mf={},k7={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.t2length=i.getQuadraticArcLength=i.getCubicArcLength=i.binomialCoefficients=i.cValues=i.tValues=void 0,i.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],i.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],i.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,a,u)=>{let h,f;const g=u/2;h=0;for(let v=0;v<20;v++)f=g*i.tValues[20][v]+g,h+=i.cValues[20][v]*n(o,a,f);return g*h};i.getCubicArcLength=e;const t=(o,a,u)=>{u===void 0&&(u=1);const h=o[0]-2*o[1]+o[2],f=a[0]-2*a[1]+a[2],m=2*o[1]-2*o[0],g=2*a[1]-2*a[0],v=4*(h*h+f*f),y=4*(h*m+f*g),S=m*m+g*g;if(v===0)return u*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(a[2]-a[0],2));const C=y/(2*v),b=S/v,E=u+C,x=b-C*C,A=E*E+x>0?Math.sqrt(E*E+x):0,k=C*C+x>0?Math.sqrt(C*C+x):0,L=C+Math.sqrt(C*C+x)!==0?x*Math.log(Math.abs((E+A)/(C+k))):0;return Math.sqrt(v)/2*(E*A-C*k+L)};i.getQuadraticArcLength=t;function n(o,a,u){const h=r(1,u,o),f=r(1,u,a),m=h*h+f*f;return Math.sqrt(m)}const r=(o,a,u)=>{const h=u.length-1;let f,m;if(h===0)return 0;if(o===0){m=0;for(let g=0;g<=h;g++)m+=i.binomialCoefficients[h][g]*Math.pow(1-a,h-g)*Math.pow(a,g)*u[g];return m}else{f=new Array(h);for(let g=0;g<h;g++)f[g]=h*(u[g+1]-u[g]);return r(o-1,a,f)}},s=(o,a,u)=>{let h=1,f=o/a,m=(o-u(f))/a,g=0;for(;h>.001;){const v=u(f+m),y=Math.abs(o-v)/a;if(y<h)h=y,f+=m;else{const S=u(f-m),C=Math.abs(o-S)/a;C<h?(h=C,f-=m):m/=2}if(g++,g>500)break}return f};i.t2length=s})(k7);Object.defineProperty(mf,"__esModule",{value:!0});mf.Path=void 0;const iD=Ze,rD=Ye,sD=Dn,_h=k7;let R0=class Ki extends sD.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Ki.parsePathData(this.data()),this.pathLength=Ki.getPathLength(this.dataArray)}_sceneFunc(e){const t=this.dataArray;e.beginPath();let n=!1;for(let r=0;r<t.length;r++){const s=t[r].command,o=t[r].points;switch(s){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":const a=o[0],u=o[1],h=o[2],f=o[3],m=o[4],g=o[5],v=o[6],y=o[7],S=h>f?h:f,C=h>f?1:h/f,b=h>f?f/h:1;e.translate(a,u),e.rotate(v),e.scale(C,b),e.arc(0,0,S,m,m+g,1-y),e.scale(1/C,1/b),e.rotate(-v),e.translate(-a,-u);break;case"z":n=!0,e.closePath();break}}!n&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(u){if(u.command==="A"){const h=u.points[4],f=u.points[5],m=u.points[4]+f;let g=Math.PI/180;if(Math.abs(h-m)<g&&(g=Math.abs(h-m)),f<0)for(let v=h-g;v>m;v-=g){const y=Ki.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],v,0);e.push(y.x,y.y)}else for(let v=h+g;v<m;v+=g){const y=Ki.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],v,0);e.push(y.x,y.y)}}else if(u.command==="C")for(let h=0;h<=1;h+=.01){const f=Ki.getPointOnCubicBezier(h,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);e.push(f.x,f.y)}else e=e.concat(u.points)});let t=e[0],n=e[0],r=e[1],s=e[1],o,a;for(let u=0;u<e.length/2;u++)o=e[u*2],a=e[u*2+1],isNaN(o)||(t=Math.min(t,o),n=Math.max(n,o)),isNaN(a)||(r=Math.min(r,a),s=Math.max(s,a));return{x:t,y:r,width:n-t,height:s-r}}getLength(){return this.pathLength}getPointAtLength(e){return Ki.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}static getPathLength(e){let t=0;for(let n=0;n<e.length;++n)t+=e[n].pathLength;return t}static getPointAtLengthOfDataArray(e,t){let n,r=0,s=t.length;if(!s)return null;for(;r<s&&e>t[r].pathLength;)e-=t[r].pathLength,++r;if(r===s)return n=t[r-1].points.slice(-2),{x:n[0],y:n[1]};if(e<.01)return t[r].command==="M"?(n=t[r].points.slice(0,2),{x:n[0],y:n[1]}):{x:t[r].start.x,y:t[r].start.y};const o=t[r],a=o.points;switch(o.command){case"L":return Ki.getPointOnLine(e,o.start.x,o.start.y,a[0],a[1]);case"C":return Ki.getPointOnCubicBezier((0,_h.t2length)(e,Ki.getPathLength(t),S=>(0,_h.getCubicArcLength)([o.start.x,a[0],a[2],a[4]],[o.start.y,a[1],a[3],a[5]],S)),o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return Ki.getPointOnQuadraticBezier((0,_h.t2length)(e,Ki.getPathLength(t),S=>(0,_h.getQuadraticArcLength)([o.start.x,a[0],a[2]],[o.start.y,a[1],a[3]],S)),o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":const u=a[0],h=a[1],f=a[2],m=a[3],g=a[5],v=a[6];let y=a[4];return y+=g*e/o.pathLength,Ki.getPointOnEllipticalArc(u,h,f,m,y,v)}return null}static getPointOnLine(e,t,n,r,s,o,a){o=o??t,a=a??n;const u=this.getLineLength(t,n,r,s);if(u<1e-10)return{x:t,y:n};if(r===t)return{x:o,y:a+(s>n?e:-e)};const h=(s-n)/(r-t),f=Math.sqrt(e*e/(1+h*h))*(r<t?-1:1),m=h*f;if(Math.abs(a-n-h*(o-t))<1e-10)return{x:o+f,y:a+m};const g=((o-t)*(r-t)+(a-n)*(s-n))/(u*u),v=t+g*(r-t),y=n+g*(s-n),S=this.getLineLength(o,a,v,y),C=Math.sqrt(e*e-S*S),b=Math.sqrt(C*C/(1+h*h))*(r<t?-1:1),E=h*b;return{x:v+b,y:y+E}}static getPointOnCubicBezier(e,t,n,r,s,o,a,u,h){function f(C){return C*C*C}function m(C){return 3*C*C*(1-C)}function g(C){return 3*C*(1-C)*(1-C)}function v(C){return(1-C)*(1-C)*(1-C)}const y=u*f(e)+o*m(e)+r*g(e)+t*v(e),S=h*f(e)+a*m(e)+s*g(e)+n*v(e);return{x:y,y:S}}static getPointOnQuadraticBezier(e,t,n,r,s,o,a){function u(v){return v*v}function h(v){return 2*v*(1-v)}function f(v){return(1-v)*(1-v)}const m=o*u(e)+r*h(e)+t*f(e),g=a*u(e)+s*h(e)+n*f(e);return{x:m,y:g}}static getPointOnEllipticalArc(e,t,n,r,s,o){const a=Math.cos(o),u=Math.sin(o),h={x:n*Math.cos(s),y:r*Math.sin(s)};return{x:e+(h.x*a-h.y*u),y:t+(h.x*u+h.y*a)}}static parsePathData(e){if(!e)return[];let t=e;const n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(let m=0;m<n.length;m++)t=t.replace(new RegExp(n[m],"g"),"|"+n[m]);const r=t.split("|"),s=[],o=[];let a=0,u=0;const h=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let f;for(let m=1;m<r.length;m++){let g=r[m],v=g.charAt(0);for(g=g.slice(1),o.length=0;f=h.exec(g);)o.push(f[0]);const y=[];for(let S=0,C=o.length;S<C;S++){if(o[S]==="00"){y.push(0,0);continue}const b=parseFloat(o[S]);isNaN(b)?y.push(0):y.push(b)}for(;y.length>0&&!isNaN(y[0]);){let S="",C=[];const b=a,E=u;let x,A,k,L,I,M,z,D,j,U;switch(v){case"l":a+=y.shift(),u+=y.shift(),S="L",C.push(a,u);break;case"L":a=y.shift(),u=y.shift(),C.push(a,u);break;case"m":const W=y.shift(),Y=y.shift();if(a+=W,u+=Y,S="M",s.length>2&&s[s.length-1].command==="z"){for(let K=s.length-2;K>=0;K--)if(s[K].command==="M"){a=s[K].points[0]+W,u=s[K].points[1]+Y;break}}C.push(a,u),v="l";break;case"M":a=y.shift(),u=y.shift(),S="M",C.push(a,u),v="L";break;case"h":a+=y.shift(),S="L",C.push(a,u);break;case"H":a=y.shift(),S="L",C.push(a,u);break;case"v":u+=y.shift(),S="L",C.push(a,u);break;case"V":u=y.shift(),S="L",C.push(a,u);break;case"C":C.push(y.shift(),y.shift(),y.shift(),y.shift()),a=y.shift(),u=y.shift(),C.push(a,u);break;case"c":C.push(a+y.shift(),u+y.shift(),a+y.shift(),u+y.shift()),a+=y.shift(),u+=y.shift(),S="C",C.push(a,u);break;case"S":A=a,k=u,x=s[s.length-1],x.command==="C"&&(A=a+(a-x.points[2]),k=u+(u-x.points[3])),C.push(A,k,y.shift(),y.shift()),a=y.shift(),u=y.shift(),S="C",C.push(a,u);break;case"s":A=a,k=u,x=s[s.length-1],x.command==="C"&&(A=a+(a-x.points[2]),k=u+(u-x.points[3])),C.push(A,k,a+y.shift(),u+y.shift()),a+=y.shift(),u+=y.shift(),S="C",C.push(a,u);break;case"Q":C.push(y.shift(),y.shift()),a=y.shift(),u=y.shift(),C.push(a,u);break;case"q":C.push(a+y.shift(),u+y.shift()),a+=y.shift(),u+=y.shift(),S="Q",C.push(a,u);break;case"T":A=a,k=u,x=s[s.length-1],x.command==="Q"&&(A=a+(a-x.points[0]),k=u+(u-x.points[1])),a=y.shift(),u=y.shift(),S="Q",C.push(A,k,a,u);break;case"t":A=a,k=u,x=s[s.length-1],x.command==="Q"&&(A=a+(a-x.points[0]),k=u+(u-x.points[1])),a+=y.shift(),u+=y.shift(),S="Q",C.push(A,k,a,u);break;case"A":L=y.shift(),I=y.shift(),M=y.shift(),z=y.shift(),D=y.shift(),j=a,U=u,a=y.shift(),u=y.shift(),S="A",C=this.convertEndpointToCenterParameterization(j,U,a,u,z,D,L,I,M);break;case"a":L=y.shift(),I=y.shift(),M=y.shift(),z=y.shift(),D=y.shift(),j=a,U=u,a+=y.shift(),u+=y.shift(),S="A",C=this.convertEndpointToCenterParameterization(j,U,a,u,z,D,L,I,M);break}s.push({command:S||v,points:C,start:{x:b,y:E},pathLength:this.calcLength(b,E,S||v,C)})}(v==="z"||v==="Z")&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s}static calcLength(e,t,n,r){let s,o,a,u;const h=Ki;switch(n){case"L":return h.getLineLength(e,t,r[0],r[1]);case"C":return(0,_h.getCubicArcLength)([e,r[0],r[2],r[4]],[t,r[1],r[3],r[5]],1);case"Q":return(0,_h.getQuadraticArcLength)([e,r[0],r[2]],[t,r[1],r[3]],1);case"A":s=0;const f=r[4],m=r[5],g=r[4]+m;let v=Math.PI/180;if(Math.abs(f-g)<v&&(v=Math.abs(f-g)),o=h.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],f,0),m<0)for(u=f-v;u>g;u-=v)a=h.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),s+=h.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(u=f+v;u<g;u+=v)a=h.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),s+=h.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=h.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],g,0),s+=h.getLineLength(o.x,o.y,a.x,a.y),s}return 0}static convertEndpointToCenterParameterization(e,t,n,r,s,o,a,u,h){const f=h*(Math.PI/180),m=Math.cos(f)*(e-n)/2+Math.sin(f)*(t-r)/2,g=-1*Math.sin(f)*(e-n)/2+Math.cos(f)*(t-r)/2,v=m*m/(a*a)+g*g/(u*u);v>1&&(a*=Math.sqrt(v),u*=Math.sqrt(v));let y=Math.sqrt((a*a*(u*u)-a*a*(g*g)-u*u*(m*m))/(a*a*(g*g)+u*u*(m*m)));s===o&&(y*=-1),isNaN(y)&&(y=0);const S=y*a*g/u,C=y*-u*m/a,b=(e+n)/2+Math.cos(f)*S-Math.sin(f)*C,E=(t+r)/2+Math.sin(f)*S+Math.cos(f)*C,x=function(D){return Math.sqrt(D[0]*D[0]+D[1]*D[1])},A=function(D,j){return(D[0]*j[0]+D[1]*j[1])/(x(D)*x(j))},k=function(D,j){return(D[0]*j[1]<D[1]*j[0]?-1:1)*Math.acos(A(D,j))},L=k([1,0],[(m-S)/a,(g-C)/u]),I=[(m-S)/a,(g-C)/u],M=[(-1*m-S)/a,(-1*g-C)/u];let z=k(I,M);return A(I,M)<=-1&&(z=Math.PI),A(I,M)>=1&&(z=0),o===0&&z>0&&(z=z-2*Math.PI),o===1&&z<0&&(z=z+2*Math.PI),[b,E,a,u,L,z,f,o]}};mf.Path=R0;R0.prototype.className="Path";R0.prototype._attrsAffectingSize=["data"];(0,rD._registerNode)(R0);iD.Factory.addGetterSetter(R0,"data");Object.defineProperty(T2,"__esModule",{value:!0});T2.Arrow=void 0;const R2=Ze,oD=M0,T7=Fe,aD=Ye,Zb=mf;class Xu extends oD.Line{_sceneFunc(e){super._sceneFunc(e);const t=Math.PI*2,n=this.points();let r=n;const s=this.tension()!==0&&n.length>4;s&&(r=this.getTensionPoints());const o=this.pointerLength(),a=n.length;let u,h;if(s){const g=[r[r.length-4],r[r.length-3],r[r.length-2],r[r.length-1],n[a-2],n[a-1]],v=Zb.Path.calcLength(r[r.length-4],r[r.length-3],"C",g),y=Zb.Path.getPointOnQuadraticBezier(Math.min(1,1-o/v),g[0],g[1],g[2],g[3],g[4],g[5]);u=n[a-2]-y.x,h=n[a-1]-y.y}else u=n[a-2]-n[a-4],h=n[a-1]-n[a-3];const f=(Math.atan2(h,u)+t)%t,m=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(n[a-2],n[a-1]),e.rotate(f),e.moveTo(0,0),e.lineTo(-o,m/2),e.lineTo(-o,-m/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(n[0],n[1]),s?(u=(r[0]+r[2])/2-n[0],h=(r[1]+r[3])/2-n[1]):(u=n[2]-n[0],h=n[3]-n[1]),e.rotate((Math.atan2(-h,-u)+t)%t),e.moveTo(0,0),e.lineTo(-o,m/2),e.lineTo(-o,-m/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x,y:e.y-t,width:e.width,height:e.height+t*2}}}T2.Arrow=Xu;Xu.prototype.className="Arrow";(0,aD._registerNode)(Xu);R2.Factory.addGetterSetter(Xu,"pointerLength",10,(0,T7.getNumberValidator)());R2.Factory.addGetterSetter(Xu,"pointerWidth",10,(0,T7.getNumberValidator)());R2.Factory.addGetterSetter(Xu,"pointerAtBeginning",!1);R2.Factory.addGetterSetter(Xu,"pointerAtEnding",!0);var L2={};Object.defineProperty(L2,"__esModule",{value:!0});L2.Circle=void 0;const lD=Ze,cD=Dn,uD=Fe,hD=Ye;let yf=class extends cD.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};L2.Circle=yf;yf.prototype._centroid=!0;yf.prototype.className="Circle";yf.prototype._attrsAffectingSize=["radius"];(0,hD._registerNode)(yf);lD.Factory.addGetterSetter(yf,"radius",0,(0,uD.getNumberValidator)());var N2={};Object.defineProperty(N2,"__esModule",{value:!0});N2.Ellipse=void 0;const aw=Ze,dD=Dn,M7=Fe,fD=Ye;class Jl extends dD.Shape{_sceneFunc(e){const t=this.radiusX(),n=this.radiusY();e.beginPath(),e.save(),t!==n&&e.scale(1,n/t),e.arc(0,0,t,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}N2.Ellipse=Jl;Jl.prototype.className="Ellipse";Jl.prototype._centroid=!0;Jl.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,fD._registerNode)(Jl);aw.Factory.addComponentsGetterSetter(Jl,"radius",["x","y"]);aw.Factory.addGetterSetter(Jl,"radiusX",0,(0,M7.getNumberValidator)());aw.Factory.addGetterSetter(Jl,"radiusY",0,(0,M7.getNumberValidator)());var F2={};Object.defineProperty(F2,"__esModule",{value:!0});F2.Image=void 0;const f3=sn,$u=Ze,pD=Dn,gD=Ye,L0=Fe;let Eo=class R7 extends pD.Shape{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",t=>{this._removeImageLoad(t.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),t=this.hasShadow();return e&&t?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const t=this.getWidth(),n=this.getHeight(),r=this.cornerRadius(),s=this.attrs.image;let o;if(s){const a=this.attrs.cropWidth,u=this.attrs.cropHeight;a&&u?o=[s,this.cropX(),this.cropY(),a,u,0,0,t,n]:o=[s,0,0,t,n]}(this.hasFill()||this.hasStroke()||r)&&(e.beginPath(),r?f3.Util.drawRoundedRectPath(e,t,n,r):e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)),s&&(r&&e.clip(),e.drawImage.apply(e,o))}_hitFunc(e){const t=this.width(),n=this.height(),r=this.cornerRadius();e.beginPath(),r?f3.Util.drawRoundedRectPath(e,t,n,r):e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t;return(e=this.attrs.width)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.width}getHeight(){var e,t;return(e=this.attrs.height)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.height}static fromURL(e,t,n=null){const r=f3.Util.createImageElement();r.onload=function(){const s=new R7({image:r});t(s)},r.onerror=n,r.crossOrigin="Anonymous",r.src=e}};F2.Image=Eo;Eo.prototype.className="Image";(0,gD._registerNode)(Eo);$u.Factory.addGetterSetter(Eo,"cornerRadius",0,(0,L0.getNumberOrArrayOfNumbersValidator)(4));$u.Factory.addGetterSetter(Eo,"image");$u.Factory.addComponentsGetterSetter(Eo,"crop",["x","y","width","height"]);$u.Factory.addGetterSetter(Eo,"cropX",0,(0,L0.getNumberValidator)());$u.Factory.addGetterSetter(Eo,"cropY",0,(0,L0.getNumberValidator)());$u.Factory.addGetterSetter(Eo,"cropWidth",0,(0,L0.getNumberValidator)());$u.Factory.addGetterSetter(Eo,"cropHeight",0,(0,L0.getNumberValidator)());var of={};Object.defineProperty(of,"__esModule",{value:!0});of.Tag=of.Label=void 0;const I2=Ze,mD=Dn,yD=pf,lw=Fe,L7=Ye,N7=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],vD="Change.konva",_D="none",GS="up",BS="right",US="down",VS="left",xD=N7.length;class cw extends yD.Group{constructor(e){super(e),this.on("add.konva",function(t){this._addListeners(t.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let t=this,n;const r=function(){t._sync()};for(n=0;n<xD;n++)e.on(N7[n]+vD,r)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),t=this.getTag(),n,r,s,o,a,u,h;if(e&&t){switch(n=e.width(),r=e.height(),s=t.pointerDirection(),o=t.pointerWidth(),h=t.pointerHeight(),a=0,u=0,s){case GS:a=n/2,u=-1*h;break;case BS:a=n+o,u=r/2;break;case US:a=n/2,u=r+h;break;case VS:a=-1*o,u=r/2;break}t.setAttrs({x:-1*a,y:-1*u,width:n,height:r}),e.setAttrs({x:-1*a,y:-1*u})}}}of.Label=cw;cw.prototype.className="Label";(0,L7._registerNode)(cw);class Yu extends mD.Shape{_sceneFunc(e){const t=this.width(),n=this.height(),r=this.pointerDirection(),s=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let u=0,h=0,f=0,m=0;typeof a=="number"?u=h=f=m=Math.min(a,t/2,n/2):(u=Math.min(a[0]||0,t/2,n/2),h=Math.min(a[1]||0,t/2,n/2),m=Math.min(a[2]||0,t/2,n/2),f=Math.min(a[3]||0,t/2,n/2)),e.beginPath(),e.moveTo(u,0),r===GS&&(e.lineTo((t-s)/2,0),e.lineTo(t/2,-1*o),e.lineTo((t+s)/2,0)),e.lineTo(t-h,0),e.arc(t-h,h,h,Math.PI*3/2,0,!1),r===BS&&(e.lineTo(t,(n-o)/2),e.lineTo(t+s,n/2),e.lineTo(t,(n+o)/2)),e.lineTo(t,n-m),e.arc(t-m,n-m,m,0,Math.PI/2,!1),r===US&&(e.lineTo((t+s)/2,n),e.lineTo(t/2,n+o),e.lineTo((t-s)/2,n)),e.lineTo(f,n),e.arc(f,n-f,f,Math.PI/2,Math.PI,!1),r===VS&&(e.lineTo(0,(n+o)/2),e.lineTo(-1*s,n/2),e.lineTo(0,(n-o)/2)),e.lineTo(0,u),e.arc(u,u,u,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,t=0,n=this.pointerWidth(),r=this.pointerHeight(),s=this.pointerDirection(),o=this.width(),a=this.height();return s===GS?(t-=r,a+=r):s===US?a+=r:s===VS?(e-=n*1.5,o+=n):s===BS&&(o+=n*1.5),{x:e,y:t,width:o,height:a}}}of.Tag=Yu;Yu.prototype.className="Tag";(0,L7._registerNode)(Yu);I2.Factory.addGetterSetter(Yu,"pointerDirection",_D);I2.Factory.addGetterSetter(Yu,"pointerWidth",0,(0,lw.getNumberValidator)());I2.Factory.addGetterSetter(Yu,"pointerHeight",0,(0,lw.getNumberValidator)());I2.Factory.addGetterSetter(Yu,"cornerRadius",0,(0,lw.getNumberOrArrayOfNumbersValidator)(4));var N0={};Object.defineProperty(N0,"__esModule",{value:!0});N0.Rect=void 0;const SD=Ze,wD=Dn,bD=Ye,ED=sn,AD=Fe;let D2=class extends wD.Shape{_sceneFunc(e){const t=this.cornerRadius(),n=this.width(),r=this.height();e.beginPath(),t?ED.Util.drawRoundedRectPath(e,n,r,t):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}};N0.Rect=D2;D2.prototype.className="Rect";(0,bD._registerNode)(D2);SD.Factory.addGetterSetter(D2,"cornerRadius",0,(0,AD.getNumberOrArrayOfNumbersValidator)(4));var O2={};Object.defineProperty(O2,"__esModule",{value:!0});O2.RegularPolygon=void 0;const F7=Ze,CD=Dn,I7=Fe,PD=Ye;class Ku extends CD.Shape{_sceneFunc(e){const t=this._getPoints();e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let n=1;n<t.length;n++)e.lineTo(t[n].x,t[n].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,t=this.attrs.radius||0,n=[];for(let r=0;r<e;r++)n.push({x:t*Math.sin(r*2*Math.PI/e),y:-1*t*Math.cos(r*2*Math.PI/e)});return n}getSelfRect(){const e=this._getPoints();let t=e[0].x,n=e[0].y,r=e[0].x,s=e[0].y;return e.forEach(o=>{t=Math.min(t,o.x),n=Math.max(n,o.x),r=Math.min(r,o.y),s=Math.max(s,o.y)}),{x:t,y:r,width:n-t,height:s-r}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}O2.RegularPolygon=Ku;Ku.prototype.className="RegularPolygon";Ku.prototype._centroid=!0;Ku.prototype._attrsAffectingSize=["radius"];(0,PD._registerNode)(Ku);F7.Factory.addGetterSetter(Ku,"radius",0,(0,I7.getNumberValidator)());F7.Factory.addGetterSetter(Ku,"sides",0,(0,I7.getNumberValidator)());var z2={};Object.defineProperty(z2,"__esModule",{value:!0});z2.Ring=void 0;const D7=Ze,kD=Dn,O7=Fe,TD=Ye,e8=Math.PI*2;class qu extends kD.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,e8,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),e8,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}z2.Ring=qu;qu.prototype.className="Ring";qu.prototype._centroid=!0;qu.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,TD._registerNode)(qu);D7.Factory.addGetterSetter(qu,"innerRadius",0,(0,O7.getNumberValidator)());D7.Factory.addGetterSetter(qu,"outerRadius",0,(0,O7.getNumberValidator)());var j2={};Object.defineProperty(j2,"__esModule",{value:!0});j2.Sprite=void 0;const Qu=Ze,MD=Dn,RD=gf,z7=Fe,LD=Ye;class Ao extends MD.Shape{constructor(e){super(e),this._updated=!0,this.anim=new RD.Animation(()=>{const t=this._updated;return this._updated=!1,t}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const t=this.animation(),n=this.frameIndex(),r=n*4,s=this.animations()[t],o=this.frameOffsets(),a=s[r+0],u=s[r+1],h=s[r+2],f=s[r+3],m=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,h,f),e.closePath(),e.fillStrokeShape(this)),m)if(o){const g=o[t],v=n*2;e.drawImage(m,a,u,h,f,g[v+0],g[v+1],h,f)}else e.drawImage(m,a,u,h,f,0,0,h,f)}_hitFunc(e){const t=this.animation(),n=this.frameIndex(),r=n*4,s=this.animations()[t],o=this.frameOffsets(),a=s[r+2],u=s[r+3];if(e.beginPath(),o){const h=o[t],f=n*2;e.rect(h[f+0],h[f+1],a,u)}else e.rect(0,0,a,u);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),t=this.animation(),n=this.animations(),r=n[t],s=r.length/4;e<s-1?this.frameIndex(e+1):this.frameIndex(0)}}j2.Sprite=Ao;Ao.prototype.className="Sprite";(0,LD._registerNode)(Ao);Qu.Factory.addGetterSetter(Ao,"animation");Qu.Factory.addGetterSetter(Ao,"animations");Qu.Factory.addGetterSetter(Ao,"frameOffsets");Qu.Factory.addGetterSetter(Ao,"image");Qu.Factory.addGetterSetter(Ao,"frameIndex",0,(0,z7.getNumberValidator)());Qu.Factory.addGetterSetter(Ao,"frameRate",17,(0,z7.getNumberValidator)());Qu.Factory.backCompat(Ao,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var H2={};Object.defineProperty(H2,"__esModule",{value:!0});H2.Star=void 0;const uw=Ze,ND=Dn,hw=Fe,FD=Ye;class Zl extends ND.Shape{_sceneFunc(e){const t=this.innerRadius(),n=this.outerRadius(),r=this.numPoints();e.beginPath(),e.moveTo(0,0-n);for(let s=1;s<r*2;s++){const o=s%2===0?n:t,a=o*Math.sin(s*Math.PI/r),u=-1*o*Math.cos(s*Math.PI/r);e.lineTo(a,u)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}H2.Star=Zl;Zl.prototype.className="Star";Zl.prototype._centroid=!0;Zl.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,FD._registerNode)(Zl);uw.Factory.addGetterSetter(Zl,"numPoints",5,(0,hw.getNumberValidator)());uw.Factory.addGetterSetter(Zl,"innerRadius",0,(0,hw.getNumberValidator)());uw.Factory.addGetterSetter(Zl,"outerRadius",0,(0,hw.getNumberValidator)());var vf={};Object.defineProperty(vf,"__esModule",{value:!0});vf.Text=void 0;vf.stringToArray=Ec;const WS=sn,ki=Ze,ID=Dn,p3=Ye,ec=Fe,DD=Ye;function Ec(i){return[...i].reduce((e,t,n,r)=>{if(new RegExp("\\p{Emoji}","u").test(t)){const s=r[n+1];s&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(s)?(e.push(t+s),r[n+1]=""):e.push(t)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(t+(r[n+1]||""))?e.push(t+r[n+1]):n>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(t)?e[e.length-1]+=t:t&&e.push(t);return e},[])}const xh="auto",OD="center",j7="inherit",Kf="justify",zD="Change.konva",jD="2d",t8="-",H7="left",HD="text",GD="Text",BD="top",UD="bottom",n8="middle",G7="normal",VD="px ",e1=" ",WD="right",i8="rtl",XD="word",$D="char",r8="none",g3="",B7=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],YD=B7.length;function KD(i){return i.split(",").map(e=>{e=e.trim();const t=e.indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!n&&(e=`"${e}"`),e}).join(", ")}let t1;function m3(){return t1||(t1=WS.Util.createCanvasElement().getContext(jD),t1)}function qD(i){i.fillText(this._partialText,this._partialTextX,this._partialTextY)}function QD(i){i.setAttr("miterLimit",2),i.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function JD(i){return i=i||{},!i.fillLinearGradientColorStops&&!i.fillRadialGradientColorStops&&!i.fillPatternImage&&(i.fill=i.fill||"black"),i}let dn=class extends ID.Shape{constructor(e){super(JD(e)),this._partialTextX=0,this._partialTextY=0;for(let t=0;t<YD;t++)this.on(B7[t]+zD,this._setTextData);this._setTextData()}_sceneFunc(e){const t=this.textArr,n=t.length;if(!this.text())return;let r=this.padding(),s=this.fontSize(),o=this.lineHeight()*s,a=this.verticalAlign(),u=this.direction(),h=0,f=this.align(),m=this.getWidth(),g=this.letterSpacing(),v=this.fill(),y=this.textDecoration(),S=y.indexOf("underline")!==-1,C=y.indexOf("line-through")!==-1,b;u=u===j7?e.direction:u;let E=o/2,x=n8;if(p3.Konva._fixTextRendering){const A=this.measureSize("M");x="alphabetic",E=(A.fontBoundingBoxAscent-A.fontBoundingBoxDescent)/2+o/2}for(u===i8&&e.setAttr("direction",u),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",x),e.setAttr("textAlign",H7),a===n8?h=(this.getHeight()-n*o-r*2)/2:a===UD&&(h=this.getHeight()-n*o-r*2),e.translate(r,h+r),b=0;b<n;b++){let A=0,k=0;const L=t[b],I=L.text,M=L.width,z=L.lastInParagraph;if(e.save(),f===WD?A+=m-M-r*2:f===OD&&(A+=(m-M-r*2)/2),S){e.save(),e.beginPath();const D=p3.Konva._fixTextRendering?Math.round(s/4):Math.round(s/2),j=A,U=E+k+D;e.moveTo(j,U);const W=f===Kf&&!z?m-r*2:M;e.lineTo(j+Math.round(W),U),e.lineWidth=s/15;const Y=this._getLinearGradient();e.strokeStyle=Y||v,e.stroke(),e.restore()}if(C){e.save(),e.beginPath();const D=p3.Konva._fixTextRendering?-Math.round(s/4):0;e.moveTo(A,E+k+D);const j=f===Kf&&!z?m-r*2:M;e.lineTo(A+Math.round(j),E+k+D),e.lineWidth=s/15;const U=this._getLinearGradient();e.strokeStyle=U||v,e.stroke(),e.restore()}if(u!==i8&&(g!==0||f===Kf)){const D=I.split(" ").length-1,j=Ec(I);for(let U=0;U<j.length;U++){const W=j[U];W===" "&&!z&&f===Kf&&(A+=(m-r*2-M)/D),this._partialTextX=A,this._partialTextY=E+k,this._partialText=W,e.fillStrokeShape(this),A+=this.measureSize(W).width+g}}else g!==0&&e.setAttr("letterSpacing",`${g}px`),this._partialTextX=A,this._partialTextY=E+k,this._partialText=I,e.fillStrokeShape(this);e.restore(),n>1&&(E+=o)}}_hitFunc(e){const t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}setText(e){const t=WS.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(HD,t),this}getWidth(){return this.attrs.width===xh||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===xh||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return WS.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,n,r,s,o,a,u,h,f,m,g;let v=m3(),y=this.fontSize(),S;v.save(),v.font=this._getContextFont(),S=v.measureText(e),v.restore();const C=y/100;return{actualBoundingBoxAscent:(t=S.actualBoundingBoxAscent)!==null&&t!==void 0?t:71.58203125*C,actualBoundingBoxDescent:(n=S.actualBoundingBoxDescent)!==null&&n!==void 0?n:0,actualBoundingBoxLeft:(r=S.actualBoundingBoxLeft)!==null&&r!==void 0?r:-7.421875*C,actualBoundingBoxRight:(s=S.actualBoundingBoxRight)!==null&&s!==void 0?s:75.732421875*C,alphabeticBaseline:(o=S.alphabeticBaseline)!==null&&o!==void 0?o:0,emHeightAscent:(a=S.emHeightAscent)!==null&&a!==void 0?a:100*C,emHeightDescent:(u=S.emHeightDescent)!==null&&u!==void 0?u:-20*C,fontBoundingBoxAscent:(h=S.fontBoundingBoxAscent)!==null&&h!==void 0?h:91*C,fontBoundingBoxDescent:(f=S.fontBoundingBoxDescent)!==null&&f!==void 0?f:21*C,hangingBaseline:(m=S.hangingBaseline)!==null&&m!==void 0?m:72.80000305175781*C,ideographicBaseline:(g=S.ideographicBaseline)!==null&&g!==void 0?g:-21*C,width:S.width,height:y}}_getContextFont(){return this.fontStyle()+e1+this.fontVariant()+e1+(this.fontSize()+VD)+KD(this.fontFamily())}_addTextLine(e){this.align()===Kf&&(e=e.trim());const n=this._getTextWidth(e);return this.textArr.push({text:e,width:n,lastInParagraph:!1})}_getTextWidth(e){const t=this.letterSpacing(),n=e.length;return m3().measureText(e).width+t*n}_setTextData(){let e=this.text().split(`
`),t=+this.fontSize(),n=0,r=this.lineHeight()*t,s=this.attrs.width,o=this.attrs.height,a=s!==xh&&s!==void 0,u=o!==xh&&o!==void 0,h=this.padding(),f=s-h*2,m=o-h*2,g=0,v=this.wrap(),y=v!==r8,S=v!==$D&&y,C=this.ellipsis();this.textArr=[],m3().font=this._getContextFont();const b=C?this._getTextWidth(g3):0;for(let E=0,x=e.length;E<x;++E){let A=e[E],k=this._getTextWidth(A);if(a&&k>f)for(;A.length>0;){let L=0,I=Ec(A).length,M="",z=0;for(;L<I;){const D=L+I>>>1,j=Ec(A),U=j.slice(0,D+1).join(""),W=this._getTextWidth(U);(C&&u&&g+r>m?W+b:W)<=f?(L=D+1,M=U,z=W):I=D}if(M){if(S){const U=Ec(A),W=Ec(M),Y=U[W.length],K=Y===e1||Y===t8;let ne;if(K&&z<=f)ne=W.length;else{const Z=W.lastIndexOf(e1),G=W.lastIndexOf(t8);ne=Math.max(Z,G)+1}ne>0&&(L=ne,M=U.slice(0,L).join(""),z=this._getTextWidth(M))}if(M=M.trimRight(),this._addTextLine(M),n=Math.max(n,z),g+=r,this._shouldHandleEllipsis(g)){this._tryToAddEllipsisToLastLine();break}if(A=Ec(A).slice(L).join("").trimLeft(),A.length>0&&(k=this._getTextWidth(A),k<=f)){this._addTextLine(A),g+=r,n=Math.max(n,k);break}}else break}else this._addTextLine(A),g+=r,n=Math.max(n,k),this._shouldHandleEllipsis(g)&&E<x-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),u&&g+r>m)break}this.textHeight=t,this.textWidth=n}_shouldHandleEllipsis(e){const t=+this.fontSize(),n=this.lineHeight()*t,r=this.attrs.height,s=r!==xh&&r!==void 0,o=this.padding(),a=r-o*2;return!(this.wrap()!==r8)||s&&e+n>a}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,t=e!==xh&&e!==void 0,n=this.padding(),r=e-n*2,s=this.ellipsis(),o=this.textArr[this.textArr.length-1];!o||!s||(t&&(this._getTextWidth(o.text+g3)<r||(o.text=o.text.slice(0,o.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+g3))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,t=this.hasShadow();return e&&t?!0:super._useBufferCanvas()}};vf.Text=dn;dn.prototype._fillFunc=qD;dn.prototype._strokeFunc=QD;dn.prototype.className=GD;dn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,DD._registerNode)(dn);ki.Factory.overWriteSetter(dn,"width",(0,ec.getNumberOrAutoValidator)());ki.Factory.overWriteSetter(dn,"height",(0,ec.getNumberOrAutoValidator)());ki.Factory.addGetterSetter(dn,"direction",j7);ki.Factory.addGetterSetter(dn,"fontFamily","Arial");ki.Factory.addGetterSetter(dn,"fontSize",12,(0,ec.getNumberValidator)());ki.Factory.addGetterSetter(dn,"fontStyle",G7);ki.Factory.addGetterSetter(dn,"fontVariant",G7);ki.Factory.addGetterSetter(dn,"padding",0,(0,ec.getNumberValidator)());ki.Factory.addGetterSetter(dn,"align",H7);ki.Factory.addGetterSetter(dn,"verticalAlign",BD);ki.Factory.addGetterSetter(dn,"lineHeight",1,(0,ec.getNumberValidator)());ki.Factory.addGetterSetter(dn,"wrap",XD);ki.Factory.addGetterSetter(dn,"ellipsis",!1,(0,ec.getBooleanValidator)());ki.Factory.addGetterSetter(dn,"letterSpacing",0,(0,ec.getNumberValidator)());ki.Factory.addGetterSetter(dn,"text","",(0,ec.getStringValidator)());ki.Factory.addGetterSetter(dn,"textDecoration","");var G2={};Object.defineProperty(G2,"__esModule",{value:!0});G2.TextPath=void 0;const y3=sn,zs=Ze,ZD=Dn,qf=mf,v3=vf,U7=Fe,eO=Ye,tO="",V7="normal";function W7(i){i.fillText(this.partialText,0,0)}function X7(i){i.strokeText(this.partialText,0,0)}class On extends ZD.Shape{constructor(e){super(e),this.dummyCanvas=y3.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return qf.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const t=this.pathLength;return e-1>t?null:qf.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=qf.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const t=this.textDecoration(),n=this.fill(),r=this.fontSize(),s=this.glyphInfo;t==="underline"&&e.beginPath();for(let o=0;o<s.length;o++){e.save();const a=s[o].p0;e.translate(a.x,a.y),e.rotate(s[o].rotation),this.partialText=s[o].text,e.fillStrokeShape(this),t==="underline"&&(o===0&&e.moveTo(0,r/2+1),e.lineTo(r,r/2+1)),e.restore()}t==="underline"&&(e.strokeStyle=n,e.lineWidth=r/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();const t=this.glyphInfo;if(t.length>=1){const n=t[0].p0;e.moveTo(n.x,n.y)}for(let n=0;n<t.length;n++){const r=t[n].p1;e.lineTo(r.x,r.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return y3.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return v3.Text.prototype.setText.call(this,e)}_getContextFont(){return v3.Text.prototype._getContextFont.call(this)}_getTextSize(e){const n=this.dummyCanvas.getContext("2d");n.save(),n.font=this._getContextFont();const r=n.measureText(e);return n.restore(),{width:r.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:t}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=t,this.glyphInfo=[],!this.attrs.data)return null;const n=this.letterSpacing(),r=this.align(),s=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);let a=0;r==="center"&&(a=Math.max(0,this.pathLength/2-o/2)),r==="right"&&(a=Math.max(0,this.pathLength-o));const u=(0,v3.stringToArray)(this.text());let h=a;for(let f=0;f<u.length;f++){const m=this._getPointAtLength(h);if(!m)return;let g=this._getTextSize(u[f]).width+n;if(u[f]===" "&&r==="justify"){const E=this.text().split(" ").length-1;g+=(this.pathLength-o)/E}const v=this._getPointAtLength(h+g);if(!v)return;const y=qf.Path.getLineLength(m.x,m.y,v.x,v.y);let S=0;if(s)try{S=s(u[f-1],u[f])*this.fontSize()}catch{S=0}m.x+=S,v.x+=S,this.textWidth+=S;const C=qf.Path.getPointOnLine(S+y/2,m.x,m.y,v.x,v.y),b=Math.atan2(v.y-m.y,v.x-m.x);this.glyphInfo.push({transposeX:C.x,transposeY:C.y,text:u[f],rotation:b,p0:m,p1:v}),h+=g}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(h){e.push(h.p0.x),e.push(h.p0.y),e.push(h.p1.x),e.push(h.p1.y)});let t=e[0]||0,n=e[0]||0,r=e[1]||0,s=e[1]||0,o,a;for(let h=0;h<e.length/2;h++)o=e[h*2],a=e[h*2+1],t=Math.min(t,o),n=Math.max(n,o),r=Math.min(r,a),s=Math.max(s,a);const u=this.fontSize();return{x:t-u/2,y:r-u/2,width:n-t+u,height:s-r+u}}destroy(){return y3.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}G2.TextPath=On;On.prototype._fillFunc=W7;On.prototype._strokeFunc=X7;On.prototype._fillFuncHit=W7;On.prototype._strokeFuncHit=X7;On.prototype.className="TextPath";On.prototype._attrsAffectingSize=["text","fontSize","data"];(0,eO._registerNode)(On);zs.Factory.addGetterSetter(On,"data");zs.Factory.addGetterSetter(On,"fontFamily","Arial");zs.Factory.addGetterSetter(On,"fontSize",12,(0,U7.getNumberValidator)());zs.Factory.addGetterSetter(On,"fontStyle",V7);zs.Factory.addGetterSetter(On,"align","left");zs.Factory.addGetterSetter(On,"letterSpacing",0,(0,U7.getNumberValidator)());zs.Factory.addGetterSetter(On,"textBaseline","middle");zs.Factory.addGetterSetter(On,"fontVariant",V7);zs.Factory.addGetterSetter(On,"text",tO);zs.Factory.addGetterSetter(On,"textDecoration","");zs.Factory.addGetterSetter(On,"kerningFunc",void 0);var B2={};Object.defineProperty(B2,"__esModule",{value:!0});B2.Transformer=void 0;const Tt=sn,_t=Ze,s8=$t,nO=Dn,iO=N0,o8=pf,ps=Ye,tc=Fe,rO=Ye,$7="tr-konva",sO=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(i=>i+`.${$7}`).join(" "),a8="nodesRect",oO=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],aO={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},lO="ontouchstart"in ps.Konva._global;function cO(i,e,t){if(i==="rotater")return t;e+=Tt.Util.degToRad(aO[i]||0);const n=(Tt.Util.radToDeg(e)%360+360)%360;return Tt.Util._inRange(n,315+22.5,360)||Tt.Util._inRange(n,0,22.5)?"ns-resize":Tt.Util._inRange(n,45-22.5,45+22.5)?"nesw-resize":Tt.Util._inRange(n,90-22.5,90+22.5)?"ew-resize":Tt.Util._inRange(n,135-22.5,135+22.5)?"nwse-resize":Tt.Util._inRange(n,180-22.5,180+22.5)?"ns-resize":Tt.Util._inRange(n,225-22.5,225+22.5)?"nesw-resize":Tt.Util._inRange(n,270-22.5,270+22.5)?"ew-resize":Tt.Util._inRange(n,315-22.5,315+22.5)?"nwse-resize":(Tt.Util.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}const Cy=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function uO(i){return{x:i.x+i.width/2*Math.cos(i.rotation)+i.height/2*Math.sin(-i.rotation),y:i.y+i.height/2*Math.cos(i.rotation)+i.width/2*Math.sin(i.rotation)}}function Y7(i,e,t){const n=t.x+(i.x-t.x)*Math.cos(e)-(i.y-t.y)*Math.sin(e),r=t.y+(i.x-t.x)*Math.sin(e)+(i.y-t.y)*Math.cos(e);return{...i,rotation:i.rotation+e,x:n,y:r}}function hO(i,e){const t=uO(i);return Y7(i,e,t)}function dO(i,e,t){let n=e;for(let r=0;r<i.length;r++){const s=ps.Konva.getAngle(i[r]),o=Math.abs(s-e)%(Math.PI*2);Math.min(o,Math.PI*2-o)<t&&(n=s)}return n}let XS=0;class lt extends o8.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(sO,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return Tt.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return $7+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const t=e.filter(r=>r.isAncestorOf(this)?(Tt.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=t,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(r._attrsAffectingSize.length){const o=r._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");r.on(o,s)}r.on(oO.map(o=>o+`.${this._getEventNamespace()}`).join(" "),s),r.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(r)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,n=>{t=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(n,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!t)return;const r=e.getAbsolutePosition(),s=r.x-t.x,o=r.y-t.y;this.nodes().forEach(a=>{if(a===e||a.isDragging())return;const u=a.getAbsolutePosition();a.setAbsolutePosition({x:u.x+s,y:u.y+o}),a.startDrag(n)}),t=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(a8),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(a8,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),n){const r=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(n),o=e.getAbsolutePosition(n),a=r.x*s.x-e.offsetX()*s.x,u=r.y*s.y-e.offsetY()*s.y,h=(ps.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),f={x:o.x+a*Math.cos(h)+u*Math.sin(-h),y:o.y+u*Math.cos(h)+a*Math.sin(h),width:r.width*s.x,height:r.height*s.y,rotation:h};return Y7(f,-ps.Konva.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const t=[];this.nodes().map(h=>{const f=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),m=[{x:f.x,y:f.y},{x:f.x+f.width,y:f.y},{x:f.x+f.width,y:f.y+f.height},{x:f.x,y:f.y+f.height}],g=h.getAbsoluteTransform();m.forEach(function(v){const y=g.point(v);t.push(y)})});const n=new Tt.Transform;n.rotate(-ps.Konva.getAngle(this.rotation()));let r=1/0,s=1/0,o=-1/0,a=-1/0;t.forEach(function(h){const f=n.point(h);r===void 0&&(r=o=f.x,s=a=f.y),r=Math.min(r,f.x),s=Math.min(s,f.y),o=Math.max(o,f.x),a=Math.max(a,f.y)}),n.invert();const u=n.point({x:r,y:s});return{x:u.x,y:u.y,width:o-r,height:a-s,rotation:ps.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Cy.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const t=new iO.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:lO?10:"auto"}),n=this;t.on("mousedown touchstart",function(r){n._handleMouseDown(r)}),t.on("dragstart",r=>{t.stopDrag(),r.cancelBubble=!0}),t.on("dragend",r=>{r.cancelBubble=!0}),t.on("mouseenter",()=>{const r=ps.Konva.getAngle(this.rotation()),s=this.rotateAnchorCursor(),o=cO(e,r,s);t.getStage().content&&(t.getStage().content.style.cursor=o),this._cursorChange=!0}),t.on("mouseout",()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(t)}_createBack(){const e=new nO.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(t,n){const r=n.getParent(),s=r.padding();t.beginPath(),t.rect(-s,-s,n.width()+s*2,n.height()+s*2),t.moveTo(n.width()/2,-s),r.rotateEnabled()&&r.rotateLineVisible()&&t.lineTo(n.width()/2,-r.rotateAnchorOffset()*Tt.Util._sign(n.height())-s),t.fillStrokeShape(n)},hitFunc:(t,n)=>{if(!this.shouldOverdrawWholeArea())return;const r=this.padding();t.beginPath(),t.rect(-r,-r,n.width()+r*2,n.height()+r*2),t.fillStrokeShape(n)}});this.add(e),this._proxyDrag(e),e.on("dragstart",t=>{t.cancelBubble=!0}),e.on("dragmove",t=>{t.cancelBubble=!0}),e.on("dragend",t=>{t.cancelBubble=!0}),this.on("dragmove",t=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const t=this._getNodeRect(),n=t.width,r=t.height,s=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));this.sin=Math.abs(r/s),this.cos=Math.abs(n/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const o=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},XS++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(u=>{u._fire("transformstart",{evt:e.evt,target:u})})}_handleMouseMove(e){let t,n,r;const s=this.findOne("."+this._movingAnchorName),o=s.getStage();o.setPointersPositions(e);const a=o.getPointerPosition();let u={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const h=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(u=this.anchorDragBoundFunc()(h,u,e)),s.setAbsolutePosition(u);const f=s.getAbsolutePosition();if(h.x===f.x&&h.y===f.y)return;if(this._movingAnchorName==="rotater"){const E=this._getNodeRect();t=s.x()-E.width/2,n=-s.y()+E.height/2;let x=Math.atan2(-n,t)+Math.PI/2;E.height<0&&(x-=Math.PI);const k=ps.Konva.getAngle(this.rotation())+x,L=ps.Konva.getAngle(this.rotationSnapTolerance()),M=dO(this.rotationSnaps(),k,L)-E.rotation,z=hO(E,M);this._fitNodesInto(z,e);return}const m=this.shiftBehavior();let g;m==="inverted"?g=this.keepRatio()&&!e.shiftKey:m==="none"?g=this.keepRatio():g=this.keepRatio()||e.shiftKey;let v=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(g){const E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(E.x-s.x(),2)+Math.pow(E.y-s.y(),2));const x=this.findOne(".top-left").x()>E.x?-1:1,A=this.findOne(".top-left").y()>E.y?-1:1;t=r*this.cos*x,n=r*this.sin*A,this.findOne(".top-left").x(E.x-t),this.findOne(".top-left").y(E.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(g){const E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(s.x()-E.x,2)+Math.pow(E.y-s.y(),2));const x=this.findOne(".top-right").x()<E.x?-1:1,A=this.findOne(".top-right").y()>E.y?-1:1;t=r*this.cos*x,n=r*this.sin*A,this.findOne(".top-right").x(E.x+t),this.findOne(".top-right").y(E.y-n)}var y=s.position();this.findOne(".top-left").y(y.y),this.findOne(".bottom-right").x(y.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(g){const E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(E.x-s.x(),2)+Math.pow(s.y()-E.y,2));const x=E.x<s.x()?-1:1,A=s.y()<E.y?-1:1;t=r*this.cos*x,n=r*this.sin*A,s.x(E.x-t),s.y(E.y+n)}y=s.position(),this.findOne(".top-left").x(y.x),this.findOne(".bottom-right").y(y.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(g){const E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(s.x()-E.x,2)+Math.pow(s.y()-E.y,2));const x=this.findOne(".bottom-right").x()<E.x?-1:1,A=this.findOne(".bottom-right").y()<E.y?-1:1;t=r*this.cos*x,n=r*this.sin*A,this.findOne(".bottom-right").x(E.x+t),this.findOne(".bottom-right").y(E.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(v=this.centeredScaling()||e.altKey,v){const E=this.findOne(".top-left"),x=this.findOne(".bottom-right"),A=E.x(),k=E.y(),L=this.getWidth()-x.x(),I=this.getHeight()-x.y();x.move({x:-A,y:-k}),E.move({x:L,y:I})}const S=this.findOne(".top-left").getAbsolutePosition();t=S.x,n=S.y;const C=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),b=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:n,width:C,height:b,rotation:ps.Konva.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var t;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const n=this.getNode();XS--,this._fire("transformend",{evt:e,target:n}),(t=this.getLayer())===null||t===void 0||t.batchDraw(),n&&this._nodes.forEach(r=>{var s;r._fire("transformend",{evt:e,target:r}),(s=r.getLayer())===null||s===void 0||s.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,t){const n=this._getNodeRect(),r=1;if(Tt.Util._inRange(e.width,-this.padding()*2-r,r)){this.update();return}if(Tt.Util._inRange(e.height,-this.padding()*2-r,r)){this.update();return}const s=new Tt.Transform;if(s.rotate(ps.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const g=s.point({x:-this.padding()*2,y:0});e.x+=g.x,e.y+=g.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const g=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const g=s.point({x:0,y:-this.padding()*2});e.x+=g.x,e.y+=g.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const g=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const g=this.boundBoxFunc()(n,e);g?e=g:Tt.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,a=new Tt.Transform;a.translate(n.x,n.y),a.rotate(n.rotation),a.scale(n.width/o,n.height/o);const u=new Tt.Transform,h=e.width/o,f=e.height/o;this.flipEnabled()===!1?(u.translate(e.x,e.y),u.rotate(e.rotation),u.translate(e.width<0?e.width:0,e.height<0?e.height:0),u.scale(Math.abs(h),Math.abs(f))):(u.translate(e.x,e.y),u.rotate(e.rotation),u.scale(h,f));const m=u.multiply(a.invert());this._nodes.forEach(g=>{var v;const y=g.getParent().getAbsoluteTransform(),S=g.getTransform().copy();S.translate(g.offsetX(),g.offsetY());const C=new Tt.Transform;C.multiply(y.copy().invert()).multiply(m).multiply(y).multiply(S);const b=C.decompose();g.setAttrs(b),(v=g.getLayer())===null||v===void 0||v.batchDraw()}),this.rotation(Tt.Util._getRotation(e.rotation)),this._nodes.forEach(g=>{this._fire("transform",{evt:t,target:g}),g._fire("transform",{evt:t,target:g})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e;const t=this._getNodeRect();this.rotation(Tt.Util._getRotation(t.rotation));const n=t.width,r=t.height,s=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),u=this.anchorSize(),h=this.find("._anchor");h.forEach(m=>{m.setAttrs({width:u,height:u,offsetX:u/2,offsetY:u/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:u/2+a,offsetY:u/2+a,visible:o&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:u/2+a,visible:o&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:u/2-a,offsetY:u/2+a,visible:o&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:u/2+a,visible:o&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:r/2,offsetX:u/2-a,visible:o&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:u/2+a,offsetY:u/2-a,visible:o&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:r,offsetY:u/2-a,visible:o&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:r,offsetX:u/2-a,offsetY:u/2-a,visible:o&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*Tt.Util._sign(r)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const f=this.anchorStyleFunc();f&&h.forEach(m=>{f(m)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),o8.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return s8.Node.prototype.toObject.call(this)}clone(e){return s8.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}B2.Transformer=lt;lt.isTransforming=()=>XS>0;function fO(i){return i instanceof Array||Tt.Util.warn("enabledAnchors value should be an array"),i instanceof Array&&i.forEach(function(e){Cy.indexOf(e)===-1&&Tt.Util.warn("Unknown anchor name: "+e+". Available names are: "+Cy.join(", "))}),i||[]}lt.prototype.className="Transformer";(0,rO._registerNode)(lt);_t.Factory.addGetterSetter(lt,"enabledAnchors",Cy,fO);_t.Factory.addGetterSetter(lt,"flipEnabled",!0,(0,tc.getBooleanValidator)());_t.Factory.addGetterSetter(lt,"resizeEnabled",!0);_t.Factory.addGetterSetter(lt,"anchorSize",10,(0,tc.getNumberValidator)());_t.Factory.addGetterSetter(lt,"rotateEnabled",!0);_t.Factory.addGetterSetter(lt,"rotateLineVisible",!0);_t.Factory.addGetterSetter(lt,"rotationSnaps",[]);_t.Factory.addGetterSetter(lt,"rotateAnchorOffset",50,(0,tc.getNumberValidator)());_t.Factory.addGetterSetter(lt,"rotateAnchorCursor","crosshair");_t.Factory.addGetterSetter(lt,"rotationSnapTolerance",5,(0,tc.getNumberValidator)());_t.Factory.addGetterSetter(lt,"borderEnabled",!0);_t.Factory.addGetterSetter(lt,"anchorStroke","rgb(0, 161, 255)");_t.Factory.addGetterSetter(lt,"anchorStrokeWidth",1,(0,tc.getNumberValidator)());_t.Factory.addGetterSetter(lt,"anchorFill","white");_t.Factory.addGetterSetter(lt,"anchorCornerRadius",0,(0,tc.getNumberValidator)());_t.Factory.addGetterSetter(lt,"borderStroke","rgb(0, 161, 255)");_t.Factory.addGetterSetter(lt,"borderStrokeWidth",1,(0,tc.getNumberValidator)());_t.Factory.addGetterSetter(lt,"borderDash");_t.Factory.addGetterSetter(lt,"keepRatio",!0);_t.Factory.addGetterSetter(lt,"shiftBehavior","default");_t.Factory.addGetterSetter(lt,"centeredScaling",!1);_t.Factory.addGetterSetter(lt,"ignoreStroke",!1);_t.Factory.addGetterSetter(lt,"padding",0,(0,tc.getNumberValidator)());_t.Factory.addGetterSetter(lt,"nodes");_t.Factory.addGetterSetter(lt,"node");_t.Factory.addGetterSetter(lt,"boundBoxFunc");_t.Factory.addGetterSetter(lt,"anchorDragBoundFunc");_t.Factory.addGetterSetter(lt,"anchorStyleFunc");_t.Factory.addGetterSetter(lt,"shouldOverdrawWholeArea",!1);_t.Factory.addGetterSetter(lt,"useSingleNodeRotation",!0);_t.Factory.backCompat(lt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var U2={};Object.defineProperty(U2,"__esModule",{value:!0});U2.Wedge=void 0;const V2=Ze,pO=Dn,gO=Ye,K7=Fe,mO=Ye;class Na extends pO.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,gO.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}U2.Wedge=Na;Na.prototype.className="Wedge";Na.prototype._centroid=!0;Na.prototype._attrsAffectingSize=["radius"];(0,mO._registerNode)(Na);V2.Factory.addGetterSetter(Na,"radius",0,(0,K7.getNumberValidator)());V2.Factory.addGetterSetter(Na,"angle",0,(0,K7.getNumberValidator)());V2.Factory.addGetterSetter(Na,"clockwise",!1);V2.Factory.backCompat(Na,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var W2={};Object.defineProperty(W2,"__esModule",{value:!0});W2.Blur=void 0;const l8=Ze,yO=$t,vO=Fe;function c8(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const _O=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],xO=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function SO(i,e){const t=i.data,n=i.width,r=i.height;let s,o,a,u,h,f,m,g,v,y,S,C,b,E,x,A,k,L,I,M;const z=e+e+1,D=n-1,j=r-1,U=e+1,W=U*(U+1)/2,Y=new c8,K=_O[e],ne=xO[e];let Z=null,G=Y,ie=null,ee=null;for(let re=1;re<z;re++)G=G.next=new c8,re===U&&(Z=G);G.next=Y,a=o=0;for(let re=0;re<r;re++){C=b=E=x=u=h=f=m=0,g=U*(A=t[o]),v=U*(k=t[o+1]),y=U*(L=t[o+2]),S=U*(I=t[o+3]),u+=W*A,h+=W*k,f+=W*L,m+=W*I,G=Y;for(let ae=0;ae<U;ae++)G.r=A,G.g=k,G.b=L,G.a=I,G=G.next;for(let ae=1;ae<U;ae++)s=o+((D<ae?D:ae)<<2),u+=(G.r=A=t[s])*(M=U-ae),h+=(G.g=k=t[s+1])*M,f+=(G.b=L=t[s+2])*M,m+=(G.a=I=t[s+3])*M,C+=A,b+=k,E+=L,x+=I,G=G.next;ie=Y,ee=Z;for(let ae=0;ae<n;ae++)t[o+3]=I=m*K>>ne,I!==0?(I=255/I,t[o]=(u*K>>ne)*I,t[o+1]=(h*K>>ne)*I,t[o+2]=(f*K>>ne)*I):t[o]=t[o+1]=t[o+2]=0,u-=g,h-=v,f-=y,m-=S,g-=ie.r,v-=ie.g,y-=ie.b,S-=ie.a,s=a+((s=ae+e+1)<D?s:D)<<2,C+=ie.r=t[s],b+=ie.g=t[s+1],E+=ie.b=t[s+2],x+=ie.a=t[s+3],u+=C,h+=b,f+=E,m+=x,ie=ie.next,g+=A=ee.r,v+=k=ee.g,y+=L=ee.b,S+=I=ee.a,C-=A,b-=k,E-=L,x-=I,ee=ee.next,o+=4;a+=n}for(let re=0;re<n;re++){b=E=x=C=h=f=m=u=0,o=re<<2,g=U*(A=t[o]),v=U*(k=t[o+1]),y=U*(L=t[o+2]),S=U*(I=t[o+3]),u+=W*A,h+=W*k,f+=W*L,m+=W*I,G=Y;for(let ge=0;ge<U;ge++)G.r=A,G.g=k,G.b=L,G.a=I,G=G.next;let ae=n;for(let ge=1;ge<=e;ge++)o=ae+re<<2,u+=(G.r=A=t[o])*(M=U-ge),h+=(G.g=k=t[o+1])*M,f+=(G.b=L=t[o+2])*M,m+=(G.a=I=t[o+3])*M,C+=A,b+=k,E+=L,x+=I,G=G.next,ge<j&&(ae+=n);o=re,ie=Y,ee=Z;for(let ge=0;ge<r;ge++)s=o<<2,t[s+3]=I=m*K>>ne,I>0?(I=255/I,t[s]=(u*K>>ne)*I,t[s+1]=(h*K>>ne)*I,t[s+2]=(f*K>>ne)*I):t[s]=t[s+1]=t[s+2]=0,u-=g,h-=v,f-=y,m-=S,g-=ie.r,v-=ie.g,y-=ie.b,S-=ie.a,s=re+((s=ge+U)<j?s:j)*n<<2,u+=C+=ie.r=t[s],h+=b+=ie.g=t[s+1],f+=E+=ie.b=t[s+2],m+=x+=ie.a=t[s+3],ie=ie.next,g+=A=ee.r,v+=k=ee.g,y+=L=ee.b,S+=I=ee.a,C-=A,b-=k,E-=L,x-=I,ee=ee.next,o+=n}}const wO=function(e){const t=Math.round(this.blurRadius());t>0&&SO(e,t)};W2.Blur=wO;l8.Factory.addGetterSetter(yO.Node,"blurRadius",0,(0,vO.getNumberValidator)(),l8.Factory.afterSetFilter);var X2={};Object.defineProperty(X2,"__esModule",{value:!0});X2.Brighten=void 0;const u8=Ze,bO=$t,EO=Fe,AO=function(i){const e=this.brightness()*255,t=i.data,n=t.length;for(let r=0;r<n;r+=4)t[r]+=e,t[r+1]+=e,t[r+2]+=e};X2.Brighten=AO;u8.Factory.addGetterSetter(bO.Node,"brightness",0,(0,EO.getNumberValidator)(),u8.Factory.afterSetFilter);var $2={};Object.defineProperty($2,"__esModule",{value:!0});$2.Contrast=void 0;const h8=Ze,CO=$t,PO=Fe,kO=function(i){const e=Math.pow((this.contrast()+100)/100,2),t=i.data,n=t.length;let r=150,s=150,o=150;for(let a=0;a<n;a+=4)r=t[a],s=t[a+1],o=t[a+2],r/=255,r-=.5,r*=e,r+=.5,r*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,r=r<0?0:r>255?255:r,s=s<0?0:s>255?255:s,o=o<0?0:o>255?255:o,t[a]=r,t[a+1]=s,t[a+2]=o};$2.Contrast=kO;h8.Factory.addGetterSetter(CO.Node,"contrast",0,(0,PO.getNumberValidator)(),h8.Factory.afterSetFilter);var Y2={};Object.defineProperty(Y2,"__esModule",{value:!0});Y2.Emboss=void 0;const Ul=Ze,K2=$t,TO=sn,q7=Fe,MO=function(i){const e=this.embossStrength()*10,t=this.embossWhiteLevel()*255,n=this.embossDirection(),r=this.embossBlend(),s=i.data,o=i.width,a=i.height,u=o*4;let h=0,f=0,m=a;switch(n){case"top-left":h=-1,f=-1;break;case"top":h=-1,f=0;break;case"top-right":h=-1,f=1;break;case"right":h=0,f=1;break;case"bottom-right":h=1,f=1;break;case"bottom":h=1,f=0;break;case"bottom-left":h=1,f=-1;break;case"left":h=0,f=-1;break;default:TO.Util.error("Unknown emboss direction: "+n)}do{const g=(m-1)*u;let v=h;m+v<1&&(v=0),m+v>a&&(v=0);const y=(m-1+v)*o*4;let S=o;do{const C=g+(S-1)*4;let b=f;S+b<1&&(b=0),S+b>o&&(b=0);const E=y+(S-1+b)*4,x=s[C]-s[E],A=s[C+1]-s[E+1],k=s[C+2]-s[E+2];let L=x;const I=L>0?L:-L,M=A>0?A:-A,z=k>0?k:-k;if(M>I&&(L=A),z>I&&(L=k),L*=e,r){const D=s[C]+L,j=s[C+1]+L,U=s[C+2]+L;s[C]=D>255?255:D<0?0:D,s[C+1]=j>255?255:j<0?0:j,s[C+2]=U>255?255:U<0?0:U}else{let D=t-L;D<0?D=0:D>255&&(D=255),s[C]=s[C+1]=s[C+2]=D}}while(--S)}while(--m)};Y2.Emboss=MO;Ul.Factory.addGetterSetter(K2.Node,"embossStrength",.5,(0,q7.getNumberValidator)(),Ul.Factory.afterSetFilter);Ul.Factory.addGetterSetter(K2.Node,"embossWhiteLevel",.5,(0,q7.getNumberValidator)(),Ul.Factory.afterSetFilter);Ul.Factory.addGetterSetter(K2.Node,"embossDirection","top-left",void 0,Ul.Factory.afterSetFilter);Ul.Factory.addGetterSetter(K2.Node,"embossBlend",!1,void 0,Ul.Factory.afterSetFilter);var q2={};Object.defineProperty(q2,"__esModule",{value:!0});q2.Enhance=void 0;const d8=Ze,RO=$t,LO=Fe;function _3(i,e,t,n,r){const s=t-e,o=r-n;if(s===0)return n+o/2;if(o===0)return n;let a=(i-e)/s;return a=o*a+n,a}const NO=function(i){const e=i.data,t=e.length;let n=e[0],r=n,s,o=e[1],a=o,u,h=e[2],f=h,m;const g=this.enhance();if(g===0)return;for(let x=0;x<t;x+=4)s=e[x+0],s<n?n=s:s>r&&(r=s),u=e[x+1],u<o?o=u:u>a&&(a=u),m=e[x+2],m<h?h=m:m>f&&(f=m);r===n&&(r=255,n=0),a===o&&(a=255,o=0),f===h&&(f=255,h=0);let v,y,S,C,b,E;if(g>0)v=r+g*(255-r),y=n-g*(n-0),S=a+g*(255-a),C=o-g*(o-0),b=f+g*(255-f),E=h-g*(h-0);else{const x=(r+n)*.5;v=r+g*(r-x),y=n+g*(n-x);const A=(a+o)*.5;S=a+g*(a-A),C=o+g*(o-A);const k=(f+h)*.5;b=f+g*(f-k),E=h+g*(h-k)}for(let x=0;x<t;x+=4)e[x+0]=_3(e[x+0],n,r,y,v),e[x+1]=_3(e[x+1],o,a,C,S),e[x+2]=_3(e[x+2],h,f,E,b)};q2.Enhance=NO;d8.Factory.addGetterSetter(RO.Node,"enhance",0,(0,LO.getNumberValidator)(),d8.Factory.afterSetFilter);var Q2={};Object.defineProperty(Q2,"__esModule",{value:!0});Q2.Grayscale=void 0;const FO=function(i){const e=i.data,t=e.length;for(let n=0;n<t;n+=4){const r=.34*e[n]+.5*e[n+1]+.16*e[n+2];e[n]=r,e[n+1]=r,e[n+2]=r}};Q2.Grayscale=FO;var J2={};Object.defineProperty(J2,"__esModule",{value:!0});J2.HSL=void 0;const af=Ze,dw=$t,fw=Fe;af.Factory.addGetterSetter(dw.Node,"hue",0,(0,fw.getNumberValidator)(),af.Factory.afterSetFilter);af.Factory.addGetterSetter(dw.Node,"saturation",0,(0,fw.getNumberValidator)(),af.Factory.afterSetFilter);af.Factory.addGetterSetter(dw.Node,"luminance",0,(0,fw.getNumberValidator)(),af.Factory.afterSetFilter);const IO=function(i){const e=i.data,t=e.length,n=1,r=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,o=this.luminance()*127,a=n*r*Math.cos(s*Math.PI/180),u=n*r*Math.sin(s*Math.PI/180),h=.299*n+.701*a+.167*u,f=.587*n-.587*a+.33*u,m=.114*n-.114*a-.497*u,g=.299*n-.299*a-.328*u,v=.587*n+.413*a+.035*u,y=.114*n-.114*a+.293*u,S=.299*n-.3*a+1.25*u,C=.587*n-.586*a-1.05*u,b=.114*n+.886*a-.2*u;let E,x,A,k;for(let L=0;L<t;L+=4)E=e[L+0],x=e[L+1],A=e[L+2],k=e[L+3],e[L+0]=h*E+f*x+m*A+o,e[L+1]=g*E+v*x+y*A+o,e[L+2]=S*E+C*x+b*A+o,e[L+3]=k};J2.HSL=IO;var Z2={};Object.defineProperty(Z2,"__esModule",{value:!0});Z2.HSV=void 0;const lf=Ze,pw=$t,gw=Fe,DO=function(i){const e=i.data,t=e.length,n=Math.pow(2,this.value()),r=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,o=n*r*Math.cos(s*Math.PI/180),a=n*r*Math.sin(s*Math.PI/180),u=.299*n+.701*o+.167*a,h=.587*n-.587*o+.33*a,f=.114*n-.114*o-.497*a,m=.299*n-.299*o-.328*a,g=.587*n+.413*o+.035*a,v=.114*n-.114*o+.293*a,y=.299*n-.3*o+1.25*a,S=.587*n-.586*o-1.05*a,C=.114*n+.886*o-.2*a;for(let b=0;b<t;b+=4){const E=e[b+0],x=e[b+1],A=e[b+2],k=e[b+3];e[b+0]=u*E+h*x+f*A,e[b+1]=m*E+g*x+v*A,e[b+2]=y*E+S*x+C*A,e[b+3]=k}};Z2.HSV=DO;lf.Factory.addGetterSetter(pw.Node,"hue",0,(0,gw.getNumberValidator)(),lf.Factory.afterSetFilter);lf.Factory.addGetterSetter(pw.Node,"saturation",0,(0,gw.getNumberValidator)(),lf.Factory.afterSetFilter);lf.Factory.addGetterSetter(pw.Node,"value",0,(0,gw.getNumberValidator)(),lf.Factory.afterSetFilter);var ev={};Object.defineProperty(ev,"__esModule",{value:!0});ev.Invert=void 0;const OO=function(i){const e=i.data,t=e.length;for(let n=0;n<t;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2]};ev.Invert=OO;var tv={};Object.defineProperty(tv,"__esModule",{value:!0});tv.Kaleidoscope=void 0;const Py=Ze,Q7=$t,f8=sn,J7=Fe,zO=function(i,e,t){const n=i.data,r=e.data,s=i.width,o=i.height,a=t.polarCenterX||s/2,u=t.polarCenterY||o/2;let h=Math.sqrt(a*a+u*u),f=s-a,m=o-u;const g=Math.sqrt(f*f+m*m);h=g>h?g:h;const v=o,y=s,S=360/y*Math.PI/180;for(let C=0;C<y;C+=1){const b=Math.sin(C*S),E=Math.cos(C*S);for(let x=0;x<v;x+=1){f=Math.floor(a+h*x/v*E),m=Math.floor(u+h*x/v*b);let A=(m*s+f)*4;const k=n[A+0],L=n[A+1],I=n[A+2],M=n[A+3];A=(C+x*s)*4,r[A+0]=k,r[A+1]=L,r[A+2]=I,r[A+3]=M}}},jO=function(i,e,t){const n=i.data,r=e.data,s=i.width,o=i.height,a=t.polarCenterX||s/2,u=t.polarCenterY||o/2;let h=Math.sqrt(a*a+u*u),f=s-a,m=o-u;const g=Math.sqrt(f*f+m*m);h=g>h?g:h;const v=o,y=s,S=0;let C,b;for(f=0;f<s;f+=1)for(m=0;m<o;m+=1){const E=f-a,x=m-u,A=Math.sqrt(E*E+x*x)*v/h;let k=(Math.atan2(x,E)*180/Math.PI+360+S)%360;k=k*y/360,C=Math.floor(k),b=Math.floor(A);let L=(b*s+C)*4;const I=n[L+0],M=n[L+1],z=n[L+2],D=n[L+3];L=(m*s+f)*4,r[L+0]=I,r[L+1]=M,r[L+2]=z,r[L+3]=D}},HO=function(i){const e=i.width,t=i.height;let n,r,s,o,a,u,h,f,m,g,v=Math.round(this.kaleidoscopePower());const y=Math.round(this.kaleidoscopeAngle()),S=Math.floor(e*(y%360)/360);if(v<1)return;const C=f8.Util.createCanvasElement();C.width=e,C.height=t;const b=C.getContext("2d").getImageData(0,0,e,t);f8.Util.releaseCanvas(C),zO(i,b,{polarCenterX:e/2,polarCenterY:t/2});let E=e/Math.pow(2,v);for(;E<=8;)E=E*2,v-=1;E=Math.ceil(E);let x=E,A=0,k=x,L=1;for(S+E>e&&(A=x,k=0,L=-1),r=0;r<t;r+=1)for(n=A;n!==k;n+=L)s=Math.round(n+S)%e,m=(e*r+s)*4,a=b.data[m+0],u=b.data[m+1],h=b.data[m+2],f=b.data[m+3],g=(e*r+n)*4,b.data[g+0]=a,b.data[g+1]=u,b.data[g+2]=h,b.data[g+3]=f;for(r=0;r<t;r+=1)for(x=Math.floor(E),o=0;o<v;o+=1){for(n=0;n<x+1;n+=1)m=(e*r+n)*4,a=b.data[m+0],u=b.data[m+1],h=b.data[m+2],f=b.data[m+3],g=(e*r+x*2-n-1)*4,b.data[g+0]=a,b.data[g+1]=u,b.data[g+2]=h,b.data[g+3]=f;x*=2}jO(b,i,{})};tv.Kaleidoscope=HO;Py.Factory.addGetterSetter(Q7.Node,"kaleidoscopePower",2,(0,J7.getNumberValidator)(),Py.Factory.afterSetFilter);Py.Factory.addGetterSetter(Q7.Node,"kaleidoscopeAngle",0,(0,J7.getNumberValidator)(),Py.Factory.afterSetFilter);var nv={};Object.defineProperty(nv,"__esModule",{value:!0});nv.Mask=void 0;const p8=Ze,GO=$t,BO=Fe;function n1(i,e,t){let n=(t*i.width+e)*4;const r=[];return r.push(i.data[n++],i.data[n++],i.data[n++],i.data[n++]),r}function Qf(i,e){return Math.sqrt(Math.pow(i[0]-e[0],2)+Math.pow(i[1]-e[1],2)+Math.pow(i[2]-e[2],2))}function UO(i){const e=[0,0,0];for(let t=0;t<i.length;t++)e[0]+=i[t][0],e[1]+=i[t][1],e[2]+=i[t][2];return e[0]/=i.length,e[1]/=i.length,e[2]/=i.length,e}function VO(i,e){const t=n1(i,0,0),n=n1(i,i.width-1,0),r=n1(i,0,i.height-1),s=n1(i,i.width-1,i.height-1),o=e||10;if(Qf(t,n)<o&&Qf(n,s)<o&&Qf(s,r)<o&&Qf(r,t)<o){const a=UO([n,t,s,r]),u=[];for(let h=0;h<i.width*i.height;h++){const f=Qf(a,[i.data[h*4],i.data[h*4+1],i.data[h*4+2]]);u[h]=f<o?0:255}return u}}function WO(i,e){for(let t=0;t<i.width*i.height;t++)i.data[4*t+3]=e[t]}function XO(i,e,t){const n=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(n.length)),s=Math.floor(r/2),o=[];for(let a=0;a<t;a++)for(let u=0;u<e;u++){const h=a*e+u;let f=0;for(let m=0;m<r;m++)for(let g=0;g<r;g++){const v=a+m-s,y=u+g-s;if(v>=0&&v<t&&y>=0&&y<e){const S=v*e+y,C=n[m*r+g];f+=i[S]*C}}o[h]=f===255*8?255:0}return o}function $O(i,e,t){const n=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(n.length)),s=Math.floor(r/2),o=[];for(let a=0;a<t;a++)for(let u=0;u<e;u++){const h=a*e+u;let f=0;for(let m=0;m<r;m++)for(let g=0;g<r;g++){const v=a+m-s,y=u+g-s;if(v>=0&&v<t&&y>=0&&y<e){const S=v*e+y,C=n[m*r+g];f+=i[S]*C}}o[h]=f>=255*4?255:0}return o}function YO(i,e,t){const n=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],r=Math.round(Math.sqrt(n.length)),s=Math.floor(r/2),o=[];for(let a=0;a<t;a++)for(let u=0;u<e;u++){const h=a*e+u;let f=0;for(let m=0;m<r;m++)for(let g=0;g<r;g++){const v=a+m-s,y=u+g-s;if(v>=0&&v<t&&y>=0&&y<e){const S=v*e+y,C=n[m*r+g];f+=i[S]*C}}o[h]=f}return o}const KO=function(i){const e=this.threshold();let t=VO(i,e);return t&&(t=XO(t,i.width,i.height),t=$O(t,i.width,i.height),t=YO(t,i.width,i.height),WO(i,t)),i};nv.Mask=KO;p8.Factory.addGetterSetter(GO.Node,"threshold",0,(0,BO.getNumberValidator)(),p8.Factory.afterSetFilter);var iv={};Object.defineProperty(iv,"__esModule",{value:!0});iv.Noise=void 0;const g8=Ze,qO=$t,QO=Fe,JO=function(i){const e=this.noise()*255,t=i.data,n=t.length,r=e/2;for(let s=0;s<n;s+=4)t[s+0]+=r-2*r*Math.random(),t[s+1]+=r-2*r*Math.random(),t[s+2]+=r-2*r*Math.random()};iv.Noise=JO;g8.Factory.addGetterSetter(qO.Node,"noise",.2,(0,QO.getNumberValidator)(),g8.Factory.afterSetFilter);var rv={};Object.defineProperty(rv,"__esModule",{value:!0});rv.Pixelate=void 0;const m8=Ze,ZO=sn,ez=$t,tz=Fe,nz=function(i){let e=Math.ceil(this.pixelSize()),t=i.width,n=i.height,r=Math.ceil(t/e),s=Math.ceil(n/e),o=i.data;if(e<=0){ZO.Util.error("pixelSize value can not be <= 0");return}for(let a=0;a<r;a+=1)for(let u=0;u<s;u+=1){let h=0,f=0,m=0,g=0;const v=a*e,y=v+e,S=u*e,C=S+e;let b=0;for(let E=v;E<y;E+=1)if(!(E>=t))for(let x=S;x<C;x+=1){if(x>=n)continue;const A=(t*x+E)*4;h+=o[A+0],f+=o[A+1],m+=o[A+2],g+=o[A+3],b+=1}h=h/b,f=f/b,m=m/b,g=g/b;for(let E=v;E<y;E+=1)if(!(E>=t))for(let x=S;x<C;x+=1){if(x>=n)continue;const A=(t*x+E)*4;o[A+0]=h,o[A+1]=f,o[A+2]=m,o[A+3]=g}}};rv.Pixelate=nz;m8.Factory.addGetterSetter(ez.Node,"pixelSize",8,(0,tz.getNumberValidator)(),m8.Factory.afterSetFilter);var sv={};Object.defineProperty(sv,"__esModule",{value:!0});sv.Posterize=void 0;const y8=Ze,iz=$t,rz=Fe,sz=function(i){const e=Math.round(this.levels()*254)+1,t=i.data,n=t.length,r=255/e;for(let s=0;s<n;s+=1)t[s]=Math.floor(t[s]/r)*r};sv.Posterize=sz;y8.Factory.addGetterSetter(iz.Node,"levels",.5,(0,rz.getNumberValidator)(),y8.Factory.afterSetFilter);var ov={};Object.defineProperty(ov,"__esModule",{value:!0});ov.RGB=void 0;const ky=Ze,mw=$t,oz=Fe,az=function(i){const e=i.data,t=e.length,n=this.red(),r=this.green(),s=this.blue();for(let o=0;o<t;o+=4){const a=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255;e[o]=a*n,e[o+1]=a*r,e[o+2]=a*s,e[o+3]=e[o+3]}};ov.RGB=az;ky.Factory.addGetterSetter(mw.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)});ky.Factory.addGetterSetter(mw.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)});ky.Factory.addGetterSetter(mw.Node,"blue",0,oz.RGBComponent,ky.Factory.afterSetFilter);var av={};Object.defineProperty(av,"__esModule",{value:!0});av.RGBA=void 0;const tg=Ze,lv=$t,lz=Fe,cz=function(i){const e=i.data,t=e.length,n=this.red(),r=this.green(),s=this.blue(),o=this.alpha();for(let a=0;a<t;a+=4){const u=1-o;e[a]=n*o+e[a]*u,e[a+1]=r*o+e[a+1]*u,e[a+2]=s*o+e[a+2]*u}};av.RGBA=cz;tg.Factory.addGetterSetter(lv.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)});tg.Factory.addGetterSetter(lv.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)});tg.Factory.addGetterSetter(lv.Node,"blue",0,lz.RGBComponent,tg.Factory.afterSetFilter);tg.Factory.addGetterSetter(lv.Node,"alpha",1,function(i){return this._filterUpToDate=!1,i>1?1:i<0?0:i});var cv={};Object.defineProperty(cv,"__esModule",{value:!0});cv.Sepia=void 0;const uz=function(i){const e=i.data,t=e.length;for(let n=0;n<t;n+=4){const r=e[n+0],s=e[n+1],o=e[n+2];e[n+0]=Math.min(255,r*.393+s*.769+o*.189),e[n+1]=Math.min(255,r*.349+s*.686+o*.168),e[n+2]=Math.min(255,r*.272+s*.534+o*.131)}};cv.Sepia=uz;var uv={};Object.defineProperty(uv,"__esModule",{value:!0});uv.Solarize=void 0;const hz=function(i){const e=i.data,t=i.width,n=i.height,r=t*4;let s=n;do{const o=(s-1)*r;let a=t;do{const u=o+(a-1)*4;let h=e[u],f=e[u+1],m=e[u+2];h>127&&(h=255-h),f>127&&(f=255-f),m>127&&(m=255-m),e[u]=h,e[u+1]=f,e[u+2]=m}while(--a)}while(--s)};uv.Solarize=hz;var hv={};Object.defineProperty(hv,"__esModule",{value:!0});hv.Threshold=void 0;const v8=Ze,dz=$t,fz=Fe,pz=function(i){const e=this.threshold()*255,t=i.data,n=t.length;for(let r=0;r<n;r+=1)t[r]=t[r]<e?0:255};hv.Threshold=pz;v8.Factory.addGetterSetter(dz.Node,"threshold",.5,(0,fz.getNumberValidator)(),v8.Factory.afterSetFilter);Object.defineProperty(S2,"__esModule",{value:!0});S2.Konva=void 0;const _8=Ey,gz=C2,mz=T2,yz=L2,vz=N2,_z=F2,x8=of,xz=M0,Sz=mf,wz=N0,bz=O2,Ez=z2,Az=j2,Cz=H2,Pz=vf,kz=G2,Tz=B2,Mz=U2,Rz=W2,Lz=X2,Nz=$2,Fz=Y2,Iz=q2,Dz=Q2,Oz=J2,zz=Z2,jz=ev,Hz=tv,Gz=nv,Bz=iv,Uz=rv,Vz=sv,Wz=ov,Xz=av,$z=cv,Yz=uv,Kz=hv;S2.Konva=_8.Konva.Util._assign(_8.Konva,{Arc:gz.Arc,Arrow:mz.Arrow,Circle:yz.Circle,Ellipse:vz.Ellipse,Image:_z.Image,Label:x8.Label,Tag:x8.Tag,Line:xz.Line,Path:Sz.Path,Rect:wz.Rect,RegularPolygon:bz.RegularPolygon,Ring:Ez.Ring,Sprite:Az.Sprite,Star:Cz.Star,Text:Pz.Text,TextPath:kz.TextPath,Transformer:Tz.Transformer,Wedge:Mz.Wedge,Filters:{Blur:Rz.Blur,Brighten:Lz.Brighten,Contrast:Nz.Contrast,Emboss:Fz.Emboss,Enhance:Iz.Enhance,Grayscale:Dz.Grayscale,HSL:Oz.HSL,HSV:zz.HSV,Invert:jz.Invert,Kaleidoscope:Hz.Kaleidoscope,Mask:Gz.Mask,Noise:Bz.Noise,Pixelate:Uz.Pixelate,Posterize:Vz.Posterize,RGB:Wz.RGB,RGBA:Xz.RGBA,Sepia:$z.Sepia,Solarize:Yz.Solarize,Threshold:Kz.Threshold}});var qz=v7.exports;Object.defineProperty(qz,"__esModule",{value:!0});const Qz=S2;v7.exports=Qz.Konva;var $S={exports:{}};(function(i,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var t=Ey;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return t.Konva}});const n=Ey;i.exports=n.Konva})($S,$S.exports);var Jz=$S.exports;const ng=v0(Jz);var Z7={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zz=function(e){var t={},n=J,r=Sp,s=Object.assign;function o(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,p=1;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),y=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),k=Symbol.iterator;function L(l){return l===null||typeof l!="object"?null:(l=k&&l[k]||l["@@iterator"],typeof l=="function"?l:null)}function I(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case f:return"Fragment";case h:return"Portal";case g:return"Profiler";case m:return"StrictMode";case C:return"Suspense";case b:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case y:return(l.displayName||"Context")+".Consumer";case v:return(l._context.displayName||"Context")+".Provider";case S:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case E:return c=l.displayName||null,c!==null?c:I(l.type)||"Memo";case x:c=l._payload,l=l._init;try{return I(l(c))}catch{}}return null}function M(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=c.render,l=l.displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(c);case 8:return c===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function z(l){var c=l,p=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,c.flags&4098&&(p=c.return),l=c.return;while(l)}return c.tag===3?p:null}function D(l){if(z(l)!==l)throw Error(o(188))}function j(l){var c=l.alternate;if(!c){if(c=z(l),c===null)throw Error(o(188));return c!==l?null:l}for(var p=l,_=c;;){var w=p.return;if(w===null)break;var P=w.alternate;if(P===null){if(_=w.return,_!==null){p=_;continue}break}if(w.child===P.child){for(P=w.child;P;){if(P===p)return D(w),l;if(P===_)return D(w),c;P=P.sibling}throw Error(o(188))}if(p.return!==_.return)p=w,_=P;else{for(var O=!1,B=w.child;B;){if(B===p){O=!0,p=w,_=P;break}if(B===_){O=!0,_=w,p=P;break}B=B.sibling}if(!O){for(B=P.child;B;){if(B===p){O=!0,p=P,_=w;break}if(B===_){O=!0,_=P,p=w;break}B=B.sibling}if(!O)throw Error(o(189))}}if(p.alternate!==_)throw Error(o(190))}if(p.tag!==3)throw Error(o(188));return p.stateNode.current===p?l:c}function U(l){return l=j(l),l!==null?W(l):null}function W(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=W(l);if(c!==null)return c;l=l.sibling}return null}function Y(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var c=Y(l);if(c!==null)return c}l=l.sibling}return null}var K=Array.isArray,ne=e.getPublicInstance,Z=e.getRootHostContext,G=e.getChildHostContext,ie=e.prepareForCommit,ee=e.resetAfterCommit,re=e.createInstance,ae=e.appendInitialChild,ge=e.finalizeInitialChildren,qe=e.prepareUpdate,et=e.shouldSetTextContent,Te=e.createTextInstance,H=e.scheduleTimeout,te=e.cancelTimeout,de=e.noTimeout,we=e.isPrimaryRenderer,Pe=e.supportsMutation,st=e.supportsPersistence,Ee=e.supportsHydration,nt=e.getInstanceFromNode,Me=e.preparePortalMount,xt=e.getCurrentEventPriority,fn=e.detachDeletedInstance,qn=e.supportsMicrotasks,ic=e.scheduleMicrotask,rs=e.supportsTestSelectors,ar=e.findFiberRoot,ss=e.getBoundingRect,_f=e.getTextContent,Co=e.isHiddenSubtree,os=e.matchAccessibilityRole,Zu=e.setFocusIfFocusable,li=e.setupIntersectionObserver,js=e.appendChild,as=e.appendChildToContainer,rc=e.commitTextUpdate,fv=e.commitMount,pv=e.commitUpdate,sc=e.insertBefore,gv=e.insertInContainerBefore,mv=e.removeChild,F0=e.removeChildFromContainer,Q=e.resetTextContent,ct=e.hideInstance,St=e.hideTextInstance,Be=e.unhideInstance,le=e.unhideTextInstance,be=e.clearContainer,ye=e.cloneInstance,ce=e.createContainerChildSet,Re=e.appendChildToContainerChildSet,Le=e.finalizeContainerChildren,ke=e.replaceContainerChildren,De=e.cloneHiddenInstance,Ie=e.cloneHiddenTextInstance,ut=e.canHydrateInstance,ot=e.canHydrateTextInstance,Pt=e.canHydrateSuspenseInstance,It=e.isSuspenseInstancePending,kt=e.isSuspenseInstanceFallback,ci=e.getSuspenseInstanceFallbackErrorDetails,Po=e.registerSuspenseInstanceRetry,Hs=e.getNextHydratableSibling,oc=e.getFirstHydratableChild,Fa=e.getFirstHydratableChildWithinContainer,Ia=e.getFirstHydratableChildWithinSuspenseInstance,I0=e.hydrateInstance,Rr=e.hydrateTextInstance,Gs=e.hydrateSuspenseInstance,ko=e.getNextHydratableInstanceAfterSuspenseInstance,Bs=e.commitHydratedContainer,Us=e.commitHydratedSuspenseInstance,yv=e.clearSuspenseBoundary,vv=e.clearSuspenseBoundaryFromContainer,D0=e.shouldDeleteUnhydratedTailInstances,O0=e.didNotMatchHydratedContainerTextInstance,z0=e.didNotMatchHydratedTextInstance,eh;function Da(l){if(eh===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);eh=c&&c[1]||""}return`
`+eh+l}var th=!1;function We(l,c){if(!l||th)return"";th=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(oe){var _=oe}Reflect.construct(l,[],c)}else{try{c.call()}catch(oe){_=oe}l.call(c.prototype)}else{try{throw Error()}catch(oe){_=oe}l()}}catch(oe){if(oe&&_&&typeof oe.stack=="string"){for(var w=oe.stack.split(`
`),P=_.stack.split(`
`),O=w.length-1,B=P.length-1;1<=O&&0<=B&&w[O]!==P[B];)B--;for(;1<=O&&0<=B;O--,B--)if(w[O]!==P[B]){if(O!==1||B!==1)do if(O--,B--,0>B||w[O]!==P[B]){var $=`
`+w[O].replace(" at new "," at ");return l.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",l.displayName)),$}while(1<=O&&0<=B);break}}}finally{th=!1,Error.prepareStackTrace=p}return(l=l?l.displayName||l.name:"")?Da(l):""}var Oa=Object.prototype.hasOwnProperty,Qn=[],Gi=-1;function ui(l){return{current:l}}function pt(l){0>Gi||(l.current=Qn[Gi],Qn[Gi]=null,Gi--)}function ht(l,c){Gi++,Qn[Gi]=l.current,l.current=c}var Bi={},zt=ui(Bi),Yt=ui(!1),hi=Bi;function Lr(l,c){var p=l.type.contextTypes;if(!p)return Bi;var _=l.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===c)return _.__reactInternalMemoizedMaskedChildContext;var w={},P;for(P in p)w[P]=c[P];return _&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=w),w}function _n(l){return l=l.childContextTypes,l!=null}function nh(){pt(Yt),pt(zt)}function j0(l,c,p){if(zt.current!==Bi)throw Error(o(168));ht(zt,c),ht(Yt,p)}function _v(l,c,p){var _=l.stateNode;if(c=c.childContextTypes,typeof _.getChildContext!="function")return p;_=_.getChildContext();for(var w in _)if(!(w in c))throw Error(o(108,M(l)||"Unknown",w));return s({},p,_)}function on(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Bi,hi=zt.current,ht(zt,l),ht(Yt,Yt.current),!0}function xn(l,c,p){var _=l.stateNode;if(!_)throw Error(o(169));p?(l=_v(l,c,hi),_.__reactInternalMemoizedMergedChildContext=l,pt(Yt),pt(zt),ht(zt,l)):pt(Yt),ht(Yt,p)}var lr=Math.clz32?Math.clz32:pP,xv=Math.log,fP=Math.LN2;function pP(l){return l>>>=0,l===0?32:31-(xv(l)/fP|0)|0}var H0=64,G0=4194304;function xf(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function B0(l,c){var p=l.pendingLanes;if(p===0)return 0;var _=0,w=l.suspendedLanes,P=l.pingedLanes,O=p&268435455;if(O!==0){var B=O&~w;B!==0?_=xf(B):(P&=O,P!==0&&(_=xf(P)))}else O=p&~w,O!==0?_=xf(O):P!==0&&(_=xf(P));if(_===0)return 0;if(c!==0&&c!==_&&!(c&w)&&(w=_&-_,P=c&-c,w>=P||w===16&&(P&4194240)!==0))return c;if(_&4&&(_|=p&16),c=l.entangledLanes,c!==0)for(l=l.entanglements,c&=_;0<c;)p=31-lr(c),w=1<<p,_|=l[p],c&=~w;return _}function gP(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mP(l,c){for(var p=l.suspendedLanes,_=l.pingedLanes,w=l.expirationTimes,P=l.pendingLanes;0<P;){var O=31-lr(P),B=1<<O,$=w[O];$===-1?(!(B&p)||B&_)&&(w[O]=gP(B,c)):$<=c&&(l.expiredLanes|=B),P&=~B}}function Sv(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function bw(){var l=H0;return H0<<=1,!(H0&4194240)&&(H0=64),l}function wv(l){for(var c=[],p=0;31>p;p++)c.push(l);return c}function Sf(l,c,p){l.pendingLanes|=c,c!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,c=31-lr(c),l[c]=p}function yP(l,c){var p=l.pendingLanes&~c;l.pendingLanes=c,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=c,l.mutableReadLanes&=c,l.entangledLanes&=c,c=l.entanglements;var _=l.eventTimes;for(l=l.expirationTimes;0<p;){var w=31-lr(p),P=1<<w;c[w]=0,_[w]=-1,l[w]=-1,p&=~P}}function bv(l,c){var p=l.entangledLanes|=c;for(l=l.entanglements;p;){var _=31-lr(p),w=1<<_;w&c|l[_]&c&&(l[_]|=c),p&=~w}}var gt=0;function Ew(l){return l&=-l,1<l?4<l?l&268435455?16:536870912:4:1}var Ev=r.unstable_scheduleCallback,Aw=r.unstable_cancelCallback,vP=r.unstable_shouldYield,_P=r.unstable_requestPaint,zn=r.unstable_now,Av=r.unstable_ImmediatePriority,xP=r.unstable_UserBlockingPriority,Cv=r.unstable_NormalPriority,SP=r.unstable_IdlePriority,U0=null,Vs=null;function wP(l){if(Vs&&typeof Vs.onCommitFiberRoot=="function")try{Vs.onCommitFiberRoot(U0,l,void 0,(l.current.flags&128)===128)}catch{}}function bP(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var ls=typeof Object.is=="function"?Object.is:bP,To=null,V0=!1,Pv=!1;function Cw(l){To===null?To=[l]:To.push(l)}function EP(l){V0=!0,Cw(l)}function Ws(){if(!Pv&&To!==null){Pv=!0;var l=0,c=gt;try{var p=To;for(gt=1;l<p.length;l++){var _=p[l];do _=_(!0);while(_!==null)}To=null,V0=!1}catch(w){throw To!==null&&(To=To.slice(l+1)),Ev(Av,Ws),w}finally{gt=c,Pv=!1}}return null}var ih=[],rh=0,W0=null,X0=0,Nr=[],Fr=0,ac=null,Mo=1,Ro="";function lc(l,c){ih[rh++]=X0,ih[rh++]=W0,W0=l,X0=c}function Pw(l,c,p){Nr[Fr++]=Mo,Nr[Fr++]=Ro,Nr[Fr++]=ac,ac=l;var _=Mo;l=Ro;var w=32-lr(_)-1;_&=~(1<<w),p+=1;var P=32-lr(c)+w;if(30<P){var O=w-w%5;P=(_&(1<<O)-1).toString(32),_>>=O,w-=O,Mo=1<<32-lr(c)+w|p<<w|_,Ro=P+l}else Mo=1<<P|p<<w|_,Ro=l}function kv(l){l.return!==null&&(lc(l,1),Pw(l,1,0))}function Tv(l){for(;l===W0;)W0=ih[--rh],ih[rh]=null,X0=ih[--rh],ih[rh]=null;for(;l===ac;)ac=Nr[--Fr],Nr[Fr]=null,Ro=Nr[--Fr],Nr[Fr]=null,Mo=Nr[--Fr],Nr[Fr]=null}var cr=null,Ir=null,Ut=!1,wf=!1,cs=null;function kw(l,c){var p=Hr(5,null,null,0);p.elementType="DELETED",p.stateNode=c,p.return=l,c=l.deletions,c===null?(l.deletions=[p],l.flags|=16):c.push(p)}function Tw(l,c){switch(l.tag){case 5:return c=ut(c,l.type,l.pendingProps),c!==null?(l.stateNode=c,cr=l,Ir=oc(c),!0):!1;case 6:return c=ot(c,l.pendingProps),c!==null?(l.stateNode=c,cr=l,Ir=null,!0):!1;case 13:if(c=Pt(c),c!==null){var p=ac!==null?{id:Mo,overflow:Ro}:null;return l.memoizedState={dehydrated:c,treeContext:p,retryLane:1073741824},p=Hr(18,null,null,0),p.stateNode=c,p.return=l,l.child=p,cr=l,Ir=null,!0}return!1;default:return!1}}function Mv(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Rv(l){if(Ut){var c=Ir;if(c){var p=c;if(!Tw(l,c)){if(Mv(l))throw Error(o(418));c=Hs(p);var _=cr;c&&Tw(l,c)?kw(_,p):(l.flags=l.flags&-4097|2,Ut=!1,cr=l)}}else{if(Mv(l))throw Error(o(418));l.flags=l.flags&-4097|2,Ut=!1,cr=l}}}function Mw(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;cr=l}function $0(l){if(!Ee||l!==cr)return!1;if(!Ut)return Mw(l),Ut=!0,!1;if(l.tag!==3&&(l.tag!==5||D0(l.type)&&!et(l.type,l.memoizedProps))){var c=Ir;if(c){if(Mv(l))throw Rw(),Error(o(418));for(;c;)kw(l,c),c=Hs(c)}}if(Mw(l),l.tag===13){if(!Ee)throw Error(o(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));Ir=ko(l)}else Ir=cr?Hs(l.stateNode):null;return!0}function Rw(){for(var l=Ir;l;)l=Hs(l)}function sh(){Ee&&(Ir=cr=null,wf=Ut=!1)}function Lv(l){cs===null?cs=[l]:cs.push(l)}var AP=a.ReactCurrentBatchConfig;function Y0(l,c){if(ls(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var p=Object.keys(l),_=Object.keys(c);if(p.length!==_.length)return!1;for(_=0;_<p.length;_++){var w=p[_];if(!Oa.call(c,w)||!ls(l[w],c[w]))return!1}return!0}function CP(l){switch(l.tag){case 5:return Da(l.type);case 16:return Da("Lazy");case 13:return Da("Suspense");case 19:return Da("SuspenseList");case 0:case 2:case 15:return l=We(l.type,!1),l;case 11:return l=We(l.type.render,!1),l;case 1:return l=We(l.type,!0),l;default:return""}}function bf(l,c,p){if(l=p.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(o(309));var _=p.stateNode}if(!_)throw Error(o(147,l));var w=_,P=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===P?c.ref:(c=function(O){var B=w.refs;O===null?delete B[P]:B[P]=O},c._stringRef=P,c)}if(typeof l!="string")throw Error(o(284));if(!p._owner)throw Error(o(290,l))}return l}function K0(l,c){throw l=Object.prototype.toString.call(c),Error(o(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function Lw(l){var c=l._init;return c(l._payload)}function Nw(l){function c(X,V){if(l){var q=X.deletions;q===null?(X.deletions=[V],X.flags|=16):q.push(V)}}function p(X,V){if(!l)return null;for(;V!==null;)c(X,V),V=V.sibling;return null}function _(X,V){for(X=new Map;V!==null;)V.key!==null?X.set(V.key,V):X.set(V.index,V),V=V.sibling;return X}function w(X,V){return X=Va(X,V),X.index=0,X.sibling=null,X}function P(X,V,q){return X.index=q,l?(q=X.alternate,q!==null?(q=q.index,q<V?(X.flags|=2,V):q):(X.flags|=2,V)):(X.flags|=1048576,V)}function O(X){return l&&X.alternate===null&&(X.flags|=2),X}function B(X,V,q,pe){return V===null||V.tag!==6?(V=P_(q,X.mode,pe),V.return=X,V):(V=w(V,q),V.return=X,V)}function $(X,V,q,pe){var Ce=q.type;return Ce===f?xe(X,V,q.props.children,pe,q.key):V!==null&&(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===x&&Lw(Ce)===V.type)?(pe=w(V,q.props),pe.ref=bf(X,V,q),pe.return=X,pe):(pe=Cm(q.type,q.key,q.props,null,X.mode,pe),pe.ref=bf(X,V,q),pe.return=X,pe)}function oe(X,V,q,pe){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=k_(q,X.mode,pe),V.return=X,V):(V=w(V,q.children||[]),V.return=X,V)}function xe(X,V,q,pe,Ce){return V===null||V.tag!==7?(V=gc(q,X.mode,pe,Ce),V.return=X,V):(V=w(V,q),V.return=X,V)}function je(X,V,q){if(typeof V=="string"&&V!==""||typeof V=="number")return V=P_(""+V,X.mode,q),V.return=X,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case u:return q=Cm(V.type,V.key,V.props,null,X.mode,q),q.ref=bf(X,null,V),q.return=X,q;case h:return V=k_(V,X.mode,q),V.return=X,V;case x:var pe=V._init;return je(X,pe(V._payload),q)}if(K(V)||L(V))return V=gc(V,X.mode,q,null),V.return=X,V;K0(X,V)}return null}function fe(X,V,q,pe){var Ce=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return Ce!==null?null:B(X,V,""+q,pe);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case u:return q.key===Ce?$(X,V,q,pe):null;case h:return q.key===Ce?oe(X,V,q,pe):null;case x:return Ce=q._init,fe(X,V,Ce(q._payload),pe)}if(K(q)||L(q))return Ce!==null?null:xe(X,V,q,pe,null);K0(X,q)}return null}function jt(X,V,q,pe,Ce){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return X=X.get(q)||null,B(V,X,""+pe,Ce);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case u:return X=X.get(pe.key===null?q:pe.key)||null,$(V,X,pe,Ce);case h:return X=X.get(pe.key===null?q:pe.key)||null,oe(V,X,pe,Ce);case x:var Xe=pe._init;return jt(X,V,q,Xe(pe._payload),Ce)}if(K(pe)||L(pe))return X=X.get(q)||null,xe(V,X,pe,Ce,null);K0(V,pe)}return null}function Lt(X,V,q,pe){for(var Ce=null,Xe=null,He=V,mt=V=0,Gn=null;He!==null&&mt<q.length;mt++){He.index>mt?(Gn=He,He=null):Gn=He.sibling;var yt=fe(X,He,q[mt],pe);if(yt===null){He===null&&(He=Gn);break}l&&He&&yt.alternate===null&&c(X,He),V=P(yt,V,mt),Xe===null?Ce=yt:Xe.sibling=yt,Xe=yt,He=Gn}if(mt===q.length)return p(X,He),Ut&&lc(X,mt),Ce;if(He===null){for(;mt<q.length;mt++)He=je(X,q[mt],pe),He!==null&&(V=P(He,V,mt),Xe===null?Ce=He:Xe.sibling=He,Xe=He);return Ut&&lc(X,mt),Ce}for(He=_(X,He);mt<q.length;mt++)Gn=jt(He,X,mt,q[mt],pe),Gn!==null&&(l&&Gn.alternate!==null&&He.delete(Gn.key===null?mt:Gn.key),V=P(Gn,V,mt),Xe===null?Ce=Gn:Xe.sibling=Gn,Xe=Gn);return l&&He.forEach(function(Wa){return c(X,Wa)}),Ut&&lc(X,mt),Ce}function Xi(X,V,q,pe){var Ce=L(q);if(typeof Ce!="function")throw Error(o(150));if(q=Ce.call(q),q==null)throw Error(o(151));for(var Xe=Ce=null,He=V,mt=V=0,Gn=null,yt=q.next();He!==null&&!yt.done;mt++,yt=q.next()){He.index>mt?(Gn=He,He=null):Gn=He.sibling;var Wa=fe(X,He,yt.value,pe);if(Wa===null){He===null&&(He=Gn);break}l&&He&&Wa.alternate===null&&c(X,He),V=P(Wa,V,mt),Xe===null?Ce=Wa:Xe.sibling=Wa,Xe=Wa,He=Gn}if(yt.done)return p(X,He),Ut&&lc(X,mt),Ce;if(He===null){for(;!yt.done;mt++,yt=q.next())yt=je(X,yt.value,pe),yt!==null&&(V=P(yt,V,mt),Xe===null?Ce=yt:Xe.sibling=yt,Xe=yt);return Ut&&lc(X,mt),Ce}for(He=_(X,He);!yt.done;mt++,yt=q.next())yt=jt(He,X,mt,yt.value,pe),yt!==null&&(l&&yt.alternate!==null&&He.delete(yt.key===null?mt:yt.key),V=P(yt,V,mt),Xe===null?Ce=yt:Xe.sibling=yt,Xe=yt);return l&&He.forEach(function(nk){return c(X,nk)}),Ut&&lc(X,mt),Ce}function Io(X,V,q,pe){if(typeof q=="object"&&q!==null&&q.type===f&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case u:e:{for(var Ce=q.key,Xe=V;Xe!==null;){if(Xe.key===Ce){if(Ce=q.type,Ce===f){if(Xe.tag===7){p(X,Xe.sibling),V=w(Xe,q.props.children),V.return=X,X=V;break e}}else if(Xe.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===x&&Lw(Ce)===Xe.type){p(X,Xe.sibling),V=w(Xe,q.props),V.ref=bf(X,Xe,q),V.return=X,X=V;break e}p(X,Xe);break}else c(X,Xe);Xe=Xe.sibling}q.type===f?(V=gc(q.props.children,X.mode,pe,q.key),V.return=X,X=V):(pe=Cm(q.type,q.key,q.props,null,X.mode,pe),pe.ref=bf(X,V,q),pe.return=X,X=pe)}return O(X);case h:e:{for(Xe=q.key;V!==null;){if(V.key===Xe)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){p(X,V.sibling),V=w(V,q.children||[]),V.return=X,X=V;break e}else{p(X,V);break}else c(X,V);V=V.sibling}V=k_(q,X.mode,pe),V.return=X,X=V}return O(X);case x:return Xe=q._init,Io(X,V,Xe(q._payload),pe)}if(K(q))return Lt(X,V,q,pe);if(L(q))return Xi(X,V,q,pe);K0(X,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,V!==null&&V.tag===6?(p(X,V.sibling),V=w(V,q),V.return=X,X=V):(p(X,V),V=P_(q,X.mode,pe),V.return=X,X=V),O(X)):p(X,V)}return Io}var oh=Nw(!0),Fw=Nw(!1),q0=ui(null),Q0=null,ah=null,Nv=null;function Fv(){Nv=ah=Q0=null}function Iw(l,c,p){we?(ht(q0,c._currentValue),c._currentValue=p):(ht(q0,c._currentValue2),c._currentValue2=p)}function Iv(l){var c=q0.current;pt(q0),we?l._currentValue=c:l._currentValue2=c}function Dv(l,c,p){for(;l!==null;){var _=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,_!==null&&(_.childLanes|=c)):_!==null&&(_.childLanes&c)!==c&&(_.childLanes|=c),l===p)break;l=l.return}}function lh(l,c){Q0=l,Nv=ah=null,l=l.dependencies,l!==null&&l.firstContext!==null&&(l.lanes&c&&(Ui=!0),l.firstContext=null)}function Dr(l){var c=we?l._currentValue:l._currentValue2;if(Nv!==l)if(l={context:l,memoizedValue:c,next:null},ah===null){if(Q0===null)throw Error(o(308));ah=l,Q0.dependencies={lanes:0,firstContext:l}}else ah=ah.next=l;return c}var cc=null;function Ov(l){cc===null?cc=[l]:cc.push(l)}function Dw(l,c,p,_){var w=c.interleaved;return w===null?(p.next=p,Ov(c)):(p.next=w.next,w.next=p),c.interleaved=p,Xs(l,_)}function Xs(l,c){l.lanes|=c;var p=l.alternate;for(p!==null&&(p.lanes|=c),p=l,l=l.return;l!==null;)l.childLanes|=c,p=l.alternate,p!==null&&(p.childLanes|=c),p=l,l=l.return;return p.tag===3?p.stateNode:null}var za=!1;function zv(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ow(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Lo(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function ja(l,c,p){var _=l.updateQueue;if(_===null)return null;if(_=_.shared,Qe&2){var w=_.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),_.pending=c,Xs(l,p)}return w=_.interleaved,w===null?(c.next=c,Ov(_)):(c.next=w.next,w.next=c),_.interleaved=c,Xs(l,p)}function J0(l,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194240)!==0)){var _=c.lanes;_&=l.pendingLanes,p|=_,c.lanes=p,bv(l,p)}}function zw(l,c){var p=l.updateQueue,_=l.alternate;if(_!==null&&(_=_.updateQueue,p===_)){var w=null,P=null;if(p=p.firstBaseUpdate,p!==null){do{var O={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};P===null?w=P=O:P=P.next=O,p=p.next}while(p!==null);P===null?w=P=c:P=P.next=c}else w=P=c;p={baseState:_.baseState,firstBaseUpdate:w,lastBaseUpdate:P,shared:_.shared,effects:_.effects},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=c:l.next=c,p.lastBaseUpdate=c}function Z0(l,c,p,_){var w=l.updateQueue;za=!1;var P=w.firstBaseUpdate,O=w.lastBaseUpdate,B=w.shared.pending;if(B!==null){w.shared.pending=null;var $=B,oe=$.next;$.next=null,O===null?P=oe:O.next=oe,O=$;var xe=l.alternate;xe!==null&&(xe=xe.updateQueue,B=xe.lastBaseUpdate,B!==O&&(B===null?xe.firstBaseUpdate=oe:B.next=oe,xe.lastBaseUpdate=$))}if(P!==null){var je=w.baseState;O=0,xe=oe=$=null,B=P;do{var fe=B.lane,jt=B.eventTime;if((_&fe)===fe){xe!==null&&(xe=xe.next={eventTime:jt,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var Lt=l,Xi=B;switch(fe=c,jt=p,Xi.tag){case 1:if(Lt=Xi.payload,typeof Lt=="function"){je=Lt.call(jt,je,fe);break e}je=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Xi.payload,fe=typeof Lt=="function"?Lt.call(jt,je,fe):Lt,fe==null)break e;je=s({},je,fe);break e;case 2:za=!0}}B.callback!==null&&B.lane!==0&&(l.flags|=64,fe=w.effects,fe===null?w.effects=[B]:fe.push(B))}else jt={eventTime:jt,lane:fe,tag:B.tag,payload:B.payload,callback:B.callback,next:null},xe===null?(oe=xe=jt,$=je):xe=xe.next=jt,O|=fe;if(B=B.next,B===null){if(B=w.shared.pending,B===null)break;fe=B,B=fe.next,fe.next=null,w.lastBaseUpdate=fe,w.shared.pending=null}}while(!0);if(xe===null&&($=je),w.baseState=$,w.firstBaseUpdate=oe,w.lastBaseUpdate=xe,c=w.shared.interleaved,c!==null){w=c;do O|=w.lane,w=w.next;while(w!==c)}else P===null&&(w.shared.lanes=0);hc|=O,l.lanes=O,l.memoizedState=je}}function jw(l,c,p){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var _=l[c],w=_.callback;if(w!==null){if(_.callback=null,_=p,typeof w!="function")throw Error(o(191,w));w.call(_)}}}var Ef={},Or=ui(Ef),Af=ui(Ef),ch=ui(Ef);function $s(l){if(l===Ef)throw Error(o(174));return l}function jv(l,c){ht(ch,c),ht(Af,l),ht(Or,Ef),l=Z(c),pt(Or),ht(Or,l)}function uh(){pt(Or),pt(Af),pt(ch)}function Hw(l){var c=$s(ch.current),p=$s(Or.current);c=G(p,l.type,c),p!==c&&(ht(Af,l),ht(Or,c))}function Hv(l){Af.current===l&&(pt(Or),pt(Af))}var Kt=ui(0);function em(l){for(var c=l;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||It(p)||kt(p)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Gv=[];function Bv(){for(var l=0;l<Gv.length;l++){var c=Gv[l];we?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}Gv.length=0}var tm=a.ReactCurrentDispatcher,Uv=a.ReactCurrentBatchConfig,uc=0,qt=null,Cn=null,jn=null,nm=!1,Cf=!1,Pf=0,PP=0;function di(){throw Error(o(321))}function Vv(l,c){if(c===null)return!1;for(var p=0;p<c.length&&p<l.length;p++)if(!ls(l[p],c[p]))return!1;return!0}function Wv(l,c,p,_,w,P){if(uc=P,qt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,tm.current=l===null||l.memoizedState===null?RP:LP,l=p(_,w),Cf){P=0;do{if(Cf=!1,Pf=0,25<=P)throw Error(o(301));P+=1,jn=Cn=null,c.updateQueue=null,tm.current=NP,l=p(_,w)}while(Cf)}if(tm.current=sm,c=Cn!==null&&Cn.next!==null,uc=0,jn=Cn=qt=null,nm=!1,c)throw Error(o(300));return l}function Xv(){var l=Pf!==0;return Pf=0,l}function Ys(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?qt.memoizedState=jn=l:jn=jn.next=l,jn}function zr(){if(Cn===null){var l=qt.alternate;l=l!==null?l.memoizedState:null}else l=Cn.next;var c=jn===null?qt.memoizedState:jn.next;if(c!==null)jn=c,Cn=l;else{if(l===null)throw Error(o(310));Cn=l,l={memoizedState:Cn.memoizedState,baseState:Cn.baseState,baseQueue:Cn.baseQueue,queue:Cn.queue,next:null},jn===null?qt.memoizedState=jn=l:jn=jn.next=l}return jn}function kf(l,c){return typeof c=="function"?c(l):c}function $v(l){var c=zr(),p=c.queue;if(p===null)throw Error(o(311));p.lastRenderedReducer=l;var _=Cn,w=_.baseQueue,P=p.pending;if(P!==null){if(w!==null){var O=w.next;w.next=P.next,P.next=O}_.baseQueue=w=P,p.pending=null}if(w!==null){P=w.next,_=_.baseState;var B=O=null,$=null,oe=P;do{var xe=oe.lane;if((uc&xe)===xe)$!==null&&($=$.next={lane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),_=oe.hasEagerState?oe.eagerState:l(_,oe.action);else{var je={lane:xe,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null};$===null?(B=$=je,O=_):$=$.next=je,qt.lanes|=xe,hc|=xe}oe=oe.next}while(oe!==null&&oe!==P);$===null?O=_:$.next=B,ls(_,c.memoizedState)||(Ui=!0),c.memoizedState=_,c.baseState=O,c.baseQueue=$,p.lastRenderedState=_}if(l=p.interleaved,l!==null){w=l;do P=w.lane,qt.lanes|=P,hc|=P,w=w.next;while(w!==l)}else w===null&&(p.lanes=0);return[c.memoizedState,p.dispatch]}function Yv(l){var c=zr(),p=c.queue;if(p===null)throw Error(o(311));p.lastRenderedReducer=l;var _=p.dispatch,w=p.pending,P=c.memoizedState;if(w!==null){p.pending=null;var O=w=w.next;do P=l(P,O.action),O=O.next;while(O!==w);ls(P,c.memoizedState)||(Ui=!0),c.memoizedState=P,c.baseQueue===null&&(c.baseState=P),p.lastRenderedState=P}return[P,_]}function Gw(){}function Bw(l,c){var p=qt,_=zr(),w=c(),P=!ls(_.memoizedState,w);if(P&&(_.memoizedState=w,Ui=!0),_=_.queue,Kv(Ww.bind(null,p,_,l),[l]),_.getSnapshot!==c||P||jn!==null&&jn.memoizedState.tag&1){if(p.flags|=2048,Tf(9,Vw.bind(null,p,_,w,c),void 0,null),Hn===null)throw Error(o(349));uc&30||Uw(p,c,w)}return w}function Uw(l,c,p){l.flags|=16384,l={getSnapshot:c,value:p},c=qt.updateQueue,c===null?(c={lastEffect:null,stores:null},qt.updateQueue=c,c.stores=[l]):(p=c.stores,p===null?c.stores=[l]:p.push(l))}function Vw(l,c,p,_){c.value=p,c.getSnapshot=_,Xw(c)&&$w(l)}function Ww(l,c,p){return p(function(){Xw(c)&&$w(l)})}function Xw(l){var c=l.getSnapshot;l=l.value;try{var p=c();return!ls(l,p)}catch{return!0}}function $w(l){var c=Xs(l,1);c!==null&&jr(c,l,1,-1)}function Yw(l){var c=Ys();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kf,lastRenderedState:l},c.queue=l,l=l.dispatch=MP.bind(null,qt,l),[c.memoizedState,l]}function Tf(l,c,p,_){return l={tag:l,create:c,destroy:p,deps:_,next:null},c=qt.updateQueue,c===null?(c={lastEffect:null,stores:null},qt.updateQueue=c,c.lastEffect=l.next=l):(p=c.lastEffect,p===null?c.lastEffect=l.next=l:(_=p.next,p.next=l,l.next=_,c.lastEffect=l)),l}function Kw(){return zr().memoizedState}function im(l,c,p,_){var w=Ys();qt.flags|=l,w.memoizedState=Tf(1|c,p,void 0,_===void 0?null:_)}function rm(l,c,p,_){var w=zr();_=_===void 0?null:_;var P=void 0;if(Cn!==null){var O=Cn.memoizedState;if(P=O.destroy,_!==null&&Vv(_,O.deps)){w.memoizedState=Tf(c,p,P,_);return}}qt.flags|=l,w.memoizedState=Tf(1|c,p,P,_)}function qw(l,c){return im(8390656,8,l,c)}function Kv(l,c){return rm(2048,8,l,c)}function Qw(l,c){return rm(4,2,l,c)}function Jw(l,c){return rm(4,4,l,c)}function Zw(l,c){if(typeof c=="function")return l=l(),c(l),function(){c(null)};if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function e5(l,c,p){return p=p!=null?p.concat([l]):null,rm(4,4,Zw.bind(null,c,l),p)}function qv(){}function t5(l,c){var p=zr();c=c===void 0?null:c;var _=p.memoizedState;return _!==null&&c!==null&&Vv(c,_[1])?_[0]:(p.memoizedState=[l,c],l)}function n5(l,c){var p=zr();c=c===void 0?null:c;var _=p.memoizedState;return _!==null&&c!==null&&Vv(c,_[1])?_[0]:(l=l(),p.memoizedState=[l,c],l)}function i5(l,c,p){return uc&21?(ls(p,c)||(p=bw(),qt.lanes|=p,hc|=p,l.baseState=!0),c):(l.baseState&&(l.baseState=!1,Ui=!0),l.memoizedState=p)}function kP(l,c){var p=gt;gt=p!==0&&4>p?p:4,l(!0);var _=Uv.transition;Uv.transition={};try{l(!1),c()}finally{gt=p,Uv.transition=_}}function r5(){return zr().memoizedState}function TP(l,c,p){var _=Ba(l);if(p={lane:_,action:p,hasEagerState:!1,eagerState:null,next:null},s5(l))o5(c,p);else if(p=Dw(l,c,p,_),p!==null){var w=gi();jr(p,l,_,w),a5(p,c,_)}}function MP(l,c,p){var _=Ba(l),w={lane:_,action:p,hasEagerState:!1,eagerState:null,next:null};if(s5(l))o5(c,w);else{var P=l.alternate;if(l.lanes===0&&(P===null||P.lanes===0)&&(P=c.lastRenderedReducer,P!==null))try{var O=c.lastRenderedState,B=P(O,p);if(w.hasEagerState=!0,w.eagerState=B,ls(B,O)){var $=c.interleaved;$===null?(w.next=w,Ov(c)):(w.next=$.next,$.next=w),c.interleaved=w;return}}catch{}finally{}p=Dw(l,c,w,_),p!==null&&(w=gi(),jr(p,l,_,w),a5(p,c,_))}}function s5(l){var c=l.alternate;return l===qt||c!==null&&c===qt}function o5(l,c){Cf=nm=!0;var p=l.pending;p===null?c.next=c:(c.next=p.next,p.next=c),l.pending=c}function a5(l,c,p){if(p&4194240){var _=c.lanes;_&=l.pendingLanes,p|=_,c.lanes=p,bv(l,p)}}var sm={readContext:Dr,useCallback:di,useContext:di,useEffect:di,useImperativeHandle:di,useInsertionEffect:di,useLayoutEffect:di,useMemo:di,useReducer:di,useRef:di,useState:di,useDebugValue:di,useDeferredValue:di,useTransition:di,useMutableSource:di,useSyncExternalStore:di,useId:di,unstable_isNewReconciler:!1},RP={readContext:Dr,useCallback:function(l,c){return Ys().memoizedState=[l,c===void 0?null:c],l},useContext:Dr,useEffect:qw,useImperativeHandle:function(l,c,p){return p=p!=null?p.concat([l]):null,im(4194308,4,Zw.bind(null,c,l),p)},useLayoutEffect:function(l,c){return im(4194308,4,l,c)},useInsertionEffect:function(l,c){return im(4,2,l,c)},useMemo:function(l,c){var p=Ys();return c=c===void 0?null:c,l=l(),p.memoizedState=[l,c],l},useReducer:function(l,c,p){var _=Ys();return c=p!==void 0?p(c):c,_.memoizedState=_.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},_.queue=l,l=l.dispatch=TP.bind(null,qt,l),[_.memoizedState,l]},useRef:function(l){var c=Ys();return l={current:l},c.memoizedState=l},useState:Yw,useDebugValue:qv,useDeferredValue:function(l){return Ys().memoizedState=l},useTransition:function(){var l=Yw(!1),c=l[0];return l=kP.bind(null,l[1]),Ys().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,p){var _=qt,w=Ys();if(Ut){if(p===void 0)throw Error(o(407));p=p()}else{if(p=c(),Hn===null)throw Error(o(349));uc&30||Uw(_,c,p)}w.memoizedState=p;var P={value:p,getSnapshot:c};return w.queue=P,qw(Ww.bind(null,_,P,l),[l]),_.flags|=2048,Tf(9,Vw.bind(null,_,P,p,c),void 0,null),p},useId:function(){var l=Ys(),c=Hn.identifierPrefix;if(Ut){var p=Ro,_=Mo;p=(_&~(1<<32-lr(_)-1)).toString(32)+p,c=":"+c+"R"+p,p=Pf++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=PP++,c=":"+c+"r"+p.toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},LP={readContext:Dr,useCallback:t5,useContext:Dr,useEffect:Kv,useImperativeHandle:e5,useInsertionEffect:Qw,useLayoutEffect:Jw,useMemo:n5,useReducer:$v,useRef:Kw,useState:function(){return $v(kf)},useDebugValue:qv,useDeferredValue:function(l){var c=zr();return i5(c,Cn.memoizedState,l)},useTransition:function(){var l=$v(kf)[0],c=zr().memoizedState;return[l,c]},useMutableSource:Gw,useSyncExternalStore:Bw,useId:r5,unstable_isNewReconciler:!1},NP={readContext:Dr,useCallback:t5,useContext:Dr,useEffect:Kv,useImperativeHandle:e5,useInsertionEffect:Qw,useLayoutEffect:Jw,useMemo:n5,useReducer:Yv,useRef:Kw,useState:function(){return Yv(kf)},useDebugValue:qv,useDeferredValue:function(l){var c=zr();return Cn===null?c.memoizedState=l:i5(c,Cn.memoizedState,l)},useTransition:function(){var l=Yv(kf)[0],c=zr().memoizedState;return[l,c]},useMutableSource:Gw,useSyncExternalStore:Bw,useId:r5,unstable_isNewReconciler:!1};function us(l,c){if(l&&l.defaultProps){c=s({},c),l=l.defaultProps;for(var p in l)c[p]===void 0&&(c[p]=l[p]);return c}return c}function Qv(l,c,p,_){c=l.memoizedState,p=p(_,c),p=p==null?c:s({},c,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var om={isMounted:function(l){return(l=l._reactInternals)?z(l)===l:!1},enqueueSetState:function(l,c,p){l=l._reactInternals;var _=gi(),w=Ba(l),P=Lo(_,w);P.payload=c,p!=null&&(P.callback=p),c=ja(l,P,w),c!==null&&(jr(c,l,w,_),J0(c,l,w))},enqueueReplaceState:function(l,c,p){l=l._reactInternals;var _=gi(),w=Ba(l),P=Lo(_,w);P.tag=1,P.payload=c,p!=null&&(P.callback=p),c=ja(l,P,w),c!==null&&(jr(c,l,w,_),J0(c,l,w))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var p=gi(),_=Ba(l),w=Lo(p,_);w.tag=2,c!=null&&(w.callback=c),c=ja(l,w,_),c!==null&&(jr(c,l,_,p),J0(c,l,_))}};function l5(l,c,p,_,w,P,O){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(_,P,O):c.prototype&&c.prototype.isPureReactComponent?!Y0(p,_)||!Y0(w,P):!0}function c5(l,c,p){var _=!1,w=Bi,P=c.contextType;return typeof P=="object"&&P!==null?P=Dr(P):(w=_n(c)?hi:zt.current,_=c.contextTypes,P=(_=_!=null)?Lr(l,w):Bi),c=new c(p,P),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=om,l.stateNode=c,c._reactInternals=l,_&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=w,l.__reactInternalMemoizedMaskedChildContext=P),c}function u5(l,c,p,_){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,_),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,_),c.state!==l&&om.enqueueReplaceState(c,c.state,null)}function Jv(l,c,p,_){var w=l.stateNode;w.props=p,w.state=l.memoizedState,w.refs={},zv(l);var P=c.contextType;typeof P=="object"&&P!==null?w.context=Dr(P):(P=_n(c)?hi:zt.current,w.context=Lr(l,P)),w.state=l.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(Qv(l,c,P,p),w.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(c=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),c!==w.state&&om.enqueueReplaceState(w,w.state,null),Z0(l,p,w,_),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308)}function hh(l,c){try{var p="",_=c;do p+=CP(_),_=_.return;while(_);var w=p}catch(P){w=`
Error generating stack: `+P.message+`
`+P.stack}return{value:l,source:c,stack:w,digest:null}}function Zv(l,c,p){return{value:l,source:null,stack:p??null,digest:c??null}}function e_(l,c){try{console.error(c.value)}catch(p){setTimeout(function(){throw p})}}var FP=typeof WeakMap=="function"?WeakMap:Map;function h5(l,c,p){p=Lo(-1,p),p.tag=3,p.payload={element:null};var _=c.value;return p.callback=function(){xm||(xm=!0,x_=_),e_(l,c)},p}function d5(l,c,p){p=Lo(-1,p),p.tag=3;var _=l.type.getDerivedStateFromError;if(typeof _=="function"){var w=c.value;p.payload=function(){return _(w)},p.callback=function(){e_(l,c)}}var P=l.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(p.callback=function(){e_(l,c),typeof _!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var O=c.stack;this.componentDidCatch(c.value,{componentStack:O!==null?O:""})}),p}function f5(l,c,p){var _=l.pingCache;if(_===null){_=l.pingCache=new FP;var w=new Set;_.set(c,w)}else w=_.get(c),w===void 0&&(w=new Set,_.set(c,w));w.has(p)||(w.add(p),l=YP.bind(null,l,c,p),c.then(l,l))}function p5(l){do{var c;if((c=l.tag===13)&&(c=l.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return l;l=l.return}while(l!==null);return null}function g5(l,c,p,_,w){return l.mode&1?(l.flags|=65536,l.lanes=w,l):(l===c?l.flags|=65536:(l.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(c=Lo(-1,1),c.tag=2,ja(p,c,1))),p.lanes|=1),l)}var IP=a.ReactCurrentOwner,Ui=!1;function Ti(l,c,p,_){c.child=l===null?Fw(c,null,p,_):oh(c,l.child,p,_)}function m5(l,c,p,_,w){p=p.render;var P=c.ref;return lh(c,w),_=Wv(l,c,p,_,P,w),p=Xv(),l!==null&&!Ui?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~w,No(l,c,w)):(Ut&&p&&kv(c),c.flags|=1,Ti(l,c,_,w),c.child)}function y5(l,c,p,_,w){if(l===null){var P=p.type;return typeof P=="function"&&!C_(P)&&P.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(c.tag=15,c.type=P,v5(l,c,P,_,w)):(l=Cm(p.type,null,_,c,c.mode,w),l.ref=c.ref,l.return=c,c.child=l)}if(P=l.child,!(l.lanes&w)){var O=P.memoizedProps;if(p=p.compare,p=p!==null?p:Y0,p(O,_)&&l.ref===c.ref)return No(l,c,w)}return c.flags|=1,l=Va(P,_),l.ref=c.ref,l.return=c,c.child=l}function v5(l,c,p,_,w){if(l!==null){var P=l.memoizedProps;if(Y0(P,_)&&l.ref===c.ref)if(Ui=!1,c.pendingProps=_=P,(l.lanes&w)!==0)l.flags&131072&&(Ui=!0);else return c.lanes=l.lanes,No(l,c,w)}return t_(l,c,p,_,w)}function _5(l,c,p){var _=c.pendingProps,w=_.children,P=l!==null?l.memoizedState:null;if(_.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(fh,ur),ur|=p;else{if(!(p&1073741824))return l=P!==null?P.baseLanes|p:p,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:l,cachePool:null,transitions:null},c.updateQueue=null,ht(fh,ur),ur|=l,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=P!==null?P.baseLanes:p,ht(fh,ur),ur|=_}else P!==null?(_=P.baseLanes|p,c.memoizedState=null):_=p,ht(fh,ur),ur|=_;return Ti(l,c,w,p),c.child}function x5(l,c){var p=c.ref;(l===null&&p!==null||l!==null&&l.ref!==p)&&(c.flags|=512,c.flags|=2097152)}function t_(l,c,p,_,w){var P=_n(p)?hi:zt.current;return P=Lr(c,P),lh(c,w),p=Wv(l,c,p,_,P,w),_=Xv(),l!==null&&!Ui?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~w,No(l,c,w)):(Ut&&_&&kv(c),c.flags|=1,Ti(l,c,p,w),c.child)}function S5(l,c,p,_,w){if(_n(p)){var P=!0;on(c)}else P=!1;if(lh(c,w),c.stateNode===null)lm(l,c),c5(c,p,_),Jv(c,p,_,w),_=!0;else if(l===null){var O=c.stateNode,B=c.memoizedProps;O.props=B;var $=O.context,oe=p.contextType;typeof oe=="object"&&oe!==null?oe=Dr(oe):(oe=_n(p)?hi:zt.current,oe=Lr(c,oe));var xe=p.getDerivedStateFromProps,je=typeof xe=="function"||typeof O.getSnapshotBeforeUpdate=="function";je||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(B!==_||$!==oe)&&u5(c,O,_,oe),za=!1;var fe=c.memoizedState;O.state=fe,Z0(c,_,O,w),$=c.memoizedState,B!==_||fe!==$||Yt.current||za?(typeof xe=="function"&&(Qv(c,p,xe,_),$=c.memoizedState),(B=za||l5(c,p,B,_,fe,$,oe))?(je||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(c.flags|=4194308)):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=_,c.memoizedState=$),O.props=_,O.state=$,O.context=oe,_=B):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),_=!1)}else{O=c.stateNode,Ow(l,c),B=c.memoizedProps,oe=c.type===c.elementType?B:us(c.type,B),O.props=oe,je=c.pendingProps,fe=O.context,$=p.contextType,typeof $=="object"&&$!==null?$=Dr($):($=_n(p)?hi:zt.current,$=Lr(c,$));var jt=p.getDerivedStateFromProps;(xe=typeof jt=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(B!==je||fe!==$)&&u5(c,O,_,$),za=!1,fe=c.memoizedState,O.state=fe,Z0(c,_,O,w);var Lt=c.memoizedState;B!==je||fe!==Lt||Yt.current||za?(typeof jt=="function"&&(Qv(c,p,jt,_),Lt=c.memoizedState),(oe=za||l5(c,p,oe,_,fe,Lt,$)||!1)?(xe||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(_,Lt,$),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(_,Lt,$)),typeof O.componentDidUpdate=="function"&&(c.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof O.componentDidUpdate!="function"||B===l.memoizedProps&&fe===l.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||B===l.memoizedProps&&fe===l.memoizedState||(c.flags|=1024),c.memoizedProps=_,c.memoizedState=Lt),O.props=_,O.state=Lt,O.context=$,_=oe):(typeof O.componentDidUpdate!="function"||B===l.memoizedProps&&fe===l.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||B===l.memoizedProps&&fe===l.memoizedState||(c.flags|=1024),_=!1)}return n_(l,c,p,_,P,w)}function n_(l,c,p,_,w,P){x5(l,c);var O=(c.flags&128)!==0;if(!_&&!O)return w&&xn(c,p,!1),No(l,c,P);_=c.stateNode,IP.current=c;var B=O&&typeof p.getDerivedStateFromError!="function"?null:_.render();return c.flags|=1,l!==null&&O?(c.child=oh(c,l.child,null,P),c.child=oh(c,null,B,P)):Ti(l,c,B,P),c.memoizedState=_.state,w&&xn(c,p,!0),c.child}function w5(l){var c=l.stateNode;c.pendingContext?j0(l,c.pendingContext,c.pendingContext!==c.context):c.context&&j0(l,c.context,!1),jv(l,c.containerInfo)}function b5(l,c,p,_,w){return sh(),Lv(w),c.flags|=256,Ti(l,c,p,_),c.child}var i_={dehydrated:null,treeContext:null,retryLane:0};function r_(l){return{baseLanes:l,cachePool:null,transitions:null}}function E5(l,c,p){var _=c.pendingProps,w=Kt.current,P=!1,O=(c.flags&128)!==0,B;if((B=O)||(B=l!==null&&l.memoizedState===null?!1:(w&2)!==0),B?(P=!0,c.flags&=-129):(l===null||l.memoizedState!==null)&&(w|=1),ht(Kt,w&1),l===null)return Rv(c),l=c.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?(c.mode&1?kt(l)?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(O=_.children,l=_.fallback,P?(_=c.mode,P=c.child,O={mode:"hidden",children:O},!(_&1)&&P!==null?(P.childLanes=0,P.pendingProps=O):P=Pm(O,_,0,null),l=gc(l,_,p,null),P.return=c,l.return=c,P.sibling=l,c.child=P,c.child.memoizedState=r_(p),c.memoizedState=i_,l):s_(c,O));if(w=l.memoizedState,w!==null&&(B=w.dehydrated,B!==null))return DP(l,c,O,_,B,w,p);if(P){P=_.fallback,O=c.mode,w=l.child,B=w.sibling;var $={mode:"hidden",children:_.children};return!(O&1)&&c.child!==w?(_=c.child,_.childLanes=0,_.pendingProps=$,c.deletions=null):(_=Va(w,$),_.subtreeFlags=w.subtreeFlags&14680064),B!==null?P=Va(B,P):(P=gc(P,O,p,null),P.flags|=2),P.return=c,_.return=c,_.sibling=P,c.child=_,_=P,P=c.child,O=l.child.memoizedState,O=O===null?r_(p):{baseLanes:O.baseLanes|p,cachePool:null,transitions:O.transitions},P.memoizedState=O,P.childLanes=l.childLanes&~p,c.memoizedState=i_,_}return P=l.child,l=P.sibling,_=Va(P,{mode:"visible",children:_.children}),!(c.mode&1)&&(_.lanes=p),_.return=c,_.sibling=null,l!==null&&(p=c.deletions,p===null?(c.deletions=[l],c.flags|=16):p.push(l)),c.child=_,c.memoizedState=null,_}function s_(l,c){return c=Pm({mode:"visible",children:c},l.mode,0,null),c.return=l,l.child=c}function am(l,c,p,_){return _!==null&&Lv(_),oh(c,l.child,null,p),l=s_(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function DP(l,c,p,_,w,P,O){if(p)return c.flags&256?(c.flags&=-257,_=Zv(Error(o(422))),am(l,c,O,_)):c.memoizedState!==null?(c.child=l.child,c.flags|=128,null):(P=_.fallback,w=c.mode,_=Pm({mode:"visible",children:_.children},w,0,null),P=gc(P,w,O,null),P.flags|=2,_.return=c,P.return=c,_.sibling=P,c.child=_,c.mode&1&&oh(c,l.child,null,O),c.child.memoizedState=r_(O),c.memoizedState=i_,P);if(!(c.mode&1))return am(l,c,O,null);if(kt(w))return _=ci(w).digest,P=Error(o(419)),_=Zv(P,_,void 0),am(l,c,O,_);if(p=(O&l.childLanes)!==0,Ui||p){if(_=Hn,_!==null){switch(O&-O){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=w&(_.suspendedLanes|O)?0:w,w!==0&&w!==P.retryLane&&(P.retryLane=w,Xs(l,w),jr(_,l,w,-1))}return A_(),_=Zv(Error(o(421))),am(l,c,O,_)}return It(w)?(c.flags|=128,c.child=l.child,c=KP.bind(null,l),Po(w,c),null):(l=P.treeContext,Ee&&(Ir=Ia(w),cr=c,Ut=!0,cs=null,wf=!1,l!==null&&(Nr[Fr++]=Mo,Nr[Fr++]=Ro,Nr[Fr++]=ac,Mo=l.id,Ro=l.overflow,ac=c)),c=s_(c,_.children),c.flags|=4096,c)}function A5(l,c,p){l.lanes|=c;var _=l.alternate;_!==null&&(_.lanes|=c),Dv(l.return,c,p)}function o_(l,c,p,_,w){var P=l.memoizedState;P===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:_,tail:p,tailMode:w}:(P.isBackwards=c,P.rendering=null,P.renderingStartTime=0,P.last=_,P.tail=p,P.tailMode=w)}function C5(l,c,p){var _=c.pendingProps,w=_.revealOrder,P=_.tail;if(Ti(l,c,_.children,p),_=Kt.current,_&2)_=_&1|2,c.flags|=128;else{if(l!==null&&l.flags&128)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&A5(l,p,c);else if(l.tag===19)A5(l,p,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}_&=1}if(ht(Kt,_),!(c.mode&1))c.memoizedState=null;else switch(w){case"forwards":for(p=c.child,w=null;p!==null;)l=p.alternate,l!==null&&em(l)===null&&(w=p),p=p.sibling;p=w,p===null?(w=c.child,c.child=null):(w=p.sibling,p.sibling=null),o_(c,!1,w,p,P);break;case"backwards":for(p=null,w=c.child,c.child=null;w!==null;){if(l=w.alternate,l!==null&&em(l)===null){c.child=w;break}l=w.sibling,w.sibling=p,p=w,w=l}o_(c,!0,p,null,P);break;case"together":o_(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function lm(l,c){!(c.mode&1)&&l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2)}function No(l,c,p){if(l!==null&&(c.dependencies=l.dependencies),hc|=c.lanes,!(p&c.childLanes))return null;if(l!==null&&c.child!==l.child)throw Error(o(153));if(c.child!==null){for(l=c.child,p=Va(l,l.pendingProps),c.child=p,p.return=c;l.sibling!==null;)l=l.sibling,p=p.sibling=Va(l,l.pendingProps),p.return=c;p.sibling=null}return c.child}function OP(l,c,p){switch(c.tag){case 3:w5(c),sh();break;case 5:Hw(c);break;case 1:_n(c.type)&&on(c);break;case 4:jv(c,c.stateNode.containerInfo);break;case 10:Iw(c,c.type._context,c.memoizedProps.value);break;case 13:var _=c.memoizedState;if(_!==null)return _.dehydrated!==null?(ht(Kt,Kt.current&1),c.flags|=128,null):p&c.child.childLanes?E5(l,c,p):(ht(Kt,Kt.current&1),l=No(l,c,p),l!==null?l.sibling:null);ht(Kt,Kt.current&1);break;case 19:if(_=(p&c.childLanes)!==0,l.flags&128){if(_)return C5(l,c,p);c.flags|=128}var w=c.memoizedState;if(w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),ht(Kt,Kt.current),_)break;return null;case 22:case 23:return c.lanes=0,_5(l,c,p)}return No(l,c,p)}function Ks(l){l.flags|=4}function P5(l,c){if(l!==null&&l.child===c.child)return!0;if(c.flags&16)return!1;for(l=c.child;l!==null;){if(l.flags&12854||l.subtreeFlags&12854)return!1;l=l.sibling}return!0}var Mf,Rf,cm,um;if(Pe)Mf=function(l,c){for(var p=c.child;p!==null;){if(p.tag===5||p.tag===6)ae(l,p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Rf=function(){},cm=function(l,c,p,_,w){if(l=l.memoizedProps,l!==_){var P=c.stateNode,O=$s(Or.current);p=qe(P,p,l,_,w,O),(c.updateQueue=p)&&Ks(c)}},um=function(l,c,p,_){p!==_&&Ks(c)};else if(st){Mf=function(l,c,p,_){for(var w=c.child;w!==null;){if(w.tag===5){var P=w.stateNode;p&&_&&(P=De(P,w.type,w.memoizedProps,w)),ae(l,P)}else if(w.tag===6)P=w.stateNode,p&&_&&(P=Ie(P,w.memoizedProps,w)),ae(l,P);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)P=w.child,P!==null&&(P.return=w),Mf(l,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===c)break;for(;w.sibling===null;){if(w.return===null||w.return===c)return;w=w.return}w.sibling.return=w.return,w=w.sibling}};var k5=function(l,c,p,_){for(var w=c.child;w!==null;){if(w.tag===5){var P=w.stateNode;p&&_&&(P=De(P,w.type,w.memoizedProps,w)),Re(l,P)}else if(w.tag===6)P=w.stateNode,p&&_&&(P=Ie(P,w.memoizedProps,w)),Re(l,P);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)P=w.child,P!==null&&(P.return=w),k5(l,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===c)break;for(;w.sibling===null;){if(w.return===null||w.return===c)return;w=w.return}w.sibling.return=w.return,w=w.sibling}};Rf=function(l,c){var p=c.stateNode;if(!P5(l,c)){l=p.containerInfo;var _=ce(l);k5(_,c,!1,!1),p.pendingChildren=_,Ks(c),Le(l,_)}},cm=function(l,c,p,_,w){var P=l.stateNode,O=l.memoizedProps;if((l=P5(l,c))&&O===_)c.stateNode=P;else{var B=c.stateNode,$=$s(Or.current),oe=null;O!==_&&(oe=qe(B,p,O,_,w,$)),l&&oe===null?c.stateNode=P:(P=ye(P,oe,p,O,_,c,l,B),ge(P,p,_,w,$)&&Ks(c),c.stateNode=P,l?Ks(c):Mf(P,c,!1,!1))}},um=function(l,c,p,_){p!==_?(l=$s(ch.current),p=$s(Or.current),c.stateNode=Te(_,l,p,c),Ks(c)):c.stateNode=l.stateNode}}else Rf=function(){},cm=function(){},um=function(){};function Lf(l,c){if(!Ut)switch(l.tailMode){case"hidden":c=l.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var _=null;p!==null;)p.alternate!==null&&(_=p),p=p.sibling;_===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:_.sibling=null}}function fi(l){var c=l.alternate!==null&&l.alternate.child===l.child,p=0,_=0;if(c)for(var w=l.child;w!==null;)p|=w.lanes|w.childLanes,_|=w.subtreeFlags&14680064,_|=w.flags&14680064,w.return=l,w=w.sibling;else for(w=l.child;w!==null;)p|=w.lanes|w.childLanes,_|=w.subtreeFlags,_|=w.flags,w.return=l,w=w.sibling;return l.subtreeFlags|=_,l.childLanes=p,c}function zP(l,c,p){var _=c.pendingProps;switch(Tv(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fi(c),null;case 1:return _n(c.type)&&nh(),fi(c),null;case 3:return p=c.stateNode,uh(),pt(Yt),pt(zt),Bv(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&($0(c)?Ks(c):l===null||l.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,cs!==null&&(b_(cs),cs=null))),Rf(l,c),fi(c),null;case 5:Hv(c),p=$s(ch.current);var w=c.type;if(l!==null&&c.stateNode!=null)cm(l,c,w,_,p),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!_){if(c.stateNode===null)throw Error(o(166));return fi(c),null}if(l=$s(Or.current),$0(c)){if(!Ee)throw Error(o(175));l=I0(c.stateNode,c.type,c.memoizedProps,p,l,c,!wf),c.updateQueue=l,l!==null&&Ks(c)}else{var P=re(w,_,p,l,c);Mf(P,c,!1,!1),c.stateNode=P,ge(P,w,_,p,l)&&Ks(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return fi(c),null;case 6:if(l&&c.stateNode!=null)um(l,c,l.memoizedProps,_);else{if(typeof _!="string"&&c.stateNode===null)throw Error(o(166));if(l=$s(ch.current),p=$s(Or.current),$0(c)){if(!Ee)throw Error(o(176));if(l=c.stateNode,p=c.memoizedProps,(_=Rr(l,p,c,!wf))&&(w=cr,w!==null))switch(w.tag){case 3:O0(w.stateNode.containerInfo,l,p,(w.mode&1)!==0);break;case 5:z0(w.type,w.memoizedProps,w.stateNode,l,p,(w.mode&1)!==0)}_&&Ks(c)}else c.stateNode=Te(_,l,p,c)}return fi(c),null;case 13:if(pt(Kt),_=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Ut&&Ir!==null&&c.mode&1&&!(c.flags&128))Rw(),sh(),c.flags|=98560,w=!1;else if(w=$0(c),_!==null&&_.dehydrated!==null){if(l===null){if(!w)throw Error(o(318));if(!Ee)throw Error(o(344));if(w=c.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(o(317));Gs(w,c)}else sh(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;fi(c),w=!1}else cs!==null&&(b_(cs),cs=null),w=!0;if(!w)return c.flags&65536?c:null}return c.flags&128?(c.lanes=p,c):(p=_!==null,p!==(l!==null&&l.memoizedState!==null)&&p&&(c.child.flags|=8192,c.mode&1&&(l===null||Kt.current&1?Pn===0&&(Pn=3):A_())),c.updateQueue!==null&&(c.flags|=4),fi(c),null);case 4:return uh(),Rf(l,c),l===null&&Me(c.stateNode.containerInfo),fi(c),null;case 10:return Iv(c.type._context),fi(c),null;case 17:return _n(c.type)&&nh(),fi(c),null;case 19:if(pt(Kt),w=c.memoizedState,w===null)return fi(c),null;if(_=(c.flags&128)!==0,P=w.rendering,P===null)if(_)Lf(w,!1);else{if(Pn!==0||l!==null&&l.flags&128)for(l=c.child;l!==null;){if(P=em(l),P!==null){for(c.flags|=128,Lf(w,!1),l=P.updateQueue,l!==null&&(c.updateQueue=l,c.flags|=4),c.subtreeFlags=0,l=p,p=c.child;p!==null;)_=p,w=l,_.flags&=14680066,P=_.alternate,P===null?(_.childLanes=0,_.lanes=w,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=P.childLanes,_.lanes=P.lanes,_.child=P.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=P.memoizedProps,_.memoizedState=P.memoizedState,_.updateQueue=P.updateQueue,_.type=P.type,w=P.dependencies,_.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext}),p=p.sibling;return ht(Kt,Kt.current&1|2),c.child}l=l.sibling}w.tail!==null&&zn()>__&&(c.flags|=128,_=!0,Lf(w,!1),c.lanes=4194304)}else{if(!_)if(l=em(P),l!==null){if(c.flags|=128,_=!0,l=l.updateQueue,l!==null&&(c.updateQueue=l,c.flags|=4),Lf(w,!0),w.tail===null&&w.tailMode==="hidden"&&!P.alternate&&!Ut)return fi(c),null}else 2*zn()-w.renderingStartTime>__&&p!==1073741824&&(c.flags|=128,_=!0,Lf(w,!1),c.lanes=4194304);w.isBackwards?(P.sibling=c.child,c.child=P):(l=w.last,l!==null?l.sibling=P:c.child=P,w.last=P)}return w.tail!==null?(c=w.tail,w.rendering=c,w.tail=c.sibling,w.renderingStartTime=zn(),c.sibling=null,l=Kt.current,ht(Kt,_?l&1|2:l&1),c):(fi(c),null);case 22:case 23:return E_(),p=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==p&&(c.flags|=8192),p&&c.mode&1?ur&1073741824&&(fi(c),Pe&&c.subtreeFlags&6&&(c.flags|=8192)):fi(c),null;case 24:return null;case 25:return null}throw Error(o(156,c.tag))}function jP(l,c){switch(Tv(c),c.tag){case 1:return _n(c.type)&&nh(),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return uh(),pt(Yt),pt(zt),Bv(),l=c.flags,l&65536&&!(l&128)?(c.flags=l&-65537|128,c):null;case 5:return Hv(c),null;case 13:if(pt(Kt),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(o(340));sh()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return pt(Kt),null;case 4:return uh(),null;case 10:return Iv(c.type._context),null;case 22:case 23:return E_(),null;case 24:return null;default:return null}}var hm=!1,pi=!1,HP=typeof WeakSet=="function"?WeakSet:Set,ve=null;function dh(l,c){var p=l.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(_){Vt(l,c,_)}else p.current=null}function a_(l,c,p){try{p()}catch(_){Vt(l,c,_)}}var T5=!1;function GP(l,c){for(ie(l.containerInfo),ve=c;ve!==null;)if(l=ve,c=l.child,(l.subtreeFlags&1028)!==0&&c!==null)c.return=l,ve=c;else for(;ve!==null;){l=ve;try{var p=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var _=p.memoizedProps,w=p.memoizedState,P=l.stateNode,O=P.getSnapshotBeforeUpdate(l.elementType===l.type?_:us(l.type,_),w);P.__reactInternalSnapshotBeforeUpdate=O}break;case 3:Pe&&be(l.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(B){Vt(l,l.return,B)}if(c=l.sibling,c!==null){c.return=l.return,ve=c;break}ve=l.return}return p=T5,T5=!1,p}function Nf(l,c,p){var _=c.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var w=_=_.next;do{if((w.tag&l)===l){var P=w.destroy;w.destroy=void 0,P!==void 0&&a_(c,p,P)}w=w.next}while(w!==_)}}function dm(l,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&l)===l){var _=p.create;p.destroy=_()}p=p.next}while(p!==c)}}function l_(l){var c=l.ref;if(c!==null){var p=l.stateNode;switch(l.tag){case 5:l=ne(p);break;default:l=p}typeof c=="function"?c(l):c.current=l}}function M5(l){var c=l.alternate;c!==null&&(l.alternate=null,M5(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&fn(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function R5(l){return l.tag===5||l.tag===3||l.tag===4}function L5(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||R5(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function c_(l,c,p){var _=l.tag;if(_===5||_===6)l=l.stateNode,c?gv(p,l,c):as(p,l);else if(_!==4&&(l=l.child,l!==null))for(c_(l,c,p),l=l.sibling;l!==null;)c_(l,c,p),l=l.sibling}function u_(l,c,p){var _=l.tag;if(_===5||_===6)l=l.stateNode,c?sc(p,l,c):js(p,l);else if(_!==4&&(l=l.child,l!==null))for(u_(l,c,p),l=l.sibling;l!==null;)u_(l,c,p),l=l.sibling}var Jn=null,hs=!1;function qs(l,c,p){for(p=p.child;p!==null;)h_(l,c,p),p=p.sibling}function h_(l,c,p){if(Vs&&typeof Vs.onCommitFiberUnmount=="function")try{Vs.onCommitFiberUnmount(U0,p)}catch{}switch(p.tag){case 5:pi||dh(p,c);case 6:if(Pe){var _=Jn,w=hs;Jn=null,qs(l,c,p),Jn=_,hs=w,Jn!==null&&(hs?F0(Jn,p.stateNode):mv(Jn,p.stateNode))}else qs(l,c,p);break;case 18:Pe&&Jn!==null&&(hs?vv(Jn,p.stateNode):yv(Jn,p.stateNode));break;case 4:Pe?(_=Jn,w=hs,Jn=p.stateNode.containerInfo,hs=!0,qs(l,c,p),Jn=_,hs=w):(st&&(_=p.stateNode.containerInfo,w=ce(_),ke(_,w)),qs(l,c,p));break;case 0:case 11:case 14:case 15:if(!pi&&(_=p.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){w=_=_.next;do{var P=w,O=P.destroy;P=P.tag,O!==void 0&&(P&2||P&4)&&a_(p,c,O),w=w.next}while(w!==_)}qs(l,c,p);break;case 1:if(!pi&&(dh(p,c),_=p.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=p.memoizedProps,_.state=p.memoizedState,_.componentWillUnmount()}catch(B){Vt(p,c,B)}qs(l,c,p);break;case 21:qs(l,c,p);break;case 22:p.mode&1?(pi=(_=pi)||p.memoizedState!==null,qs(l,c,p),pi=_):qs(l,c,p);break;default:qs(l,c,p)}}function N5(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var p=l.stateNode;p===null&&(p=l.stateNode=new HP),c.forEach(function(_){var w=qP.bind(null,l,_);p.has(_)||(p.add(_),_.then(w,w))})}}function ds(l,c){var p=c.deletions;if(p!==null)for(var _=0;_<p.length;_++){var w=p[_];try{var P=l,O=c;if(Pe){var B=O;e:for(;B!==null;){switch(B.tag){case 5:Jn=B.stateNode,hs=!1;break e;case 3:Jn=B.stateNode.containerInfo,hs=!0;break e;case 4:Jn=B.stateNode.containerInfo,hs=!0;break e}B=B.return}if(Jn===null)throw Error(o(160));h_(P,O,w),Jn=null,hs=!1}else h_(P,O,w);var $=w.alternate;$!==null&&($.return=null),w.return=null}catch(oe){Vt(w,c,oe)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)F5(c,l),c=c.sibling}function F5(l,c){var p=l.alternate,_=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(ds(c,l),Qs(l),_&4){try{Nf(3,l,l.return),dm(3,l)}catch(fe){Vt(l,l.return,fe)}try{Nf(5,l,l.return)}catch(fe){Vt(l,l.return,fe)}}break;case 1:ds(c,l),Qs(l),_&512&&p!==null&&dh(p,p.return);break;case 5:if(ds(c,l),Qs(l),_&512&&p!==null&&dh(p,p.return),Pe){if(l.flags&32){var w=l.stateNode;try{Q(w)}catch(fe){Vt(l,l.return,fe)}}if(_&4&&(w=l.stateNode,w!=null)){var P=l.memoizedProps;if(p=p!==null?p.memoizedProps:P,_=l.type,c=l.updateQueue,l.updateQueue=null,c!==null)try{pv(w,c,_,p,P,l)}catch(fe){Vt(l,l.return,fe)}}}break;case 6:if(ds(c,l),Qs(l),_&4&&Pe){if(l.stateNode===null)throw Error(o(162));w=l.stateNode,P=l.memoizedProps,p=p!==null?p.memoizedProps:P;try{rc(w,p,P)}catch(fe){Vt(l,l.return,fe)}}break;case 3:if(ds(c,l),Qs(l),_&4){if(Pe&&Ee&&p!==null&&p.memoizedState.isDehydrated)try{Bs(c.containerInfo)}catch(fe){Vt(l,l.return,fe)}if(st){w=c.containerInfo,P=c.pendingChildren;try{ke(w,P)}catch(fe){Vt(l,l.return,fe)}}}break;case 4:if(ds(c,l),Qs(l),_&4&&st){P=l.stateNode,w=P.containerInfo,P=P.pendingChildren;try{ke(w,P)}catch(fe){Vt(l,l.return,fe)}}break;case 13:ds(c,l),Qs(l),w=l.child,w.flags&8192&&(P=w.memoizedState!==null,w.stateNode.isHidden=P,!P||w.alternate!==null&&w.alternate.memoizedState!==null||(v_=zn())),_&4&&N5(l);break;case 22:var O=p!==null&&p.memoizedState!==null;if(l.mode&1?(pi=(p=pi)||O,ds(c,l),pi=p):ds(c,l),Qs(l),_&8192){if(p=l.memoizedState!==null,(l.stateNode.isHidden=p)&&!O&&l.mode&1)for(ve=l,_=l.child;_!==null;){for(c=ve=_;ve!==null;){O=ve;var B=O.child;switch(O.tag){case 0:case 11:case 14:case 15:Nf(4,O,O.return);break;case 1:dh(O,O.return);var $=O.stateNode;if(typeof $.componentWillUnmount=="function"){var oe=O,xe=O.return;try{var je=oe;$.props=je.memoizedProps,$.state=je.memoizedState,$.componentWillUnmount()}catch(fe){Vt(oe,xe,fe)}}break;case 5:dh(O,O.return);break;case 22:if(O.memoizedState!==null){O5(c);continue}}B!==null?(B.return=O,ve=B):O5(c)}_=_.sibling}if(Pe){e:if(_=null,Pe)for(c=l;;){if(c.tag===5){if(_===null){_=c;try{w=c.stateNode,p?ct(w):Be(c.stateNode,c.memoizedProps)}catch(fe){Vt(l,l.return,fe)}}}else if(c.tag===6){if(_===null)try{P=c.stateNode,p?St(P):le(P,c.memoizedProps)}catch(fe){Vt(l,l.return,fe)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;_===c&&(_=null),c=c.return}_===c&&(_=null),c.sibling.return=c.return,c=c.sibling}}}break;case 19:ds(c,l),Qs(l),_&4&&N5(l);break;case 21:break;default:ds(c,l),Qs(l)}}function Qs(l){var c=l.flags;if(c&2){try{if(Pe){e:{for(var p=l.return;p!==null;){if(R5(p)){var _=p;break e}p=p.return}throw Error(o(160))}switch(_.tag){case 5:var w=_.stateNode;_.flags&32&&(Q(w),_.flags&=-33);var P=L5(l);u_(l,P,w);break;case 3:case 4:var O=_.stateNode.containerInfo,B=L5(l);c_(l,B,O);break;default:throw Error(o(161))}}}catch($){Vt(l,l.return,$)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function BP(l,c,p){ve=l,I5(l)}function I5(l,c,p){for(var _=(l.mode&1)!==0;ve!==null;){var w=ve,P=w.child;if(w.tag===22&&_){var O=w.memoizedState!==null||hm;if(!O){var B=w.alternate,$=B!==null&&B.memoizedState!==null||pi;B=hm;var oe=pi;if(hm=O,(pi=$)&&!oe)for(ve=w;ve!==null;)O=ve,$=O.child,O.tag===22&&O.memoizedState!==null?z5(w):$!==null?($.return=O,ve=$):z5(w);for(;P!==null;)ve=P,I5(P),P=P.sibling;ve=w,hm=B,pi=oe}D5(l)}else w.subtreeFlags&8772&&P!==null?(P.return=w,ve=P):D5(l)}}function D5(l){for(;ve!==null;){var c=ve;if(c.flags&8772){var p=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:pi||dm(5,c);break;case 1:var _=c.stateNode;if(c.flags&4&&!pi)if(p===null)_.componentDidMount();else{var w=c.elementType===c.type?p.memoizedProps:us(c.type,p.memoizedProps);_.componentDidUpdate(w,p.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var P=c.updateQueue;P!==null&&jw(c,P,_);break;case 3:var O=c.updateQueue;if(O!==null){if(p=null,c.child!==null)switch(c.child.tag){case 5:p=ne(c.child.stateNode);break;case 1:p=c.child.stateNode}jw(c,O,p)}break;case 5:var B=c.stateNode;p===null&&c.flags&4&&fv(B,c.type,c.memoizedProps,c);break;case 6:break;case 4:break;case 12:break;case 13:if(Ee&&c.memoizedState===null){var $=c.alternate;if($!==null){var oe=$.memoizedState;if(oe!==null){var xe=oe.dehydrated;xe!==null&&Us(xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}pi||c.flags&512&&l_(c)}catch(je){Vt(c,c.return,je)}}if(c===l){ve=null;break}if(p=c.sibling,p!==null){p.return=c.return,ve=p;break}ve=c.return}}function O5(l){for(;ve!==null;){var c=ve;if(c===l){ve=null;break}var p=c.sibling;if(p!==null){p.return=c.return,ve=p;break}ve=c.return}}function z5(l){for(;ve!==null;){var c=ve;try{switch(c.tag){case 0:case 11:case 15:var p=c.return;try{dm(4,c)}catch($){Vt(c,p,$)}break;case 1:var _=c.stateNode;if(typeof _.componentDidMount=="function"){var w=c.return;try{_.componentDidMount()}catch($){Vt(c,w,$)}}var P=c.return;try{l_(c)}catch($){Vt(c,P,$)}break;case 5:var O=c.return;try{l_(c)}catch($){Vt(c,O,$)}}}catch($){Vt(c,c.return,$)}if(c===l){ve=null;break}var B=c.sibling;if(B!==null){B.return=c.return,ve=B;break}ve=c.return}}var fm=0,pm=1,gm=2,mm=3,ym=4;if(typeof Symbol=="function"&&Symbol.for){var Ff=Symbol.for;fm=Ff("selector.component"),pm=Ff("selector.has_pseudo_class"),gm=Ff("selector.role"),mm=Ff("selector.test_id"),ym=Ff("selector.text")}function d_(l){var c=nt(l);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(o(364));return c}if(l=ar(l),l===null)throw Error(o(362));return l.stateNode.current}function f_(l,c){switch(c.$$typeof){case fm:if(l.type===c.value)return!0;break;case pm:e:{c=c.value,l=[l,0];for(var p=0;p<l.length;){var _=l[p++],w=l[p++],P=c[w];if(_.tag!==5||!Co(_)){for(;P!=null&&f_(_,P);)w++,P=c[w];if(w===c.length){c=!0;break e}else for(_=_.child;_!==null;)l.push(_,w),_=_.sibling}}c=!1}return c;case gm:if(l.tag===5&&os(l.stateNode,c.value))return!0;break;case ym:if((l.tag===5||l.tag===6)&&(l=_f(l),l!==null&&0<=l.indexOf(c.value)))return!0;break;case mm:if(l.tag===5&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function p_(l){switch(l.$$typeof){case fm:return"<"+(I(l.value)||"Unknown")+">";case pm:return":has("+(p_(l)||"")+")";case gm:return'[role="'+l.value+'"]';case ym:return'"'+l.value+'"';case mm:return'[data-testname="'+l.value+'"]';default:throw Error(o(365))}}function j5(l,c){var p=[];l=[l,0];for(var _=0;_<l.length;){var w=l[_++],P=l[_++],O=c[P];if(w.tag!==5||!Co(w)){for(;O!=null&&f_(w,O);)P++,O=c[P];if(P===c.length)p.push(w);else for(w=w.child;w!==null;)l.push(w,P),w=w.sibling}}return p}function g_(l,c){if(!rs)throw Error(o(363));l=d_(l),l=j5(l,c),c=[],l=Array.from(l);for(var p=0;p<l.length;){var _=l[p++];if(_.tag===5)Co(_)||c.push(_.stateNode);else for(_=_.child;_!==null;)l.push(_),_=_.sibling}return c}var UP=Math.ceil,vm=a.ReactCurrentDispatcher,m_=a.ReactCurrentOwner,pn=a.ReactCurrentBatchConfig,Qe=0,Hn=null,Sn=null,Zn=0,ur=0,fh=ui(0),Pn=0,If=null,hc=0,_m=0,y_=0,Df=null,Vi=null,v_=0,__=1/0,Fo=null;function ph(){__=zn()+500}var xm=!1,x_=null,Ha=null,Sm=!1,Ga=null,wm=0,Of=0,S_=null,bm=-1,Em=0;function gi(){return Qe&6?zn():bm!==-1?bm:bm=zn()}function Ba(l){return l.mode&1?Qe&2&&Zn!==0?Zn&-Zn:AP.transition!==null?(Em===0&&(Em=bw()),Em):(l=gt,l!==0?l:xt()):1}function jr(l,c,p,_){if(50<Of)throw Of=0,S_=null,Error(o(185));Sf(l,p,_),(!(Qe&2)||l!==Hn)&&(l===Hn&&(!(Qe&2)&&(_m|=p),Pn===4&&Ua(l,Zn)),Wi(l,_),p===1&&Qe===0&&!(c.mode&1)&&(ph(),V0&&Ws()))}function Wi(l,c){var p=l.callbackNode;mP(l,c);var _=B0(l,l===Hn?Zn:0);if(_===0)p!==null&&Aw(p),l.callbackNode=null,l.callbackPriority=0;else if(c=_&-_,l.callbackPriority!==c){if(p!=null&&Aw(p),c===1)l.tag===0?EP(G5.bind(null,l)):Cw(G5.bind(null,l)),qn?ic(function(){!(Qe&6)&&Ws()}):Ev(Av,Ws),p=null;else{switch(Ew(_)){case 1:p=Av;break;case 4:p=xP;break;case 16:p=Cv;break;case 536870912:p=SP;break;default:p=Cv}p=q5(p,H5.bind(null,l))}l.callbackPriority=c,l.callbackNode=p}}function H5(l,c){if(bm=-1,Em=0,Qe&6)throw Error(o(327));var p=l.callbackNode;if(pc()&&l.callbackNode!==p)return null;var _=B0(l,l===Hn?Zn:0);if(_===0)return null;if(_&30||_&l.expiredLanes||c)c=Am(l,_);else{c=_;var w=Qe;Qe|=2;var P=V5();(Hn!==l||Zn!==c)&&(Fo=null,ph(),dc(l,c));do try{XP();break}catch(B){U5(l,B)}while(!0);Fv(),vm.current=P,Qe=w,Sn!==null?c=0:(Hn=null,Zn=0,c=Pn)}if(c!==0){if(c===2&&(w=Sv(l),w!==0&&(_=w,c=w_(l,w))),c===1)throw p=If,dc(l,0),Ua(l,_),Wi(l,zn()),p;if(c===6)Ua(l,_);else{if(w=l.current.alternate,!(_&30)&&!VP(w)&&(c=Am(l,_),c===2&&(P=Sv(l),P!==0&&(_=P,c=w_(l,P))),c===1))throw p=If,dc(l,0),Ua(l,_),Wi(l,zn()),p;switch(l.finishedWork=w,l.finishedLanes=_,c){case 0:case 1:throw Error(o(345));case 2:fc(l,Vi,Fo);break;case 3:if(Ua(l,_),(_&130023424)===_&&(c=v_+500-zn(),10<c)){if(B0(l,0)!==0)break;if(w=l.suspendedLanes,(w&_)!==_){gi(),l.pingedLanes|=l.suspendedLanes&w;break}l.timeoutHandle=H(fc.bind(null,l,Vi,Fo),c);break}fc(l,Vi,Fo);break;case 4:if(Ua(l,_),(_&4194240)===_)break;for(c=l.eventTimes,w=-1;0<_;){var O=31-lr(_);P=1<<O,O=c[O],O>w&&(w=O),_&=~P}if(_=w,_=zn()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*UP(_/1960))-_,10<_){l.timeoutHandle=H(fc.bind(null,l,Vi,Fo),_);break}fc(l,Vi,Fo);break;case 5:fc(l,Vi,Fo);break;default:throw Error(o(329))}}}return Wi(l,zn()),l.callbackNode===p?H5.bind(null,l):null}function w_(l,c){var p=Df;return l.current.memoizedState.isDehydrated&&(dc(l,c).flags|=256),l=Am(l,c),l!==2&&(c=Vi,Vi=p,c!==null&&b_(c)),l}function b_(l){Vi===null?Vi=l:Vi.push.apply(Vi,l)}function VP(l){for(var c=l;;){if(c.flags&16384){var p=c.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var _=0;_<p.length;_++){var w=p[_],P=w.getSnapshot;w=w.value;try{if(!ls(P(),w))return!1}catch{return!1}}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ua(l,c){for(c&=~y_,c&=~_m,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var p=31-lr(c),_=1<<p;l[p]=-1,c&=~_}}function G5(l){if(Qe&6)throw Error(o(327));pc();var c=B0(l,0);if(!(c&1))return Wi(l,zn()),null;var p=Am(l,c);if(l.tag!==0&&p===2){var _=Sv(l);_!==0&&(c=_,p=w_(l,_))}if(p===1)throw p=If,dc(l,0),Ua(l,c),Wi(l,zn()),p;if(p===6)throw Error(o(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,fc(l,Vi,Fo),Wi(l,zn()),null}function B5(l){Ga!==null&&Ga.tag===0&&!(Qe&6)&&pc();var c=Qe;Qe|=1;var p=pn.transition,_=gt;try{if(pn.transition=null,gt=1,l)return l()}finally{gt=_,pn.transition=p,Qe=c,!(Qe&6)&&Ws()}}function E_(){ur=fh.current,pt(fh)}function dc(l,c){l.finishedWork=null,l.finishedLanes=0;var p=l.timeoutHandle;if(p!==de&&(l.timeoutHandle=de,te(p)),Sn!==null)for(p=Sn.return;p!==null;){var _=p;switch(Tv(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&nh();break;case 3:uh(),pt(Yt),pt(zt),Bv();break;case 5:Hv(_);break;case 4:uh();break;case 13:pt(Kt);break;case 19:pt(Kt);break;case 10:Iv(_.type._context);break;case 22:case 23:E_()}p=p.return}if(Hn=l,Sn=l=Va(l.current,null),Zn=ur=c,Pn=0,If=null,y_=_m=hc=0,Vi=Df=null,cc!==null){for(c=0;c<cc.length;c++)if(p=cc[c],_=p.interleaved,_!==null){p.interleaved=null;var w=_.next,P=p.pending;if(P!==null){var O=P.next;P.next=w,_.next=O}p.pending=_}cc=null}return l}function U5(l,c){do{var p=Sn;try{if(Fv(),tm.current=sm,nm){for(var _=qt.memoizedState;_!==null;){var w=_.queue;w!==null&&(w.pending=null),_=_.next}nm=!1}if(uc=0,jn=Cn=qt=null,Cf=!1,Pf=0,m_.current=null,p===null||p.return===null){Pn=1,If=c,Sn=null;break}e:{var P=l,O=p.return,B=p,$=c;if(c=Zn,B.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var oe=$,xe=B,je=xe.tag;if(!(xe.mode&1)&&(je===0||je===11||je===15)){var fe=xe.alternate;fe?(xe.updateQueue=fe.updateQueue,xe.memoizedState=fe.memoizedState,xe.lanes=fe.lanes):(xe.updateQueue=null,xe.memoizedState=null)}var jt=p5(O);if(jt!==null){jt.flags&=-257,g5(jt,O,B,P,c),jt.mode&1&&f5(P,oe,c),c=jt,$=oe;var Lt=c.updateQueue;if(Lt===null){var Xi=new Set;Xi.add($),c.updateQueue=Xi}else Lt.add($);break e}else{if(!(c&1)){f5(P,oe,c),A_();break e}$=Error(o(426))}}else if(Ut&&B.mode&1){var Io=p5(O);if(Io!==null){!(Io.flags&65536)&&(Io.flags|=256),g5(Io,O,B,P,c),Lv(hh($,B));break e}}P=$=hh($,B),Pn!==4&&(Pn=2),Df===null?Df=[P]:Df.push(P),P=O;do{switch(P.tag){case 3:P.flags|=65536,c&=-c,P.lanes|=c;var X=h5(P,$,c);zw(P,X);break e;case 1:B=$;var V=P.type,q=P.stateNode;if(!(P.flags&128)&&(typeof V.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Ha===null||!Ha.has(q)))){P.flags|=65536,c&=-c,P.lanes|=c;var pe=d5(P,B,c);zw(P,pe);break e}}P=P.return}while(P!==null)}X5(p)}catch(Ce){c=Ce,Sn===p&&p!==null&&(Sn=p=p.return);continue}break}while(!0)}function V5(){var l=vm.current;return vm.current=sm,l===null?sm:l}function A_(){(Pn===0||Pn===3||Pn===2)&&(Pn=4),Hn===null||!(hc&268435455)&&!(_m&268435455)||Ua(Hn,Zn)}function Am(l,c){var p=Qe;Qe|=2;var _=V5();(Hn!==l||Zn!==c)&&(Fo=null,dc(l,c));do try{WP();break}catch(w){U5(l,w)}while(!0);if(Fv(),Qe=p,vm.current=_,Sn!==null)throw Error(o(261));return Hn=null,Zn=0,Pn}function WP(){for(;Sn!==null;)W5(Sn)}function XP(){for(;Sn!==null&&!vP();)W5(Sn)}function W5(l){var c=K5(l.alternate,l,ur);l.memoizedProps=l.pendingProps,c===null?X5(l):Sn=c,m_.current=null}function X5(l){var c=l;do{var p=c.alternate;if(l=c.return,c.flags&32768){if(p=jP(p,c),p!==null){p.flags&=32767,Sn=p;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{Pn=6,Sn=null;return}}else if(p=zP(p,c,ur),p!==null){Sn=p;return}if(c=c.sibling,c!==null){Sn=c;return}Sn=c=l}while(c!==null);Pn===0&&(Pn=5)}function fc(l,c,p){var _=gt,w=pn.transition;try{pn.transition=null,gt=1,$P(l,c,p,_)}finally{pn.transition=w,gt=_}return null}function $P(l,c,p,_){do pc();while(Ga!==null);if(Qe&6)throw Error(o(327));p=l.finishedWork;var w=l.finishedLanes;if(p===null)return null;if(l.finishedWork=null,l.finishedLanes=0,p===l.current)throw Error(o(177));l.callbackNode=null,l.callbackPriority=0;var P=p.lanes|p.childLanes;if(yP(l,P),l===Hn&&(Sn=Hn=null,Zn=0),!(p.subtreeFlags&2064)&&!(p.flags&2064)||Sm||(Sm=!0,q5(Cv,function(){return pc(),null})),P=(p.flags&15990)!==0,p.subtreeFlags&15990||P){P=pn.transition,pn.transition=null;var O=gt;gt=1;var B=Qe;Qe|=4,m_.current=null,GP(l,p),F5(p,l),ee(l.containerInfo),l.current=p,BP(p),_P(),Qe=B,gt=O,pn.transition=P}else l.current=p;if(Sm&&(Sm=!1,Ga=l,wm=w),P=l.pendingLanes,P===0&&(Ha=null),wP(p.stateNode),Wi(l,zn()),c!==null)for(_=l.onRecoverableError,p=0;p<c.length;p++)w=c[p],_(w.value,{componentStack:w.stack,digest:w.digest});if(xm)throw xm=!1,l=x_,x_=null,l;return wm&1&&l.tag!==0&&pc(),P=l.pendingLanes,P&1?l===S_?Of++:(Of=0,S_=l):Of=0,Ws(),null}function pc(){if(Ga!==null){var l=Ew(wm),c=pn.transition,p=gt;try{if(pn.transition=null,gt=16>l?16:l,Ga===null)var _=!1;else{if(l=Ga,Ga=null,wm=0,Qe&6)throw Error(o(331));var w=Qe;for(Qe|=4,ve=l.current;ve!==null;){var P=ve,O=P.child;if(ve.flags&16){var B=P.deletions;if(B!==null){for(var $=0;$<B.length;$++){var oe=B[$];for(ve=oe;ve!==null;){var xe=ve;switch(xe.tag){case 0:case 11:case 15:Nf(8,xe,P)}var je=xe.child;if(je!==null)je.return=xe,ve=je;else for(;ve!==null;){xe=ve;var fe=xe.sibling,jt=xe.return;if(M5(xe),xe===oe){ve=null;break}if(fe!==null){fe.return=jt,ve=fe;break}ve=jt}}}var Lt=P.alternate;if(Lt!==null){var Xi=Lt.child;if(Xi!==null){Lt.child=null;do{var Io=Xi.sibling;Xi.sibling=null,Xi=Io}while(Xi!==null)}}ve=P}}if(P.subtreeFlags&2064&&O!==null)O.return=P,ve=O;else e:for(;ve!==null;){if(P=ve,P.flags&2048)switch(P.tag){case 0:case 11:case 15:Nf(9,P,P.return)}var X=P.sibling;if(X!==null){X.return=P.return,ve=X;break e}ve=P.return}}var V=l.current;for(ve=V;ve!==null;){O=ve;var q=O.child;if(O.subtreeFlags&2064&&q!==null)q.return=O,ve=q;else e:for(O=V;ve!==null;){if(B=ve,B.flags&2048)try{switch(B.tag){case 0:case 11:case 15:dm(9,B)}}catch(Ce){Vt(B,B.return,Ce)}if(B===O){ve=null;break e}var pe=B.sibling;if(pe!==null){pe.return=B.return,ve=pe;break e}ve=B.return}}if(Qe=w,Ws(),Vs&&typeof Vs.onPostCommitFiberRoot=="function")try{Vs.onPostCommitFiberRoot(U0,l)}catch{}_=!0}return _}finally{gt=p,pn.transition=c}}return!1}function $5(l,c,p){c=hh(p,c),c=h5(l,c,1),l=ja(l,c,1),c=gi(),l!==null&&(Sf(l,1,c),Wi(l,c))}function Vt(l,c,p){if(l.tag===3)$5(l,l,p);else for(;c!==null;){if(c.tag===3){$5(c,l,p);break}else if(c.tag===1){var _=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Ha===null||!Ha.has(_))){l=hh(p,l),l=d5(c,l,1),c=ja(c,l,1),l=gi(),c!==null&&(Sf(c,1,l),Wi(c,l));break}}c=c.return}}function YP(l,c,p){var _=l.pingCache;_!==null&&_.delete(c),c=gi(),l.pingedLanes|=l.suspendedLanes&p,Hn===l&&(Zn&p)===p&&(Pn===4||Pn===3&&(Zn&130023424)===Zn&&500>zn()-v_?dc(l,0):y_|=p),Wi(l,c)}function Y5(l,c){c===0&&(l.mode&1?(c=G0,G0<<=1,!(G0&130023424)&&(G0=4194304)):c=1);var p=gi();l=Xs(l,c),l!==null&&(Sf(l,c,p),Wi(l,p))}function KP(l){var c=l.memoizedState,p=0;c!==null&&(p=c.retryLane),Y5(l,p)}function qP(l,c){var p=0;switch(l.tag){case 13:var _=l.stateNode,w=l.memoizedState;w!==null&&(p=w.retryLane);break;case 19:_=l.stateNode;break;default:throw Error(o(314))}_!==null&&_.delete(c),Y5(l,p)}var K5;K5=function(l,c,p){if(l!==null)if(l.memoizedProps!==c.pendingProps||Yt.current)Ui=!0;else{if(!(l.lanes&p)&&!(c.flags&128))return Ui=!1,OP(l,c,p);Ui=!!(l.flags&131072)}else Ui=!1,Ut&&c.flags&1048576&&Pw(c,X0,c.index);switch(c.lanes=0,c.tag){case 2:var _=c.type;lm(l,c),l=c.pendingProps;var w=Lr(c,zt.current);lh(c,p),w=Wv(null,c,_,l,w,p);var P=Xv();return c.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,_n(_)?(P=!0,on(c)):P=!1,c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,zv(c),w.updater=om,c.stateNode=w,w._reactInternals=c,Jv(c,_,l,p),c=n_(null,c,_,!0,P,p)):(c.tag=0,Ut&&P&&kv(c),Ti(null,c,w,p),c=c.child),c;case 16:_=c.elementType;e:{switch(lm(l,c),l=c.pendingProps,w=_._init,_=w(_._payload),c.type=_,w=c.tag=JP(_),l=us(_,l),w){case 0:c=t_(null,c,_,l,p);break e;case 1:c=S5(null,c,_,l,p);break e;case 11:c=m5(null,c,_,l,p);break e;case 14:c=y5(null,c,_,us(_.type,l),p);break e}throw Error(o(306,_,""))}return c;case 0:return _=c.type,w=c.pendingProps,w=c.elementType===_?w:us(_,w),t_(l,c,_,w,p);case 1:return _=c.type,w=c.pendingProps,w=c.elementType===_?w:us(_,w),S5(l,c,_,w,p);case 3:e:{if(w5(c),l===null)throw Error(o(387));_=c.pendingProps,P=c.memoizedState,w=P.element,Ow(l,c),Z0(c,_,null,p);var O=c.memoizedState;if(_=O.element,Ee&&P.isDehydrated)if(P={element:_,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},c.updateQueue.baseState=P,c.memoizedState=P,c.flags&256){w=hh(Error(o(423)),c),c=b5(l,c,_,p,w);break e}else if(_!==w){w=hh(Error(o(424)),c),c=b5(l,c,_,p,w);break e}else for(Ee&&(Ir=Fa(c.stateNode.containerInfo),cr=c,Ut=!0,cs=null,wf=!1),p=Fw(c,null,_,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(sh(),_===w){c=No(l,c,p);break e}Ti(l,c,_,p)}c=c.child}return c;case 5:return Hw(c),l===null&&Rv(c),_=c.type,w=c.pendingProps,P=l!==null?l.memoizedProps:null,O=w.children,et(_,w)?O=null:P!==null&&et(_,P)&&(c.flags|=32),x5(l,c),Ti(l,c,O,p),c.child;case 6:return l===null&&Rv(c),null;case 13:return E5(l,c,p);case 4:return jv(c,c.stateNode.containerInfo),_=c.pendingProps,l===null?c.child=oh(c,null,_,p):Ti(l,c,_,p),c.child;case 11:return _=c.type,w=c.pendingProps,w=c.elementType===_?w:us(_,w),m5(l,c,_,w,p);case 7:return Ti(l,c,c.pendingProps,p),c.child;case 8:return Ti(l,c,c.pendingProps.children,p),c.child;case 12:return Ti(l,c,c.pendingProps.children,p),c.child;case 10:e:{if(_=c.type._context,w=c.pendingProps,P=c.memoizedProps,O=w.value,Iw(c,_,O),P!==null)if(ls(P.value,O)){if(P.children===w.children&&!Yt.current){c=No(l,c,p);break e}}else for(P=c.child,P!==null&&(P.return=c);P!==null;){var B=P.dependencies;if(B!==null){O=P.child;for(var $=B.firstContext;$!==null;){if($.context===_){if(P.tag===1){$=Lo(-1,p&-p),$.tag=2;var oe=P.updateQueue;if(oe!==null){oe=oe.shared;var xe=oe.pending;xe===null?$.next=$:($.next=xe.next,xe.next=$),oe.pending=$}}P.lanes|=p,$=P.alternate,$!==null&&($.lanes|=p),Dv(P.return,p,c),B.lanes|=p;break}$=$.next}}else if(P.tag===10)O=P.type===c.type?null:P.child;else if(P.tag===18){if(O=P.return,O===null)throw Error(o(341));O.lanes|=p,B=O.alternate,B!==null&&(B.lanes|=p),Dv(O,p,c),O=P.sibling}else O=P.child;if(O!==null)O.return=P;else for(O=P;O!==null;){if(O===c){O=null;break}if(P=O.sibling,P!==null){P.return=O.return,O=P;break}O=O.return}P=O}Ti(l,c,w.children,p),c=c.child}return c;case 9:return w=c.type,_=c.pendingProps.children,lh(c,p),w=Dr(w),_=_(w),c.flags|=1,Ti(l,c,_,p),c.child;case 14:return _=c.type,w=us(_,c.pendingProps),w=us(_.type,w),y5(l,c,_,w,p);case 15:return v5(l,c,c.type,c.pendingProps,p);case 17:return _=c.type,w=c.pendingProps,w=c.elementType===_?w:us(_,w),lm(l,c),c.tag=1,_n(_)?(l=!0,on(c)):l=!1,lh(c,p),c5(c,_,w),Jv(c,_,w,p),n_(null,c,_,!0,l,p);case 19:return C5(l,c,p);case 22:return _5(l,c,p)}throw Error(o(156,c.tag))};function q5(l,c){return Ev(l,c)}function QP(l,c,p,_){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(l,c,p,_){return new QP(l,c,p,_)}function C_(l){return l=l.prototype,!(!l||!l.isReactComponent)}function JP(l){if(typeof l=="function")return C_(l)?1:0;if(l!=null){if(l=l.$$typeof,l===S)return 11;if(l===E)return 14}return 2}function Va(l,c){var p=l.alternate;return p===null?(p=Hr(l.tag,c,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=c,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&14680064,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,c=l.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p}function Cm(l,c,p,_,w,P){var O=2;if(_=l,typeof l=="function")C_(l)&&(O=1);else if(typeof l=="string")O=5;else e:switch(l){case f:return gc(p.children,w,P,c);case m:O=8,w|=8;break;case g:return l=Hr(12,p,c,w|2),l.elementType=g,l.lanes=P,l;case C:return l=Hr(13,p,c,w),l.elementType=C,l.lanes=P,l;case b:return l=Hr(19,p,c,w),l.elementType=b,l.lanes=P,l;case A:return Pm(p,w,P,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case v:O=10;break e;case y:O=9;break e;case S:O=11;break e;case E:O=14;break e;case x:O=16,_=null;break e}throw Error(o(130,l==null?l:typeof l,""))}return c=Hr(O,p,c,w),c.elementType=l,c.type=_,c.lanes=P,c}function gc(l,c,p,_){return l=Hr(7,l,_,c),l.lanes=p,l}function Pm(l,c,p,_){return l=Hr(22,l,_,c),l.elementType=A,l.lanes=p,l.stateNode={isHidden:!1},l}function P_(l,c,p){return l=Hr(6,l,null,c),l.lanes=p,l}function k_(l,c,p){return c=Hr(4,l.children!==null?l.children:[],l.key,c),c.lanes=p,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function ZP(l,c,p,_,w){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=de,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wv(0),this.expirationTimes=wv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wv(0),this.identifierPrefix=_,this.onRecoverableError=w,Ee&&(this.mutableSourceEagerHydrationData=null)}function Q5(l,c,p,_,w,P,O,B,$){return l=new ZP(l,c,p,B,$),c===1?(c=1,P===!0&&(c|=8)):c=0,P=Hr(3,null,null,c),l.current=P,P.stateNode=l,P.memoizedState={element:_,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},zv(P),l}function J5(l){if(!l)return Bi;l=l._reactInternals;e:{if(z(l)!==l||l.tag!==1)throw Error(o(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(_n(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(o(171))}if(l.tag===1){var p=l.type;if(_n(p))return _v(l,p,c)}return c}function Z5(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(o(188)):(l=Object.keys(l).join(","),Error(o(268,l)));return l=U(c),l===null?null:l.stateNode}function e6(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<c?p:c}}function km(l,c){e6(l,c),(l=l.alternate)&&e6(l,c)}function ek(l){return l=U(l),l===null?null:l.stateNode}function tk(){return null}return t.attemptContinuousHydration=function(l){if(l.tag===13){var c=Xs(l,134217728);if(c!==null){var p=gi();jr(c,l,134217728,p)}km(l,134217728)}},t.attemptDiscreteHydration=function(l){if(l.tag===13){var c=Xs(l,1);if(c!==null){var p=gi();jr(c,l,1,p)}km(l,1)}},t.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var c=Ba(l),p=Xs(l,c);if(p!==null){var _=gi();jr(p,l,c,_)}km(l,c)}},t.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var p=xf(c.pendingLanes);p!==0&&(bv(c,p|1),Wi(c,zn()),!(Qe&6)&&(ph(),Ws()))}break;case 13:B5(function(){var _=Xs(l,1);if(_!==null){var w=gi();jr(_,l,1,w)}}),km(l,1)}},t.batchedUpdates=function(l,c){var p=Qe;Qe|=1;try{return l(c)}finally{Qe=p,Qe===0&&(ph(),V0&&Ws())}},t.createComponentSelector=function(l){return{$$typeof:fm,value:l}},t.createContainer=function(l,c,p,_,w,P,O){return Q5(l,c,!1,null,p,_,w,P,O)},t.createHasPseudoClassSelector=function(l){return{$$typeof:pm,value:l}},t.createHydrationContainer=function(l,c,p,_,w,P,O,B,$){return l=Q5(p,_,!0,l,w,P,O,B,$),l.context=J5(null),p=l.current,_=gi(),w=Ba(p),P=Lo(_,w),P.callback=c??null,ja(p,P,w),l.current.lanes=w,Sf(l,w,_),Wi(l,_),l},t.createPortal=function(l,c,p){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:_==null?null:""+_,children:l,containerInfo:c,implementation:p}},t.createRoleSelector=function(l){return{$$typeof:gm,value:l}},t.createTestNameSelector=function(l){return{$$typeof:mm,value:l}},t.createTextSelector=function(l){return{$$typeof:ym,value:l}},t.deferredUpdates=function(l){var c=gt,p=pn.transition;try{return pn.transition=null,gt=16,l()}finally{gt=c,pn.transition=p}},t.discreteUpdates=function(l,c,p,_,w){var P=gt,O=pn.transition;try{return pn.transition=null,gt=1,l(c,p,_,w)}finally{gt=P,pn.transition=O,Qe===0&&ph()}},t.findAllNodes=g_,t.findBoundingRects=function(l,c){if(!rs)throw Error(o(363));c=g_(l,c),l=[];for(var p=0;p<c.length;p++)l.push(ss(c[p]));for(c=l.length-1;0<c;c--){p=l[c];for(var _=p.x,w=_+p.width,P=p.y,O=P+p.height,B=c-1;0<=B;B--)if(c!==B){var $=l[B],oe=$.x,xe=oe+$.width,je=$.y,fe=je+$.height;if(_>=oe&&P>=je&&w<=xe&&O<=fe){l.splice(c,1);break}else if(_!==oe||p.width!==$.width||fe<P||je>O){if(!(P!==je||p.height!==$.height||xe<_||oe>w)){oe>_&&($.width+=oe-_,$.x=_),xe<w&&($.width=w-oe),l.splice(c,1);break}}else{je>P&&($.height+=je-P,$.y=P),fe<O&&($.height=O-je),l.splice(c,1);break}}}return l},t.findHostInstance=Z5,t.findHostInstanceWithNoPortals=function(l){return l=j(l),l=l!==null?Y(l):null,l===null?null:l.stateNode},t.findHostInstanceWithWarning=function(l){return Z5(l)},t.flushControlled=function(l){var c=Qe;Qe|=1;var p=pn.transition,_=gt;try{pn.transition=null,gt=1,l()}finally{gt=_,pn.transition=p,Qe=c,Qe===0&&(ph(),Ws())}},t.flushPassiveEffects=pc,t.flushSync=B5,t.focusWithin=function(l,c){if(!rs)throw Error(o(363));for(l=d_(l),c=j5(l,c),c=Array.from(c),l=0;l<c.length;){var p=c[l++];if(!Co(p)){if(p.tag===5&&Zu(p.stateNode))return!0;for(p=p.child;p!==null;)c.push(p),p=p.sibling}}return!1},t.getCurrentUpdatePriority=function(){return gt},t.getFindAllNodesFailureDescription=function(l,c){if(!rs)throw Error(o(363));var p=0,_=[];l=[d_(l),0];for(var w=0;w<l.length;){var P=l[w++],O=l[w++],B=c[O];if((P.tag!==5||!Co(P))&&(f_(P,B)&&(_.push(p_(B)),O++,O>p&&(p=O)),O<c.length))for(P=P.child;P!==null;)l.push(P,O),P=P.sibling}if(p<c.length){for(l=[];p<c.length;p++)l.push(p_(c[p]));return`findAllNodes was able to match part of the selector:
  `+(_.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},t.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return ne(l.child.stateNode);default:return l.child.stateNode}},t.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:ek,findFiberByHostInstance:l.findFiberByHostInstance||tk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)l=!0;else{try{U0=c.inject(l),Vs=c}catch{}l=!!c.checkDCE}}return l},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(l,c,p,_){if(!rs)throw Error(o(363));l=g_(l,c);var w=li(l,p,_).disconnect;return{disconnect:function(){w()}}},t.registerMutableSourceForHydration=function(l,c){var p=c._getVersion;p=p(c._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[c,p]:l.mutableSourceEagerHydrationData.push(c,p)},t.runWithPriority=function(l,c){var p=gt;try{return gt=l,c()}finally{gt=p}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(l,c,p,_){var w=c.current,P=gi(),O=Ba(w);return p=J5(p),c.context===null?c.context=p:c.pendingContext=p,c=Lo(P,O),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=ja(w,c,O),l!==null&&(jr(l,w,O,P),J0(l,w,O)),O},t};Z7.exports=Zz;var ej=Z7.exports;const tj=v0(ej);var eP={exports:{}},Ju={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Ju.ConcurrentRoot=1;Ju.ContinuousEventPriority=4;Ju.DefaultEventPriority=16;Ju.DiscreteEventPriority=1;Ju.IdleEventPriority=536870912;Ju.LegacyRoot=0;eP.exports=Ju;var tP=eP.exports;const S8={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let w8=!1,b8=!1;const yw=".react-konva-event",nj=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,ij=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,rj={};function dv(i,e,t=rj){if(!w8&&"zIndex"in e&&(console.warn(ij),w8=!0),!b8&&e.draggable){var n=e.x!==void 0||e.y!==void 0,r=e.onDragEnd||e.onDragMove;n&&!r&&(console.warn(nj),b8=!0)}for(var s in t)if(!S8[s]){var o=s.slice(0,2)==="on",a=t[s]!==e[s];if(o&&a){var u=s.substr(2).toLowerCase();u.substr(0,7)==="content"&&(u="content"+u.substr(7,1).toUpperCase()+u.substr(8)),i.off(u,t[s])}var h=!e.hasOwnProperty(s);h&&i.setAttr(s,void 0)}var f=e._useStrictMode,m={},g=!1;const v={};for(var s in e)if(!S8[s]){var o=s.slice(0,2)==="on",y=t[s]!==e[s];if(o&&y){var u=s.substr(2).toLowerCase();u.substr(0,7)==="content"&&(u="content"+u.substr(7,1).toUpperCase()+u.substr(8)),e[s]&&(v[u]=e[s])}!o&&(e[s]!==t[s]||f&&e[s]!==i.getAttr(s))&&(g=!0,m[s]=e[s])}g&&(i.setAttrs(m),nc(i));for(var u in v)i.on(u+yw,v[u])}function nc(i){if(!Ye.Konva.autoDrawEnabled){var e=i.getLayer()||i.getStage();e&&e.batchDraw()}}const nP={},sj={};ng.Node.prototype._applyProps=dv;function oj(i,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}i.add(e),nc(i)}function aj(i,e,t){let n=ng[i];n||(console.error(`Konva has no node with the type ${i}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${i}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),n=ng.Group);const r={},s={};for(var o in e){var a=o.slice(0,2)==="on";a?s[o]=e[o]:r[o]=e[o]}const u=new n(r);return dv(u,s),u}function lj(i,e,t){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${i}"`)}function cj(i,e,t){return!1}function uj(i){return i}function hj(){return null}function dj(){return null}function fj(i,e,t,n){return sj}function pj(){}function gj(i){}function mj(i,e){return!1}function yj(){return nP}function vj(){return nP}const _j=setTimeout,xj=clearTimeout,Sj=-1;function wj(i,e){return!1}const bj=!1,Ej=!0,Aj=!0;function Cj(i,e){e.parent===i?e.moveToTop():i.add(e),nc(i)}function Pj(i,e){e.parent===i?e.moveToTop():i.add(e),nc(i)}function iP(i,e,t){e._remove(),i.add(e),e.setZIndex(t.getZIndex()),nc(i)}function kj(i,e,t){iP(i,e,t)}function Tj(i,e){e.destroy(),e.off(yw),nc(i)}function Mj(i,e){e.destroy(),e.off(yw),nc(i)}function Rj(i,e,t){console.error(`Text components are not yet supported in ReactKonva. You text is: "${t}"`)}function Lj(i,e,t){}function Nj(i,e,t,n,r){dv(i,r,n)}function Fj(i){i.hide(),nc(i)}function Ij(i){}function Dj(i,e){(e.visible==null||e.visible)&&i.show()}function Oj(i,e){}function zj(i){}function jj(){}const Hj=()=>tP.DefaultEventPriority,Gj=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Cj,appendChildToContainer:Pj,appendInitialChild:oj,cancelTimeout:xj,clearContainer:zj,commitMount:Lj,commitTextUpdate:Rj,commitUpdate:Nj,createInstance:aj,createTextInstance:lj,detachDeletedInstance:jj,finalizeInitialChildren:cj,getChildHostContext:vj,getCurrentEventPriority:Hj,getPublicInstance:uj,getRootHostContext:yj,hideInstance:Fj,hideTextInstance:Ij,idlePriority:Sp.unstable_IdlePriority,insertBefore:iP,insertInContainerBefore:kj,isPrimaryRenderer:bj,noTimeout:Sj,now:Sp.unstable_now,prepareForCommit:hj,preparePortalMount:dj,prepareUpdate:fj,removeChild:Tj,removeChildFromContainer:Mj,resetAfterCommit:pj,resetTextContent:gj,run:Sp.unstable_runWithPriority,scheduleTimeout:_j,shouldDeprioritizeSubtree:mj,shouldSetTextContent:wj,supportsMutation:Aj,unhideInstance:Dj,unhideTextInstance:Oj,warnsIfNotActing:Ej},Symbol.toStringTag,{value:"Module"}));var Bj=Object.defineProperty,Uj=Object.defineProperties,Vj=Object.getOwnPropertyDescriptors,E8=Object.getOwnPropertySymbols,Wj=Object.prototype.hasOwnProperty,Xj=Object.prototype.propertyIsEnumerable,A8=(i,e,t)=>e in i?Bj(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,C8=(i,e)=>{for(var t in e||(e={}))Wj.call(e,t)&&A8(i,t,e[t]);if(E8)for(var t of E8(e))Xj.call(e,t)&&A8(i,t,e[t]);return i},$j=(i,e)=>Uj(i,Vj(e)),P8,k8;typeof window<"u"&&((P8=window.document)!=null&&P8.createElement||((k8=window.navigator)==null?void 0:k8.product)==="ReactNative")?J.useLayoutEffect:J.useEffect;function rP(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=i.child;for(;n;){const r=rP(n,e,t);if(r)return r;n=n.sibling}}function sP(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const T8=console.error;console.error=function(){const i=[...arguments].join("");if(i!=null&&i.startsWith("Warning:")&&i.includes("useContext")){console.error=T8;return}return T8.apply(this,arguments)};const vw=sP(J.createContext(null));class oP extends J.Component{render(){return J.createElement(vw.Provider,{value:this._reactInternals},this.props.children)}}function Yj(){const i=J.useContext(vw);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=J.useId();return J.useMemo(()=>{for(const n of[i,i==null?void 0:i.alternate]){if(!n)continue;const r=rP(n,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[i,e])}function Kj(){const i=Yj(),[e]=J.useState(()=>new Map);e.clear();let t=i;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==vw&&!e.has(r)&&e.set(r,J.useContext(sP(r)))}t=t.return}return e}function qj(){const i=Kj();return J.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>J.createElement(e,null,J.createElement(t.Provider,$j(C8({},n),{value:i.get(t)}))),e=>J.createElement(oP,C8({},e))),[i])}function Qj(i){const e=un.useRef({});return un.useLayoutEffect(()=>{e.current=i}),un.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const Jj=i=>{const e=un.useRef(null),t=un.useRef(null),n=un.useRef(null),r=Qj(i),s=qj(),o=a=>{const{forwardedRef:u}=i;u&&(typeof u=="function"?u(a):u.current=a)};return un.useLayoutEffect(()=>(t.current=new ng.Stage({width:i.width,height:i.height,container:e.current}),o(t.current),n.current=xp.createContainer(t.current,tP.LegacyRoot,!1,null),xp.updateContainer(un.createElement(s,{},i.children),n.current),()=>{ng.isBrowser&&(o(null),xp.updateContainer(null,n.current,null),t.current.destroy())}),[]),un.useLayoutEffect(()=>{o(t.current),dv(t.current,i,r),xp.updateContainer(un.createElement(s,{},i.children),n.current,null)}),un.createElement("div",{ref:e,id:i.id,accessKey:i.accessKey,className:i.className,role:i.role,style:i.style,tabIndex:i.tabIndex,title:i.title})},Zj="Layer",M8="Group",i1="Rect",r1="Circle",Yi="Line",dr="Text",x3="Path",xp=tj(Gj);xp.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:un.version,rendererPackageName:"react-konva"});const eH=un.forwardRef((i,e)=>un.createElement(oP,{},un.createElement(Jj,{...i,forwardedRef:e})));function tH(i,e,t,n){return{x:Math.min(i,t),y:Math.min(e,n),width:Math.abs(t-i),height:Math.abs(n-e)}}const S3=i=>i.includes("atfordulo")||i.includes("indulo")||i.includes("vege");function nH(){const{pdf:i,calibration:e,measurement:t,rooms:n,roomDrawing:r,hoveredRoomId:s,selectedRoomId:o,isSettingConnectionPoint:a,updateCalibrationLineStart:u,updateCalibrationLineEnd:h,setIsDrawingLine:f,startMeasurement:m,updateMeasurement:g,completeMeasurement:v,setMeasurementActive:y,addRoomPoint:S,closeRoomPolygon:C,updateRoomPoints:b,finalizeRoomPoints:E,setConnectionPoint:x,setIsSettingConnectionPoint:A,placingAsset:k,addManualElement:L,manualElements:I,updateManualElement:M,selectedElementIds:z,setSelectedElementIds:D,addToSelection:j,removeFromSelection:U,clearSelection:W,snapEnabled:Y,setIsDragging:K,setDragStartPos:ne,dragStartPos:Z,selectionRect:G,setSelectionRect:ie,selectionMode:ee,setSelectionMode:re,mirrorMode:ae,rotationMode:ge,activeAxisLock:qe,placementRotation:et,showSnapPoints:Te}=dt(),[H,te]=J.useState(null),[de,we]=J.useState(null),[Pe,st]=J.useState(null),[Ee,nt]=J.useState(null),[Me,xt]=J.useState(null),[fn,qn]=J.useState(null),[ic,rs]=J.useState(null),[ar,ss]=J.useState({vertical:null,horizontal:null}),[_f,Co]=J.useState([]),os=J.useRef(null),Zu=dt(Q=>Q.setStageRef);J.useEffect(()=>{os.current&&Zu(os.current)},[os.current,Zu]),J.useEffect(()=>{const Q=n.flatMap(ye=>ye.heatPlates||[]),ct=n.flatMap(ye=>ye.cdProfiles||[]),St=[];Q.forEach(ye=>{const ce=(ye.x1+ye.x2)/2,Re=(ye.y1+ye.y2)/2,Le=ye.x2-ye.x1,ke=ye.y2-ye.y1,De=Le/2,Ie=ke/2;St.push({x:ce-De,y:Re-Ie,type:"plate"}),St.push({x:ce+De,y:Re+Ie,type:"plate"})});const le=i.pxPerMeter?120/1e3*i.pxPerMeter:60,be=St.filter(ye=>ct.some(ce=>{const Re=Math.abs(ce.x2-ce.x1)||ce.width,Le=Math.abs(ce.y2-ce.y1)||ce.width,ke=Math.min(ce.x1,ce.x2),De=Math.min(ce.y1,ce.y2);if(Math.abs(Le)>Math.abs(Re)){const ut=ke+Re/2,ot=Math.abs(ye.x-ut),Pt=De-le,It=De+Le+le,kt=ye.y>=Pt&&ye.y<=It;return ot<=le&&kt}else{const ut=De+Le/2,ot=Math.abs(ye.y-ut),Pt=ke-le,It=ke+Re+le,kt=ye.x>=Pt&&ye.x<=It;return ot<=le&&kt}}));Co(be)},[n,i.pxPerMeter]);const li=i.pageWidth,js=i.pageHeight,as=i.viewScale,rc=Q=>{if(!i.url)return;const ct=os.current;if(!ct)return;const St=ct.getRelativePointerPosition();if(!St)return;const Be={x:St.x,y:St.y};if(e.isCalibrating){e.isDrawingLine||(u(Be),f(!0));return}if(k){const ye=.26458*(i.pxPerMeter?i.pxPerMeter/1e3:1),ce=dt.getState().placementRotation||0,Re={id:`manual-${k.id}-${Date.now()}`,assetId:k.id,position:Be,scaleX:ye,scaleY:ye,rotation:ce,paths:k.paths};L(Re);return}if(a&&o){x(o,Be),A(!1);return}if(r.isActive){if(r.currentPoints.length>=3){const ye=r.currentPoints[0];if(Math.sqrt(Math.pow(Be.x-ye.x,2)+Math.pow(Be.y-ye.y,2))<10){C();return}}S(Be);return}if(t.isActive){t.isDrawing?v(Be):m(Be);return}let le=null,be=null;for(let ye=I.length-1;ye>=0;ye--){const ce=I[ye],Re=mh(ce.assetId);if(!Re)continue;const Le=Re.width||400,ke=1200,De=ce.scaleX||1,Ie=ce.scaleY||1;let ut=ce.position.x,ot=ce.position.x+Le*De,Pt=ce.position.y,It=ce.position.y+ke*Ie;if(ut>ot){const ci=ut;ut=ot,ot=ci}if(Pt>It){const ci=Pt;Pt=It,It=ci}const kt=ce.hitPadding??15;if(ut-=kt,ot+=kt,Pt-=kt,It+=kt,Be.x>=ut&&Be.x<=ot&&Be.y>=Pt&&Be.y<=It){le=ce.id,be=ce;break}}if(le&&be){Q.evt.preventDefault(),Q.evt.shiftKey?z.includes(le)?U(le):j(le):D([le]);const ye=be,ce=mh(le);let Re=[];S3(ye.assetId)||(ye.rotation===90&&(ce!=null&&ce.anchors90)&&ce.anchors90.length>0?Re=ce.anchors90:ce&&ce.anchors&&ce.anchors.length>0&&(Re=ce.anchors));let Le=null,ke=null,De=1/0;const Ie=ye.scaleX||1;Re.length>0&&Re.forEach((Pt,It)=>{const kt=ye.position.x+Pt.x*Ie,ci=Math.abs(Be.x-kt);ci<De&&(De=ci,Le=Pt,ke=It)}),qn(Le),xt(ke);const ut=Be.x-be.position.x,ot=Be.y-be.position.y;nt({x:ut,y:ot}),ne(Be),rs({x:be.position.x,y:be.position.y}),re("drag"),te(le),K(!0)}else Q.evt.preventDefault(),nt(null),ss({vertical:null,horizontal:null}),Q.evt.shiftKey||W(),re("marquee"),st(Be),ie({x:Be.x,y:Be.y,width:0,height:0})},fv=Q=>{if(!i.url)return;const ct=os.current;if(!ct)return;const St=ct.getRelativePointerPosition();if(!St)return;const Be={x:St.x,y:St.y};if(ee==="marquee"&&Pe){const le=tH(Pe.x,Pe.y,Be.x,Be.y);ie(le);return}if(ee==="drag"&&Ee&&z.length>0){const le=z[0],be=I.find(Ie=>Ie.id===le);if(!be){nt(null);return}const ye=qe;if(!ic){rs({x:be.position.x,y:be.position.y});return}if(!Z){ne(Be);return}let ce=Be.x-Z.x,Re=Be.y-Z.y;ye==="x"&&(Re=0),ye==="y"&&(ce=0);let Le=ic.x+ce,ke=ic.y+Re,De=null;if(Y&&!Q.evt.shiftKey&&z.length===1){const Ie=mh(be.assetId);if(!Ie){ss({vertical:null,horizontal:null});return}const ut=be.scaleX||1,ot=be.scaleY||1;let Pt=null;if(S3(be.assetId)){ss({vertical:null,horizontal:null}),M(le,{position:{x:Le,y:ke}});return}if(fn)Pt=fn;else{let We=[];be.rotation===90&&Ie.anchors90&&Ie.anchors90.length>0?We.push(...Ie.anchors90):Ie.anchors&&Ie.anchors.length>0&&We.push(...Ie.anchors),We.length>0&&Me!==null&&Me<We.length?Pt=We[Me]:We.length>0&&(Pt=We[0])}if(!Pt){ss({vertical:null,horizontal:null}),M(le,{position:{x:Le,y:ke}});return}const It=Pt.x*ut,kt=Pt.y*ot,ci=Le+It,Po=ke+kt,Hs=n.flatMap(We=>We.heatPlates||[]),oc=n.flatMap(We=>We.cdProfiles||[]),Ia=i.pxPerMeter?120/1e3*i.pxPerMeter:60,I0=(We,Oa)=>oc.some(Qn=>{const Gi=Math.abs(Qn.x2-Qn.x1)||Qn.width,ui=Math.abs(Qn.y2-Qn.y1)||Qn.width,pt=Math.min(Qn.x1,Qn.x2),ht=Math.min(Qn.y1,Qn.y2);if(Math.abs(ui)>Math.abs(Gi)){const zt=pt+Gi/2,Yt=Math.abs(We-zt),hi=ht-Ia,Lr=ht+ui+Ia,_n=Oa>=hi&&Oa<=Lr;return Yt<=Ia&&_n}else{const zt=ht+ui/2,Yt=Math.abs(Oa-zt),hi=pt-Ia,Lr=pt+Gi+Ia,_n=We>=hi&&We<=Lr;return Yt<=Ia&&_n}}),Rr=25;let Gs=1/0,ko=null,Bs=null,Us=1/0;const yv=Ie.width||400,vv=1200;let D0=Math.abs(be.scaleX)*yv,O0=Math.abs(be.scaleY)*vv,z0=ke,eh=ke+O0,Da=Le,th=Le+D0;be.scaleY<0&&(z0=ke+O0,eh=ke),be.scaleX<0&&(Da=Le+D0,th=Le),Hs.forEach(We=>{const Oa=(We.x1+We.x2)/2,Qn=(We.y1+We.y2)/2,Gi=We.x2-We.x1,ui=We.y2-We.y1,pt=Gi/2,ht=ui/2,Bi=Oa-pt,zt=Qn-ht,Yt=Oa+pt,hi=Qn+ht,Lr=Math.min(We.x1,We.x2)-Math.abs(We.width)/2,_n=Math.max(We.x1,We.x2)+Math.abs(We.width)/2,nh=Math.min(We.y1,We.y2)-Math.abs(We.width)/2,j0=Math.max(We.y1,We.y2)+Math.abs(We.width)/2;if(!(th<Lr||Da>_n||eh<nh||z0>j0)){if(I0(Bi,zt)){const on=Math.abs(ci-Bi),xn=Math.abs(Po-zt);Math.sqrt(on*on+xn*xn)<Rr&&(Math.abs(Gi)>Math.abs(ui)?on<Rr&&on<Gs&&(Gs=on,ko=Bi,xn<Rr&&xn<Us&&(Us=xn,Bs=zt-kt)):xn<Rr&&xn<Us&&(Us=xn,Bs=zt-kt,on<Rr&&on<Gs&&(Gs=on,ko=Bi-It)))}if(I0(Yt,hi)){const on=Math.abs(ci-Yt),xn=Math.abs(Po-hi);Math.sqrt(on*on+xn*xn)<Rr&&(Math.abs(Gi)>Math.abs(ui)?on<Rr&&on<Gs&&(Gs=on,ko=Yt,xn<Rr&&xn<Us&&(Us=xn,Bs=hi-kt)):xn<Rr&&xn<Us&&(Us=xn,Bs=hi-kt,on<Rr&&on<Gs&&(Gs=on,ko=Yt-It)))}}}),ko!==null&&(Le=ko-It,De=ko),Bs!==null&&(ke=Bs),ss({vertical:De,horizontal:Bs!==null?Bs+kt:null})}else ss({vertical:null,horizontal:null});M(le,{position:{x:Le,y:ke}});return}if(t.isActive&&t.isDrawing){g(Be);return}if(e.isCalibrating&&e.isDrawingLine){h(Be);return}},pv=Q=>{if(!i.url)return;const ct=os.current;if(!ct)return;const St=ct.getRelativePointerPosition();if(St){if(e.isCalibrating&&e.isDrawingLine){const Be={x:St.x,y:St.y};h(Be),f(!1);return}if(ee==="marquee"&&G){if(console.log(" MouseUp -> Complete MARQUEE selection"),!(G.width<5&&G.height<5)){const le=[];I.forEach(be=>{const ye=mh(be.assetId);if(!ye)return;const ce=ye.width||400,Re=1200,Le=ce*(be.scaleX||1),ke=Re*(be.scaleY||1),De=Le<0?be.position.x+Le:be.position.x,Ie=ke<0?be.position.y+ke:be.position.y,ut=Math.abs(Le),ot=Math.abs(ke);De<G.x+G.width&&De+ut>G.x&&Ie<G.y+G.height&&Ie+ot>G.y&&le.push(be.id)}),Q.evt.shiftKey?le.forEach(be=>{z.includes(be)||j(be)}):D(le)}ie(null),st(null),re("none");return}if(ee==="drag"){re("none"),K(!1),ne(null),nt(null),te(null),xt(null),qn(null),rs(null),ss({vertical:null,horizontal:null}),we(null);return}}};if(J.useEffect(()=>{const Q=ct=>{ct.key==="Escape"&&t.isActive&&y(!1)};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[t.isActive,y]),!i.url||li===0||js===0)return null;const sc=e.line,gv=sc&&e.isDrawingLine,mv=Q=>{r.isActive&&r.currentPoints.length>=3&&C()},F0=t.isActive||r.isActive?"crosshair":"default";return N.jsx("div",{className:"absolute top-0 left-0 pointer-events-none z-10",style:{width:"100%",height:"100%"},onContextMenu:Q=>Q.preventDefault(),children:N.jsx(eH,{ref:os,width:li*as,height:js*as,scaleX:as,scaleY:as,onMouseDown:rc,onMouseMove:fv,onMouseUp:pv,onDblClick:mv,onContextMenu:Q=>Q.evt.preventDefault(),style:{pointerEvents:"auto",cursor:F0},children:N.jsxs(Zj,{children:[gv&&N.jsx(Yi,{points:[sc.start.x,sc.start.y,sc.end.x,sc.end.y],stroke:"#FF0000",strokeWidth:2,lineCap:"round",dash:[5,5]}),t.currentLine&&t.isDrawing&&i.pxPerMeter&&N.jsxs(N.Fragment,{children:[N.jsx(Yi,{points:[t.currentLine.start.x,t.currentLine.start.y,t.currentLine.end.x,t.currentLine.end.y],stroke:"#FF0000",strokeWidth:2,lineCap:"round",dash:[8,4]}),(()=>{const Q=t.currentLine.end.x-t.currentLine.start.x,ct=t.currentLine.end.y-t.currentLine.start.y,Be=Math.sqrt(Q*Q+ct*ct)/i.pxPerMeter,le=(t.currentLine.start.x+t.currentLine.end.x)/2,be=(t.currentLine.start.y+t.currentLine.end.y)/2;return N.jsxs(N.Fragment,{children:[N.jsx(dr,{x:le,y:be-20,text:`${Be.toFixed(2)} m`,fontSize:16,fill:"#ffffff",padding:8,align:"center",offsetX:0,offsetY:0}),N.jsx(dr,{x:le,y:be-20,text:`${Be.toFixed(2)} m`,fontSize:16,fill:"#FF0000",padding:8,align:"center",offsetX:0,offsetY:0})]})})()]}),t.measurements.map(Q=>{const ct=(Q.start.x+Q.end.x)/2,St=(Q.start.y+Q.end.y)/2;return N.jsxs(un.Fragment,{children:[N.jsx(Yi,{points:[Q.start.x,Q.start.y,Q.end.x,Q.end.y],stroke:"#FF0000",strokeWidth:2,lineCap:"round",dash:[8,4]}),N.jsx(dr,{x:ct,y:St-20,text:`${Q.distanceMeters.toFixed(2)} m`,fontSize:16,fill:"#ffffff",padding:8,align:"center"}),N.jsx(dr,{x:ct,y:St-20,text:`${Q.distanceMeters.toFixed(2)} m`,fontSize:16,fill:"#FF0000",padding:8,align:"center"})]},Q.id)}),n&&Array.isArray(n)&&n.map(Q=>{const ct=s===Q.id,St=o===Q.id,Be=le=>{if(!le.evt.altKey)return;le.cancelBubble=!0;const ye=le.target.getStage().getRelativePointerPosition(),ce=ye.x,Re=ye.y;let Le=0,ke=1/0;for(let Ie=0;Ie<Q.points.length;Ie++){const ut=(Ie+1)%Q.points.length,ot=Q.points[Ie],Pt=Q.points[ut],It=Pt.x-ot.x,kt=Pt.y-ot.y,ci=It*It+kt*kt;if(ci===0)continue;const Po=Math.max(0,Math.min(1,((ce-ot.x)*It+(Re-ot.y)*kt)/ci)),Hs=ot.x+Po*It,oc=ot.y+Po*kt,Fa=Math.sqrt(Math.pow(ce-Hs,2)+Math.pow(Re-oc,2));Fa<ke&&(ke=Fa,Le=ut)}const De=[...Q.points];De.splice(Le,0,{x:ce,y:Re}),b(Q.id,De),E(Q.id)};return N.jsxs(un.Fragment,{children:[N.jsx(Yi,{points:Q.points.flatMap(le=>[le.x,le.y]),stroke:ct?"#3b82f6":"transparent",strokeWidth:ct?3:0,dash:ct?[10,5]:void 0,closed:!0,fill:ct?"rgba(59, 130, 246, 0.05)":"transparent",listening:St,onClick:Be,hitStrokeWidth:20}),Q.cdProfiles&&Array.isArray(Q.cdProfiles)&&Q.cdProfiles.map(le=>N.jsx(Yi,{points:[le.x1,le.y1,le.x2,le.y2],stroke:"#4682B4",strokeWidth:le.width,lineCap:"butt",listening:!1},le.id)),Q.heatPlates&&Array.isArray(Q.heatPlates)&&Q.heatPlates.map(le=>{const be=i.pxPerMeter?.016*i.pxPerMeter:16;return N.jsxs(un.Fragment,{children:[N.jsx(Yi,{points:[le.x1,le.y1,le.x2,le.y2],stroke:"#8B4513",strokeWidth:le.width,lineCap:"butt",opacity:.8,listening:!1}),N.jsx(Yi,{points:[le.x1,le.y1,le.x2,le.y2],stroke:"#32CD32",strokeWidth:be,lineCap:"butt",listening:!1})]},le.id)}),Q.heatingCircuits&&Array.isArray(Q.heatingCircuits)&&Q.heatingCircuits.map(le=>{const be=i.pxPerMeter?.016*i.pxPerMeter:16;if(le.pathData)return N.jsx(x3,{data:le.pathData,stroke:le.color,strokeWidth:be,lineCap:"round",lineJoin:"round",opacity:.9,listening:!1},le.id);if(le.pathPoints&&le.pathPoints.length>0){const ye=le.pathPoints.flatMap(ce=>[ce.x,ce.y]);return N.jsx(Yi,{points:ye,stroke:le.color,strokeWidth:be,lineCap:"round",lineJoin:"round",opacity:.9,listening:!1,tension:.2},le.id)}return null}),Q.pipePatterns&&Array.isArray(Q.pipePatterns)&&Q.pipePatterns.map(le=>N.jsx(M8,{x:le.position.x,y:le.position.y,rotation:le.rotation,scaleX:le.scaleX,scaleY:le.scaleY,listening:!1,children:le.paths.map((be,ye)=>N.jsx(x3,{data:be,fill:"#32CD32",stroke:"none",lineCap:"round",lineJoin:"round",listening:!1},`${le.id}-path-${ye}`))},le.id)),St&&Q.connectionPoint&&N.jsx(r1,{x:Q.connectionPoint.x,y:Q.connectionPoint.y,radius:8,fill:"red",stroke:"white",strokeWidth:2,opacity:.9,listening:!1}),St&&i.pxPerMeter&&Q.points.map((le,be)=>{const ye=(be+1)%Q.points.length,ce=Q.points[be],Re=Q.points[ye],ke=Math.sqrt(Math.pow(Re.x-ce.x,2)+Math.pow(Re.y-ce.y,2))/(i.pxPerMeter||1)*1e3,De=(ce.x+Re.x)/2,Ie=(ce.y+Re.y)/2;return N.jsxs(un.Fragment,{children:[N.jsx(dr,{x:De,y:Ie,text:`${Math.round(ke)} mm`,fontSize:14,fontStyle:"bold",fill:"white",padding:4,align:"center",offsetX:0,offsetY:10,listening:!1}),N.jsx(dr,{x:De,y:Ie,text:`${Math.round(ke)} mm`,fontSize:14,fontStyle:"bold",fill:"black",padding:4,align:"center",offsetX:0,offsetY:10,listening:!1})]},`wall-dim-${Q.id}-${be}`)}),St&&Q.points.map((le,be)=>N.jsx(r1,{x:le.x,y:le.y,radius:8,fill:"rgba(255, 255, 255, 0.01)",stroke:"#333333",strokeWidth:1,hitStrokeWidth:20,draggable:!0,listening:!0,onMouseDown:ye=>{ye.cancelBubble=!0},onDragStart:ye=>{ye.cancelBubble=!0},onDragMove:ye=>{ye.cancelBubble=!0;const ce=ye.target.x(),Re=ye.target.y(),Le=[...Q.points];Le[be]={x:ce,y:Re},b(Q.id,Le)},onDragEnd:ye=>{ye.cancelBubble=!0,E(Q.id)},onMouseEnter:ye=>{var Re;const ce=(Re=ye.target.getStage())==null?void 0:Re.container();ce&&(ce.style.cursor="pointer")},onMouseLeave:ye=>{var Re;const ce=(Re=ye.target.getStage())==null?void 0:Re.container();ce&&(ce.style.cursor=F0)}},`anchor-${Q.id}-${be}`))]},`${Q.id}-${Q.systemType}-${Q.orientation}-${Q.connectionSide}-${Q.cdProfiles.length}-${Q.heatPlates.length}`)}),r.isActive&&r.currentPoints.length>0&&N.jsxs(N.Fragment,{children:[r.currentPoints.length>1&&N.jsx(Yi,{points:r.currentPoints.flatMap(Q=>[Q.x,Q.y]),stroke:"#0000FF",strokeWidth:2,dash:[5,5]}),r.currentPoints.map((Q,ct)=>N.jsxs(un.Fragment,{children:[N.jsx(Yi,{points:[Q.x-5,Q.y,Q.x+5,Q.y],stroke:"#0000FF",strokeWidth:2}),N.jsx(Yi,{points:[Q.x,Q.y-5,Q.x,Q.y+5],stroke:"#0000FF",strokeWidth:2})]},ct)),r.currentPoints.length>=3&&N.jsx(dr,{x:10,y:50,text:"Click first point or double-click to close room",fontSize:14,fill:"#0000FF",padding:5})]}),i.pxPerMeter!==null&&N.jsx(dr,{x:10,y:10,text:`Scale: ${i.pxPerMeter.toFixed(2)} px/m`,fontSize:14,fill:"#333",padding:5}),k&&N.jsx(dr,{x:li/2,y:30,text:`Placing: ${k.name} - Click on canvas to place`,fontSize:16,fill:"#FF6600",padding:8,align:"center",offsetX:200}),de&&N.jsx(Yi,{points:[de.x,0,de.x,js],stroke:"#0066FF",strokeWidth:1,dash:[5,5],opacity:.6,listening:!1}),G&&N.jsx(i1,{x:G.x,y:G.y,width:G.width,height:G.height,fill:"rgba(0, 0, 255, 0.1)",stroke:"#0066FF",strokeWidth:1,dash:[5,5],listening:!1}),ae&&N.jsx(dr,{x:li/2,y:30,text:" Mirror Mode: Press X (horizontal) or Y (vertical) to flip",fontSize:16,fill:"#FF6600",padding:8,align:"center",offsetX:200,listening:!1}),k&&N.jsx(dr,{x:li/2,y:30,text:et===0?" Placement: Vertical (0) - Press H for Horizontal":" Placement: Horizontal (90) - Press V for Vertical",fontSize:14,fill:"#0066FF",padding:6,align:"center",offsetX:200,listening:!1}),ge&&N.jsx(dr,{x:li/2,y:ae||k?60:30,text:" Rotation Mode: Use Arrow Keys (Left/Right) to rotate in 45 steps.",fontSize:16,fill:"#0066FF",padding:8,align:"center",offsetX:200,listening:!1}),qe&&N.jsx(dr,{x:li/2,y:ae?ge?90:60:ge||k?60:30,text:qe==="x"?" Axis Lock: X (Horizontal movement only)":" Axis Lock: Y (Vertical movement only)",fontSize:16,fill:"#FF6600",padding:8,align:"center",offsetX:200,listening:!1}),ar.vertical!==null&&N.jsx(Yi,{points:[ar.vertical,-1e3,ar.vertical,1e4],stroke:"#00FF00",strokeWidth:2,dash:[10,5],listening:!1,perfectDrawEnabled:!1}),ar.horizontal!==null&&N.jsx(Yi,{points:[-1e4,ar.horizontal,1e4,ar.horizontal],stroke:"#00FF00",strokeWidth:2,dash:[10,5],listening:!1,perfectDrawEnabled:!1}),Te&&_f.map((Q,ct)=>N.jsx(r1,{x:Q.x,y:Q.y,radius:4,fill:"#00BFFF",opacity:.6,listening:!1,perfectDrawEnabled:!1},`snap-debug-${ct}`)),I.map(Q=>{const ct=z.includes(Q.id),St=mh(Q.assetId),Be=(St==null?void 0:St.width)||400,le=1200,be=Math.abs(Q.scaleX)*Be,ye=Math.abs(Q.scaleY)*le;return N.jsxs(M8,{x:Q.position.x,y:Q.position.y,rotation:Q.rotation,scaleX:Q.scaleX,scaleY:Q.scaleY,draggable:!1,listening:!0,perfectDrawEnabled:!1,children:[(()=>{const ce=Q.scaleX||1,Re=Q.scaleY||1;let Le=0,ke=Be*ce,De=0,Ie=le*Re;if(Le>ke){const ot=Le;Le=ke,ke=ot}if(De>Ie){const ot=De;De=Ie,Ie=ot}const ut=10;return Le-=ut,ke+=ut,De-=ut,Ie+=ut,N.jsx(i1,{x:Le,y:De,width:ke-Le,height:Ie-De,fill:"rgba(0, 0, 0, 0)",stroke:"none",listening:!0,perfectDrawEnabled:!1})})(),(()=>{const ce=Q.scaleX||1,Re=Q.scaleY||1;let Le=0,ke=Be*ce,De=0,Ie=le*Re;if(Le>ke){const ot=Le;Le=ke,ke=ot}if(De>Ie){const ot=De;De=Ie,Ie=ot}const ut=10;return Le-=ut,ke+=ut,De-=ut,Ie+=ut,N.jsx(i1,{x:Le,y:De,width:ke-Le,height:Ie-De,fill:"rgba(255, 200, 0, 0.3)",stroke:"orange",strokeWidth:1,listening:!1,perfectDrawEnabled:!1})})(),ct&&N.jsx(i1,{x:-5,y:-5,width:be+10,height:ye+10,stroke:"#0066FF",strokeWidth:2,fill:"rgba(0, 100, 255, 0.1)",dash:[5,5],listening:!1,perfectDrawEnabled:!1}),Q.paths.map((ce,Re)=>N.jsx(x3,{data:ce,fill:"#32CD32",stroke:ct?"#0066FF":"none",strokeWidth:ct?1:0,lineCap:"round",lineJoin:"round",listening:!1},`${Q.id}-path-${Re}`)),(()=>{const ce=mh(Q.assetId);if(!ce)return null;const Re=Q.scaleX||1,Le=Q.scaleY||1;let ke=[];return S3(Q.assetId)||(Q.rotation===90&&ce.anchors90&&ce.anchors90.length>0?ke=ce.anchors90:ce.anchors&&ce.anchors.length>0&&(ke=ce.anchors),ke.length===0)?null:N.jsx(N.Fragment,{children:ke.map((De,Ie)=>{const ut=(Q.rotation||0)*Math.PI/180,ot=Math.cos(ut),Pt=Math.sin(ut),It=De.x*ot-De.y*Pt,kt=De.x*Pt+De.y*ot,ci=It*Re,Po=kt*Le,Hs=ci,oc=Po,Fa=H===Q.id&&Me===Ie;return N.jsx(r1,{x:Hs,y:oc,radius:Fa?6:5,fill:Fa?"#00FF00":"#FF0000",stroke:"#FFFFFF",strokeWidth:2,listening:!1,perfectDrawEnabled:!1},`anchor-${Ie}`)})})})()]},Q.id)})]})})})}tw.workerSrc="/Heatworks/pdf.worker.min.mjs";function iH({containerRef:i}){const{pdf:e,setNumPages:t,setPageDimensions:n,setViewScale:r}=dt(),s=J.useRef(null),o=({numPages:m})=>{t(m)},a=m=>{const g=m.getViewport({scale:1}),v=g.width,y=g.height;console.log("PDF Dimensions captured:",{width:v,height:y}),n(v,y)};J.useEffect(()=>{const m=s.current;if(!m)return;const g=v=>{v.preventDefault();const y=.1;let S=e.viewScale;v.deltaY<0?S=Math.min(e.viewScale+y,50):S=Math.max(e.viewScale-y,.1),r(S)};return m.addEventListener("wheel",g,{passive:!1}),()=>{m.removeEventListener("wheel",g)}},[e.viewScale,r]);const u=e.pageWidth>0&&e.pageHeight>0,h=e.pageWidth*e.viewScale,f=e.pageHeight*e.viewScale;return N.jsxs("div",{className:"absolute inset-0 overflow-auto bg-gray-100 z-0",children:[!e.url&&N.jsx("div",{className:"flex items-center justify-center h-full",children:N.jsx("div",{className:"text-gray-400 text-lg",children:"Upload a PDF floor plan to get started"})}),e.url&&N.jsx("div",{className:"flex justify-center items-start p-4",children:N.jsxs("div",{ref:s,className:"relative inline-block",style:{width:u?h:"auto",height:u?f:"auto",minWidth:100,minHeight:100,touchAction:"none"},children:[N.jsx(ZN,{file:e.url,onLoadSuccess:o,loading:N.jsx("div",{className:"flex items-center justify-center p-20",children:N.jsx("div",{className:"text-gray-600",children:"Loading PDF..."})}),error:N.jsx("div",{className:"flex items-center justify-center p-20",children:N.jsx("div",{className:"text-red-600",children:"Error loading PDF"})}),children:N.jsx(uF,{pageNumber:e.currentPage,scale:e.viewScale,onLoadSuccess:a,className:"shadow-lg",renderTextLayer:!1,renderAnnotationLayer:!1})}),u&&N.jsx(nH,{})]})})]})}function rH(){const{setPDFFile:i}=dt(),e=J.useRef(null),t=r=>{var o;const s=(o=r.target.files)==null?void 0:o[0];s&&s.type==="application/pdf"?i(s):alert("Please select a valid PDF file")},n=()=>{var r;(r=e.current)==null||r.click()};return N.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-4 z-10",children:[N.jsx("input",{ref:e,type:"file",accept:"application/pdf",onChange:t,className:"hidden"}),N.jsx("button",{onClick:n,className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition-colors",children:"Upload PDF Floor Plan"})]})}function sH(){const{pdf:i,calibration:e,setIsCalibrating:t,setRealLengthMeters:n,completeCalibration:r}=dt(),[s,o]=J.useState(""),a=()=>{t(!0),o("")},u=()=>{t(!1),o("")},h=g=>{o(g.target.value)},f=()=>{const g=parseFloat(s);if(isNaN(g)||g<=0){alert("Please enter a valid positive number");return}n(g),e.line&&!e.isDrawingLine&&(r(),o(""))},m=()=>{if(!e.line){alert("Please draw a line first");return}if(!e.line.realLengthMeters){alert("Please enter the real length in meters");return}r(),o("")};return i.url?N.jsxs("div",{className:"absolute top-4 left-4 bg-white rounded-lg shadow-lg p-4 z-50 min-w-[300px]",onMouseDown:g=>g.stopPropagation(),onClick:g=>g.stopPropagation(),onMouseMove:g=>g.stopPropagation(),children:[N.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Calibration Tool"}),e.isCalibrating?N.jsxs("div",{className:"space-y-3",children:[N.jsxs("div",{children:[N.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"1. Draw a line on the PDF by clicking two points"}),N.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"2. Enter the real-world length of that line in meters:"}),N.jsxs("div",{className:"flex gap-2",children:[N.jsx("input",{type:"number",step:"0.01",min:"0.01",value:s,onChange:h,placeholder:"e.g., 4.55",className:"flex-1 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),N.jsx("span",{className:"self-center text-sm text-gray-600",children:"m"})]})]}),e.line&&!e.isDrawingLine&&N.jsxs("div",{className:"flex gap-2",children:[N.jsx("button",{onClick:f,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors",children:"Confirm Length"}),N.jsx("button",{onClick:m,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors",disabled:!e.line.realLengthMeters,children:"Complete"})]}),N.jsx("button",{onClick:u,className:"w-full bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400 transition-colors",children:"Cancel"})]}):N.jsxs("div",{children:[N.jsx("button",{onClick:a,className:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors",children:"Start Calibration"}),i.pxPerMeter!==null&&N.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:["Current scale: ",N.jsxs("strong",{children:[i.pxPerMeter.toFixed(2)," px/m"]})]})]})]}):null}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aH=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),R8=i=>{const e=aH(i);return e.charAt(0).toUpperCase()+e.slice(1)},aP=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),lH=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=J.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:s,iconNode:o,...a},u)=>J.createElement("svg",{ref:u,...cH,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:aP("lucide",r),...!s&&!lH(a)&&{"aria-hidden":"true"},...a},[...o.map(([h,f])=>J.createElement(h,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=(i,e)=>{const t=J.forwardRef(({className:n,...r},s)=>J.createElement(uH,{ref:s,iconNode:e,className:aP(`lucide-${oH(R8(i))}`,`lucide-${i}`,n),...r}));return t.displayName=R8(i),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hH=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],lP=Mr("arrow-left-right",hH);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dH=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],cP=Mr("arrow-up-down",dH);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fH=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pH=Mr("chevron-down",fH);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gH=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],mH=Mr("chevron-left",gH);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yH=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vH=Mr("chevron-right",yH);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _H=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],xH=Mr("chevron-up",_H);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SH=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],wH=Mr("file-down",SH);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bH=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],EH=Mr("house",bH);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],CH=Mr("plug",AH);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],kH=Mr("ruler",PH);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TH=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],MH=Mr("settings",TH);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RH=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],uP=Mr("trash-2",RH);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LH=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hP=Mr("x",LH);function NH({isOpen:i,onClose:e}){const{settings:t,updateSettings:n,assetOverrides:r,setAssetOverride:s}=dt(),[o,a]=J.useState(t),[u,h]=J.useState(!1),f=qF();if(!i)return null;const m=()=>{n(o),e()},g=()=>{a(t),e()},v=(y,S)=>{a(C=>({...C,[y]:S}))};return N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:N.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[N.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[N.jsx("h2",{className:"text-xl font-semibold",children:"Belltsok"}),N.jsx("button",{onClick:g,className:"text-gray-500 hover:text-gray-700",children:N.jsx(hP,{size:24})})]}),N.jsxs("div",{className:"p-6 space-y-4",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CD Profil Szlessg (mm)"}),N.jsx("input",{type:"number",value:o.cdProfileWidth,onChange:y=>v("cdProfileWidth",parseFloat(y.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",step:"0.1"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CD Profil Tengelytv (mm)"}),N.jsx("input",{type:"number",value:o.cdProfileSpacing,onChange:y=>v("cdProfileSpacing",parseFloat(y.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",step:"0.1"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Szerelsi Tvolsg Falaktl (mm)"}),N.jsx("input",{type:"number",value:o.wallBuffer,onChange:y=>v("wallBuffer",parseFloat(y.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",step:"0.1"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Raszter Minimum Marg (mm)"}),N.jsx("input",{type:"number",value:o.gridMargin,onChange:y=>v("gridMargin",parseFloat(y.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",step:"0.1"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ftpanel Szlessg (mm)"}),N.jsx("input",{type:"number",value:o.plateWidth,onChange:y=>v("plateWidth",parseFloat(y.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",step:"0.1"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rendszer 4 Hzag (mm)"}),N.jsx("input",{type:"number",value:o.system4Gap,onChange:y=>v("system4Gap",parseFloat(y.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rendszer 6 Hzag (mm)"}),N.jsx("input",{type:"number",value:o.system6Gap,onChange:y=>v("system6Gap",parseFloat(y.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vizulis Eltols (mm)"}),N.jsx("input",{type:"number",value:o.visualOffset,onChange:y=>v("visualOffset",parseFloat(y.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.1"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Indul Cshossz (Szmtshoz) [mm]"}),N.jsx("input",{type:"number",value:o.startPipeLength,onChange:y=>v("startPipeLength",parseFloat(y.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",step:"1"}),N.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ez az rtk csak az anyaglistt befolysolja, a rajzot nem."})]}),N.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[N.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Teljes Kalibrci (Minden Elem)"}),N.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Finomhangolja az sszes SVG minta pozcijt vals idben. Minden rtk mm-ben."}),N.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded",children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Indul (Start) - SVG Strukturlis Belltsok"}),N.jsxs("div",{className:"space-y-3",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"SVG Bels X Padding (mm)"}),N.jsx("input",{type:"number",value:o.calibration.svgInternalPaddingX,onChange:y=>a(S=>({...S,calibration:{...S.calibration,svgInternalPaddingX:parseFloat(y.target.value)||0}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.1",min:"0"}),N.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Kompenzlja az SVG fjlban lv res terletet az X tengelyen"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Hatkony Cs Szlessg (mm)"}),N.jsx("input",{type:"number",value:o.calibration.effectivePipeWidth,onChange:y=>a(S=>({...S,calibration:{...S.calibration,effectivePipeWidth:parseFloat(y.target.value)||0}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.1",min:"0"}),N.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"A tnyleges csvek szlessge tkrzshez (303.85mm)"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Vizulis Cs Hossz (mm)"}),N.jsx("input",{type:"number",value:o.calibration.visualPipeLength,onChange:y=>a(S=>({...S,calibration:{...S.calibration,visualPipeLength:parseFloat(y.target.value)||0}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.1",min:"0"}),N.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Fellrja a logikus hosszsgot rajzolsi clokra (300mm)"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Indul Y Eltols (mm)"}),N.jsx("input",{type:"number",value:o.calibration.induloOffsetY,onChange:y=>a(S=>({...S,calibration:{...S.calibration,induloOffsetY:parseFloat(y.target.value)||0}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.1"})]})]})]}),N.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded",children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"tfordul (Turn)"}),N.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"tfordul X Eltols (mm)"}),N.jsx("input",{type:"number",value:o.calibration.atforduloOffsetX,onChange:y=>a(S=>({...S,calibration:{...S.calibration,atforduloOffsetX:parseFloat(y.target.value)||0}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.1"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"tfordul Y Eltols (mm)"}),N.jsx("input",{type:"number",value:o.calibration.atforduloOffsetY,onChange:y=>a(S=>({...S,calibration:{...S.calibration,atforduloOffsetY:parseFloat(y.target.value)||0}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.1"})]})]})]}),N.jsxs("div",{className:"mb-4 p-3 bg-purple-50 rounded",children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vge (End)"}),N.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Vge X Eltols (mm)"}),N.jsx("input",{type:"number",value:o.calibration.vegeOffsetX,onChange:y=>a(S=>({...S,calibration:{...S.calibration,vegeOffsetX:parseFloat(y.target.value)||0}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.1"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Vge Y Eltols (mm)"}),N.jsx("input",{type:"number",value:o.calibration.vegeOffsetY,onChange:y=>a(S=>({...S,calibration:{...S.calibration,vegeOffsetY:parseFloat(y.target.value)||0}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.1"})]})]})]})]}),N.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[N.jsxs("div",{className:"flex items-center justify-between mb-3",children:[N.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Asset Kalibrci (Mgneses Rgztsi Pontok)"}),N.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[N.jsx("input",{type:"checkbox",checked:u,onChange:y=>h(y.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),N.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Fekv Md (90) Szerkesztse"})]})]}),N.jsx("p",{className:"text-xs text-gray-600 mb-4",children:u?"lltsa be a mgneses rgztsi pontokat 90 elforgats elemekhez. A canvas-on az asset 90-ban jelenik meg.":"lltsa be a mgneses rgztsi pontokat (snapX, snapY) minden asset tpushoz vals idben. A piros pont a canvas-on mutatja a jelenlegi rtket."}),f.map(y=>{var C,b,E,x,A,k,L,I;const S=r[y.id]||{};if(u){const M=S.anchors90||y.anchors90||(y.anchors?[{...y.anchors[0]}]:[{x:100,y:1100}]),z=M[0]||{x:100,y:1100};return N.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded border border-green-200",children:[N.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[y.name," (",y.id,") - 90 Md"]}),y.description&&N.jsx("p",{className:"text-xs text-gray-500 mb-2",children:y.description}),N.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Snap X (90 md)"}),N.jsx("input",{type:"number",value:z.x,onChange:D=>{const j=parseFloat(D.target.value);if(!isNaN(j)){const U=[{...z,x:j},...M.slice(1)];s(y.id,{anchors90:U})}},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"1",min:"0"}),N.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vzszintes rgztsi pont 90 elforgatsnl"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Snap Y (90 md)"}),N.jsx("input",{type:"number",value:z.y,onChange:D=>{const j=parseFloat(D.target.value);if(!isNaN(j)){const U=[{...z,y:j},...M.slice(1)];s(y.id,{anchors90:U})}},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"1"}),N.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Fggleges rgztsi pont 90 elforgatsnl"})]})]})]},y.id)}else{const M=S.snapX!==void 0?S.snapX:((b=(C=y.anchors)==null?void 0:C[0])==null?void 0:b.x)??200,z=S.snapY!==void 0?S.snapY:((x=(E=y.anchors)==null?void 0:E[0])==null?void 0:x.y)??0;return N.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 rounded border border-yellow-200",children:[N.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[y.name," (",y.id,")"]}),y.description&&N.jsx("p",{className:"text-xs text-gray-500 mb-2",children:y.description}),N.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Snap X (Inkscape units)"}),N.jsx("input",{type:"number",value:M,onChange:D=>{const j=parseFloat(D.target.value);isNaN(j)||s(y.id,{snapX:j})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"1",min:"0"}),N.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Vzszintes rgztsi pont (alaprtelmezett: ",((k=(A=y.anchors)==null?void 0:A[0])==null?void 0:k.x)??200,")"]})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Snap Y (Inkscape units)"}),N.jsx("input",{type:"number",value:z,onChange:D=>{const j=parseFloat(D.target.value);isNaN(j)||s(y.id,{snapY:j})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"1"}),N.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Fggleges rgztsi pont (alaprtelmezett: ",((I=(L=y.anchors)==null?void 0:L[0])==null?void 0:I.y)??0,")"]})]})]})]},y.id)}})]})]}),N.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t",children:[N.jsx("button",{onClick:g,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Mgse"}),N.jsx("button",{onClick:m,className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",children:"Ments"})]})]})})}function FH(){const[i,e]=J.useState(!1),{pdf:t,measurement:n,roomDrawing:r,selectedRoomId:s,isSettingConnectionPoint:o,setMeasurementActive:a,clearMeasurements:u,setRoomDrawingActive:h,cancelRoomDrawing:f,setIsSettingConnectionPoint:m,exportToPDF:g,placementRotation:v,setPlacementRotation:y,showSnapPoints:S,toggleSnapPoints:C}=dt(),b=()=>{r.isActive&&f(),a(!n.isActive)},E=()=>{n.isActive&&a(!1),o&&m(!1),h(!r.isActive)},x=()=>{r.isActive&&f(),n.isActive&&a(!1),m(!o)},A=()=>{u()},k=t.pxPerMeter!==null,L=n.measurements.length>0;return t.url?N.jsxs(N.Fragment,{children:[N.jsx(NH,{isOpen:i,onClose:()=>e(!1)}),N.jsxs("div",{className:"absolute bottom-4 right-4 bg-white rounded-lg shadow-lg p-3 z-50 flex flex-col gap-2",children:[N.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Eszkzk"}),N.jsxs("div",{className:"border-b border-gray-200 pb-2 mb-2",children:[N.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Leraksi Irny (Placement Dir)"}),N.jsxs("div",{className:"flex gap-1",children:[N.jsxs("button",{onClick:()=>y(0),className:`flex-1 flex items-center justify-center gap-1 px-2 py-1.5 rounded text-sm transition-colors ${v===0?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,title:"Vertical (0) - Press V",children:[N.jsx(cP,{size:14}),N.jsx("span",{className:"text-xs",children:"V (0)"})]}),N.jsxs("button",{onClick:()=>y(90),className:`flex-1 flex items-center justify-center gap-1 px-2 py-1.5 rounded text-sm transition-colors ${v===90?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,title:"Horizontal (90) - Press H",children:[N.jsx(lP,{size:14}),N.jsx("span",{className:"text-xs",children:"H (90)"})]})]})]}),N.jsxs("button",{onClick:C,className:`flex items-center gap-2 px-4 py-2 rounded transition-colors ${S?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,title:"Mgneses rgztsi pontok megjelentse/elrejtse",children:[N.jsx("span",{className:"text-lg",children:""}),N.jsx("span",{className:"text-sm",children:"Mgnesek"})]}),N.jsxs("button",{onClick:E,disabled:!k,className:`flex items-center gap-2 px-4 py-2 rounded transition-colors ${r.isActive?"bg-green-600 text-white hover:bg-green-700":k?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:k?"Szoba rajzolsa":"Elszr kalibrlja a lptket",children:[N.jsx(EH,{size:18}),N.jsx("span",{className:"text-sm",children:"Szoba Rajzolsa"})]}),N.jsxs("button",{onClick:b,disabled:!k,className:`flex items-center gap-2 px-4 py-2 rounded transition-colors ${n.isActive?"bg-red-600 text-white hover:bg-red-700":k?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:k?"Tvolsg mrse":"Elszr kalibrlja a lptket",children:[N.jsx(kH,{size:18}),N.jsx("span",{className:"text-sm",children:"Mrs"})]}),N.jsxs("button",{onClick:x,disabled:!k||!s,className:`flex items-center gap-2 px-4 py-2 rounded transition-colors ${o?"bg-purple-600 text-white hover:bg-purple-700":k&&s?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:k?s?"Bektsi pont belltsa":"Vlasszon ki egy szobt":"Elszr kalibrlja a lptket",children:[N.jsx(CH,{size:18}),N.jsx("span",{className:"text-sm",children:"Bektsi Pont"})]}),L&&N.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700 transition-colors",title:"sszes mrs trlse",children:[N.jsx(uP,{size:18}),N.jsx("span",{className:"text-sm",children:"Trls"})]}),N.jsx("div",{className:"border-t border-gray-200 my-2"}),N.jsxs("button",{onClick:()=>e(!0),className:"flex items-center gap-2 px-4 py-2 rounded bg-gray-600 text-white hover:bg-gray-700 transition-colors",title:"Belltsok",children:[N.jsx(MH,{size:18}),N.jsx("span",{className:"text-sm",children:"Belltsok"})]}),N.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700 transition-colors font-semibold",title:"Terv exportlsa vektoros PDF formtumba (eredeti PDF + vektoros rajz)",children:[N.jsx(wH,{size:18}),N.jsx("span",{className:"text-sm",children:"DXF Exportls"})]}),r.isActive&&N.jsx("div",{className:"text-xs text-gray-600 mt-1 max-w-[150px]",children:"Kattintson pontokra a szoba rajzolshoz. Dupla kattintssal vagy az els pontra kattintva zrja be."}),n.isActive&&N.jsx("div",{className:"text-xs text-gray-600 mt-1 max-w-[150px]",children:"Kattintson kt pontra a mrshez. ESC-re kilps."}),o&&N.jsx("div",{className:"text-xs text-gray-600 mt-1 max-w-[150px]",children:"Kattintson a vszonra a bektsi pont belltshoz."})]})]}):null}function IH(){const{roomDrawing:i,pdf:e,setPendingRoomProperties:t,finishRoom:n,cancelRoomDrawing:r}=dt(),[s,o]=J.useState(""),[a,u]=J.useState("System 4"),[h,f]=J.useState("Vertical");if(!i.pendingRoom)return null;const m=()=>{if(!s.trim()){alert("Krem adja meg a szoba nevt");return}if(!e.pxPerMeter){alert("Krem elszr kalibrlja a lptket");return}if(t(s,a,h),!i.pendingRoom){console.error("pendingRoom is null after setting properties");return}const{settings:v}=dt.getState(),y=new _p(e.pxPerMeter,v),S=i.pendingRoom,C=y.generateRoomGrid({id:S.id,points:S.points,cdProfiles:S.cdProfiles,heatPlates:S.heatPlates,area:S.area,profileStats:S.profileStats,plateMaterials:S.plateMaterials,connectionSide:"bottom",connectionPoint:S.connectionPoint||null,heatingCircuits:S.heatingCircuits,name:s,systemType:a,orientation:h});t(C.name,C.systemType,C.orientation),dt.setState(b=>({roomDrawing:{...b.roomDrawing,pendingRoom:C}})),n(),o("")},g=()=>{r(),o("")};return N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[100]",children:N.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",onClick:v=>v.stopPropagation(),children:[N.jsxs("div",{className:"flex items-center justify-between mb-4",children:[N.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Szoba Tulajdonsgok"}),N.jsx("button",{onClick:g,className:"text-gray-500 hover:text-gray-700 transition-colors",children:N.jsx(hP,{size:24})})]}),N.jsxs("div",{className:"space-y-4",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Szoba Neve"}),N.jsx("input",{type:"text",value:s,onChange:v=>o(v.target.value),placeholder:"pl. Nappali",className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rendszer Tpus"}),N.jsxs("select",{value:a,onChange:v=>u(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:[N.jsx("option",{value:"System 4",children:"Rendszer 4"}),N.jsx("option",{value:"System 6",children:"Rendszer 6"})]})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fektetsi Irny"}),N.jsxs("div",{className:"flex gap-2",children:[N.jsx("button",{onClick:()=>f("Vertical"),className:`flex-1 px-4 py-2 rounded transition-colors ${h==="Vertical"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Fggleges"}),N.jsx("button",{onClick:()=>f("Horizontal"),className:`flex-1 px-4 py-2 rounded transition-colors ${h==="Horizontal"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Vzszintes"})]})]}),N.jsxs("div",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded",children:[N.jsx("p",{className:"font-medium mb-1",children:"Grid Settings:"}),N.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[N.jsx("li",{children:"Blue CD Profile: 60mm wide (6cm)"}),N.jsx("li",{children:"Brown Heat Plates: 50mm wide (5cm)"}),N.jsx("li",{children:"Profile spacing: 400mm center-to-center"}),N.jsx("li",{children:"Brown plate offset: 31mm from blue axis"}),N.jsx("li",{children:"Wall buffer:  250mm (Turning Zone)"}),N.jsx("li",{children:"Length quantization: 100mm steps"})]})]})]}),N.jsxs("div",{className:"flex gap-3 mt-6",children:[N.jsx("button",{onClick:g,className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors",children:"Mgse"}),N.jsx("button",{onClick:m,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Raszter Generlsa"})]})]})})}function DH({roomId:i}){var S,C,b;const e=dt(E=>E.rooms.find(x=>x.id===i)),t=dt(E=>E.updateRoom),n=dt(E=>E.deleteRoom),r=dt(E=>E.setHoveredRoomId),s=dt(E=>E.selectRoom),o=dt(E=>E.selectedRoomId),[a,u]=J.useState(!1);if(!e)return console.warn(` RoomListItem: Room ${i} not found (deleted?)`),null;console.log(` RoomListItem: Rendering ${i}`,{name:e.name,system:e.systemType,orientation:e.orientation,profiles:((S=e.cdProfiles)==null?void 0:S.length)||0,plates:((C=e.heatPlates)==null?void 0:C.length)||0});const h=E=>{E.stopPropagation();const x=E.target.value;console.log(` CLICKED: System change ${e.systemType}  ${x}`),t(i,{systemType:x}),console.log(" Store action called")},f=E=>{E.stopPropagation();const x=e.orientation==="Vertical"?"Horizontal":"Vertical";console.log(` CLICKED: Orientation toggle ${e.orientation}  ${x}`),t(i,{orientation:x}),console.log(" Store action called")},m=E=>{E.stopPropagation(),console.log(` CLICKED: Delete room ${i}`),n(i)},g=()=>{console.log(` CLICKED: Select room ${i}`),s(i)},v=E=>{E.stopPropagation(),console.log(` CLICKED: Toggle material list (expanded: ${!a})`),u(!a)},y=o===i;return N.jsxs("div",{className:`border rounded-lg p-3 hover:border-blue-400 transition-colors cursor-pointer ${y?"border-blue-600 border-2 bg-blue-50":"border-gray-200"}`,onClick:g,onMouseEnter:()=>r(i),onMouseLeave:()=>r(null),style:{touchAction:"manipulation"},children:[N.jsxs("div",{className:"flex items-center justify-between mb-2",children:[N.jsxs("div",{className:"flex-1",children:[N.jsx("div",{className:"font-semibold text-gray-800",children:e.name}),N.jsxs("div",{className:"text-sm text-gray-500",children:[((b=e.area)==null?void 0:b.toFixed(1))||"0.0"," m"]})]}),N.jsx("button",{onClick:m,className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Helyisg trlse",children:N.jsx(uP,{size:18})})]}),N.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[N.jsxs("div",{className:"flex-1",onClick:E=>E.stopPropagation(),children:[N.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Rendszer"}),N.jsxs("select",{value:e.systemType,onChange:h,onClick:E=>E.stopPropagation(),onFocus:E=>E.stopPropagation(),className:"w-full text-sm px-2 py-1.5 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer",children:[N.jsx("option",{value:"System 4",children:"Rendszer 4"}),N.jsx("option",{value:"System 6",children:"Rendszer 6"})]})]}),N.jsx("button",{onClick:f,className:"p-2 border border-gray-300 rounded hover:bg-gray-50 active:bg-gray-100 transition-colors",title:e.orientation==="Vertical"?"Fggleges (kattints a vltshoz)":"Vzszintes (kattints a vltshoz)",children:e.orientation==="Vertical"?N.jsx(cP,{size:20,className:"text-gray-700"}):N.jsx(lP,{size:20,className:"text-gray-700"})})]}),e.plateMaterials&&e.plateMaterials.length>0&&N.jsxs("div",{className:"border-t border-gray-200 pt-2 mt-2",children:[N.jsxs("button",{onClick:v,className:"w-full flex items-center justify-between text-sm font-medium text-gray-700 hover:text-gray-900 transition-colors",children:[N.jsx("span",{children:"Anyaglista"}),a?N.jsx(xH,{size:16}):N.jsx(pH,{size:16})]}),a&&N.jsxs("div",{className:"mt-2 space-y-1",children:[N.jsx("div",{className:"bg-gray-50 rounded p-2 text-xs space-y-0.5",children:e.plateMaterials.map((E,x)=>N.jsxs("div",{className:"flex justify-between text-gray-700",children:[N.jsxs("span",{className:"font-medium",children:[E.lengthMm," mm"]}),N.jsxs("span",{children:[E.count," db"]})]},x))}),N.jsxs("div",{className:"text-xs text-gray-600 font-medium pt-1 border-t border-gray-200",children:["sszesen: ",e.plateMaterials.reduce((E,x)=>E+x.lengthMm*x.count/1e3,0).toFixed(2)," m"]})]})]})]})}function OH(){const i=dt(n=>n.rooms),[e,t]=J.useState(!0);return J.useEffect(()=>{console.log(" RoomList: Rooms state updated",(i==null?void 0:i.length)||0,"rooms"),i&&i.length>0&&i.forEach(n=>{console.log(`  Room ${n.id}: ${n.name}, System: ${n.systemType}, Orientation: ${n.orientation}`)})},[i]),!i||!Array.isArray(i)||i.length===0?null:N.jsxs(N.Fragment,{children:[N.jsx("button",{onClick:()=>t(!e),className:"fixed top-24 right-4 bg-blue-600 text-white p-2 rounded-lg shadow-lg hover:bg-blue-700 transition-all z-50",title:e?"Sidebar bezrsa":"Sidebar megnyitsa",children:e?N.jsx(vH,{size:20}):N.jsx(mH,{size:20})}),N.jsxs("div",{className:`fixed top-20 right-4 bg-white rounded-lg shadow-xl z-40 max-h-[calc(100vh-120px)] overflow-y-auto transition-all duration-300 ease-in-out ${e?"w-80 p-4 opacity-100":"w-0 p-0 opacity-0 overflow-hidden"}`,style:{transitionProperty:"width, padding, opacity"},children:[N.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-3",children:"Helyisgek"}),N.jsx("div",{className:"space-y-3",children:i.map(n=>N.jsx(DH,{roomId:n.id},n.id))})]})]})}function zH(){const{selectedElementIds:i,setSelectedElementIds:e,selectedRoomId:t,selectRoom:n,deleteRoom:r,removeManualElement:s,setIsSettingConnectionPoint:o,setMeasurementActive:a,measurement:u,copyToClipboard:h,pasteFromClipboard:f,toggleAssetMenu:m,mirrorMode:g,setMirrorMode:v,mirrorSelected:y,rotationMode:S,setRotationMode:C,setElementRotation:b,activeAxisLock:E,setAxisLock:x,placementRotation:A,setPlacementRotation:k}=dt();return J.useEffect(()=>{const L=M=>{var K;const z=(K=document.activeElement)==null?void 0:K.tagName,D=z==="INPUT"||z==="TEXTAREA"||z==="SELECT",j=dt.getState(),U=M.ctrlKey||M.metaKey,W=M.shiftKey,Y=M.key.toLowerCase();if(Y===" "&&!U&&!W){D||(M.preventDefault(),m());return}if(Y==="v"&&!U&&!W){D||(M.preventDefault(),k(0),console.log(" Placement Rotation: Vertical (0)"));return}if(Y==="h"&&!U&&!W){D||(M.preventDefault(),k(90),console.log(" Placement Rotation: Horizontal (90)"));return}if(M.key==="Escape"){D||(M.preventDefault(),j.mirrorMode?v(!1):j.rotationMode?C(!1):(e([]),n(null),o(!1),u.isActive&&a(!1)));return}if((Y==="delete"||Y==="backspace")&&!D){M.preventDefault(),t&&(r(t),n(null)),j.selectedElementIds.length>0&&(j.selectedElementIds.forEach(ne=>{s(ne)}),e([]),console.log(` Deleted ${j.selectedElementIds.length} element(s)`));return}if(Y==="m"&&!U&&!W&&!D){if(M.preventDefault(),j.selectedElementIds.length>0){const ne=!j.mirrorMode;v(ne),console.log(ne?" Mirror Mode: ON - Press X or Y to flip":" Mirror Mode: OFF")}else a(!u.isActive);return}if(Y==="x"&&!U&&!W&&!D){j.mirrorMode&&j.selectedElementIds.length>0&&(M.preventDefault(),y("x"),v(!1),console.log(" Mirrored horizontally (X-axis)"));return}if(Y==="y"&&!U&&!W&&!D){j.mirrorMode&&j.selectedElementIds.length>0&&(M.preventDefault(),y("y"),v(!1),console.log(" Mirrored vertically (Y-axis)"));return}if(Y==="e"&&!U&&!W&&!D){if(M.preventDefault(),j.selectedElementIds.length>0){const ne=!j.rotationMode;C(ne),console.log(ne?" Rotation Mode: ON - Use Arrow Keys to rotate":" Rotation Mode: OFF")}return}if(W&&!U&&!D){if(Y==="x"){M.preventDefault(),x("x"),console.log(" Axis Lock: X (Horizontal movement only)");return}if(Y==="y"){M.preventDefault(),x("y"),console.log(" Axis Lock: Y (Vertical movement only)");return}}if((M.key==="ArrowLeft"||M.key==="ArrowRight")&&!U&&!D){if(j.rotationMode&&j.selectedElementIds.length>0){M.preventDefault();const ne=45,Z=M.key==="ArrowLeft"?-ne:ne;j.selectedElementIds.forEach(G=>{const ie=j.manualElements.find(ee=>ee.id===G);if(ie){const ee=((ie.rotation+Z)%360+360)%360;b(G,ee)}}),console.log(` Rotated ${Z>0?"+":""}${Z}`)}return}if(U&&Y==="c"&&!W&&!D){M.preventDefault(),h();return}if(U&&Y==="v"&&!W&&!D){M.preventDefault(),f();return}},I=M=>{const z=M.key.toLowerCase();(z==="x"||z==="y"||M.key==="Shift")&&dt.getState().activeAxisLock!==null&&x(null)};return window.addEventListener("keydown",L,!0),window.addEventListener("keyup",I,!0),()=>{window.removeEventListener("keydown",L,!0),window.removeEventListener("keyup",I,!0)}},[i,e,t,n,r,s,o,a,u.isActive,h,f,m,g,v,y,S,C,b,E,x,A,k]),null}function jH(){const{isAssetMenuOpen:i,closeAssetMenu:e,setPlacingAsset:t}=dt(),n=J.useRef(null);if(J.useEffect(()=>{if(!i)return;const o=a=>{a.key==="Escape"&&e()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[i,e]),J.useEffect(()=>{if(!i)return;const o=a=>{n.current&&!n.current.contains(a.target)&&e()};return document.addEventListener("mousedown",o,!0),()=>document.removeEventListener("mousedown",o,!0)},[i,e]),!i)return null;const r=o=>{console.log(" Asset selected:",o.id,o.name),t(o),e()},s=o=>"0 0 2200 1200";return N.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:N.jsxs("div",{ref:n,className:"bg-white rounded-lg shadow-2xl p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[N.jsxs("div",{className:"flex items-center justify-between mb-6",children:[N.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Asset Menu"}),N.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-2xl leading-none","aria-label":"Close",children:""})]}),N.jsxs("div",{className:"mb-6",children:[N.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"System 4 Patterns"}),N.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Zp.SYSTEM_4.map(o=>N.jsxs("button",{onClick:()=>r(o),className:"p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors text-left flex flex-col",children:[N.jsx("div",{className:"w-full h-32 mb-3 bg-gray-50 rounded border border-gray-200 flex items-center justify-center overflow-hidden",children:N.jsx("svg",{viewBox:s(o.paths),className:"w-full h-full",preserveAspectRatio:"xMidYMid meet",style:{maxHeight:"128px"},children:o.paths.map((a,u)=>N.jsx("path",{d:a,fill:"#32CD32",stroke:"none",strokeWidth:"0"},u))})}),N.jsx("div",{className:"font-semibold text-gray-800 mb-1",children:o.name}),o.description&&N.jsx("div",{className:"text-sm text-gray-600 mb-2",children:o.description}),N.jsxs("div",{className:"text-xs text-gray-500",children:[o.paths.length," path",o.paths.length!==1?"s":""]})]},o.id))})]}),Zp.SYSTEM_6.length>0&&N.jsxs("div",{className:"mb-6",children:[N.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"System 6 Patterns"}),N.jsx("div",{className:"text-gray-500 text-sm",children:"Coming soon..."})]}),N.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 text-sm text-gray-500",children:["Press ",N.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded",children:"ESC"})," or click outside to close"]})]})})}function _w(i){return new Promise((e,t)=>{i.oncomplete=i.onsuccess=()=>e(i.result),i.onabort=i.onerror=()=>t(i.error)})}function HH(i,e){let t;const n=()=>{if(t)return t;const r=indexedDB.open(i);return r.onupgradeneeded=()=>r.result.createObjectStore(e),t=_w(r),t.then(s=>{s.onclose=()=>t=void 0},()=>{}),t};return(r,s)=>n().then(o=>s(o.transaction(e,r).objectStore(e)))}let w3;function dP(){return w3||(w3=HH("keyval-store","keyval")),w3}function GH(i,e=dP()){return e("readonly",t=>_w(t.get(i)))}function BH(i,e,t=dP()){return t("readwrite",n=>(n.put(e,i),_w(n.transaction)))}const L8="ceiling-heating-designer-state";function UH(){J.useEffect(()=>{(async()=>{try{console.log(" Loading persisted state...");const r=await GH(L8);if(r){if(r.pdfBlob)try{const s=new File([r.pdfBlob],r.pdfFileName||"restored.pdf",{type:"application/pdf"});dt.getState().setPDFFile(s)}catch(s){console.error("Failed to restore PDF:",s)}r.pxPerMeter!==null&&typeof r.pxPerMeter=="number"&&dt.getState().setPxPerMeter(r.pxPerMeter),Array.isArray(r.rooms)&&r.rooms.length>0&&(dt.setState({rooms:r.rooms}),console.log(` Restored ${r.rooms.length} room(s) from IndexedDB`)),console.log(" Restored state from IndexedDB")}else console.log(" No persisted state found, starting fresh")}catch(r){console.error(" Failed to load persisted state:",r),dt.setState({rooms:[]})}finally{dt.getState().setIsLoaded(!0),console.log(" Persistence loaded, saving enabled")}})()},[]);const i=dt(n=>n.pdf),e=dt(n=>n.rooms),t=dt(n=>n.isLoaded);J.useEffect(()=>{if(!t){console.log(" Save blocked: waiting for persistence to load");return}const r=setTimeout(async()=>{var s;try{const o=Array.isArray(e)?e:[];if(!i.file&&i.pxPerMeter===null&&o.length===0){console.log(" No data to save");return}const u={pdfBlob:i.file?await i.file.arrayBuffer().then(h=>new Blob([h],{type:"application/pdf"})):null,pdfFileName:((s=i.file)==null?void 0:s.name)||null,pxPerMeter:i.pxPerMeter,rooms:o};await BH(L8,u),console.log(` State saved to IndexedDB (${o.length} room(s))`)}catch(o){console.error(" Failed to save state:",o)}},500);return()=>clearTimeout(r)},[i.file,i.pxPerMeter,e,t])}function VH(){const i=J.useRef(null),e=dt(t=>t.isLoaded);return UH(),J.useEffect(()=>{const t=n=>{if(n.key==="Escape"){console.log(" ESC PRESSED: Canceling all active states");const r=dt.getState();r.selectedRoomId&&(console.log("   Deselecting room:",r.selectedRoomId),r.selectRoom(null)),r.measurement.isActive&&(console.log("   Canceling measurement mode"),r.setMeasurementActive(!1)),r.roomDrawing.isActive&&(console.log("   Canceling room drawing mode"),r.cancelRoomDrawing()),document.activeElement instanceof HTMLElement&&(console.log("   Blurring active element:",document.activeElement.tagName),document.activeElement.blur()),console.log(" ESC: All active states canceled, returned to view mode")}};return window.addEventListener("keydown",t),console.log(" Global ESC handler attached"),()=>{window.removeEventListener("keydown",t),console.log(" Global ESC handler removed")}},[]),e?N.jsxs("div",{className:"w-screen h-screen flex flex-col overflow-hidden bg-gray-50",children:[N.jsxs("header",{className:"bg-white shadow-sm border-b border-gray-200 px-6 py-4",children:[N.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Ceiling Heating Designer"}),N.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Design ceiling heating systems on architectural floor plans"})]}),N.jsxs("div",{ref:i,className:"flex-1 relative overflow-hidden",children:[N.jsx(iH,{containerRef:i}),N.jsx(rH,{}),N.jsx(sH,{}),N.jsx(FH,{}),N.jsx(OH,{})]}),N.jsx(IH,{}),N.jsx(jH,{}),N.jsx(zH,{})]}):N.jsx("div",{className:"w-screen h-screen flex items-center justify-center bg-gray-50",children:N.jsxs("div",{className:"text-center",children:[N.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),N.jsx("p",{className:"text-xl font-semibold text-gray-700",children:"Betlts..."}),N.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Loading application state"})]})})}E3.createRoot(document.getElementById("root")).render(N.jsx(un.StrictMode,{children:N.jsx(VH,{})}));export{v0 as g};
